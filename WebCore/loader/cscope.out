cscope 15 /data/WebKit-r57509_back/WebKit-r57509/WebCore/loader               0000750190
	@Cache.cpp

23 
	~"cÚfig.h
"

24 
	~"Cache.h
"

26 
	~"CachedCSSStyËSh“t.h
"

27 
	~"CachedFÚt.h
"

28 
	~"CachedImage.h
"

29 
	~"CachedSüt.h
"

30 
	~"CachedXSLStyËSh“t.h
"

31 
	~"DocLßd”.h
"

32 
	~"Docum’t.h
"

33 
	~"F¿meLßd”.h
"

34 
	~"F¿meLßd”Ty³s.h
"

35 
	~"F¿meV›w.h
"

36 
	~"Image.h
"

37 
	~"ResourûHªdË.h
"

38 
	~"Secur™yOrigš.h
"

39 
	~<¡dio.h
>

40 
	~<wtf/Cu¼’tTime.h
>

42 
usšg
 
Çme¥aû
 
	g¡d
;

44 
Çme¥aû
 
	gWebCÜe
 {

46 cÚ¡ 
	gcDeçuÉCacheC­ac™y
 = 8192 * 1024;

47 cÚ¡ 
	gcMšD–ayBefÜeLiveDecodedPruÃ
 = 1;

48 cÚ¡ 
	gcT¬g‘PruÃP”ûÁage
 = .95f;

49 cÚ¡ 
	gcDeçuÉDecodedD©aD–‘iÚIÁ”v®
 = 0;

51 
Cache
* 
ÿche
()

53 
Cache
* 
	g¡©icCache
 = 
Ãw
 Cache;

54  
	g¡©icCache
;

57 
	gCache
::
Cache
()

58 : 
m_di§bËd
(
çl£
)

59 , 
m_´uÃEÇbËd
(
Œue
)

60 , 
m_šPruÃD—dResourûs
(
çl£
)

61 , 
m_ÿ·c™y
(
cDeçuÉCacheC­ac™y
)

62 , 
m_mšD—dC­ac™y
(0)

63 , 
m_maxD—dC­ac™y
(
cDeçuÉCacheC­ac™y
)

64 , 
m_d—dDecodedD©aD–‘iÚIÁ”v®
(
cDeçuÉDecodedD©aD–‘iÚIÁ”v®
)

65 , 
m_liveSize
(0)

66 , 
m_d—dSize
(0)

70 
CachedResourû
* 
ü—‹Resourû
(CachedResourû::
Ty³
 
ty³
, cÚ¡ 
KURL
& 
u¾
, cÚ¡ 
SŒšg
& 
ch¬£t
)

72 
	gty³
) {

73 
	gCachedResourû
::
ImageResourû
:

74  
Ãw
 
CachedImage
(
u¾
.
¡ršg
());

75 
	gCachedResourû
::
CSSStyËSh“t
:

76  
Ãw
 
CachedCSSStyËSh“t
(
u¾
.
¡ršg
(), 
ch¬£t
);

77 
	gCachedResourû
::
Süt
:

78  
Ãw
 
CachedSüt
(
u¾
.
¡ršg
(), 
ch¬£t
);

79 
	gCachedResourû
::
FÚtResourû
:

80  
Ãw
 
CachedFÚt
(
u¾
.
¡ršg
());

81 #ià
ENABLE
(
XSLT
)

82 
	gCachedResourû
::
XSLStyËSh“t
:

83  
Ãw
 
CachedXSLStyËSh“t
(
u¾
.
¡ršg
());

85 #ià
ENABLE
(
XBL
)

86 
	gCachedResourû
::
XBLStyËSh“t
:

87  
Ãw
 
CachedXBLDocum’t
(
u¾
.
¡ršg
());

96 
CachedResourû
* 
	gCache
::
»que¡Resourû
(
DocLßd”
* 
docLßd”
, CachedResourû::
Ty³
 
ty³
, cÚ¡ 
KURL
& 
u¾
, cÚ¡ 
SŒšg
& 
ch¬£t
, 
boŞ
 
»que¡IsP»lßd
)

100 ià(
	gu¾
.
isEm±y
())

104 
CachedResourû
* 
	g»sourû
 = 
»sourûFÜURL
(
u¾
.
¡ršg
());

106 ià(
	g»sourû
 && 
	g»que¡IsP»lßd
 && !»sourû->
isP»lßded
())

109 ià(
	gSecur™yOrigš
::
»¡riùAcûssToLoÿl
(è&& !
Secur™yOrigš
::
ÿnLßd
(
u¾
, 
SŒšg
(), 
docLßd”
->
doc
())) {

110 
Docum’t
* 
	gdoc
 = 
docLßd”
->
doc
();

111 ià(
	gdoc
 && !
	g»que¡IsP»lßd
)

112 
	gF¿meLßd”
::
»pÜtLoÿlLßdFaed
(
doc
->
äame
(), 
u¾
.
¡ršg
());

116 ià(!
	g»sourû
) {

118 
	g»sourû
 = 
ü—‹Resourû
(
ty³
, 
u¾
, 
ch¬£t
);

119 
ASSERT
(
»sourû
);

123 
	g»sourû
->
£tInCache
(
Œue
);

125 
	g»sourû
->
lßd
(
docLßd”
);

127 ià(
	g»sourû
->
”rÜOccu¼ed
()) {

131 
	g»sourû
->
£tInCache
(
çl£
);

132 
d–‘e
 
	g»sourû
;

136 ià(!
di§bËd
())

137 
	gm_»sourûs
.
£t
(
u¾
.
¡ršg
(), 
»sourû
);

140 
	g»sourû
->
£tInCache
(
çl£
);

141 
	g»sourû
->
£tDocLßd”
(
docLßd”
);

145 ià(
	g»sourû
->
ty³
() !=ype)

148 ià(!
di§bËd
()) {

150 
»sourûAcûs£d
(
»sourû
);

153  
	g»sourû
;

156 
CachedCSSStyËSh“t
* 
	gCache
::
»que¡U£rCSSStyËSh“t
(
DocLßd”
* 
docLßd”
, cÚ¡ 
SŒšg
& 
u¾
, cÚ¡ SŒšg& 
ch¬£t
)

158 
CachedCSSStyËSh“t
* 
	gu£rSh“t
;

159 ià(
CachedResourû
* 
	gexi¡šg
 = 
»sourûFÜURL
(
u¾
)) {

160 ià(
exi¡šg
->
ty³
(è!ğ
CachedResourû
::
CSSStyËSh“t
)

162 
	gu£rSh“t
 = 
¡©ic_ÿ¡
<
CachedCSSStyËSh“t
*>(
exi¡šg
);

164 
	gu£rSh“t
 = 
Ãw
 
CachedCSSStyËSh“t
(
u¾
, 
ch¬£t
);

168 
	gu£rSh“t
->
£tInCache
(
Œue
);

170 
	gu£rSh“t
->
lßd
(
docLßd”
, 
çl£
, 
SkSecur™yCheck
, false);

171 ià(!
di§bËd
())

172 
	gm_»sourûs
.
£t
(
u¾
, 
u£rSh“t
);

174 
	gu£rSh“t
->
£tInCache
(
çl£
);

177 ià(!
di§bËd
()) {

179 
»sourûAcûs£d
(
u£rSh“t
);

182  
	gu£rSh“t
;

185 
	gCache
::
»v®id©eResourû
(
CachedResourû
* 
»sourû
, 
DocLßd”
* 
docLßd”
)

187 
ASSERT
(
»sourû
);

188 
ASSERT
(
»sourû
->
šCache
());

189 
ASSERT
(
»sourû
 =ğ
m_»sourûs
.
g‘
Ôesourû->
u¾
()));

190 
ASSERT
(!
di§bËd
());

191 ià(
	g»sourû
->
»sourûToRev®id©e
())

193 ià(!
	g»sourû
->
ÿnU£CacheV®id©Ü
()) {

194 
eviù
(
»sourû
);

197 cÚ¡ 
	gSŒšg
& 
	gu¾
 = 
»sourû
->
u¾
();

198 
CachedResourû
* 
	gÃwResourû
 = 
ü—‹Resourû
(
»sourû
->
ty³
(), 
KURL
(
P¬£dURLSŒšg
, 
u¾
),„esourû->
’codšg
());

199 
	gÃwResourû
->
£tResourûToRev®id©e
(
»sourû
);

200 
eviù
(
»sourû
);

201 
	gm_»sourûs
.
£t
(
u¾
, 
ÃwResourû
);

202 
	gÃwResourû
->
£tInCache
(
Œue
);

203 
»sourûAcûs£d
(
ÃwResourû
);

204 
	gÃwResourû
->
lßd
(
docLßd”
);

207 
	gCache
::
»v®id©iÚSucûeded
(
CachedResourû
* 
»v®id©šgResourû
, cÚ¡ 
ResourûRe¥Ú£
& 
»¥Ú£
)

209 
CachedResourû
* 
	g»sourû
 = 
»v®id©šgResourû
->
»sourûToRev®id©e
();

210 
ASSERT
(
»sourû
);

211 
ASSERT
(!
»sourû
->
šCache
());

212 
ASSERT
(
»sourû
->
isLßded
());

213 
ASSERT
(
»v®id©šgResourû
->
šCache
());

215 
eviù
(
»v®id©šgResourû
);

217 
ASSERT
(!
m_»sourûs
.
g‘
(
»sourû
->
u¾
()));

218 
	gm_»sourûs
.
£t
(
»sourû
->
u¾
(),„esource);

219 
	g»sourû
->
£tInCache
(
Œue
);

220 
	g»sourû
->
upd©eRe¥Ú£Aá”Rev®id©iÚ
(
»¥Ú£
);

221 
š£¹InLRULi¡
(
»sourû
);

222 
	gd–
 = 
»sourû
->
size
();

223 ià(
	g»sourû
->
decodedSize
(è&&„esourû->
hasCl›Ás
())

224 
š£¹InLiveDecodedResourûsLi¡
(
»sourû
);

225 ià(
	gd–
)

226 
adju¡Size
(
»sourû
->
hasCl›Ás
(), 
d–
);

228 
	g»v®id©šgResourû
->
sw™chCl›ÁsToRev®id©edResourû
();

230 
	g»v®id©šgResourû
->
ş—rResourûToRev®id©e
();

233 
	gCache
::
»v®id©iÚFaed
(
CachedResourû
* 
»v®id©šgResourû
)

235 
ASSERT
(
»v®id©šgResourû
->
»sourûToRev®id©e
());

236 
	g»v®id©šgResourû
->
ş—rResourûToRev®id©e
();

239 
CachedResourû
* 
	gCache
::
»sourûFÜURL
(cÚ¡ 
SŒšg
& 
u¾
)

241 
CachedResourû
* 
»sourû
 = 
m_»sourûs
.
g‘
(
u¾
);

242 ià(
	g»sourû
 && !»sourû->
makePurg—bË
(
çl£
)) {

243 
ASSERT
(!
»sourû
->
hasCl›Ás
());

244 
eviù
(
»sourû
);

247  
	g»sourû
;

250 
	gCache
::
d—dC­ac™y
() const

253 
ÿ·c™y
 = 
m_ÿ·c™y
 - 
mš
(
m_liveSize
, m_capacity);

254 
	gÿ·c™y
 = 
max
(
ÿ·c™y
, 
m_mšD—dC­ac™y
);

255 
	gÿ·c™y
 = 
mš
(
ÿ·c™y
, 
m_maxD—dC­ac™y
);

256  
	gÿ·c™y
;

259 
	gCache
::
liveC­ac™y
() const

262  
m_ÿ·c™y
 - 
d—dC­ac™y
();

265 
	gCache
::
´uÃLiveResourûs
()

267 ià(!
m_´uÃEÇbËd
)

270 
	gÿ·c™y
 = 
liveC­ac™y
();

271 ià(
	gÿ·c™y
 && 
	gm_liveSize
 <ğ
ÿ·c™y
)

274 
	grg‘Size
 = 
¡©ic_ÿ¡
<>(
ÿ·c™y
 * 
cT¬g‘PruÃP”ûÁage
);

275 
	gcu¼’tTime
 = 
F¿meV›w
::
cu¼’tPaštTimeSmp
();

276 ià(!
	gcu¼’tTime
)

277 
	gcu¼’tTime
 = 
WTF
::
cu¼’tTime
();

287 
CachedResourû
* 
	gcu¼’t
 = 
m_liveDecodedResourûs
.
m_
;

288 
	gcu¼’t
) {

289 
CachedResourû
* 
	g´ev
 = 
cu¼’t
->
m_´evInLiveResourûsLi¡
;

290 
ASSERT
(
cu¼’t
->
hasCl›Ás
());

291 ià(
	gcu¼’t
->
isLßded
(è&& cu¼’t->
decodedSize
()) {

293 
	g–­£dTime
 = 
cu¼’tTime
 - 
cu¼’t
->
m_Ï¡DecodedAcûssTime
;

294 ià(
	g–­£dTime
 < 
	gcMšD–ayBefÜeLiveDecodedPruÃ
)

300 
	gcu¼’t
->
de¡royDecodedD©a
();

302 ià(
	grg‘Size
 && 
	gm_liveSize
 <ğ
rg‘Size
)

305 
	gcu¼’t
 = 
´ev
;

309 
	gCache
::
´uÃD—dResourûs
()

311 ià(!
m_´uÃEÇbËd
)

314 
	gÿ·c™y
 = 
d—dC­ac™y
();

315 ià(
	gÿ·c™y
 && 
	gm_d—dSize
 <ğ
ÿ·c™y
)

318 
	grg‘Size
 = 
¡©ic_ÿ¡
<>(
ÿ·c™y
 * 
cT¬g‘PruÃP”ûÁage
);

319 
	gsize
 = 
m_®lResourûs
.
size
();

321 ià(!
	gm_šPruÃD—dResourûs
) {

323 
	gi
 = 0; i < 
	gsize
; i++) {

324 
CachedResourû
* 
	gcu¼’t
 = 
m_®lResourûs
[
i
].
m_
;

325 
	gcu¼’t
) {

326 
CachedResourû
* 
	g´ev
 = 
cu¼’t
->
m_´evInAÎResourûsLi¡
;

327 ià(
	gcu¼’t
->
wasPurged
()) {

328 
ASSERT
(!
cu¼’t
->
hasCl›Ás
());

329 
ASSERT
(!
cu¼’t
->
isP»lßded
());

330 
eviù
(
cu¼’t
);

332 
	gcu¼’t
 = 
´ev
;

335 ià(
	grg‘Size
 && 
	gm_d—dSize
 <ğ
rg‘Size
)

339 
boŞ
 
	gÿnShrškLRULi¡s
 = 
Œue
;

340 
	gm_šPruÃD—dResourûs
 = 
Œue
;

341 
	gi
 = 
size
 - 1; i >= 0; i--) {

343 
CachedResourû
* 
	gcu¼’t
 = 
m_®lResourûs
[
i
].
m_
;

346 
	gcu¼’t
) {

347 
CachedResourû
* 
	g´ev
 = 
cu¼’t
->
m_´evInAÎResourûsLi¡
;

348 ià(!
	gcu¼’t
->
hasCl›Ás
(è&& !cu¼’t->
isP»lßded
(è&& cu¼’t->
isLßded
()) {

352 
	gcu¼’t
->
de¡royDecodedD©a
();

354 ià(
	grg‘Size
 && 
	gm_d—dSize
 <ğ
rg‘Size
) {

355 
m_šPruÃD—dResourûs
 = 
çl£
;

359 
	gcu¼’t
 = 
´ev
;

363 
	gcu¼’t
 = 
m_®lResourûs
[
i
].
m_
;

364 
	gcu¼’t
) {

365 
CachedResourû
* 
	g´ev
 = 
cu¼’t
->
m_´evInAÎResourûsLi¡
;

366 ià(!
	gcu¼’t
->
hasCl›Ás
(è&& !cu¼’t->
isP»lßded
(è&& !cu¼’t->
isCacheV®id©Ü
()) {

367 
eviù
(
cu¼’t
);

370 ià(!
	gm_šPruÃD—dResourûs
)

373 ià(
	grg‘Size
 && 
	gm_d—dSize
 <ğ
rg‘Size
) {

374 
m_šPruÃD—dResourûs
 = 
çl£
;

378 
	gcu¼’t
 = 
´ev
;

383 ià(
	gm_®lResourûs
[
i
].
	gm_h—d
)

384 
	gÿnShrškLRULi¡s
 = 
çl£
;

385 ià(
	gÿnShrškLRULi¡s
)

386 
	gm_®lResourûs
.
»size
(
i
);

388 
	gm_šPruÃD—dResourûs
 = 
çl£
;

391 
	gCache
::
£tC­ac™›s
(
mšD—dBy‹s
, 
maxD—dBy‹s
, 
tÙ®By‹s
)

393 
ASSERT
(
mšD—dBy‹s
 <ğ
maxD—dBy‹s
);

394 
ASSERT
(
maxD—dBy‹s
 <ğ
tÙ®By‹s
);

395 
	gm_mšD—dC­ac™y
 = 
mšD—dBy‹s
;

396 
	gm_maxD—dC­ac™y
 = 
maxD—dBy‹s
;

397 
	gm_ÿ·c™y
 = 
tÙ®By‹s
;

398 
´uÃ
();

401 
	gCache
::
eviù
(
CachedResourû
* 
»sourû
)

405 ià(
»sourû
->
šCache
()) {

407 
m_»sourûs
.
»move
(
»sourû
->
u¾
());

408 
	g»sourû
->
£tInCache
(
çl£
);

411 
»moveFromLRULi¡
(
»sourû
);

412 
»moveFromLiveDecodedResourûsLi¡
(
»sourû
);

415 
	gd–
 = -
¡©ic_ÿ¡
<>(
»sourû
->
size
());

416 ià(
	gd–
)

417 
adju¡Size
(
»sourû
->
hasCl›Ás
(), 
d–
);

419 
ASSERT
(
m_»sourûs
.
g‘
(
»sourû
->
u¾
()) !=„esource);

421 ià(
	g»sourû
->
ÿnD–‘e
())

422 
d–‘e
 
	g»sourû
;

425 
	gCache
::
addDocLßd”
(
DocLßd”
* 
docLßd”
)

427 
m_docLßd”s
.
add
(
docLßd”
);

430 
	gCache
::
»moveDocLßd”
(
DocLßd”
* 
docLßd”
)

432 
m_docLßd”s
.
»move
(
docLßd”
);

435 
šlše
 
ç¡Log2
(
i
)

437 
	glog2
 = 0;

438 ià(
	gi
 & (i - 1))

439 
	glog2
 += 1;

440 ià(
	gi
 >> 16)

441 
	glog2
 +ğ16, 
	gi
 >>= 16;

442 ià(
	gi
 >> 8)

443 
	glog2
 +ğ8, 
	gi
 >>= 8;

444 ià(
	gi
 >> 4)

445 
	glog2
 +ğ4, 
	gi
 >>= 4;

446 ià(
	gi
 >> 2)

447 
	glog2
 +ğ2, 
	gi
 >>= 2;

448 ià(
	gi
 >> 1)

449 
	glog2
 += 1;

450  
	glog2
;

453 
	gCache
::
LRULi¡
* 
Cache
::
ÌuLi¡FÜ
(
CachedResourû
* 
»sourû
)

455 
acûssCouÁ
 = 
max
(
»sourû
->accessCount(), 1U);

456 
	gqueueIndex
 = 
ç¡Log2
(
»sourû
->
size
(è/ 
acûssCouÁ
);

457 #iâdeà
NDEBUG


458 
	g»sourû
->
	gm_ÌuIndex
 = 
queueIndex
;

460 ià(
	gm_®lResourûs
.
size
(è<ğ
queueIndex
)

461 
m_®lResourûs
.
grow
(
queueIndex
 + 1);

462  &
	gm_®lResourûs
[
queueIndex
];

465 
	gCache
::
»moveFromLRULi¡
(
CachedResourû
* 
»sourû
)

468 ià(
»sourû
->
acûssCouÁ
() == 0)

471 #ià!
ASSERT_DISABLED


472 
	gŞdLi¡Index
 = 
»sourû
->
m_ÌuIndex
;

475 
LRULi¡
* 
	gli¡
 = 
ÌuLi¡FÜ
(
»sourû
);

477 #ià!
ASSERT_DISABLED


479 
ASSERT
(
»sourû
->
m_ÌuIndex
 =ğ
ŞdLi¡Index
);

482 
boŞ
 
	gfound
 = 
çl£
;

483 
CachedResourû
* 
	gcu¼’t
 = 
li¡
->
m_h—d
; cu¼’t; cu¼’ˆğ
cu¼’t
->
m_ÃxtInAÎResourûsLi¡
) {

484 ià(
cu¼’t
 =ğ
»sourû
) {

485 
found
 = 
Œue
;

489 
ASSERT
(
found
);

492 
CachedResourû
* 
	gÃxt
 = 
»sourû
->
m_ÃxtInAÎResourûsLi¡
;

493 
CachedResourû
* 
	g´ev
 = 
»sourû
->
m_´evInAÎResourûsLi¡
;

495 ià(
	gÃxt
 =ğ0 && 
´ev
 =ğ0 && 
li¡
->
m_h—d
 !ğ
»sourû
)

498 
	g»sourû
->
	gm_ÃxtInAÎResourûsLi¡
 = 0;

499 
	g»sourû
->
	gm_´evInAÎResourûsLi¡
 = 0;

501 ià(
	gÃxt
)

502 
	gÃxt
->
	gm_´evInAÎResourûsLi¡
 = 
´ev
;

503 ià(
	gli¡
->
	gm_
 =ğ
»sourû
)

504 
li¡
->
m_
 = 
´ev
;

506 ià(
	g´ev
)

507 
	g´ev
->
	gm_ÃxtInAÎResourûsLi¡
 = 
Ãxt
;

508 ià(
	gli¡
->
	gm_h—d
 =ğ
»sourû
)

509 
li¡
->
m_h—d
 = 
Ãxt
;

512 
	gCache
::
š£¹InLRULi¡
(
CachedResourû
* 
»sourû
)

515 
ASSERT
(!
»sourû
->
m_ÃxtInAÎResourûsLi¡
 && !»sourû->
m_´evInAÎResourûsLi¡
);

516 
ASSERT
(
»sourû
->
šCache
());

517 
ASSERT
(
»sourû
->
acûssCouÁ
() > 0);

519 
LRULi¡
* 
	gli¡
 = 
ÌuLi¡FÜ
(
»sourû
);

521 
	g»sourû
->
	gm_ÃxtInAÎResourûsLi¡
 = 
li¡
->
m_h—d
;

522 ià(
	gli¡
->
	gm_h—d
)

523 
	gli¡
->
	gm_h—d
->
	gm_´evInAÎResourûsLi¡
 = 
»sourû
;

524 
	gli¡
->
	gm_h—d
 = 
»sourû
;

526 ià(!
	g»sourû
->
	gm_ÃxtInAÎResourûsLi¡
)

527 
	gli¡
->
	gm_
 = 
»sourû
;

529 #iâdeà
NDEBUG


531 
	gli¡
 = 
ÌuLi¡FÜ
(
»sourû
);

532 
boŞ
 
	gfound
 = 
çl£
;

533 
CachedResourû
* 
	gcu¼’t
 = 
li¡
->
m_h—d
; cu¼’t; cu¼’ˆğ
cu¼’t
->
m_ÃxtInAÎResourûsLi¡
) {

534 ià(
cu¼’t
 =ğ
»sourû
) {

535 
found
 = 
Œue
;

539 
ASSERT
(
found
);

544 
	gCache
::
»sourûAcûs£d
(
CachedResourû
* 
»sourû
)

546 
ASSERT
(
»sourû
->
šCache
());

550 
»moveFromLRULi¡
(
»sourû
);

553 ià(!
	g»sourû
->
acûssCouÁ
())

554 
adju¡Size
(
»sourû
->
hasCl›Ás
(),„esourû->
size
());

557 
	g»sourû
->
šü—£AcûssCouÁ
();

560 
š£¹InLRULi¡
(
»sourû
);

563 
	gCache
::
»moveFromLiveDecodedResourûsLi¡
(
CachedResourû
* 
»sourû
)

566 ià(!
»sourû
->
m_šLiveDecodedResourûsLi¡
)

568 
	g»sourû
->
	gm_šLiveDecodedResourûsLi¡
 = 
çl£
;

570 #iâdeà
NDEBUG


572 
boŞ
 
	gfound
 = 
çl£
;

573 
CachedResourû
* 
	gcu¼’t
 = 
m_liveDecodedResourûs
.
m_h—d
; cu¼’t; cu¼’ˆğ
cu¼’t
->
m_ÃxtInLiveResourûsLi¡
) {

574 ià(
cu¼’t
 =ğ
»sourû
) {

575 
found
 = 
Œue
;

579 
ASSERT
(
found
);

582 
CachedResourû
* 
	gÃxt
 = 
»sourû
->
m_ÃxtInLiveResourûsLi¡
;

583 
CachedResourû
* 
	g´ev
 = 
»sourû
->
m_´evInLiveResourûsLi¡
;

585 ià(
	gÃxt
 =ğ0 && 
´ev
 =ğ0 && 
m_liveDecodedResourûs
.
m_h—d
 !ğ
»sourû
)

588 
	g»sourû
->
	gm_ÃxtInLiveResourûsLi¡
 = 0;

589 
	g»sourû
->
	gm_´evInLiveResourûsLi¡
 = 0;

591 ià(
	gÃxt
)

592 
	gÃxt
->
	gm_´evInLiveResourûsLi¡
 = 
´ev
;

593 ià(
	gm_liveDecodedResourûs
.
	gm_
 =ğ
»sourû
)

594 
m_liveDecodedResourûs
.
m_
 = 
´ev
;

596 ià(
	g´ev
)

597 
	g´ev
->
	gm_ÃxtInLiveResourûsLi¡
 = 
Ãxt
;

598 ià(
	gm_liveDecodedResourûs
.
	gm_h—d
 =ğ
»sourû
)

599 
m_liveDecodedResourûs
.
m_h—d
 = 
Ãxt
;

602 
	gCache
::
š£¹InLiveDecodedResourûsLi¡
(
CachedResourû
* 
»sourû
)

605 
ASSERT
(!
»sourû
->
m_ÃxtInLiveResourûsLi¡
 && !»sourû->
m_´evInLiveResourûsLi¡
 && !»sourû->
m_šLiveDecodedResourûsLi¡
);

606 
	g»sourû
->
	gm_šLiveDecodedResourûsLi¡
 = 
Œue
;

608 
	g»sourû
->
	gm_ÃxtInLiveResourûsLi¡
 = 
m_liveDecodedResourûs
.
m_h—d
;

609 ià(
	gm_liveDecodedResourûs
.
	gm_h—d
)

610 
	gm_liveDecodedResourûs
.
	gm_h—d
->
	gm_´evInLiveResourûsLi¡
 = 
»sourû
;

611 
	gm_liveDecodedResourûs
.
	gm_h—d
 = 
»sourû
;

613 ià(!
	g»sourû
->
	gm_ÃxtInLiveResourûsLi¡
)

614 
	gm_liveDecodedResourûs
.
	gm_
 = 
»sourû
;

616 #iâdeà
NDEBUG


618 
boŞ
 
	gfound
 = 
çl£
;

619 
CachedResourû
* 
	gcu¼’t
 = 
m_liveDecodedResourûs
.
m_h—d
; cu¼’t; cu¼’ˆğ
cu¼’t
->
m_ÃxtInLiveResourûsLi¡
) {

620 ià(
cu¼’t
 =ğ
»sourû
) {

621 
found
 = 
Œue
;

625 
ASSERT
(
found
);

630 
	gCache
::
addToLiveResourûsSize
(
CachedResourû
* 
»sourû
)

632 
m_liveSize
 +ğ
»sourû
->
size
();

633 
	gm_d—dSize
 -ğ
»sourû
->
size
();

636 
	gCache
::
»moveFromLiveResourûsSize
(
CachedResourû
* 
»sourû
)

638 
m_liveSize
 -ğ
»sourû
->
size
();

639 
	gm_d—dSize
 +ğ
»sourû
->
size
();

642 
	gCache
::
adju¡Size
(
boŞ
 
live
, 
d–
)

644 ià(
	glive
) {

645 
ASSERT
(
d–
 >ğ0 || (()
m_liveSize
 + delta >= 0));

646 
	gm_liveSize
 +ğ
d–
;

648 
ASSERT
(
d–
 >ğ0 || (()
m_d—dSize
 + delta >= 0));

649 
	gm_d—dSize
 +ğ
d–
;

653 
	gCache
::
Ty³Sti¡ic
::
addResourû
(
CachedResourû
* 
o
)

655 
boŞ
 
purged
 = 
o
->
wasPurged
();

656 
boŞ
 
	gpurg—bË
 = 
o
->
isPurg—bË
(è&& !
purged
;

657 
	g·geSize
 = (
o
->
’codedSize
(è+ o->
ov”h—dSize
() + 4095) & ~4095;

658 
	gcouÁ
++;

659 
	gsize
 +ğ
purged
 ? 0 : 
o
->
size
();

660 
	gliveSize
 +ğ
o
->
hasCl›Ás
(è? o->
size
() : 0;

661 
	gdecodedSize
 +ğ
o
->
decodedSize
();

662 
	gpurg—bËSize
 +ğ
purg—bË
 ? 
·geSize
 : 0;

663 
	gpurgedSize
 +ğ
purged
 ? 
·geSize
 : 0;

666 
	gCache
::
Sti¡ics
 
Cache
::
g‘Sti¡ics
()

668 
Sti¡ics
 
¡©s
;

669 
	gCachedResourûM­
::
™”©Ü
 
e
 = 
m_»sourûs
.
’d
();

670 
	gCachedResourûM­
::
™”©Ü
 
i
 = 
m_»sourûs
.
begš
(); 
	gi
 !ğ
e
; ++i) {

671 
CachedResourû
* 
	g»sourû
 = 
i
->
£cÚd
;

672 
	g»sourû
->
ty³
()) {

673 
	gCachedResourû
::
ImageResourû
:

674 
¡©s
.
images
.
addResourû
(
»sourû
);

676 
	gCachedResourû
::
CSSStyËSh“t
:

677 
¡©s
.
cssStyËSh“ts
.
addResourû
(
»sourû
);

679 
	gCachedResourû
::
Süt
:

680 
¡©s
.
süts
.
addResourû
(
»sourû
);

682 #ià
ENABLE
(
XSLT
)

683 
	gCachedResourû
::
XSLStyËSh“t
:

684 
¡©s
.
x¦StyËSh“ts
.
addResourû
(
»sourû
);

687 
	gCachedResourû
::
FÚtResourû
:

688 
¡©s
.
fÚts
.
addResourû
(
»sourû
);

690 #ià
ENABLE
(
XBL
)

691 
	gCachedResourû
::
XBL
:

692 
¡©s
.
xblDocs
.
addResourû
(
»sourû
)

699  
	g¡©s
;

702 
	gCache
::
£tDi§bËd
(
boŞ
 
di§bËd
)

704 
m_di§bËd
 = 
di§bËd
;

705 ià(!
	gm_di§bËd
)

709 
	gCachedResourûM­
::
™”©Ü
 
i
 = 
m_»sourûs
.
begš
();

710 ià(
	gi
 =ğ
m_»sourûs
.
’d
())

712 
eviù
(
i
->
£cÚd
);

716 #iâdeà
NDEBUG


717 
	gCache
::
dumpSts
()

719 
Sti¡ics
 
s
 = 
g‘Sti¡ics
();

720 
´štf
("%-11s %-11s %-11s %-11s %-11s %-11s %-11s\n", "", "Count", "Size", "LiveSize", "DecodedSize", "PurgeableSize", "PurgedSize");

721 
´štf
("%-11s %-11s %-11s %-11s %-11s %-11s %-11s\n", "-----------", "-----------", "-----------", "-----------", "-----------", "-----------", "-----------");

722 
´štf
("%-11 %11d %11d %11d %11d %11d %11d\n", "Images", 
s
.
images
.
couÁ
, s.images.
size
, s.images.
liveSize
, s.images.
decodedSize
, s.images.
purg—bËSize
, s.images.
purgedSize
);

723 
´štf
("%-11 %11d %11d %11d %11d %11d %11d\n", "CSS", 
s
.
cssStyËSh“ts
.
couÁ
, s.cssStyËSh“ts.
size
, s.cssStyËSh“ts.
liveSize
, s.cssStyËSh“ts.
decodedSize
, s.cssStyËSh“ts.
purg—bËSize
, s.cssStyËSh“ts.
purgedSize
);

724 #ià
ENABLE
(
XSLT
)

725 
´štf
("%-11 %11d %11d %11d %11d %11d %11d\n", "XSL", 
s
.
x¦StyËSh“ts
.
couÁ
, s.x¦StyËSh“ts.
size
, s.x¦StyËSh“ts.
liveSize
, s.x¦StyËSh“ts.
decodedSize
, s.x¦StyËSh“ts.
purg—bËSize
, s.x¦StyËSh“ts.
purgedSize
);

727 
´štf
("%-11 %11d %11d %11d %11d %11d %11d\n", "JavaSüt", 
s
.
süts
.
couÁ
, s.süts.
size
, s.süts.
liveSize
, s.süts.
decodedSize
, s.süts.
purg—bËSize
, s.süts.
purgedSize
);

728 
´štf
("%-11 %11d %11d %11d %11d %11d %11d\n", "FÚts", 
s
.
fÚts
.
couÁ
, s.fÚts.
size
, s.fÚts.
liveSize
, s.fÚts.
decodedSize
, s.fÚts.
purg—bËSize
, s.fÚts.
purgedSize
);

729 
´štf
("%-11s %-11s %-11s %-11s %-11s %-11s %-11s\n\n", "-----------", "-----------", "-----------", "-----------", "-----------", "-----------", "-----------");

732 
	gCache
::
dumpLRULi¡s
(
boŞ
 
šşudeLive
) const

734 
´štf
("LRU-SP†ists inƒviction order (Kilobytes decoded, Kilobytesƒncoded, Access count, Referenced):\n");

736 
	gsize
 = 
m_®lResourûs
.
size
();

737 
	gi
 = 
size
 - 1; i >= 0; i--) {

738 
´štf
("\n\nLi¡ %d: ", 
i
);

739 
CachedResourû
* 
	gcu¼’t
 = 
m_®lResourûs
[
i
].
m_
;

740 
	gcu¼’t
) {

741 
CachedResourû
* 
	g´ev
 = 
cu¼’t
->
m_´evInAÎResourûsLi¡
;

742 ià(
	gšşudeLive
 || !
	gcu¼’t
->
hasCl›Ás
())

743 
´štf
("(%.1fK, %.1fK, %uA, %dR); ", 
cu¼’t
->
decodedSize
(è/ 1024.0f, (cu¼’t->
’codedSize
(è+ cu¼’t->
ov”h—dSize
()è/ 1024.0f, cu¼’t->
acûssCouÁ
(), cu¼’t->
hasCl›Ás
());

744 
	gcu¼’t
 = 
´ev
;

	@Cache.h

25 #iâdeà
Cache_h


26 
	#Cache_h


	)

28 
	~"CachePŞicy.h
"

29 
	~"CachedResourû.h
"

30 
	~"PÏtfÜmSŒšg.h
"

31 
	~"SŒšgHash.h
"

32 
	~"lßd”.h
"

33 
	~<wtf/HashM­.h
>

34 
	~<wtf/HashS‘.h
>

35 
	~<wtf/NÚcİyabË.h
>

36 
	~<wtf/VeùÜ.h
>

38 
Çme¥aû
 
	gWebCÜe
 {

40 
şass
 
	gCachedCSSStyËSh“t
;

41 
şass
 
	gCachedResourû
;

42 
şass
 
	gDocLßd”
;

43 
şass
 
	gKURL
;

58 şas 
	cCache
 : 
public
 
NÚcİyabË
 {

59 
public
:

60 
ä›nd
 
Cache
* 
ÿche
();

62 
	gHashM­
<
	tSŒšg
, 
	tCachedResourû
*> 
	tCachedResourûM­
;

64 
	sLRULi¡
 {

65 
CachedResourû
* 
	gm_h—d
;

66 
CachedResourû
* 
	gm_
;

67 
LRULi¡
(è: 
m_h—d
(0), 
m_
(0) { }

70 
	sTy³Sti¡ic
 {

71 
	gcouÁ
;

72 
	gsize
;

73 
	gliveSize
;

74 
	gdecodedSize
;

75 
	gpurg—bËSize
;

76 
	gpurgedSize
;

77 
Ty³Sti¡ic
(è: 
couÁ
(0), 
size
(0), 
liveSize
(0), 
decodedSize
(0), 
purg—bËSize
(0), 
purgedSize
(0) { }

78 
addResourû
(
CachedResourû
*);

81 
	sSti¡ics
 {

82 
Ty³Sti¡ic
 
	gimages
;

83 
Ty³Sti¡ic
 
	gcssStyËSh“ts
;

84 
Ty³Sti¡ic
 
	gsüts
;

85 #ià
ENABLE
(
XSLT
)

86 
Ty³Sti¡ic
 
	gx¦StyËSh“ts
;

88 #ià
ENABLE
(
XBL
)

89 
Ty³Sti¡ic
 
	gxblDocs
;

91 
Ty³Sti¡ic
 
	gfÚts
;

95 
Lßd”
* 
lßd”
(è{  &
	gm_lßd”
; }

99 
CachedResourû
* 
»que¡Resourû
(
DocLßd”
*, CachedResourû::
Ty³
, cÚ¡ 
KURL
& 
u¾
, cÚ¡ 
SŒšg
& 
ch¬£t
, 
boŞ
 
isP»lßd
 = 
çl£
);

101 
CachedCSSStyËSh“t
* 
»que¡U£rCSSStyËSh“t
(
DocLßd”
*, cÚ¡ 
SŒšg
& 
u¾
, cÚ¡ SŒšg& 
ch¬£t
);

103 
»v®id©eResourû
(
CachedResourû
*, 
DocLßd”
*);

104 
»v®id©iÚSucûeded
(
CachedResourû
* 
»v®id©šgResourû
, cÚ¡ 
ResourûRe¥Ú£
&);

105 
»v®id©iÚFaed
(
CachedResourû
* 
»v®id©šgResourû
);

112 
£tC­ac™›s
(
mšD—dBy‹s
, 
maxD—dBy‹s
, 
tÙ®By‹s
);

116 
£tDi§bËd
(
boŞ
);

117 
boŞ
 
di§bËd
(ècÚ¡ {  
	gm_di§bËd
; }

119 
£tPruÃEÇbËd
(
boŞ
 
’abËd
è{ 
	gm_´uÃEÇbËd
 =ƒnabled; }

120 
´uÃ
()

122 ià(
	gm_liveSize
 + 
	gm_d—dSize
 <ğ
m_ÿ·c™y
 && 
m_maxD—dC­ac™y
 && 
m_d—dSize
 <= m_maxDeadCapacity)

125 
´uÃD—dResourûs
();

126 
´uÃLiveResourûs
();

129 
£tD—dDecodedD©aD–‘iÚIÁ”v®
(
š‹rv®
è{ 
	gm_d—dDecodedD©aD–‘iÚIÁ”v®
 = interval; }

130 
d—dDecodedD©aD–‘iÚIÁ”v®
(ècÚ¡ {  
	gm_d—dDecodedD©aD–‘iÚIÁ”v®
; }

133 
»move
(
CachedResourû
* 
»sourû
è{ 
eviù
(resource); }

135 
addDocLßd”
(
DocLßd”
*);

136 
»moveDocLßd”
(
DocLßd”
*);

138 
CachedResourû
* 
»sourûFÜURL
(cÚ¡ 
SŒšg
&);

141 
š£¹InLRULi¡
(
CachedResourû
*);

142 
»moveFromLRULi¡
(
CachedResourû
*);

145 
adju¡Size
(
boŞ
 
live
, 
d–
);

148 
š£¹InLiveDecodedResourûsLi¡
(
CachedResourû
*);

149 
»moveFromLiveDecodedResourûsLi¡
(
CachedResourû
*);

151 
addToLiveResourûsSize
(
CachedResourû
*);

152 
»moveFromLiveResourûsSize
(
CachedResourû
*);

155 
Sti¡ics
 
g‘Sti¡ics
();

157 
	g´iv©e
:

158 
Cache
();

159 ~
Cache
();

161 
LRULi¡
* 
ÌuLi¡FÜ
(
CachedResourû
*);

162 
»sourûAcûs£d
(
CachedResourû
*);

163 #iâdeà
NDEBUG


164 
dumpSts
();

165 
dumpLRULi¡s
(
boŞ
 
šşudeLive
) const;

168 
liveC­ac™y
() const;

169 
d—dC­ac™y
() const;

171 
´uÃD—dResourûs
();

172 
´uÃLiveResourûs
();

174 
eviù
(
CachedResourû
*);

177 
	gHashS‘
<
	gDocLßd”
*> 
	gm_docLßd”s
;

178 
Lßd”
 
	gm_lßd”
;

180 
boŞ
 
	gm_di§bËd
;

181 
boŞ
 
	gm_´uÃEÇbËd
;

182 
boŞ
 
	gm_šPruÃD—dResourûs
;

184 
	gm_ÿ·c™y
;

185 
	gm_mšD—dC­ac™y
;

186 
	gm_maxD—dC­ac™y
;

187 
	gm_d—dDecodedD©aD–‘iÚIÁ”v®
;

189 
	gm_liveSize
;

190 
	gm_d—dSize
;

195 
	gVeùÜ
<
	gLRULi¡
, 32> 
	gm_®lResourûs
;

198 
LRULi¡
 
	gm_liveDecodedResourûs
;

202 
	gHashM­
<
	gSŒšg
, 
	gCachedResourû
*> 
	gm_»sourûs
;

206 
Cache
* 
ÿche
();

	@CachePolicy.h

26 #iâdeà
CachePŞicy_h


27 
	#CachePŞicy_h


	)

29 
Çme¥aû
 
	gWebCÜe
 {

31 
	eCachePŞicy
 {

32 
	gCachePŞicyCache
,

33 
	gCachePŞicyV”ify
,

34 
	gCachePŞicyRev®id©e
,

35 
	gCachePŞicyR–ßd
,

36 
	gCachePŞicyAÎowSË


	@CachedCSSStyleSheet.cpp

27 
	~"cÚfig.h
"

28 
	~"CachedCSSStyËSh“t.h
"

30 
	~"CachedResourûCl›Á.h
"

31 
	~"CachedResourûCl›ÁW®k”.h
"

32 
	~"HTTPP¬£rs.h
"

33 
	~"TextResourûDecod”.h
"

34 
	~"Sh¬edBufãr.h
"

35 
	~"lßd”.h
"

36 
	~<wtf/VeùÜ.h
>

38 
Çme¥aû
 
	gWebCÜe
 {

40 
	gCachedCSSStyËSh“t
::
CachedCSSStyËSh“t
(cÚ¡ 
SŒšg
& 
u¾
, cÚ¡ SŒšg& 
ch¬£t
)

41 : 
CachedResourû
(
u¾
, 
CSSStyËSh“t
)

42 , 
m_decod”
(
TextResourûDecod”
::
ü—‹
("‹xt/css", 
ch¬£t
))

46 
£tAcû±
("text/css,*/*;q=0.1");

49 
	gCachedCSSStyËSh“t
::~
CachedCSSStyËSh“t
()

53 
CachedCSSStyËSh“t
::
didAddCl›Á
(
CachedResourûCl›Á
 *
c
)

55 ià(!
m_lßdšg
)

56 
c
->
£tCSSStyËSh“t
(
m_u¾
, 
m_»¥Ú£
.
u¾
(), 
m_decod”
->
’codšg
().
Çme
(), 
this
);

59 
	gCachedCSSStyËSh“t
::
®lCl›ÁsRemoved
()

61 ià(
isSaãToMakePurg—bË
())

62 
makePurg—bË
(
Œue
);

65 
	gCachedCSSStyËSh“t
::
£tEncodšg
(cÚ¡ 
SŒšg
& 
chs
)

67 
m_decod”
->
£tEncodšg
(
chs
, 
TextResourûDecod”
::
EncodšgFromHTTPH—d”
);

70 
SŒšg
 
	gCachedCSSStyËSh“t
::
’codšg
() const

72  
m_decod”
->
’codšg
().
Çme
();

75 cÚ¡ 
SŒšg
 
	gCachedCSSStyËSh“t
::
sh“tText
(
boŞ
 
’fÜûMIMETy³
, boŞ* 
hasV®idMIMETy³
) const

77 
ASSERT
(!
isPurg—bË
());

79 ià(!
	gm_d©a
 || m_d©a->
isEm±y
(è|| !
ÿnU£Sh“t
(
’fÜûMIMETy³
, 
hasV®idMIMETy³
))

80  
SŒšg
();

82 ià(!
	gm_decodedSh“tText
.
isNuÎ
())

83  
	gm_decodedSh“tText
;

86 
SŒšg
 
	gsh“tText
 = 
m_decod”
->
decode
(
m_d©a
->
d©a
(), m_d©a->
size
());

87 
	gsh“tText
 +ğ
m_decod”
->
æush
();

88  
	gsh“tText
;

91 
	gCachedCSSStyËSh“t
::
d©a
(
PassRefPŒ
<
Sh¬edBufãr
> d©a, 
boŞ
 
®lD©aReûived
)

93 ià(!
	g®lD©aReûived
)

96 
	gm_d©a
 = 
d©a
;

97 
£tEncodedSize
(
m_d©a
.
g‘
(è? m_d©a->
size
() : 0);

99 ià(
	gm_d©a
) {

100 
	gm_decodedSh“tText
 = 
m_decod”
->
decode
(
m_d©a
->
d©a
(), m_d©a->
size
());

101 
	gm_decodedSh“tText
 +ğ
m_decod”
->
æush
();

103 
	gm_lßdšg
 = 
çl£
;

104 
checkNÙify
();

106 
	gm_decodedSh“tText
 = 
SŒšg
();

109 
	gCachedCSSStyËSh“t
::
checkNÙify
()

111 ià(
m_lßdšg
)

114 
CachedResourûCl›ÁW®k”
 
w
(
m_ş›Ás
);

115 
CachedResourûCl›Á
 *
	gc
 = 
w
.
Ãxt
())

116 
c
->
£tCSSStyËSh“t
(
m_u¾
, 
m_»¥Ú£
.
u¾
(), 
m_decod”
->
’codšg
().
Çme
(), 
this
);

119 
	gCachedCSSStyËSh“t
::
”rÜ
()

121 
m_lßdšg
 = 
çl£
;

122 
	gm_”rÜOccu¼ed
 = 
Œue
;

123 
checkNÙify
();

126 
boŞ
 
	gCachedCSSStyËSh“t
::
ÿnU£Sh“t
(boŞ 
’fÜûMIMETy³
, boŞ* 
hasV®idMIMETy³
) const

128 ià(
”rÜOccu¼ed
())

129  
	gçl£
;

131 ià(!
	g’fÜûMIMETy³
 && !
	ghasV®idMIMETy³
)

132  
	gŒue
;

141 
SŒšg
 
	gmimeTy³
 = 
exŒaùMIMETy³FromMedŸTy³
(
»¥Ú£
().
h‰pH—d”F›ld
("Content-Type"));

142 
boŞ
 
	gty³OK
 = 
mimeTy³
.
isEm±y
(è|| 
equ®IgnÜšgCa£
(mimeType, "text/css") ||ƒqualIgnoringCase(mimeType, "application/x-unknown-content-type");

143 ià(
	ghasV®idMIMETy³
)

144 *
	ghasV®idMIMETy³
 = 
ty³OK
;

145 ià(!
	g’fÜûMIMETy³
)

146  
	gŒue
;

147  
	gty³OK
;

	@CachedCSSStyleSheet.h

26 #iâdeà
CachedCSSStyËSh“t_h


27 
	#CachedCSSStyËSh“t_h


	)

29 
	~"CachedResourû.h
"

30 
	~"TextEncodšg.h
"

31 
	~<wtf/VeùÜ.h
>

33 
Çme¥aû
 
	gWebCÜe
 {

35 
şass
 
	gDocLßd”
;

36 
şass
 
	gTextResourûDecod”
;

38 şas 
	cCachedCSSStyËSh“t
 : 
public
 
CachedResourû
 {

39 
public
:

40 
CachedCSSStyËSh“t
(cÚ¡ 
SŒšg
& 
URL
, cÚ¡ SŒšg& 
ch¬£t
);

41 
	gvœtu®
 ~
CachedCSSStyËSh“t
();

43 cÚ¡ 
SŒšg
 
sh“tText
(
boŞ
 
’fÜûMIMETy³
 = 
Œue
, boŞ* 
hasV®idMIMETy³
 = 0) const;

45 
vœtu®
 
didAddCl›Á
(
CachedResourûCl›Á
*);

47 
vœtu®
 
®lCl›ÁsRemoved
();

49 
vœtu®
 
£tEncodšg
(cÚ¡ 
SŒšg
&);

50 
vœtu®
 
SŒšg
 
’codšg
() const;

51 
vœtu®
 
d©a
(
PassRefPŒ
<
Sh¬edBufãr
> d©a, 
boŞ
 
®lD©aReûived
);

52 
vœtu®
 
”rÜ
();

54 
vœtu®
 
boŞ
 
scheduË
(ècÚ¡ {  
	gŒue
; }

56 
checkNÙify
();

58 
	g´iv©e
:

59 
boŞ
 
ÿnU£Sh“t
(boŞ 
’fÜûMIMETy³
, boŞ* 
hasV®idMIMETy³
) const;

61 
	g´Ùeùed
:

62 
RefPŒ
<
TextResourûDecod”
> 
m_decod”
;

63 
SŒšg
 
	gm_decodedSh“tText
;

	@CachedFont.cpp

27 
	~"cÚfig.h
"

28 
	~"CachedFÚt.h
"

30 #ià
PLATFORM
(
CG
è|| PLATFORM(
QT
è|| PLATFORM(
GTK
è|| (PLATFORM(
CHROMIUM
è&& (
OS
(
WINDOWS
è|| OS(
LINUX
))è|| PLATFORM(
HAIKU
è|| OS(
WINCE
)

31 
	#STORE_FONT_CUSTOM_PLATFORM_DATA


	)

34 
	~"Cache.h
"

35 
	~"CachedResourûCl›Á.h
"

36 
	~"CachedResourûCl›ÁW®k”.h
"

37 
	~"FÚtPÏtfÜmD©a.h
"

38 
	~"Sh¬edBufãr.h
"

39 
	~"TextResourûDecod”.h
"

40 
	~"lßd”.h
"

41 
	~<wtf/VeùÜ.h
>

43 #ifdeà
STORE_FONT_CUSTOM_PLATFORM_DATA


44 
	~"FÚtCu¡omPÏtfÜmD©a.h
"

47 #ià
ENABLE
(
SVG_FONTS
)

48 
	~"HTMLNames.h
"

49 
	~"NodeLi¡.h
"

50 
	~"SVGEËm’t.h
"

51 
	~"SVGFÚtEËm’t.h
"

52 
	~"SVGGEËm’t.h
"

55 
Çme¥aû
 
	gWebCÜe
 {

57 
	gCachedFÚt
::
CachedFÚt
(cÚ¡ 
SŒšg
 &
u¾
)

58 : 
CachedResourû
(
u¾
, 
FÚtResourû
)

59 , 
m_fÚtD©a
(0)

60 , 
m_lßdIn™Ÿ‹d
(
çl£
)

61 #ià
ENABLE
(
SVG_FONTS
)

62 , 
m_isSVGFÚt
(
çl£
)

67 
	gCachedFÚt
::~
CachedFÚt
()

69 #ifdeà
STORE_FONT_CUSTOM_PLATFORM_DATA


70 
d–‘e
 
m_fÚtD©a
;

74 
	gCachedFÚt
::
lßd
(
DocLßd”
*)

77 
m_lßdšg
 = 
Œue
;

80 
	gCachedFÚt
::
didAddCl›Á
(
CachedResourûCl›Á
* 
c
)

82 ià(!
m_lßdšg
)

83 
c
->
fÚtLßded
(
this
);

86 
	gCachedFÚt
::
d©a
(
PassRefPŒ
<
Sh¬edBufãr
> d©a, 
boŞ
 
®lD©aReûived
)

88 ià(!
	g®lD©aReûived
)

91 
	gm_d©a
 = 
d©a
;

92 
£tEncodedSize
(
m_d©a
.
g‘
(è? m_d©a->
size
() : 0);

93 
	gm_lßdšg
 = 
çl£
;

94 
checkNÙify
();

97 
	gCachedFÚt
::
begšLßdIfN“ded
(
DocLßd”
* 
dl
)

99 ià(!
m_lßdIn™Ÿ‹d
) {

100 
m_lßdIn™Ÿ‹d
 = 
Œue
;

101 
ÿche
()->
lßd”
()->
lßd
(
dl
, 
this
, 
çl£
);

105 
boŞ
 
	gCachedFÚt
::
’su»Cu¡omFÚtD©a
()

107 #ifdeà
STORE_FONT_CUSTOM_PLATFORM_DATA


108 #ià
ENABLE
(
SVG_FONTS
)

109 
ASSERT
(!
m_isSVGFÚt
);

111 ià(!
	gm_fÚtD©a
 && !
	gm_”rÜOccu¼ed
 && !
	gm_lßdšg
 && 
	gm_d©a
) {

112 
	gm_fÚtD©a
 = 
ü—‹FÚtCu¡omPÏtfÜmD©a
(
m_d©a
.
g‘
());

113 ià(!
	gm_fÚtD©a
)

114 
	gm_”rÜOccu¼ed
 = 
Œue
;

117  
	gm_fÚtD©a
;

120 
FÚtPÏtfÜmD©a
 
	gCachedFÚt
::
¶©fÜmD©aFromCu¡omD©a
(
size
, 
boŞ
 
bŞd
, boŞ 
™®ic
, 
FÚtR’d”šgMode
 
»nd”šgMode
)

122 #ià
ENABLE
(
SVG_FONTS
)

123 ià(
	gm_ex‹º®SVGDocum’t
)

124  
FÚtPÏtfÜmD©a
(
size
, 
bŞd
, 
™®ic
);

126 #ifdeà
STORE_FONT_CUSTOM_PLATFORM_DATA


127 
ASSERT
(
m_fÚtD©a
);

128  
	gm_fÚtD©a
->
fÚtPÏtfÜmD©a
(
¡©ic_ÿ¡
<>(
size
), 
bŞd
, 
™®ic
, 
»nd”šgMode
);

130  
FÚtPÏtfÜmD©a
();

134 #ià
ENABLE
(
SVG_FONTS
)

135 
boŞ
 
	gCachedFÚt
::
’su»SVGFÚtD©a
()

137 
ASSERT
(
m_isSVGFÚt
);

138 ià(!
	gm_ex‹º®SVGDocum’t
 && !
	gm_”rÜOccu¼ed
 && !
	gm_lßdšg
 && 
	gm_d©a
) {

139 
	gm_ex‹º®SVGDocum’t
 = 
SVGDocum’t
::
ü—‹
(0);

140 
	gm_ex‹º®SVGDocum’t
->
İ’
();

142 
	gRefPŒ
<
	gTextResourûDecod”
> 
	gdecod”
 = 
TextResourûDecod”
::
ü—‹
("application/xml");

143 
	gm_ex‹º®SVGDocum’t
->
wr™e
(
decod”
->
decode
(
m_d©a
->
d©a
(), m_d©a->
size
()));

144 
	gm_ex‹º®SVGDocum’t
->
wr™e
(
decod”
->
æush
());

145 ià(
	gdecod”
->
§wE¼Ü
()) {

146 
	gm_ex‹º®SVGDocum’t
.
ş—r
();

150 
	gm_ex‹º®SVGDocum’t
->
fšishP¬sšg
();

151 
	gm_ex‹º®SVGDocum’t
->
şo£
();

154  
	gm_ex‹º®SVGDocum’t
;

157 
SVGFÚtEËm’t
* 
	gCachedFÚt
::
g‘SVGFÚtById
(cÚ¡ 
SŒšg
& 
fÚtName
) const

159 
ASSERT
(
m_isSVGFÚt
);

160 
	gRefPŒ
<
	gNodeLi¡
> 
	gli¡
 = 
m_ex‹º®SVGDocum’t
->
g‘EËm’tsByTagName
(
SVGNames
::
fÚtTag
.
loÿlName
());

161 ià(!
	gli¡
)

164 
	gfÚts
 = 
li¡
->
Ëngth
();

165 
	gi
 = 0; i < 
	gfÚts
; ++i) {

166 
Node
* 
	gnode
 = 
li¡
->
™em
(
i
);

167 
ASSERT
(
node
);

169 ià(
	g¡©ic_ÿ¡
<
	gEËm’t
*>(
	gnode
)->
g‘A‰ribu‹
(
¡©ic_ÿ¡
<
EËm’t
*>(
node
)->
idA‰ribu‹Name
()è!ğ
fÚtName
)

172 
ASSERT
(
node
->
hasTagName
(
SVGNames
::
fÚtTag
));

173  
	g¡©ic_ÿ¡
<
	gSVGFÚtEËm’t
*>(
	gnode
);

180 
	gCachedFÚt
::
®lCl›ÁsRemoved
()

182 #ifdeà
STORE_FONT_CUSTOM_PLATFORM_DATA


183 ià(
m_fÚtD©a
) {

184 
d–‘e
 
m_fÚtD©a
;

185 
	gm_fÚtD©a
 = 0;

190 
	gCachedFÚt
::
checkNÙify
()

192 ià(
m_lßdšg
)

195 
CachedResourûCl›ÁW®k”
 
w
(
m_ş›Ás
);

196 
CachedResourûCl›Á
 *
	gc
 = 
w
.
Ãxt
())

197 
c
->
fÚtLßded
(
this
);

201 
	gCachedFÚt
::
”rÜ
()

203 
m_lßdšg
 = 
çl£
;

204 
	gm_”rÜOccu¼ed
 = 
Œue
;

205 
checkNÙify
();

	@CachedFont.h

26 #iâdeà
CachedFÚt_h


27 
	#CachedFÚt_h


	)

29 
	~"CachedResourû.h
"

30 
	~"FÚtR’d”šgMode.h
"

31 
	~<wtf/VeùÜ.h
>

33 #ià
ENABLE
(
SVG_FONTS
)

34 
	~"SVGEËm’t.h
"

35 
	~"SVGDocum’t.h
"

38 
Çme¥aû
 
	gWebCÜe
 {

40 
şass
 
	gDocLßd”
;

41 
şass
 
	gCache
;

42 
şass
 
	gFÚtPÏtfÜmD©a
;

43 
şass
 
	gSVGFÚtEËm’t
;

45 
	gFÚtCu¡omPÏtfÜmD©a
;

47 şas 
	cCachedFÚt
 : 
public
 
CachedResourû
 {

48 
public
:

49 
CachedFÚt
(cÚ¡ 
SŒšg
& 
u¾
);

50 
	gvœtu®
 ~
CachedFÚt
();

52 
vœtu®
 
lßd
(
DocLßd”
* 
docLßd”
);

54 
vœtu®
 
didAddCl›Á
(
CachedResourûCl›Á
*);

55 
vœtu®
 
d©a
(
PassRefPŒ
<
Sh¬edBufãr
> d©a, 
boŞ
 
®lD©aReûived
);

56 
vœtu®
 
”rÜ
();

58 
vœtu®
 
®lCl›ÁsRemoved
();

60 
vœtu®
 
boŞ
 
scheduË
(ècÚ¡ {  
	gŒue
; }

62 
checkNÙify
();

64 
begšLßdIfN“ded
(
DocLßd”
* 
dl
);

66 
boŞ
 
’su»Cu¡omFÚtD©a
();

67 
FÚtPÏtfÜmD©a
 
¶©fÜmD©aFromCu¡omD©a
(
size
, 
boŞ
 
bŞd
, boŞ 
™®ic
, 
FÚtR’d”šgMode
 = 
NÜm®R’d”šgMode
);

69 #ià
ENABLE
(
SVG_FONTS
)

70 
boŞ
 
isSVGFÚt
(ècÚ¡ {  
	gm_isSVGFÚt
; }

71 
£tSVGFÚt
(
boŞ
 
isSVG
è{ 
	gm_isSVGFÚt
 = isSVG; }

72 
boŞ
 
’su»SVGFÚtD©a
();

73 
SVGFÚtEËm’t
* 
g‘SVGFÚtById
(cÚ¡ 
SŒšg
&) const;

76 
	g´iv©e
:

77 
FÚtCu¡omPÏtfÜmD©a
* 
m_fÚtD©a
;

78 
boŞ
 
	gm_lßdIn™Ÿ‹d
;

80 #ià
ENABLE
(
SVG_FONTS
)

81 
boŞ
 
	gm_isSVGFÚt
;

82 
	gRefPŒ
<
	gSVGDocum’t
> 
	gm_ex‹º®SVGDocum’t
;

85 
ä›nd
 
şass
 
	gCache
;

	@CachedImage.cpp

24 
	~"cÚfig.h
"

25 
	~"CachedImage.h
"

27 
	~"B™m­Image.h
"

28 
	~"Cache.h
"

29 
	~"CachedResourûCl›Á.h
"

30 
	~"CachedResourûCl›ÁW®k”.h
"

31 
	~"DocLßd”.h
"

32 
	~"F¿me.h
"

33 
	~"F¿meLßd”Ty³s.h
"

34 
	~"F¿meV›w.h
"

35 
	~"Reque¡.h
"

36 
	~"S‘tšgs.h
"

37 
	~"Sh¬edBufãr.h
"

38 
	~<wtf/Cu¼’tTime.h
>

39 
	~<wtf/StdLibExŒas.h
>

40 
	~<wtf/VeùÜ.h
>

42 #ià
PLATFORM
(
CG
)

43 
	~"PDFDocum’tImage.h
"

46 #ià
ENABLE
(
SVG_AS_IMAGE
)

47 
	~"SVGImage.h
"

50 
usšg
 
	g¡d
::
max
;

52 
Çme¥aû
 
	gWebCÜe
 {

54 
	gCachedImage
::
CachedImage
(cÚ¡ 
SŒšg
& 
u¾
)

55 : 
CachedResourû
(
u¾
, 
ImageResourû
)

56 , 
m_image
(0)

57 , 
m_decodedD©aD–‘iÚTim”
(
this
, &
CachedImage
::
decodedD©aD–‘iÚTim”Fœed
)

58 , 
m_h‰pStusCodeE¼ÜOccu¼ed
(
çl£
)

60 
	gm_¡©us
 = 
Unknown
;

63 
	gCachedImage
::
CachedImage
(
Image
* 
image
)

64 : 
CachedResourû
(
SŒšg
(), 
ImageResourû
)

65 , 
m_image
(
image
)

66 , 
m_decodedD©aD–‘iÚTim”
(
this
, &
CachedImage
::
decodedD©aD–‘iÚTim”Fœed
)

67 , 
m_h‰pStusCodeE¼ÜOccu¼ed
(
çl£
)

69 
	gm_¡©us
 = 
Cached
;

70 
	gm_lßdšg
 = 
çl£
;

73 
	gCachedImage
::~
CachedImage
()

77 
CachedImage
::
decodedD©aD–‘iÚTim”Fœed
(
Tim”
<CachedImage>*)

79 
ASSERT
(!
hasCl›Ás
());

80 
de¡royDecodedD©a
();

83 
	gCachedImage
::
lßd
(
DocLßd”
* 
docLßd”
)

85 ià(!
docLßd”
 || docLßd”->
autoLßdImages
())

86 
CachedResourû
::
lßd
(
docLßd”
, 
Œue
, 
DoSecur™yCheck
,rue);

88 
	gm_lßdšg
 = 
çl£
;

91 
	gCachedImage
::
didAddCl›Á
(
CachedResourûCl›Á
* 
c
)

93 ià(
m_decodedD©aD–‘iÚTim”
.
isAùive
())

94 
m_decodedD©aD–‘iÚTim”
.
¡İ
();

96 ià(
	gm_d©a
 && !
	gm_image
 && !
	gm_”rÜOccu¼ed
) {

97 
ü—‹Image
();

98 
	gm_image
->
£tD©a
(
m_d©a
, 
Œue
);

101 ià(
	gm_image
 && !m_image->
isNuÎ
())

102 
	gc
->
imageChªged
(
this
);

104 ià(!
	gm_lßdšg
)

105 
	gc
->
nÙifyFšished
(
this
);

108 
	gCachedImage
::
®lCl›ÁsRemoved
()

110 ià(
m_image
 && !
m_”rÜOccu¼ed
)

111 
m_image
->
»£tAnim©iÚ
();

112 ià(
	gš‹rv®
 = 
ÿche
()->
d—dDecodedD©aD–‘iÚIÁ”v®
())

113 
m_decodedD©aD–‘iÚTim”
.
¡¬tOÃShÙ
(
š‹rv®
);

116 
Image
* 
brok’Image
()

118 
DEFINE_STATIC_LOCAL
(
RefPŒ
<
Image
>, 
brok’Image
, (Image::
lßdPÏtfÜmResourû
("missingImage")));

119  
	gbrok’Image
.
g‘
();

122 
Image
* 
nuÎImage
()

124 
DEFINE_STATIC_LOCAL
(
RefPŒ
<
B™m­Image
>, 
nuÎImage
, (B™m­Image::
ü—‹
()));

125  
	gnuÎImage
.
g‘
();

128 
Image
* 
	gCachedImage
::
image
() const

130 
ASSERT
(!
isPurg—bË
());

132 ià(
	gm_”rÜOccu¼ed
)

133  
brok’Image
();

135 ià(
	gm_image
)

136  
	gm_image
.
g‘
();

138  
nuÎImage
();

141 
	gCachedImage
::
£tImageCÚš”Size
(cÚ¡ 
IÁSize
& 
cÚš”Size
)

143 ià(
m_image
)

144 
m_image
->
£tCÚš”Size
(
cÚš”Size
);

147 
boŞ
 
	gCachedImage
::
u£sImageCÚš”Size
() const

149 ià(
m_image
)

150  
m_image
->
u£sCÚš”Size
();

152  
	gçl£
;

155 
boŞ
 
	gCachedImage
::
imageHasR–©iveWidth
() const

157 ià(
m_image
)

158  
m_image
->
hasR–©iveWidth
();

160  
	gçl£
;

163 
boŞ
 
	gCachedImage
::
imageHasR–©iveHeight
() const

165 ià(
m_image
)

166  
m_image
->
hasR–©iveHeight
();

168  
	gçl£
;

171 
IÁSize
 
	gCachedImage
::
imageSize
(
muÉl›r
) const

173 
ASSERT
(!
isPurg—bË
());

175 ià(!
	gm_image
)

176  
IÁSize
();

177 ià(
	gmuÉl›r
 == 1.0f)

178  
m_image
->
size
();

181 
boŞ
 
	ghasWidth
 = 
m_image
->
size
().
width
() > 0;

182 
boŞ
 
	ghasHeight
 = 
m_image
->
size
().
height
() > 0;

183 
	gwidth
 = 
m_image
->
size
().
width
(è* (m_image->
hasR–©iveWidth
(è? 1.0à: 
muÉl›r
);

184 
	gheight
 = 
m_image
->
size
().
height
(è* (m_image->
hasR–©iveHeight
(è? 1.0à: 
muÉl›r
);

185 ià(
	ghasWidth
)

186 
	gwidth
 = 
max
(1, 
width
);

187 ià(
	ghasHeight
)

188 
	gheight
 = 
max
(1, 
height
);

189  
IÁSize
(
width
, 
height
);

192 
IÁReù
 
	gCachedImage
::
imageReù
(
muÉl›r
) const

194 
ASSERT
(!
isPurg—bË
());

196 ià(!
	gm_image
)

197  
IÁReù
();

198 ià(
	gmuÉl›r
 =ğ1.0à|| (!
m_image
->
hasR–©iveWidth
(è&& !m_image->
hasR–©iveHeight
()))

199  
m_image
->
»ù
();

201 
	gwidthMuÉl›r
 = (
m_image
->
hasR–©iveWidth
(è? 1.0à: 
muÉl›r
);

202 
	gheightMuÉl›r
 = (
m_image
->
hasR–©iveHeight
(è? 1.0à: 
muÉl›r
);

205 
boŞ
 
	ghasWidth
 = 
m_image
->
»ù
().
width
() > 0;

206 
boŞ
 
	ghasHeight
 = 
m_image
->
»ù
().
height
() > 0;

208 
	gwidth
 = 
¡©ic_ÿ¡
<>(
m_image
->
»ù
().
width
(è* 
widthMuÉl›r
);

209 
	gheight
 = 
¡©ic_ÿ¡
<>(
m_image
->
»ù
().
height
(è* 
heightMuÉl›r
);

210 ià(
	ghasWidth
)

211 
	gwidth
 = 
max
(1, 
width
);

212 ià(
	ghasHeight
)

213 
	gheight
 = 
max
(1, 
height
);

215 
	gx
 = 
¡©ic_ÿ¡
<>(
m_image
->
»ù
().
x
(è* 
widthMuÉl›r
);

216 
	gy
 = 
¡©ic_ÿ¡
<>(
m_image
->
»ù
().
y
(è* 
heightMuÉl›r
);

218  
IÁReù
(
x
, 
y
, 
width
, 
height
);

221 
	gCachedImage
::
nÙifyOb£rv”s
(cÚ¡ 
IÁReù
* 
chªgeReù
)

223 
CachedResourûCl›ÁW®k”
 
w
(
m_ş›Ás
);

224 
CachedResourûCl›Á
* 
	gc
 = 
w
.
Ãxt
())

225 
c
->
imageChªged
(
this
, 
chªgeReù
);

228 
	gCachedImage
::
ş—r
()

230 
de¡royDecodedD©a
();

231 
	gm_image
 = 0;

232 
£tEncodedSize
(0);

235 
šlše
 
	gCachedImage
::
ü—‹Image
()

238 ià(
m_image
)

240 #ià
PLATFORM
(
CG
)

241 ià(
	gm_»¥Ú£
.
mimeTy³
() == "application/pdf") {

242 
m_image
 = 
PDFDocum’tImage
::
ü—‹
();

246 #ià
ENABLE
(
SVG_AS_IMAGE
)

247 ià(
	gm_»¥Ú£
.
mimeTy³
() == "image/svg+xml") {

248 
m_image
 = 
SVGImage
::
ü—‹
(
this
);

252 
	gm_image
 = 
B™m­Image
::
ü—‹
(
this
);

255 
size_t
 
	gCachedImage
::
maximumDecodedImageSize
()

257 
F¿me
* 
äame
 = 
m_»que¡
 ? m_»que¡->
docLßd”
()->frame() : 0;

258 ià(!
	gäame
)

260 
S‘tšgs
* 
	g£‰šgs
 = 
äame
->
£‰šgs
();

261  
	g£‰šgs
 ? s‘tšgs->
maximumDecodedImageSize
() : 0;

264 
	gCachedImage
::
d©a
(
PassRefPŒ
<
Sh¬edBufãr
> d©a, 
boŞ
 
®lD©aReûived
)

266 
	gm_d©a
 = 
d©a
;

268 
ü—‹Image
();

270 
boŞ
 
	gsizeAvaabË
 = 
çl£
;

275 
	gsizeAvaabË
 = 
m_image
->
£tD©a
(
m_d©a
, 
®lD©aReûived
);

281 ià(
	gsizeAvaabË
 || 
	g®lD©aReûived
) {

282 
size_t
 
	gmaxDecodedImageSize
 = 
maximumDecodedImageSize
();

283 
IÁSize
 
	gs
 = 
imageSize
(1.0f);

284 
size_t
 
	ge¡im©edDecodedImageSize
 = 
s
.
width
(è* s.
height
() * 4;

285 ià(
	gm_image
->
isNuÎ
(è|| (
	gmaxDecodedImageSize
 > 0 && 
	ge¡im©edDecodedImageSize
 > maxDecodedImageSize)) {

286 
”rÜ
();

287 ià(
šCache
())

288 
ÿche
()->
»move
(
this
);

294 
nÙifyOb£rv”s
();

296 ià(
	gm_image
)

297 
£tEncodedSize
(
m_image
->
d©a
(è? m_image->d©a()->
size
() : 0);

300 ià(
	g®lD©aReûived
) {

301 
	gm_lßdšg
 = 
çl£
;

302 
checkNÙify
();

306 
	gCachedImage
::
”rÜ
()

308 
ş—r
();

309 
	gm_”rÜOccu¼ed
 = 
Œue
;

310 
	gm_d©a
.
ş—r
();

311 
nÙifyOb£rv”s
();

312 
	gm_lßdšg
 = 
çl£
;

313 
checkNÙify
();

316 
	gCachedImage
::
checkNÙify
()

318 ià(
m_lßdšg
)

321 
CachedResourûCl›ÁW®k”
 
w
(
m_ş›Ás
);

322 
CachedResourûCl›Á
* 
	gc
 = 
w
.
Ãxt
())

323 
c
->
nÙifyFšished
(
this
);

326 
	gCachedImage
::
de¡royDecodedD©a
()

328 
boŞ
 
ÿnD–‘eImage
 = !
m_image
 || (m_image->
hasOÃRef
(è&& m_image->
isB™m­Image
());

329 ià(
isSaãToMakePurg—bË
(è&& 
	gÿnD–‘eImage
 && !
	gm_lßdšg
) {

332 
	gm_image
 = 0;

333 
£tDecodedSize
(0);

334 
makePurg—bË
(
Œue
);

335 } ià(
	gm_image
 && !
	gm_”rÜOccu¼ed
)

336 
	gm_image
->
de¡royDecodedD©a
();

339 
	gCachedImage
::
decodedSizeChªged
(cÚ¡ 
Image
* 
image
, 
d–
)

341 ià(
	gimage
 !ğ
m_image
)

344 
£tDecodedSize
(
decodedSize
(è+ 
d–
);

347 
	gCachedImage
::
didD¿w
(cÚ¡ 
Image
* 
image
)

349 ià(
image
 !ğ
m_image
)

352 
	gtimeSmp
 = 
F¿meV›w
::
cu¼’tPaštTimeSmp
();

353 ià(!
	gtimeSmp
)

354 
	gtimeSmp
 = 
cu¼’tTime
();

356 
	gCachedResourû
::
didAcûssDecodedD©a
(
timeSmp
);

359 
boŞ
 
	gCachedImage
::
shouldPau£Anim©iÚ
(cÚ¡ 
Image
* 
image
)

361 ià(
image
 !ğ
m_image
)

362  
çl£
;

364 
CachedResourûCl›ÁW®k”
 
w
(
m_ş›Ás
);

365 
CachedResourûCl›Á
* 
	gc
 = 
w
.
Ãxt
()) {

366 ià(
c
->
wlR’d”Image
(
this
))

367  
çl£
;

370  
	gŒue
;

373 
	gCachedImage
::
ªim©iÚAdvªûd
(cÚ¡ 
Image
* 
image
)

375 ià(
image
 =ğ
m_image
)

376 
nÙifyOb£rv”s
();

379 
	gCachedImage
::
chªgedInReù
(cÚ¡ 
Image
* 
image
, cÚ¡ 
IÁReù
& 
»ù
)

381 ià(
	gimage
 =ğ
m_image
)

382 
nÙifyOb£rv”s
(&
»ù
);

	@CachedImage.h

23 #iâdeà
CachedImage_h


24 
	#CachedImage_h


	)

26 
	~"CachedResourû.h
"

27 
	~"ImageOb£rv”.h
"

28 
	~"IÁReù.h
"

29 
	~"Tim”.h
"

30 
	~<wtf/VeùÜ.h
>

32 
Çme¥aû
 
	gWebCÜe
 {

34 
şass
 
	gDocLßd”
;

35 
şass
 
	gCache
;

37 
şass
 
	gCachedImage
 : 
public
 
CachedResourû
,…ubliø
	gImageOb£rv”
 {

38 
ä›nd
 
şass
 
	gCache
;

40 
	gpublic
:

41 
CachedImage
(cÚ¡ 
SŒšg
& 
u¾
);

42 
CachedImage
(
Image
*);

43 
	gvœtu®
 ~
CachedImage
();

45 
vœtu®
 
lßd
(
DocLßd”
* 
docLßd”
);

47 
Image
* 
image
() const;

49 
boŞ
 
ÿnR’d”
(
muÉl›r
ècÚ¡ {  !
”rÜOccu¼ed
(è&& !
imageSize
(muÉl›r).
isEm±y
(); }

52 
£tImageCÚš”Size
(cÚ¡ 
IÁSize
&);

53 
boŞ
 
u£sImageCÚš”Size
() const;

54 
boŞ
 
imageHasR–©iveWidth
() const;

55 
boŞ
 
imageHasR–©iveHeight
() const;

59 
IÁSize
 
imageSize
(
muÉl›r
) const;

60 
IÁReù
 
imageReù
(
muÉl›r
) const;

62 
vœtu®
 
didAddCl›Á
(
CachedResourûCl›Á
*);

64 
vœtu®
 
®lCl›ÁsRemoved
();

65 
vœtu®
 
de¡royDecodedD©a
();

67 
vœtu®
 
d©a
(
PassRefPŒ
<
Sh¬edBufãr
> d©a, 
boŞ
 
®lD©aReûived
);

68 
vœtu®
 
”rÜ
();

70 
vœtu®
 
h‰pStusCodeE¼Ü
(è{ 
	gm_h‰pStusCodeE¼ÜOccu¼ed
 = 
Œue
; }

71 
boŞ
 
h‰pStusCodeE¼ÜOccu¼ed
(ècÚ¡ {  
	gm_h‰pStusCodeE¼ÜOccu¼ed
; }

73 
vœtu®
 
boŞ
 
scheduË
(ècÚ¡ {  
	gŒue
; }

75 
checkNÙify
();

77 
vœtu®
 
boŞ
 
isImage
(ècÚ¡ {  
	gŒue
; }

79 
ş—r
();

81 
boŞ
 
¡lN“dsLßd
(ècÚ¡ {  !
	gm_”rÜOccu¼ed
 && 
	gm_¡©us
 =ğ
Unknown
 && 
m_lßdšg
 =ğ
çl£
; }

82 
lßd
();

85 
vœtu®
 
decodedSizeChªged
(cÚ¡ 
Image
* 
image
, 
d–
);

86 
vœtu®
 
didD¿w
(cÚ¡ 
Image
*);

88 
vœtu®
 
boŞ
 
shouldPau£Anim©iÚ
(cÚ¡ 
Image
*);

89 
vœtu®
 
ªim©iÚAdvªûd
(cÚ¡ 
Image
*);

90 
vœtu®
 
chªgedInReù
(cÚ¡ 
Image
*, cÚ¡ 
IÁReù
&);

92 
	g´iv©e
:

93 
ü—‹Image
();

94 
size_t
 
maximumDecodedImageSize
();

96 
nÙifyOb£rv”s
(cÚ¡ 
IÁReù
* 
chªgeReù
 = 0);

97 
decodedD©aD–‘iÚTim”Fœed
(
Tim”
<
CachedImage
>*);

99 
	gRefPŒ
<
	gImage
> 
	gm_image
;

100 
	gTim”
<
	gCachedImage
> 
	gm_decodedD©aD–‘iÚTim”
;

101 
boŞ
 
	gm_h‰pStusCodeE¼ÜOccu¼ed
;

	@CachedResource.cpp

24 
	~"cÚfig.h
"

25 
	~"CachedResourû.h
"

27 
	~"Cache.h
"

28 
	~"CachedResourûHªdË.h
"

29 
	~"DocLßd”.h
"

30 
	~"F¿me.h
"

31 
	~"F¿meLßd”.h
"

32 
	~"KURL.h
"

33 
	~"Purg—bËBufãr.h
"

34 
	~"Reque¡.h
"

35 
	~"Sh¬edBufãr.h
"

36 
	~<wtf/Cu¼’tTime.h
>

37 
	~<wtf/M©hExŒas.h
>

38 
	~<wtf/RefCouÁedL—kCouÁ”.h
>

39 
	~<wtf/StdLibExŒas.h
>

40 
	~<wtf/VeùÜ.h
>

42 
usšg
 
Çme¥aû
 
	gWTF
;

44 
Çme¥aû
 
	gWebCÜe
 {

46 #iâdeà
NDEBUG


47 
RefCouÁedL—kCouÁ”
 
ÿchedResourûL—kCouÁ”
("CachedResource");

50 
	gCachedResourû
::
CachedResourû
(cÚ¡ 
SŒšg
& 
u¾
, 
Ty³
 
ty³
)

51 : 
m_u¾
(
u¾
)

52 , 
m_»¥Ú£Time¡amp
(
cu¼’tTime
())

53 , 
m_Ï¡DecodedAcûssTime
(0)

54 , 
m_£ndResourûLßdC®lbacks
(
Œue
)

55 , 
m_´–ßdCouÁ
(0)

56 , 
m_´–ßdResuÉ
(
P»lßdNÙReã»nûd
)

57 , 
m_»que¡edFromN‘wÜkšgLay”
(
çl£
)

58 , 
m_šCache
(
çl£
)

59 , 
m_lßdšg
(
çl£
)

60 , 
m_docLßd”
(0)

61 , 
m_hªdËCouÁ
(0)

62 , 
m_»sourûToRev®id©e
(0)

63 , 
m_´oxyResourû
(0)

65 #iâdeà
NDEBUG


66 
	gÿchedResourûL—kCouÁ”
.
šüem’t
();

69 
	gm_ty³
 = 
ty³
;

70 
	gm_¡©us
 = 
P’dšg
;

71 
	gm_’codedSize
 = 0;

72 
	gm_decodedSize
 = 0;

73 
	gm_»que¡
 = 0;

75 
	gm_acûssCouÁ
 = 0;

76 
	gm_šLiveDecodedResourûsLi¡
 = 
çl£
;

78 
	gm_ÃxtInAÎResourûsLi¡
 = 0;

79 
	gm_´evInAÎResourûsLi¡
 = 0;

81 
	gm_ÃxtInLiveResourûsLi¡
 = 0;

82 
	gm_´evInLiveResourûsLi¡
 = 0;

84 #iâdeà
NDEBUG


85 
	gm_d–‘ed
 = 
çl£
;

86 
	gm_ÌuIndex
 = 0;

88 
	gm_”rÜOccu¼ed
 = 
çl£
;

91 
	gCachedResourû
::~
CachedResourû
()

93 
ASSERT
(!
m_»sourûToRev®id©e
);

94 
ASSERT
(
ÿnD–‘e
());

95 
ASSERT
(!
šCache
());

96 
ASSERT
(!
m_d–‘ed
);

97 
ASSERT
(
u¾
().
isNuÎ
(è|| 
ÿche
()->
»sourûFÜURL
(u¾()è!ğ
this
);

98 #iâdeà
NDEBUG


99 
	gm_d–‘ed
 = 
Œue
;

100 
	gÿchedResourûL—kCouÁ”
.
deüem’t
();

103 ià(
	gm_docLßd”
)

104 
	gm_docLßd”
->
»moveCachedResourû
(
this
);

107 
	gCachedResourû
::
lßd
(
DocLßd”
* 
docLßd”
, 
boŞ
 
šüem’l
, 
Secur™yCheckPŞicy
 
£cur™yCheck
, boŞ 
£ndResourûLßdC®lbacks
)

109 
	gm_£ndResourûLßdC®lbacks
 = 
£ndResourûLßdC®lbacks
;

110 
ÿche
()->
lßd”
()->
lßd
(
docLßd”
, 
this
, 
šüem’l
, 
£cur™yCheck
, 
£ndResourûLßdC®lbacks
);

111 
	gm_lßdšg
 = 
Œue
;

114 
	gCachedResourû
::
fšish
()

116 
m_¡©us
 = 
Cached
;

119 
boŞ
 
	gCachedResourû
::
isExpœed
() const

121 ià(
m_»¥Ú£
.
isNuÎ
())

122  
çl£
;

124  
cu¼’tAge
(è> 
äeshÃssLiãtime
();

127 
	gCachedResourû
::
cu¼’tAge
() const

131 
d©eV®ue
 = 
m_»¥Ú£
.
d©e
();

132 
	g­·»ÁAge
 = 
isfš™e
(
d©eV®ue
è? 
max
(0., 
m_»¥Ú£Time¡amp
 - dateValue) : 0;

133 
	gageV®ue
 = 
m_»¥Ú£
.
age
();

134 
	gcÜ»ùedReûivedAge
 = 
isfš™e
(
ageV®ue
è? 
max
(
­·»ÁAge
,‡geValue) :‡pparentAge;

135 
	g»sid’tTime
 = 
cu¼’tTime
(è- 
m_»¥Ú£Time¡amp
;

136  
	gcÜ»ùedReûivedAge
 + 
	g»sid’tTime
;

139 
	gCachedResourû
::
äeshÃssLiãtime
() const

142 ià(!
m_»¥Ú£
.
u¾
().
´ÙocŞInHTTPFamy
())

143  
¡d
::
num”ic_lim™s
<>::
max
();

146 
	gmaxAgeV®ue
 = 
m_»¥Ú£
.
ÿcheCÚŒŞMaxAge
();

147 ià(
isfš™e
(
maxAgeV®ue
))

148  
	gmaxAgeV®ue
;

149 
	gexpœesV®ue
 = 
m_»¥Ú£
.
expœes
();

150 
	gd©eV®ue
 = 
m_»¥Ú£
.
d©e
();

151 
	gü—tiÚTime
 = 
isfš™e
(
d©eV®ue
è? d©eV®u: 
m_»¥Ú£Time¡amp
;

152 ià(
isfš™e
(
expœesV®ue
))

153  
	gexpœesV®ue
 - 
	gü—tiÚTime
;

154 
	gÏ¡Modif›dV®ue
 = 
m_»¥Ú£
.
Ï¡Modif›d
();

155 ià(
isfš™e
(
Ï¡Modif›dV®ue
))

156  (
	gü—tiÚTime
 - 
	gÏ¡Modif›dV®ue
) * 0.1;

161 
	gCachedResourû
::
£tRe¥Ú£
(cÚ¡ 
ResourûRe¥Ú£
& 
»¥Ú£
)

163 
m_»¥Ú£
 = 
»¥Ú£
;

164 
	gm_»¥Ú£Time¡amp
 = 
cu¼’tTime
();

167 
	gCachedResourû
::
£tReque¡
(
Reque¡
* 
»que¡
)

169 ià(
»que¡
 && !
m_»que¡
)

170 
m_¡©us
 = 
P’dšg
;

171 
	gm_»que¡
 = 
»que¡
;

172 ià(
ÿnD–‘e
(è&& !
šCache
())

173 
d–‘e
 
	gthis
;

176 
	gCachedResourû
::
addCl›Á
(
CachedResourûCl›Á
* 
ş›Á
)

178 
addCl›ÁToS‘
(
ş›Á
);

179 
didAddCl›Á
(
ş›Á
);

182 
	gCachedResourû
::
addCl›ÁToS‘
(
CachedResourûCl›Á
* 
ş›Á
)

184 
ASSERT
(!
isPurg—bË
());

186 ià(
	gm_´–ßdResuÉ
 =ğ
P»lßdNÙReã»nûd
) {

187 ià(
isLßded
())

188 
m_´–ßdResuÉ
 = 
P»lßdReã»nûdWheCom¶‘e
;

189 ià(
	gm_»que¡edFromN‘wÜkšgLay”
)

190 
	gm_´–ßdResuÉ
 = 
P»lßdReã»nûdWheLßdšg
;

192 
	gm_´–ßdResuÉ
 = 
P»lßdReã»nûd
;

194 ià(!
hasCl›Ás
(è&& 
šCache
())

195 
ÿche
()->
addToLiveResourûsSize
(
this
);

196 
	gm_ş›Ás
.
add
(
ş›Á
);

199 
	gCachedResourû
::
»moveCl›Á
(
CachedResourûCl›Á
* 
ş›Á
)

201 
ASSERT
(
m_ş›Ás
.
cÚšs
(
ş›Á
));

202 
	gm_ş›Ás
.
»move
(
ş›Á
);

204 ià(
ÿnD–‘e
(è&& !
šCache
())

205 
d–‘e
 
	gthis
;

206 ià(!
hasCl›Ás
(è&& 
šCache
()) {

207 
ÿche
()->
»moveFromLiveResourûsSize
(
this
);

208 
ÿche
()->
»moveFromLiveDecodedResourûsLi¡
(
this
);

209 
®lCl›ÁsRemoved
();

210 ià(
»¥Ú£
().
ÿcheCÚŒŞCÚšsNoStÜe
()) {

213 
ÿche
()->
»move
(
this
);

215 
ÿche
()->
´uÃ
();

220 
	gCachedResourû
::
d–‘eIfPossibË
()

222 ià(
ÿnD–‘e
(è&& !
šCache
())

223 
d–‘e
 
this
;

226 
	gCachedResourû
::
£tDecodedSize
(
size
)

228 ià(
size
 =ğ
m_decodedSize
)

231 
	gd–
 = 
size
 - 
m_decodedSize
;

236 ià(
šCache
())

237 
ÿche
()->
»moveFromLRULi¡
(
this
);

239 
	gm_decodedSize
 = 
size
;

241 ià(
šCache
()) {

243 
ÿche
()->
š£¹InLRULi¡
(
this
);

252 ià(
	gm_decodedSize
 && !
	gm_šLiveDecodedResourûsLi¡
 && 
hasCl›Ás
())

253 
ÿche
()->
š£¹InLiveDecodedResourûsLi¡
(
this
);

254 ià(!
	gm_decodedSize
 && 
	gm_šLiveDecodedResourûsLi¡
)

255 
ÿche
()->
»moveFromLiveDecodedResourûsLi¡
(
this
);

258 
ÿche
()->
adju¡Size
(
hasCl›Ás
(), 
d–
);

262 
	gCachedResourû
::
£tEncodedSize
(
size
)

264 ià(
size
 =ğ
m_’codedSize
)

268 
ASSERT
(
size
 =ğ0 || siz>ğ
m_’codedSize
);

270 
	gd–
 = 
size
 - 
m_’codedSize
;

275 ià(
šCache
())

276 
ÿche
()->
»moveFromLRULi¡
(
this
);

278 
	gm_’codedSize
 = 
size
;

280 ià(
šCache
()) {

282 
ÿche
()->
š£¹InLRULi¡
(
this
);

285 
ÿche
()->
adju¡Size
(
hasCl›Ás
(), 
d–
);

289 
	gCachedResourû
::
didAcûssDecodedD©a
(
timeSmp
)

291 
m_Ï¡DecodedAcûssTime
 = 
timeSmp
;

293 ià(
šCache
()) {

294 ià(
	gm_šLiveDecodedResourûsLi¡
) {

295 
ÿche
()->
»moveFromLiveDecodedResourûsLi¡
(
this
);

296 
ÿche
()->
š£¹InLiveDecodedResourûsLi¡
(
this
);

298 
ÿche
()->
´uÃ
();

302 
	gCachedResourû
::
£tResourûToRev®id©e
(
CachedResourû
* 
»sourû
)

304 
ASSERT
(
»sourû
);

305 
ASSERT
(!
m_»sourûToRev®id©e
);

306 
ASSERT
(
»sourû
 !ğ
this
);

307 
ASSERT
(
m_hªdËsToRev®id©e
.
isEm±y
());

308 
ASSERT
(
»sourû
->
ty³
() ==ype());

313 
ASSERT
(!
»sourû
->
m_´oxyResourû
);

315 
	g»sourû
->
	gm_´oxyResourû
 = 
this
;

316 
	gm_»sourûToRev®id©e
 = 
»sourû
;

319 
	gCachedResourû
::
ş—rResourûToRev®id©e
()

321 
ASSERT
(
m_»sourûToRev®id©e
);

323 ià(
	gm_»sourûToRev®id©e
->
	gm_´oxyResourû
 =ğ
this
) {

324 
m_»sourûToRev®id©e
->
m_´oxyResourû
 = 0;

325 
	gm_»sourûToRev®id©e
->
d–‘eIfPossibË
();

327 
	gm_hªdËsToRev®id©e
.
ş—r
();

328 
	gm_»sourûToRev®id©e
 = 0;

329 
d–‘eIfPossibË
();

332 
	gCachedResourû
::
sw™chCl›ÁsToRev®id©edResourû
()

334 
ASSERT
(
m_»sourûToRev®id©e
);

335 
ASSERT
(
m_»sourûToRev®id©e
->
šCache
());

336 
ASSERT
(!
šCache
());

338 
	gHashS‘
<
	gCachedResourûHªdËBa£
*>::
™”©Ü
 
’d
 = 
m_hªdËsToRev®id©e
.end();

339 
	gHashS‘
<
	gCachedResourûHªdËBa£
*>::
™”©Ü
 
™
 = 
m_hªdËsToRev®id©e
.
begš
(); 
	g™
 !ğ
’d
; ++it) {

340 
CachedResourûHªdËBa£
* 
	ghªdË
 = *
™
;

341 
	ghªdË
->
	gm_»sourû
 = 
m_»sourûToRev®id©e
;

342 
	gm_»sourûToRev®id©e
->
»gi¡”HªdË
(
hªdË
);

343 --
	gm_hªdËCouÁ
;

345 
ASSERT
(!
m_hªdËCouÁ
);

346 
	gm_hªdËsToRev®id©e
.
ş—r
();

348 
	gVeùÜ
<
	gCachedResourûCl›Á
*> 
	gş›ÁsToMove
;

349 
	gHashCouÁedS‘
<
	gCachedResourûCl›Á
*>::
™”©Ü
 
’d2
 = 
m_ş›Ás
.
’d
();

350 
	gHashCouÁedS‘
<
	gCachedResourûCl›Á
*>::
™”©Ü
 
™
 = 
m_ş›Ás
.
begš
(); 
	g™
 !ğ
’d2
; ++it) {

351 
CachedResourûCl›Á
* 
	gş›Á
 = 
™
->
fœ¡
;

352 
	gcouÁ
 = 
™
->
£cÚd
;

353 
	gcouÁ
) {

354 
	gş›ÁsToMove
.
­³nd
(
ş›Á
);

355 --
	gcouÁ
;

359 
	gm_ş›Ás
.
ş—r
();

361 
	gmoveCouÁ
 = 
ş›ÁsToMove
.
size
();

362 
	gn
 = 0;‚ < 
	gmoveCouÁ
; ++n)

363 
	gm_»sourûToRev®id©e
->
addCl›ÁToS‘
(
ş›ÁsToMove
[
n
]);

364 
	gn
 = 0;‚ < 
	gmoveCouÁ
; ++n) {

366 ià(
	gm_»sourûToRev®id©e
->
	gm_ş›Ás
.
cÚšs
(
ş›ÁsToMove
[
n
]))

367 
	gm_»sourûToRev®id©e
->
didAddCl›Á
(
ş›ÁsToMove
[
n
]);

371 
	gCachedResourû
::
upd©eRe¥Ú£Aá”Rev®id©iÚ
(cÚ¡ 
ResourûRe¥Ú£
& 
v®id©šgRe¥Ú£
)

373 
m_»¥Ú£Time¡amp
 = 
cu¼’tTime
();

375 
DEFINE_STATIC_LOCAL
(cÚ¡ 
AtomicSŒšg
, 
cÚ‹ÁH—d”P»fix
, ("content-"));

378 cÚ¡ 
	gHTTPH—d”M­
& 
	gÃwH—d”s
 = 
v®id©šgRe¥Ú£
.
h‰pH—d”F›lds
();

379 
	gHTTPH—d”M­
::
cÚ¡_™”©Ü
 
’d
 = 
ÃwH—d”s
.end();

380 
	gHTTPH—d”M­
::
cÚ¡_™”©Ü
 
™
 = 
ÃwH—d”s
.
begš
(); 
	g™
 !ğ
’d
; ++it) {

382 ià(
	g™
->
	gfœ¡
.
¡¬tsW™h
(
cÚ‹ÁH—d”P»fix
, 
çl£
))

384 
	gm_»¥Ú£
.
£tHTTPH—d”F›ld
(
™
->
fœ¡
, it->
£cÚd
);

388 
boŞ
 
	gCachedResourû
::
ÿnU£CacheV®id©Ü
() const

390 ià(
m_lßdšg
 || 
m_”rÜOccu¼ed
)

391  
çl£
;

393 ià(
	gm_»¥Ú£
.
ÿcheCÚŒŞCÚšsNoStÜe
())

394  
	gçl£
;

396 
DEFINE_STATIC_LOCAL
(cÚ¡ 
AtomicSŒšg
, 
Ï¡Modif›dH—d”
, ("last-modified"));

397 
DEFINE_STATIC_LOCAL
(cÚ¡ 
AtomicSŒšg
, 
eTagH—d”
, ("etag"));

398  !
	gm_»¥Ú£
.
h‰pH—d”F›ld
(
Ï¡Modif›dH—d”
).
isEm±y
(è|| !m_»¥Ú£.h‰pH—d”F›ld(
eTagH—d”
).isEmpty();

401 
boŞ
 
	gCachedResourû
::
mu¡Rev®id©e
(
CachePŞicy
 
ÿchePŞicy
) const

403 ià(
m_”rÜOccu¼ed
)

404  
Œue
;

406 ià(
	gm_lßdšg
)

407  
	gçl£
;

409 ià(
	gm_»¥Ú£
.
ÿcheCÚŒŞCÚšsNoCache
(è|| m_»¥Ú£.
ÿcheCÚŒŞCÚšsNoStÜe
())

410  
	gŒue
;

412 ià(
	gÿchePŞicy
 =ğ
CachePŞicyCache
)

413  
m_»¥Ú£
.
ÿcheCÚŒŞCÚšsMu¡Rev®id©e
(è&& 
isExpœed
();

415  
isExpœed
();

418 
boŞ
 
	gCachedResourû
::
isSaãToMakePurg—bË
() const

420  !
hasCl›Ás
(è&& !
m_´oxyResourû
 && !
m_»sourûToRev®id©e
;

423 
boŞ
 
	gCachedResourû
::
makePurg—bË
(boŞ 
purg—bË
)

425 ià(
purg—bË
) {

426 
ASSERT
(
isSaãToMakePurg—bË
());

428 ià(
	gm_purg—bËD©a
) {

429 
ASSERT
(!
m_d©a
);

430  
	gŒue
;

432 ià(!
	gm_d©a
)

433  
	gçl£
;

436 ià(!
	gm_d©a
->
hasOÃRef
())

437  
	gçl£
;

440 cÚ¡ 
size_t
 
	gpurg—bËTh»shŞd
 = 4 * 4096;

441 ià(
	gm_d©a
->
size
(è< 
	gpurg—bËTh»shŞd
)

442  
	gçl£
;

444 ià(
	gm_d©a
->
hasPurg—bËBufãr
()) {

445 
	gm_purg—bËD©a
.
£t
(
m_d©a
->
»Ëa£Purg—bËBufãr
());

447 
	gm_purg—bËD©a
.
£t
(
Purg—bËBufãr
::
ü—‹
(
m_d©a
->
d©a
(), m_d©a->
size
()));

448 ià(!
	gm_purg—bËD©a
)

449  
	gçl£
;

452 
	gm_purg—bËD©a
->
makePurg—bË
(
Œue
);

453 
	gm_d©a
.
ş—r
();

454  
	gŒue
;

457 ià(!
	gm_purg—bËD©a
)

458  
	gŒue
;

459 
ASSERT
(!
m_d©a
);

460 
ASSERT
(!
hasCl›Ás
());

462 ià(!
	gm_purg—bËD©a
->
makePurg—bË
(
çl£
))

463  
	gçl£
;

465 
	gm_d©a
 = 
Sh¬edBufãr
::
adİtPurg—bËBufãr
(
m_purg—bËD©a
.
»Ëa£
());

466  
	gŒue
;

469 
boŞ
 
	gCachedResourû
::
isPurg—bË
() const

471  
m_purg—bËD©a
 && m_purg—bËD©a->
isPurg—bË
();

474 
boŞ
 
	gCachedResourû
::
wasPurged
() const

476  
m_purg—bËD©a
 && m_purg—bËD©a->
wasPurged
();

479 
	gCachedResourû
::
ov”h—dSize
() const

481  (
CachedResourû
è+ 
m_»¥Ú£
.
memÜyU§ge
() + 576;

	@CachedResource.h

23 #iâdeà
CachedResourû_h


24 
	#CachedResourû_h


	)

26 
	~"CachePŞicy.h
"

27 
	~"F¿meLßd”Ty³s.h
"

28 
	~"PÏtfÜmSŒšg.h
"

29 
	~"ResourûRe¥Ú£.h
"

30 
	~<wtf/HashCouÁedS‘.h
>

31 
	~<wtf/HashS‘.h
>

32 
	~<wtf/OwnPŒ.h
>

33 
	~<wtf/VeùÜ.h
>

34 
	~<time.h
>

36 
Çme¥aû
 
	gWebCÜe
 {

38 
şass
 
	gCache
;

39 
şass
 
	gCachedResourûCl›Á
;

40 
şass
 
	gCachedResourûHªdËBa£
;

41 
şass
 
	gDocLßd”
;

42 
şass
 
	gIn¥eùÜResourû
;

43 
şass
 
	gReque¡
;

44 
şass
 
	gPurg—bËBufãr
;

49 şas 
	cCachedResourû
 : 
public
 
NÚcİyabË
 {

50 
ä›nd
 
şass
 
Cache
;

51 
ä›nd
 
şass
 
	gIn¥eùÜResourû
;

53 
	gpublic
:

54 
	eTy³
 {

55 
ImageResourû
,

56 
	gCSSStyËSh“t
,

57 
	gSüt
,

58 
	gFÚtResourû


59 #ià
ENABLE
(
XSLT
)

60 , 
	gXSLStyËSh“t


62 #ià
ENABLE
(
XBL
)

63 , 
	gXBL


67 
	eStus
 {

68 
	gNÙCached
,

69 
	gUnknown
,

70 
	gNew
,

71 
	gP’dšg
,

72 
	gCached


75 
CachedResourû
(cÚ¡ 
SŒšg
& 
u¾
, 
Ty³
);

76 
	gvœtu®
 ~
CachedResourû
();

78 
vœtu®
 
lßd
(
DocLßd”
* 
docLßd”
è{†ßd(docLßd”, 
çl£
, 
DoSecur™yCheck
, 
Œue
); }

79 
lßd
(
DocLßd”
*, 
boŞ
 
šüem’l
, 
Secur™yCheckPŞicy
, boŞ 
£ndResourûLßdC®lbacks
);

81 
vœtu®
 
£tEncodšg
(cÚ¡ 
SŒšg
&) { }

82 
vœtu®
 
SŒšg
 
’codšg
() const {  String(); }

83 
vœtu®
 
d©a
(
PassRefPŒ
<
Sh¬edBufãr
> d©a, 
boŞ
 
®lD©aReûived
) = 0;

84 
vœtu®
 
”rÜ
() = 0;

85 
vœtu®
 
h‰pStusCodeE¼Ü
(è{ 
”rÜ
(); }

87 cÚ¡ 
	gSŒšg
 &
u¾
(ècÚ¡ {  
	gm_u¾
; }

88 
Ty³
 
ty³
(ècÚ¡ {  
	gm_ty³
; }

90 
addCl›Á
(
CachedResourûCl›Á
*);

91 
»moveCl›Á
(
CachedResourûCl›Á
*);

92 
boŞ
 
hasCl›Ás
(ècÚ¡ {  !
	gm_ş›Ás
.
isEm±y
(); }

93 
d–‘eIfPossibË
();

95 
	eP»lßdResuÉ
 {

96 
	gP»lßdNÙReã»nûd
,

97 
	gP»lßdReã»nûd
,

98 
	gP»lßdReã»nûdWheLßdšg
,

99 
	gP»lßdReã»nûdWheCom¶‘e


101 
P»lßdResuÉ
 
´–ßdResuÉ
(ècÚ¡ {  
	gm_´–ßdResuÉ
; }

102 
£tReque¡edFromN‘wÜkšgLay”
(è{ 
	gm_»que¡edFromN‘wÜkšgLay”
 = 
Œue
; }

104 
vœtu®
 
didAddCl›Á
(
CachedResourûCl›Á
*) = 0;

105 
vœtu®
 
®lCl›ÁsRemoved
() { }

107 
couÁ
(ècÚ¡ {  
	gm_ş›Ás
.
size
(); }

109 
Stus
 
¡©us
(ècÚ¡ {  
	gm_¡©us
; }

111 
size
(ècÚ¡ {  
’codedSize
(è+ 
decodedSize
(è+ 
ov”h—dSize
(); }

112 
’codedSize
(ècÚ¡ {  
	gm_’codedSize
; }

113 
decodedSize
(ècÚ¡ {  
	gm_decodedSize
; }

114 
ov”h—dSize
() const;

116 
boŞ
 
isLßded
(ècÚ¡ {  !
	gm_lßdšg
; }

117 
£tLßdšg
(
boŞ
 
b
è{ 
	gm_lßdšg
 = b; }

119 
vœtu®
 
boŞ
 
isImage
(ècÚ¡ {  
	gçl£
; }

121 
acûssCouÁ
(ècÚ¡ {  
	gm_acûssCouÁ
; }

122 
šü—£AcûssCouÁ
(è{ 
	gm_acûssCouÁ
++; }

126 
fšish
();

132 
£tInCache
(
boŞ
 
šCache
è{ 
	gm_šCache
 = inCache; }

133 
boŞ
 
šCache
(ècÚ¡ {  
	gm_šCache
; }

135 
£tInLiveDecodedResourûsLi¡
(
boŞ
 
b
è{ 
	gm_šLiveDecodedResourûsLi¡
 = b; }

136 
boŞ
 
šLiveDecodedResourûsLi¡
(è{  
	gm_šLiveDecodedResourûsLi¡
; }

138 
£tReque¡
(
Reque¡
*);

140 
Sh¬edBufãr
* 
d©a
(ècÚ¡ { 
ASSERT
(!
m_purg—bËD©a
);  
	gm_d©a
.
g‘
(); }

142 
£tRe¥Ú£
(cÚ¡ 
ResourûRe¥Ú£
&);

143 cÚ¡ 
	gResourûRe¥Ú£
& 
»¥Ú£
(ècÚ¡ {  
	gm_»¥Ú£
; }

145 
boŞ
 
ÿnD–‘e
(ècÚ¡ {  !
hasCl›Ás
(è&& !
	gm_»que¡
 && !
	gm_´–ßdCouÁ
 && !
	gm_hªdËCouÁ
 && !
	gm_»sourûToRev®id©e
 && !
	gm_´oxyResourû
; }

147 
boŞ
 
isExpœed
() const;

149 
vœtu®
 
boŞ
 
scheduË
(ècÚ¡ {  
	gçl£
; }

153 
SŒšg
 
acû±
(ècÚ¡ {  
	gm_acû±
; }

154 
£tAcû±
(cÚ¡ 
SŒšg
& 
acû±
è{ 
	gm_acû±
 =‡ccept; }

156 
boŞ
 
”rÜOccu¼ed
(ècÚ¡ {  
	gm_”rÜOccu¼ed
; }

157 
boŞ
 
£ndResourûLßdC®lbacks
(ècÚ¡ {  
	gm_£ndResourûLßdC®lbacks
; }

159 
vœtu®
 
de¡royDecodedD©a
() { }

161 
£tDocLßd”
(
DocLßd”
* 
docLßd”
è{ 
	gm_docLßd”
 = docLoader; }

163 
boŞ
 
isP»lßded
(ècÚ¡ {  
	gm_´–ßdCouÁ
; }

164 
šü—£P»lßdCouÁ
(è{ ++
	gm_´–ßdCouÁ
; }

165 
deü—£P»lßdCouÁ
(è{ 
ASSERT
(
m_´–ßdCouÁ
); --
	gm_´–ßdCouÁ
; }

167 
»gi¡”HªdË
(
CachedResourûHªdËBa£
* 
h
è{ ++
	gm_hªdËCouÁ
; ià(
	gm_»sourûToRev®id©e
è
	gm_hªdËsToRev®id©e
.
add
(h); }

168 
uÄegi¡”HªdË
(
CachedResourûHªdËBa£
* 
h
è{ 
ASSERT
(
m_hªdËCouÁ
 > 0); --
	gm_hªdËCouÁ
; ià(
	gm_»sourûToRev®id©e
è
	gm_hªdËsToRev®id©e
.
»move
(h); ià(!m_hªdËCouÁè
d–‘eIfPossibË
(); }

170 
boŞ
 
ÿnU£CacheV®id©Ü
() const;

171 
boŞ
 
mu¡Rev®id©e
(
CachePŞicy
) const;

172 
boŞ
 
isCacheV®id©Ü
(ècÚ¡ {  
	gm_»sourûToRev®id©e
; }

173 
CachedResourû
* 
»sourûToRev®id©e
(ècÚ¡ {  
	gm_»sourûToRev®id©e
; }

175 
boŞ
 
isPurg—bË
() const;

176 
boŞ
 
wasPurged
() const;

181 
boŞ
 
makePurg—bË
(boŞ 
purg—bË
);

183 
	g´Ùeùed
:

184 
£tEncodedSize
();

185 
£tDecodedSize
();

186 
didAcûssDecodedD©a
(
timeSmp
);

188 
boŞ
 
isSaãToMakePurg—bË
() const;

190 
	gHashCouÁedS‘
<
	gCachedResourûCl›Á
*> 
	gm_ş›Ás
;

192 
SŒšg
 
	gm_u¾
;

193 
SŒšg
 
	gm_acû±
;

194 
Reque¡
* 
	gm_»que¡
;

196 
ResourûRe¥Ú£
 
	gm_»¥Ú£
;

197 
	gm_»¥Ú£Time¡amp
;

199 
	gRefPŒ
<
	gSh¬edBufãr
> 
	gm_d©a
;

200 
	gOwnPŒ
<
	gPurg—bËBufãr
> 
	gm_purg—bËD©a
;

202 
Ty³
 
	gm_ty³
;

203 
Stus
 
	gm_¡©us
;

205 
boŞ
 
	gm_”rÜOccu¼ed
;

207 
	g´iv©e
:

208 
addCl›ÁToS‘
(
CachedResourûCl›Á
*);

211 
£tResourûToRev®id©e
(
CachedResourû
*);

212 
sw™chCl›ÁsToRev®id©edResourû
();

213 
ş—rResourûToRev®id©e
();

214 
upd©eRe¥Ú£Aá”Rev®id©iÚ
(cÚ¡ 
ResourûRe¥Ú£
& 
v®id©šgRe¥Ú£
);

216 
cu¼’tAge
() const;

217 
äeshÃssLiãtime
() const;

219 
	gm_’codedSize
;

220 
	gm_decodedSize
;

221 
	gm_acûssCouÁ
;

222 
	gm_šLiveDecodedResourûsLi¡
;

223 
	gm_Ï¡DecodedAcûssTime
;

225 
boŞ
 
	gm_£ndResourûLßdC®lbacks
;

227 
	gm_´–ßdCouÁ
;

228 
P»lßdResuÉ
 
	gm_´–ßdResuÉ
;

229 
boŞ
 
	gm_»que¡edFromN‘wÜkšgLay”
;

231 
	g´Ùeùed
:

232 
boŞ
 
m_šCache
;

233 
boŞ
 
	gm_lßdšg
;

234 #iâdeà
NDEBUG


235 
boŞ
 
	gm_d–‘ed
;

236 
	gm_ÌuIndex
;

239 
	g´iv©e
:

240 
CachedResourû
* 
m_ÃxtInAÎResourûsLi¡
;

241 
CachedResourû
* 
	gm_´evInAÎResourûsLi¡
;

243 
CachedResourû
* 
	gm_ÃxtInLiveResourûsLi¡
;

244 
CachedResourû
* 
	gm_´evInLiveResourûsLi¡
;

246 
DocLßd”
* 
	gm_docLßd”
;

248 
	gm_hªdËCouÁ
;

253 
CachedResourû
* 
	gm_»sourûToRev®id©e
;

256 
CachedResourû
* 
	gm_´oxyResourû
;

259 
	gHashS‘
<
	gCachedResourûHªdËBa£
*> 
	gm_hªdËsToRev®id©e
;

	@CachedResourceClient.h

25 #iâdeà
CachedResourûCl›Á_h


26 
	#CachedResourûCl›Á_h


	)

28 
	~<wtf/Fa¡AÎocBa£.h
>

30 #ià
ENABLE
(
XBL
)

31 
Çme¥aû
 
	gXBL
 {

32 
şass
 
	gXBLDocum’t
;

36 
Çme¥aû
 
	gWebCÜe
 {

38 
şass
 
	gCachedCSSStyËSh“t
;

39 
şass
 
	gCachedFÚt
;

40 
şass
 
	gCachedResourû
;

41 
şass
 
	gCachedImage
;

42 
şass
 
	gSŒšg
;

43 
şass
 
	gImage
;

44 
şass
 
	gIÁReù
;

45 
şass
 
	gKURL
;

54 şas 
	cCachedResourûCl›Á
 : 
public
 
Fa¡AÎocBa£


56 
public
:

57 
vœtu®
 ~
CachedResourûCl›Á
() { }

61 
vœtu®
 
imageChªged
(
CachedImage
*, cÚ¡ 
IÁReù
* = 0) { };

67 
vœtu®
 
boŞ
 
wlR’d”Image
(
CachedImage
*è{  
	gçl£
; }

69 
vœtu®
 
£tCSSStyËSh“t
(cÚ¡ 
SŒšg
& , cÚ¡ 
KURL
& , cÚ¡ SŒšg& , cÚ¡ 
CachedCSSStyËSh“t
*) { }

70 
vœtu®
 
£tXSLStyËSh“t
(cÚ¡ 
SŒšg
& , cÚ¡ 
KURL
& , const String& ) { }

72 
vœtu®
 
fÚtLßded
(
CachedFÚt
*) {};

74 #ià
ENABLE
(
XBL
)

75 
vœtu®
 
£tXBLDocum’t
(cÚ¡ 
SŒšg
& , 
XBL
::
XBLDocum’t
*) { }

78 
vœtu®
 
nÙifyFšished
(
CachedResourû
*) { }

	@CachedResourceClientWalker.cpp

26 
	~"cÚfig.h
"

27 
	~"CachedResourûCl›ÁW®k”.h
"

29 
Çme¥aû
 
	gWebCÜe
 {

31 
	gCachedResourûCl›ÁW®k”
::
CachedResourûCl›ÁW®k”
(cÚ¡ 
HashCouÁedS‘
<
CachedResourûCl›Á
*>& 
£t
)

32 : 
m_ş›ÁS‘
(
£t
), 
m_ş›ÁVeùÜ
(£t.
size
()), 
m_šdex
(0)

34 
	gHashCouÁedS‘
<
	tCachedResourûCl›Á
*>::
	tcÚ¡_™”©Ü
 
	tI‹¿tÜ
;

35 
I‹¿tÜ
 
	g’d
 = 
£t
.
’d
();

36 
size_t
 
	gş›ÁIndex
 = 0;

37 
I‹¿tÜ
 
	gcu¼’t
 = 
£t
.
begš
(); cu¼’ˆ!ğ
’d
; ++current)

38 
	gm_ş›ÁVeùÜ
[
ş›ÁIndex
++] = 
cu¼’t
->
fœ¡
;

41 
CachedResourûCl›Á
* 
	gCachedResourûCl›ÁW®k”
::
Ãxt
()

43 
size_t
 
size
 = 
m_ş›ÁVeùÜ
.size();

44 
	gm_šdex
 < 
	gsize
) {

45 
CachedResourûCl›Á
* 
	gÃxt
 = 
m_ş›ÁVeùÜ
[
m_šdex
++];

46 ià(
	gm_ş›ÁS‘
.
cÚšs
(
Ãxt
))

47  
	gÃxt
;

	@CachedResourceClientWalker.h

25 #iâdeà
CachedResourûCl›ÁW®k”_h


26 
	#CachedResourûCl›ÁW®k”_h


	)

28 
	~<wtf/HashCouÁedS‘.h
>

29 
	~<wtf/VeùÜ.h
>

31 
Çme¥aû
 
	gWebCÜe
 {

33 
şass
 
	gCachedResourûCl›Á
;

37 şas 
	cCachedResourûCl›ÁW®k”
 {

38 
	gpublic
:

39 
CachedResourûCl›ÁW®k”
(cÚ¡ 
HashCouÁedS‘
<
CachedResourûCl›Á
*>&);

40 
CachedResourûCl›Á
* 
Ãxt
();

41 
	g´iv©e
:

42 cÚ¡ 
HashCouÁedS‘
<
CachedResourûCl›Á
*>& 
m_ş›ÁS‘
;

43 
	gVeùÜ
<
	gCachedResourûCl›Á
*> 
	gm_ş›ÁVeùÜ
;

44 
size_t
 
	gm_šdex
;

	@CachedResourceHandle.cpp

26 
	~"cÚfig.h
"

27 
	~"CachedResourûHªdË.h
"

29 
Çme¥aû
 
	gWebCÜe
 {

31 
	gCachedResourûHªdËBa£
::
£tResourû
(
CachedResourû
* 
»sourû
)

33 ià(
»sourû
 =ğ
m_»sourû
)

35 ià(
	gm_»sourû
)

36 
	gm_»sourû
->
uÄegi¡”HªdË
(
this
);

37 
	gm_»sourû
 = 
»sourû
;

38 ià(
	gm_»sourû
)

39 
	gm_»sourû
->
»gi¡”HªdË
(
this
);

	@CachedResourceHandle.h

26 #iâdeà
CachedResourûHªdË_h


27 
	#CachedResourûHªdË_h


	)

29 
	~"CachedResourû.h
"

31 
Çme¥aû
 
	gWebCÜe
 {

33 şas 
	cCachedResourûHªdËBa£
 {

34 
	gpublic
:

35 ~
CachedResourûHªdËBa£
(è{ ià(
m_»sourû
èm_»sourû->
uÄegi¡”HªdË
(
this
); }

36 
CachedResourû
* 
g‘
(ècÚ¡ {  
	gm_»sourû
; }

38 
boŞ
 
	gİ”©Ü
!(ècÚ¡ {  !
	gm_»sourû
; }

42 
	gCachedResourû
* (
	tCachedResourûHªdËBa£
::*
	tUn¥ecif›dBoŞTy³
);

43 
İ”©Ü
 
Un¥ecif›dBoŞTy³
(ècÚ¡ {  
	gm_»sourû
 ? &
	gCachedResourûHªdËBa£
::
m_»sourû
 : 0; }

45 
	g´Ùeùed
:

46 
CachedResourûHªdËBa£
(è: 
m_»sourû
(0) {}

47 
CachedResourûHªdËBa£
(
CachedResourû
* 
»s
è{ 
m_»sourû
 =„es; ià(
	gm_»sourû
èm_»sourû->
»gi¡”HªdË
(
this
); }

48 
CachedResourûHªdËBa£
(cÚ¡ CachedResourûHªdËBa£& 
o
è: 
m_»sourû
(o.m_»sourûè{ ià(m_»sourûèm_»sourû->
»gi¡”HªdË
(
this
); }

50 
£tResourû
(
CachedResourû
*);

52 
	g´iv©e
:

53 
CachedResourûHªdËBa£
& 
İ”©Ü
=(cÚ¡ CachedResourûHªdËBa£&è{  *
this
; }

55 
ä›nd
 
şass
 
	gCachedResourû
;

57 
CachedResourû
* 
	gm_»sourû
;

60 
	g‹m¶©e
 <
şass
 
	gR
> cÏs 
	cCachedResourûHªdË
 : 
public
 
CachedResourûHªdËBa£
 {

61 
public
:

62 
CachedResourûHªdË
() { }

63 
CachedResourûHªdË
(
R
* 
»s
);

64 
CachedResourûHªdË
(cÚ¡ CachedResourûHªdË<
R
>& 
o
è: 
CachedResourûHªdËBa£
(o) { }

66 
R
* 
g‘
(ècÚ¡ {  
»š‹½»t_ÿ¡
<R*>(
CachedResourûHªdËBa£
::get()); }

67 
R
* 
	gİ”©Ü
->(ècÚ¡ {  
g‘
(); }

69 
	gCachedResourûHªdË
& 
	gİ”©Ü
=(
R
* 
»s
è{ 
£tResourû
Ôes);  *
	gthis
; }

70 
	gCachedResourûHªdË
& 
	gİ”©Ü
=(cÚ¡ 
CachedResourûHªdË
& 
o
è{ 
£tResourû
(o.
g‘
());  *
	gthis
; }

71 
boŞ
 
	gİ”©Ü
==(cÚ¡ 
CachedResourûHªdËBa£
& 
o
ècÚ¡ {  
g‘
() == o.get(); }

72 
boŞ
 
	gİ”©Ü
!=(cÚ¡ 
CachedResourûHªdËBa£
& 
o
ècÚ¡ {  
g‘
() != o.get(); }

78 
	g‹m¶©e
 <
şass
 
	gR
>

79 #ià!
	$COMPILER
(
WINSCW
)

80 
šlše


82 
CachedResourûHªdË
<
R
>::
	$CachedResourûHªdË
(
R
* 
»s
è: 
	$CachedResourûHªdËBa£
(
»s
)

84 
	}
}

86 
‹m¶©e
 <
şass
 
R
, cÏs 
	gRR
> 
boŞ
 
	gİ”©Ü
==(cÚ¡ 
CachedResourûHªdË
<R>& 
h
, cÚ¡ 
RR
* 
	g»s
)

88  
	gh
.
g‘
(è=ğ
»s
;

90 
	g‹m¶©e
 <
şass
 
	gR
, cÏs 
	gRR
> 
boŞ
 
	gİ”©Ü
==(cÚ¡ 
RR
* 
»s
, cÚ¡ 
	gCachedResourûHªdË
<R>& 
	gh
)

92  
	gh
.
g‘
(è=ğ
»s
;

94 
	g‹m¶©e
 <
şass
 
	gR
, cÏs 
	gRR
> 
boŞ
 
	gİ”©Ü
!=(cÚ¡ 
CachedResourûHªdË
<
R
>& 
h
, cÚ¡ 
RR
* 
	g»s
)

96  
	gh
.
g‘
(è!ğ
»s
;

98 
	g‹m¶©e
 <
şass
 
	gR
, cÏs 
	gRR
> 
boŞ
 
	gİ”©Ü
!=(cÚ¡ 
RR
* 
»s
, cÚ¡ 
	gCachedResourûHªdË
<R>& 
	gh
)

100  
	gh
.
g‘
(è!ğ
»s
;

	@CachedScript.cpp

27 
	~"cÚfig.h
"

28 
	~"CachedSüt.h
"

30 
	~"CachedResourûCl›Á.h
"

31 
	~"CachedResourûCl›ÁW®k”.h
"

32 
	~"Sh¬edBufãr.h
"

33 
	~"TextResourûDecod”.h
"

34 
	~<wtf/VeùÜ.h
>

36 
Çme¥aû
 
	gWebCÜe
 {

38 
	gCachedSüt
::
CachedSüt
(cÚ¡ 
SŒšg
& 
u¾
, cÚ¡ SŒšg& 
ch¬£t
)

39 : 
CachedResourû
(
u¾
, 
Süt
)

40 , 
m_decod”
(
TextResourûDecod”
::
ü—‹
("­¶iÿtiÚ/javasüt", 
ch¬£t
))

41 , 
m_decodedD©aD–‘iÚTim”
(
this
, &
CachedSüt
::
decodedD©aD–‘iÚTim”Fœed
)

46 
£tAcû±
("*/*");

49 
	gCachedSüt
::~
CachedSüt
()

53 
CachedSüt
::
didAddCl›Á
(
CachedResourûCl›Á
* 
c
)

55 ià(!
m_lßdšg
)

56 
c
->
nÙifyFšished
(
this
);

59 
	gCachedSüt
::
®lCl›ÁsRemoved
()

61 
m_decodedD©aD–‘iÚTim”
.
¡¬tOÃShÙ
(0);

64 
	gCachedSüt
::
£tEncodšg
(cÚ¡ 
SŒšg
& 
chs
)

66 
m_decod”
->
£tEncodšg
(
chs
, 
TextResourûDecod”
::
EncodšgFromHTTPH—d”
);

69 
SŒšg
 
	gCachedSüt
::
’codšg
() const

71  
m_decod”
->
’codšg
().
Çme
();

74 cÚ¡ 
	gSŒšg
& 
	gCachedSüt
::
süt
()

76 
ASSERT
(!
isPurg—bË
());

78 ià(!
	gm_süt
 && 
	gm_d©a
) {

79 
	gm_süt
 = 
m_decod”
->
decode
(
m_d©a
->
d©a
(), 
’codedSize
());

80 
	gm_süt
 +ğ
m_decod”
->
æush
();

81 
£tDecodedSize
(
m_süt
.
Ëngth
(è* (
UCh¬
));

84 
	gm_decodedD©aD–‘iÚTim”
.
¡¬tOÃShÙ
(0);

85  
	gm_süt
;

88 
	gCachedSüt
::
d©a
(
PassRefPŒ
<
Sh¬edBufãr
> d©a, 
boŞ
 
®lD©aReûived
)

90 ià(!
	g®lD©aReûived
)

93 
	gm_d©a
 = 
d©a
;

94 
£tEncodedSize
(
m_d©a
.
g‘
(è? m_d©a->
size
() : 0);

95 
	gm_lßdšg
 = 
çl£
;

96 
checkNÙify
();

99 
	gCachedSüt
::
checkNÙify
()

101 ià(
m_lßdšg
)

104 
CachedResourûCl›ÁW®k”
 
w
(
m_ş›Ás
);

105 
CachedResourûCl›Á
* 
	gc
 = 
w
.
Ãxt
())

106 
c
->
nÙifyFšished
(
this
);

109 
	gCachedSüt
::
”rÜ
()

111 
m_lßdšg
 = 
çl£
;

112 
	gm_”rÜOccu¼ed
 = 
Œue
;

113 
checkNÙify
();

116 
	gCachedSüt
::
de¡royDecodedD©a
()

118 
m_süt
 = 
SŒšg
();

119 
£tDecodedSize
(0);

120 ià(
isSaãToMakePurg—bË
())

121 
makePurg—bË
(
Œue
);

124 
	gCachedSüt
::
decodedD©aD–‘iÚTim”Fœed
(
Tim”
<
CachedSüt
>*)

126 
de¡royDecodedD©a
();

	@CachedScript.h

26 #iâdeà
CachedSüt_h


27 
	#CachedSüt_h


	)

29 
	~"CachedResourû.h
"

30 
	~"Tim”.h
"

32 
Çme¥aû
 
	gWebCÜe
 {

34 
şass
 
	gDocLßd”
;

35 
şass
 
	gTextResourûDecod”
;

37 şas 
	cCachedSüt
 : 
public
 
CachedResourû
 {

38 
public
:

39 
CachedSüt
(cÚ¡ 
SŒšg
& 
u¾
, cÚ¡ SŒšg& 
ch¬£t
);

40 
	gvœtu®
 ~
CachedSüt
();

42 cÚ¡ 
	gSŒšg
& 
süt
();

44 
vœtu®
 
didAddCl›Á
(
CachedResourûCl›Á
*);

45 
vœtu®
 
®lCl›ÁsRemoved
();

47 
vœtu®
 
£tEncodšg
(cÚ¡ 
SŒšg
&);

48 
vœtu®
 
SŒšg
 
’codšg
() const;

49 
vœtu®
 
d©a
(
PassRefPŒ
<
Sh¬edBufãr
> d©a, 
boŞ
 
®lD©aReûived
);

50 
vœtu®
 
”rÜ
();

52 
vœtu®
 
boŞ
 
scheduË
(ècÚ¡ {  
	gçl£
; }

54 
checkNÙify
();

56 
vœtu®
 
de¡royDecodedD©a
();

58 
	g´iv©e
:

59 
decodedD©aD–‘iÚTim”Fœed
(
Tim”
<
CachedSüt
>*);

61 
SŒšg
 
	gm_süt
;

62 
	gRefPŒ
<
	gTextResourûDecod”
> 
	gm_decod”
;

63 
	gTim”
<
	gCachedSüt
> 
	gm_decodedD©aD–‘iÚTim”
;

	@CachedXBLDocument.cpp

27 
	~"cÚfig.h
"

29 #ià
ENABLE
(
XBL
)

31 
	~"CachedXBLDocum’t.h
"

33 
	~"CachedResourûCl›ÁW®k”.h
"

34 
	~"TextResourûDecod”.h
"

35 
	~<wtf/VeùÜ.h
>

37 
Çme¥aû
 
	gWebCÜe
 {

39 
	gCachedXBLDocum’t
::
CachedXBLDocum’t
(cÚ¡ 
SŒšg
 &
u¾
)

40 : 
CachedResourû
(
u¾
, 
XBL
), 
m_docum’t
(0)

43 
£tAcû±
("text/xml,‡pplication/xml,‡pplication/xhtml+xml,ext/xsl,‡pplication/rss+xml,‡pplication/atom+xml");

45 
	gm_decod”
 = 
Ãw
 
TextResourûDecod”
("application/xml");

48 
	gCachedXBLDocum’t
::~
CachedXBLDocum’t
()

50 ià(
m_docum’t
)

51 
m_docum’t
->
d”ef
();

54 
	gCachedXBLDocum’t
::
»f
(
CachedResourûCl›Á
 *
c
)

56 
CachedResourû
::
»f
(
c
);

57 ià(!
	gm_lßdšg
)

58 
	gc
->
£tXBLDocum’t
(
m_u¾
, 
m_docum’t
);

61 
	gCachedXBLDocum’t
::
£tEncodšg
(cÚ¡ 
SŒšg
& 
chs
)

63 
m_decod”
->
£tEncodšg
(
chs
, 
TextResourûDecod”
::
EncodšgFromHTTPH—d”
);

66 
SŒšg
 
	gCachedXBLDocum’t
::
’codšg
() const

68  
m_decod”
->
’codšg
().
Çme
();

71 
	gCachedXBLDocum’t
::
d©a
(
VeùÜ
<>& d©a, 
boŞ
 )

73 ià(!
	g®lD©aReûived
)

76 
ASSERT
(!
m_docum’t
);

78 
	gm_docum’t
 = 
Ãw
 
XBL
::
XBLDocum’t
();

79 
	gm_docum’t
->
»f
();

80 
	gm_docum’t
->
İ’
();

82 
	gm_docum’t
->
wr™e
(
m_decod”
->
decode
(
d©a
.d©a(), d©a.
size
()));

83 
£tSize
(
d©a
.
size
());

85 
	gm_docum’t
->
fšishP¬sšg
();

86 
	gm_docum’t
->
şo£
();

87 
	gm_lßdšg
 = 
çl£
;

88 
checkNÙify
();

91 
	gCachedXBLDocum’t
::
checkNÙify
()

93 ià(
m_lßdšg
)

96 
CachedResourûCl›ÁW®k”
 
w
(
m_ş›Ás
);

97 
CachedResourûCl›Á
 *
	gc
 = 
w
.
Ãxt
())

98 
c
->
£tXBLDocum’t
(
m_u¾
, 
m_docum’t
);

101 
	gCachedXBLDocum’t
::
”rÜ
()

103 
m_lßdšg
 = 
çl£
;

104 
	gm_”rÜOccu¼ed
 = 
Œue
;

105 
checkNÙify
();

	@CachedXBLDocument.h

26 #iâdeà
CachedXBLDocum’t_h


27 
	#CachedXBLDocum’t_h


	)

29 
	~"CachedResourû.h
"

30 
	~<wtf/VeùÜ.h
>

32 
Çme¥aû
 
	gWebCÜe
 {

33 
şass
 
	gCachedResourû
;

34 
şass
 
	gReque¡
;

35 
şass
 
	gDocLßd”
;

36 
şass
 
	gTextResourûDecod”
;

37 
şass
 
	gCachedResourûCl›Á
;

39 #ià
ENABLE
(
XBL
)

40 şas 
	cCachedXBLDocum’t
 : 
public
 
CachedResourû
 {

41 
public
:

42 
CachedXBLDocum’t
(cÚ¡ 
SŒšg
& 
u¾
);

43 
	gvœtu®
 ~
CachedXBLDocum’t
();

45 
	gXBL
::
XBLDocum’t
* 
docum’t
(ècÚ¡ {  
m_docum’t
; }

47 
vœtu®
 
addCl›Á
(
CachedResourûCl›Á
*);

49 
vœtu®
 
£tEncodšg
(cÚ¡ 
SŒšg
&);

50 
vœtu®
 
SŒšg
 
’codšg
() const;

51 
vœtu®
 
d©a
(
VeùÜ
<>&, 
boŞ
 
®lD©aReûived
);

52 
vœtu®
 
”rÜ
();

54 
vœtu®
 
boŞ
 
scheduË
(ècÚ¡ {  
	gŒue
; }

56 
checkNÙify
();

58 
	g´Ùeùed
:

59 
XBL
::
XBLDocum’t
* 
m_docum’t
;

60 
	gRefPŒ
<
	gTextResourûDecod”
> 
	gm_decod”
;

	@CachedXSLStyleSheet.cpp

27 
	~"cÚfig.h
"

28 
	~"CachedXSLStyËSh“t.h
"

30 
	~"CachedResourûCl›Á.h
"

31 
	~"CachedResourûCl›ÁW®k”.h
"

32 
	~"Sh¬edBufãr.h
"

33 
	~"TextResourûDecod”.h
"

34 
	~<wtf/VeùÜ.h
>

36 
Çme¥aû
 
	gWebCÜe
 {

38 #ià
ENABLE
(
XSLT
)

40 
	gCachedXSLStyËSh“t
::
CachedXSLStyËSh“t
(cÚ¡ 
SŒšg
 &
u¾
)

41 : 
CachedResourû
(
u¾
, 
XSLStyËSh“t
)

42 , 
m_decod”
(
TextResourûDecod”
::
ü—‹
("text/xsl"))

46 
£tAcû±
("text/xml,‡pplication/xml,‡pplication/xhtml+xml,ext/xsl,‡pplication/rss+xml,‡pplication/atom+xml");

49 
	gCachedXSLStyËSh“t
::
didAddCl›Á
(
CachedResourûCl›Á
* 
c
)

51 ià(!
m_lßdšg
)

52 
c
->
£tXSLStyËSh“t
(
m_u¾
, 
m_»¥Ú£
.
u¾
(), 
m_sh“t
);

55 
	gCachedXSLStyËSh“t
::
£tEncodšg
(cÚ¡ 
SŒšg
& 
chs
)

57 
m_decod”
->
£tEncodšg
(
chs
, 
TextResourûDecod”
::
EncodšgFromHTTPH—d”
);

60 
SŒšg
 
	gCachedXSLStyËSh“t
::
’codšg
() const

62  
m_decod”
->
’codšg
().
Çme
();

65 
	gCachedXSLStyËSh“t
::
d©a
(
PassRefPŒ
<
Sh¬edBufãr
> d©a, 
boŞ
 
®lD©aReûived
)

67 ià(!
	g®lD©aReûived
)

70 
	gm_d©a
 = 
d©a
;

71 
£tEncodedSize
(
m_d©a
.
g‘
(è? m_d©a->
size
() : 0);

72 ià(
	gm_d©a
.
g‘
()) {

73 
	gm_sh“t
 = 
SŒšg
(
m_decod”
->
decode
(
m_d©a
->
d©a
(), 
’codedSize
()));

74 
	gm_sh“t
 +ğ
m_decod”
->
æush
();

76 
	gm_lßdšg
 = 
çl£
;

77 
checkNÙify
();

80 
	gCachedXSLStyËSh“t
::
checkNÙify
()

82 ià(
m_lßdšg
)

85 
CachedResourûCl›ÁW®k”
 
w
(
m_ş›Ás
);

86 
CachedResourûCl›Á
 *
	gc
 = 
w
.
Ãxt
())

87 
c
->
£tXSLStyËSh“t
(
m_u¾
, 
m_»¥Ú£
.
u¾
(), 
m_sh“t
);

90 
	gCachedXSLStyËSh“t
::
”rÜ
()

92 
m_lßdšg
 = 
çl£
;

93 
	gm_”rÜOccu¼ed
 = 
Œue
;

94 
checkNÙify
();

	@CachedXSLStyleSheet.h

26 #iâdeà
CachedXSLStyËSh“t_h


27 
	#CachedXSLStyËSh“t_h


	)

29 
	~"CachedResourû.h
"

30 
	~<wtf/VeùÜ.h
>

32 
Çme¥aû
 
	gWebCÜe
 {

34 
şass
 
	gDocLßd”
;

35 
şass
 
	gTextResourûDecod”
;

37 #ià
ENABLE
(
XSLT
)

38 şas 
	cCachedXSLStyËSh“t
 : 
public
 
CachedResourû
 {

39 
public
:

40 
CachedXSLStyËSh“t
(cÚ¡ 
SŒšg
& 
u¾
);

42 cÚ¡ 
	gSŒšg
& 
sh“t
(ècÚ¡ {  
	gm_sh“t
; }

44 
vœtu®
 
didAddCl›Á
(
CachedResourûCl›Á
*);

46 
vœtu®
 
£tEncodšg
(cÚ¡ 
SŒšg
&);

47 
vœtu®
 
SŒšg
 
’codšg
() const;

48 
vœtu®
 
d©a
(
PassRefPŒ
<
Sh¬edBufãr
> d©a, 
boŞ
 
®lD©aReûived
);

49 
vœtu®
 
”rÜ
();

51 
vœtu®
 
boŞ
 
scheduË
(ècÚ¡ {  
	gŒue
; }

53 
checkNÙify
();

55 
	g´Ùeùed
:

56 
SŒšg
 
m_sh“t
;

57 
	gRefPŒ
<
	gTextResourûDecod”
> 
	gm_decod”
;

	@CrossOriginAccessControl.cpp

27 
	~"cÚfig.h
"

28 
	~"CrossOrigšAcûssCÚŒŞ.h
"

30 
	~"AtomicSŒšg.h
"

31 
	~"HTTPP¬£rs.h
"

32 
	~"ResourûRe¥Ú£.h
"

33 
	~"Secur™yOrigš.h
"

34 
	~<wtf/Th»adšg.h
>

36 
Çme¥aû
 
	gWebCÜe
 {

38 
boŞ
 
isOnAcûssCÚŒŞSim¶eReque¡M‘hodWh™–i¡
(cÚ¡ 
SŒšg
& 
m‘hod
)

40  
	gm‘hod
 =ğ"GET" || 
m‘hod
 == "HEAD" || method == "POST";

43 
boŞ
 
isOnAcûssCÚŒŞSim¶eReque¡H—d”Wh™–i¡
(cÚ¡ 
SŒšg
& 
Çme
, cÚ¡ SŒšg& 
v®ue
)

45 ià(
equ®IgnÜšgCa£
(
Çme
, "accept") ||ƒqualIgnoringCase(name, "accept-language") ||ƒqualIgnoringCase(name, "content-language"))

46  
	gŒue
;

49 ià(
equ®IgnÜšgCa£
(
Çme
, "content-type")) {

50 
SŒšg
 
	gmimeTy³
 = 
exŒaùMIMETy³FromMedŸTy³
(
v®ue
);

51  
equ®IgnÜšgCa£
(
mimeTy³
, "application/x-www-form-urlencoded")

52 || 
equ®IgnÜšgCa£
(
mimeTy³
, "multipart/form-data")

53 || 
equ®IgnÜšgCa£
(
mimeTy³
, "text/plain");

56  
	gçl£
;

59 
boŞ
 
isSim¶eCrossOrigšAcûssReque¡
(cÚ¡ 
SŒšg
& 
m‘hod
, cÚ¡ 
HTTPH—d”M­
& 
h—d”M­
)

61 ià(!
isOnAcûssCÚŒŞSim¶eReque¡M‘hodWh™–i¡
(
m‘hod
))

62  
	gçl£
;

64 
	gHTTPH—d”M­
::
cÚ¡_™”©Ü
 
’d
 = 
h—d”M­
.end();

65 
	gHTTPH—d”M­
::
cÚ¡_™”©Ü
 
™
 = 
h—d”M­
.
begš
(); 
	g™
 !ğ
’d
; ++it) {

66 ià(!
isOnAcûssCÚŒŞSim¶eReque¡H—d”Wh™–i¡
(
™
->
fœ¡
, it->
£cÚd
))

67  
	gçl£
;

70  
	gŒue
;

73 
	gHashS‘
<
	tSŒšg
, 
	tCa£FŞdšgHash
> 
	tHTTPH—d”S‘
;

74 
HTTPH—d”S‘
* 
ü—‹AÎowedCrossOrigšRe¥Ú£H—d”sS‘
()

76 
HTTPH—d”S‘
* 
	gh—d”S‘
 = 
Ãw
 
HashS‘
<
SŒšg
, 
	gCa£FŞdšgHash
>;

78 
	gh—d”S‘
->
add
("cache-control");

79 
	gh—d”S‘
->
add
("content-language");

80 
	gh—d”S‘
->
add
("content-type");

81 
	gh—d”S‘
->
add
("expires");

82 
	gh—d”S‘
->
add
("last-modified");

83 
	gh—d”S‘
->
add
("pragma");

85  
	gh—d”S‘
;

88 
boŞ
 
isOnAcûssCÚŒŞRe¥Ú£H—d”Wh™–i¡
(cÚ¡ 
SŒšg
& 
Çme
)

90 
AtomiÿÎyIn™ŸlizedStic
(
HTTPH—d”S‘
*, 
®lowedCrossOrigšRe¥Ú£H—d”s
 = 
ü—‹AÎowedCrossOrigšRe¥Ú£H—d”sS‘
());

92  
	g®lowedCrossOrigšRe¥Ú£H—d”s
->
cÚšs
(
Çme
);

95 
boŞ
 
·s£sAcûssCÚŒŞCheck
(cÚ¡ 
ResourûRe¥Ú£
& 
»¥Ú£
, boŞ 
šşudeC»d’tŸls
, 
Secur™yOrigš
* 
£cur™yOrigš
)

99 cÚ¡ 
	gSŒšg
& 
	gacûssCÚŒŞOrigšSŒšg
 = 
»¥Ú£
.
h‰pH—d”F›ld
("Access-Control-Allow-Origin");

100 ià(
	gacûssCÚŒŞOrigšSŒšg
 =ğ"*" && !
šşudeC»d’tŸls
)

101  
Œue
;

103 ià(
	g£cur™yOrigš
->
isUnique
())

104  
	gçl£
;

106 
	gRefPŒ
<
	gSecur™yOrigš
> 
	gacûssCÚŒŞOrigš
 = 
Secur™yOrigš
::
ü—‹FromSŒšg
(
acûssCÚŒŞOrigšSŒšg
);

107 ià(!
	gacûssCÚŒŞOrigš
->
isSameSchemeHo¡PÜt
(
£cur™yOrigš
))

108  
	gçl£
;

110 ià(
	gšşudeC»d’tŸls
) {

111 cÚ¡ 
	gSŒšg
& 
	gacûssCÚŒŞC»d’tŸlsSŒšg
 = 
»¥Ú£
.
h‰pH—d”F›ld
("Access-Control-Allow-Credentials");

112 ià(
	gacûssCÚŒŞC»d’tŸlsSŒšg
 != "true")

113  
çl£
;

116  
	gŒue
;

	@CrossOriginAccessControl.h

27 
Çme¥aû
 
	gWebCÜe
 {

29 
şass
 
	gHTTPH—d”M­
;

30 
şass
 
	gResourûRe¥Ú£
;

31 
şass
 
	gSecur™yOrigš
;

32 
şass
 
	gSŒšg
;

34 
boŞ
 
isSim¶eCrossOrigšAcûssReque¡
(cÚ¡ 
SŒšg
& 
m‘hod
, cÚ¡ 
HTTPH—d”M­
&);

35 
boŞ
 
isOnAcûssCÚŒŞSim¶eReque¡M‘hodWh™–i¡
(cÚ¡ 
SŒšg
&);

36 
boŞ
 
isOnAcûssCÚŒŞSim¶eReque¡H—d”Wh™–i¡
(cÚ¡ 
SŒšg
& 
Çme
, cÚ¡ SŒšg& 
v®ue
);

37 
boŞ
 
isOnAcûssCÚŒŞRe¥Ú£H—d”Wh™–i¡
(cÚ¡ 
SŒšg
&);

39 
boŞ
 
·s£sAcûssCÚŒŞCheck
(cÚ¡ 
ResourûRe¥Ú£
&, boŞ 
šşudeC»d’tŸls
, 
Secur™yOrigš
*);

	@CrossOriginPreflightResultCache.cpp

27 
	~"cÚfig.h
"

28 
	~"CrossOrigšP»æightResuÉCache.h
"

30 
	~"CrossOrigšAcûssCÚŒŞ.h
"

31 
	~"ResourûRe¥Ú£.h
"

32 
	~<wtf/Cu¼’tTime.h
>

33 
	~<wtf/StdLibExŒas.h
>

34 
	~<wtf/Th»adšg.h
>

36 
Çme¥aû
 
	gWebCÜe
 {

39 cÚ¡ 
	gdeçuÉP»æightCacheTimeoutSecÚds
 = 5;

40 cÚ¡ 
	gmaxP»æightCacheTimeoutSecÚds
 = 600;

42 
boŞ
 
·r£AcûssCÚŒŞMaxAge
(cÚ¡ 
SŒšg
& 
¡ršg
, & 
expœyD–
)

45 
boŞ
 
	gok
 = 
çl£
;

46 
	gexpœyD–
 = 
¡ršg
.
toUIÁSŒiù
(&
ok
);

47  
	gok
;

50 
	g‹m¶©e
<
şass
 
	gHashTy³
>

51 
addToAcûssCÚŒŞAÎowLi¡
(cÚ¡ 
SŒšg
& 
¡ršg
, 
¡¬t
, 
’d
, 
HashS‘
<SŒšg, 
HashTy³
>& 
£t
)

53 
SŒšgIm¶
* 
	g¡ršgIm¶
 = 
¡ršg
.
im¶
();

54 ià(!
	g¡ršgIm¶
)

58 
	g¡¬t
 <ğ
’d
 && 
isS·ûOrNewlše
((*
¡ršgIm¶
)[
¡¬t
]))

59 ++
¡¬t
;

62 ià(
	g¡¬t
 > 
	g’d
)

66 
	g’d
 && 
isS·ûOrNewlše
((*
¡ršgIm¶
)[
’d
]))

67 --
	g’d
;

69 
	g£t
.
add
(
¡ršg
.
sub¡ršg
(
¡¬t
, 
’d
 - start + 1));

72 
	g‹m¶©e
<
şass
 
	gHashTy³
>

73 
boŞ
 
·r£AcûssCÚŒŞAÎowLi¡
(cÚ¡ 
SŒšg
& 
¡ršg
, 
HashS‘
<SŒšg, 
HashTy³
>& 
£t
)

75 
	g¡¬t
 = 0;

76 
	g’d
;

77 (
	g’d
 = 
¡ršg
.
fšd
(',', 
¡¬t
)) != -1) {

78 ià(
¡¬t
 =ğ
’d
)

79  
çl£
;

81 
addToAcûssCÚŒŞAÎowLi¡
(
¡ršg
, 
¡¬t
, 
’d
 - 1, 
£t
);

82 
	g¡¬t
 = 
’d
 + 1;

84 ià(
	g¡¬t
 !ğ
¡©ic_ÿ¡
<>(
¡ršg
.
Ëngth
()))

85 
addToAcûssCÚŒŞAÎowLi¡
(
¡ršg
, 
¡¬t
, sŒšg.
Ëngth
(è- 1, 
£t
);

87  
	gŒue
;

90 
boŞ
 
	gCrossOrigšP»æightResuÉCacheI‹m
::
·r£
(cÚ¡ 
ResourûRe¥Ú£
& 
»¥Ú£
)

92 
m_m‘hods
.
ş—r
();

93 ià(!
·r£AcûssCÚŒŞAÎowLi¡
(
»¥Ú£
.
h‰pH—d”F›ld
("Acûss-CÚŒŞ-AÎow-M‘hods"), 
m_m‘hods
))

94  
	gçl£
;

96 
	gm_h—d”s
.
ş—r
();

97 ià(!
·r£AcûssCÚŒŞAÎowLi¡
(
»¥Ú£
.
h‰pH—d”F›ld
("Acûss-CÚŒŞ-AÎow-H—d”s"), 
m_h—d”s
))

98  
	gçl£
;

100 
	gexpœyD–
;

101 ià(
·r£AcûssCÚŒŞMaxAge
(
»¥Ú£
.
h‰pH—d”F›ld
("Acûss-CÚŒŞ-Max-Age"), 
expœyD–
)) {

102 ià(
	gexpœyD–
 > 
	gmaxP»æightCacheTimeoutSecÚds
)

103 
	gexpœyD–
 = 
maxP»æightCacheTimeoutSecÚds
;

105 
	gexpœyD–
 = 
deçuÉP»æightCacheTimeoutSecÚds
;

107 
	gm_absŞu‹ExpœyTime
 = 
cu¼’tTime
(è+ 
expœyD–
;

108  
	gŒue
;

111 
boŞ
 
	gCrossOrigšP»æightResuÉCacheI‹m
::
®lowsCrossOrigšM‘hod
(cÚ¡ 
SŒšg
& 
m‘hod
) const

113  
m_m‘hods
.
cÚšs
(
m‘hod
è|| 
isOnAcûssCÚŒŞSim¶eReque¡M‘hodWh™–i¡
(method);

116 
boŞ
 
	gCrossOrigšP»æightResuÉCacheI‹m
::
®lowsCrossOrigšH—d”s
(cÚ¡ 
HTTPH—d”M­
& 
»que¡H—d”s
) const

118 
HTTPH—d”M­
::
cÚ¡_™”©Ü
 
’d
 = 
»que¡H—d”s
.end();

119 
	gHTTPH—d”M­
::
cÚ¡_™”©Ü
 
™
 = 
»que¡H—d”s
.
begš
(); 
	g™
 !ğ
’d
; ++it) {

120 ià(!
	gm_h—d”s
.
cÚšs
(
™
->
fœ¡
è&& !
isOnAcûssCÚŒŞSim¶eReque¡H—d”Wh™–i¡
(™->fœ¡, it->
£cÚd
))

121  
	gçl£
;

123  
	gŒue
;

126 
boŞ
 
	gCrossOrigšP»æightResuÉCacheI‹m
::
®lowsReque¡
(boŞ 
šşudeC»d’tŸls
, cÚ¡ 
SŒšg
& 
m‘hod
, cÚ¡ 
HTTPH—d”M­
& 
»que¡H—d”s
) const

128 ià(
	gm_absŞu‹ExpœyTime
 < 
cu¼’tTime
())

129  
	gçl£
;

130 ià(
	gšşudeC»d’tŸls
 && !
	gm_üed’tŸls
)

131  
	gçl£
;

132 ià(!
®lowsCrossOrigšM‘hod
(
m‘hod
))

133  
	gçl£
;

134 ià(!
®lowsCrossOrigšH—d”s
(
»que¡H—d”s
))

135  
	gçl£
;

136  
	gŒue
;

139 
	gCrossOrigšP»æightResuÉCache
& CrossOrigšP»æightResuÉCache::
sh¬ed
()

141 
DEFINE_STATIC_LOCAL
(
CrossOrigšP»æightResuÉCache
, 
ÿche
, ());

142 
ASSERT
(
isMašTh»ad
());

143  
	gÿche
;

146 
	gCrossOrigšP»æightResuÉCache
::
­³ndEÁry
(cÚ¡ 
SŒšg
& 
Üigš
, cÚ¡ 
KURL
& 
u¾
, 
CrossOrigšP»æightResuÉCacheI‹m
* 
´eæightResuÉ
)

148 
ASSERT
(
isMašTh»ad
());

149 
	gm_´eæightHashM­
.
£t
(
¡d
::
make_·œ
(
Üigš
, 
u¾
), 
´eæightResuÉ
);

152 
boŞ
 
	gCrossOrigšP»æightResuÉCache
::
ÿnSkP»æight
(cÚ¡ 
SŒšg
& 
Üigš
, cÚ¡ 
KURL
& 
u¾
, boŞ 
šşudeC»d’tŸls
, cÚ¡ SŒšg& 
m‘hod
, cÚ¡ 
HTTPH—d”M­
& 
»que¡H—d”s
)

154 
ASSERT
(
isMašTh»ad
());

155 
	gCrossOrigšP»æightResuÉHashM­
::
™”©Ü
 
ÿcheIt
 = 
m_´eæightHashM­
.
fšd
(
¡d
::
make_·œ
(
Üigš
, 
u¾
));

156 ià(
	gÿcheIt
 =ğ
m_´eæightHashM­
.
’d
())

157  
çl£
;

159 ià(
	gÿcheIt
->
	g£cÚd
->
®lowsReque¡
(
šşudeC»d’tŸls
, 
m‘hod
, 
»que¡H—d”s
))

160  
	gŒue
;

162 
d–‘e
 
	gÿcheIt
->
	g£cÚd
;

163 
	gm_´eæightHashM­
.
»move
(
ÿcheIt
);

164  
	gçl£
;

167 
	gCrossOrigšP»æightResuÉCache
::
em±y
()

169 
ASSERT
(
isMašTh»ad
());

170 
d–‘eAÎV®ues
(
m_´eæightHashM­
);

171 
	gm_´eæightHashM­
.
ş—r
();

	@CrossOriginPreflightResultCache.h

27 #iâdeà
CrossOrigšP»æightResuÉCacheI‹m_h


28 
	#CrossOrigšP»æightResuÉCacheI‹m_h


	)

30 
	~"KURLHash.h
"

31 
	~"SŒšgHash.h
"

32 
	~<wtf/HashM­.h
>

33 
	~<wtf/HashS‘.h
>

35 
Çme¥aû
 
	gWebCÜe
 {

37 
şass
 
	gHTTPH—d”M­
;

38 
şass
 
	gResourûRe¥Ú£
;

40 şas 
	cCrossOrigšP»æightResuÉCacheI‹m
 : 
public
 
NÚcİyabË
 {

41 
public
:

42 
CrossOrigšP»æightResuÉCacheI‹m
(
boŞ
 
üed’tŸls
)

43 : 
m_absŞu‹ExpœyTime
(0)

44 , 
m_üed’tŸls
(
üed’tŸls
)

48 
boŞ
 
·r£
(cÚ¡ 
ResourûRe¥Ú£
&);

49 
boŞ
 
®lowsCrossOrigšM‘hod
(cÚ¡ 
SŒšg
&) const;

50 
boŞ
 
®lowsCrossOrigšH—d”s
(cÚ¡ 
HTTPH—d”M­
&) const;

51 
boŞ
 
®lowsReque¡
(boŞ 
šşudeC»d’tŸls
, cÚ¡ 
SŒšg
& 
m‘hod
, cÚ¡ 
HTTPH—d”M­
& 
»que¡H—d”s
) const;

53 
	g´iv©e
:

54 
HashS‘
<
	tSŒšg
, 
	tCa£FŞdšgHash
> 
	tH—d”sS‘
;

59 
	gm_absŞu‹ExpœyTime
;

60 
boŞ
 
	gm_üed’tŸls
;

61 
	gHashS‘
<
	gSŒšg
> 
	gm_m‘hods
;

62 
H—d”sS‘
 
	gm_h—d”s
;

65 şas 
	cCrossOrigšP»æightResuÉCache
 : 
public
 
NÚcİyabË
 {

66 
public
:

67 
CrossOrigšP»æightResuÉCache
& 
sh¬ed
();

69 
­³ndEÁry
(cÚ¡ 
SŒšg
& 
Üigš
, cÚ¡ 
KURL
&, 
CrossOrigšP»æightResuÉCacheI‹m
*);

70 
boŞ
 
ÿnSkP»æight
(cÚ¡ 
SŒšg
& 
Üigš
, cÚ¡ 
KURL
&, boŞ 
šşudeC»d’tŸls
, cÚ¡ SŒšg& 
m‘hod
, cÚ¡ 
HTTPH—d”M­
& 
»que¡H—d”s
);

72 
em±y
();

74 
	g´iv©e
:

75 
CrossOrigšP»æightResuÉCache
() { }

77 
HashM­
<
	t¡d
::
	t·œ
<
	tSŒšg
, 
	tKURL
>, 
	tCrossOrigšP»æightResuÉCacheI‹m
*> 
	tCrossOrigšP»æightResuÉHashM­
;

79 
CrossOrigšP»æightResuÉHashM­
 
	gm_´eæightHashM­
;

	@DocLoader.cpp

27 
	~"cÚfig.h
"

28 
	~"DocLßd”.h
"

30 
	~"Cache.h
"

31 
	~"CachedCSSStyËSh“t.h
"

32 
	~"CachedFÚt.h
"

33 
	~"CachedImage.h
"

34 
	~"CachedSüt.h
"

35 
	~"CachedXSLStyËSh“t.h
"

36 
	~"CÚsŞe.h
"

37 
	~"Docum’t.h
"

38 
	~"DOMWšdow.h
"

39 
	~"HTMLEËm’t.h
"

40 
	~"F¿me.h
"

41 
	~"F¿meLßd”.h
"

42 
	~"F¿meLßd”Cl›Á.h
"

43 
	~"lßd”.h
"

44 
	~"Secur™yOrigš.h
"

45 
	~"S‘tšgs.h
"

46 
	~<wtf/‹xt/CSŒšg.h
>

48 
	#PRELOAD_DEBUG
 0

	)

50 
Çme¥aû
 
	gWebCÜe
 {

52 
	gDocLßd”
::
DocLßd”
(
Docum’t
* 
doc
)

53 : 
m_ÿche
(
ÿche
())

54 , 
m_doc
(
doc
)

55 , 
m_»que¡CouÁ
(0)

56 , 
m_autoLßdImages
(
Œue
)

57 , 
m_lßdInProg»ss
(
çl£
)

58 , 
m_®lowSËResourûs
(
çl£
)

60 
	gm_ÿche
->
addDocLßd”
(
this
);

63 
	gDocLßd”
::~
DocLßd”
()

65 ià(
m_»que¡CouÁ
)

66 
m_ÿche
->
lßd”
()->
ÿnûlReque¡s
(
this
);

68 
ş—rP»lßds
();

69 
	gDocum’tResourûM­
::
™”©Ü
 
’d
 = 
m_docum’tResourûs
.end();

70 
	gDocum’tResourûM­
::
™”©Ü
 
™
 = 
m_docum’tResourûs
.
begš
(); 
	g™
 !ğ
’d
; ++it)

71 
	g™
->
	g£cÚd
->
£tDocLßd”
(0);

72 
	gm_ÿche
->
»moveDocLßd”
(
this
);

75 
ASSERT
(
m_»que¡CouÁ
 == 0);

78 
F¿me
* 
	gDocLßd”
::
äame
() const

80  
m_doc
->
äame
();

83 
	gDocLßd”
::
checkFÜR–ßd
(cÚ¡ 
KURL
& 
fuÎURL
)

85 ià(
m_®lowSËResourûs
)

88 ià(
	gfuÎURL
.
isEm±y
())

91 ià(
	gm_»lßdedURLs
.
cÚšs
(
fuÎURL
.
¡ršg
()))

94 
CachedResourû
* 
	gexi¡šg
 = 
ÿche
()->
»sourûFÜURL
(
fuÎURL
.
¡ršg
());

95 ià(!
	gexi¡šg
 ||ƒxi¡šg->
isP»lßded
())

98 
ÿchePŞicy
()) {

99 
	gCachePŞicyV”ify
:

100 ià(!
exi¡šg
->
mu¡Rev®id©e
(
CachePŞicyV”ify
))

102 
ÿche
()->
»v®id©eResourû
(
exi¡šg
, 
this
);

104 
	gCachePŞicyCache
:

105 ià(!
exi¡šg
->
mu¡Rev®id©e
(
CachePŞicyCache
))

107 
ÿche
()->
»v®id©eResourû
(
exi¡šg
, 
this
);

109 
	gCachePŞicyR–ßd
:

110 
ÿche
()->
»move
(
exi¡šg
);

112 
	gCachePŞicyRev®id©e
:

113 
ÿche
()->
»v®id©eResourû
(
exi¡šg
, 
this
);

115 
	gCachePŞicyAÎowSË
:

119 
	gm_»lßdedURLs
.
add
(
fuÎURL
.
¡ršg
());

122 
CachedImage
* 
	gDocLßd”
::
»que¡Image
(cÚ¡ 
SŒšg
& 
u¾
)

124 ià(
F¿me
* 
f
 = 
äame
()) {

125 
S‘tšgs
* 
£‰šgs
 = 
f
->settings();

126 ià(!
	gf
->
lßd”
()->
ş›Á
()->
®lowImages
(!
£‰šgs
 || s‘tšgs->
¬eImagesEÇbËd
()))

129 
CachedImage
* 
	g»sourû
 = 
¡©ic_ÿ¡
<CachedImage*>(
»que¡Resourû
(
CachedResourû
::
ImageResourû
, 
u¾
, 
SŒšg
()));

130 ià(
autoLßdImages
(è&& 
	g»sourû
 &&„esourû->
¡lN“dsLßd
()) {

131 
	g»sourû
->
£tLßdšg
(
Œue
);

132 
ÿche
()->
lßd”
()->
lßd
(
this
, 
»sourû
, 
Œue
);

134  
	g»sourû
;

137 
CachedFÚt
* 
	gDocLßd”
::
»que¡FÚt
(cÚ¡ 
SŒšg
& 
u¾
)

139  
¡©ic_ÿ¡
<
CachedFÚt
*>(
»que¡Resourû
(
CachedResourû
::
FÚtResourû
, 
u¾
, 
SŒšg
()));

142 
CachedCSSStyËSh“t
* 
	gDocLßd”
::
»que¡CSSStyËSh“t
(cÚ¡ 
SŒšg
& 
u¾
, cÚ¡ SŒšg& 
ch¬£t
)

144  
	g¡©ic_ÿ¡
<
	gCachedCSSStyËSh“t
*>(
»que¡Resourû
(
CachedResourû
::
CSSStyËSh“t
, 
u¾
, 
ch¬£t
));

147 
CachedCSSStyËSh“t
* 
	gDocLßd”
::
»que¡U£rCSSStyËSh“t
(cÚ¡ 
SŒšg
& 
u¾
, cÚ¡ SŒšg& 
ch¬£t
)

149  
ÿche
()->
»que¡U£rCSSStyËSh“t
(
this
, 
u¾
, 
ch¬£t
);

152 
CachedSüt
* 
	gDocLßd”
::
»que¡Süt
(cÚ¡ 
SŒšg
& 
u¾
, cÚ¡ SŒšg& 
ch¬£t
)

154  
	g¡©ic_ÿ¡
<
	gCachedSüt
*>(
»que¡Resourû
(
CachedResourû
::
Süt
, 
u¾
, 
ch¬£t
));

157 #ià
ENABLE
(
XSLT
)

158 
CachedXSLStyËSh“t
* 
	gDocLßd”
::
»que¡XSLStyËSh“t
(cÚ¡ 
SŒšg
& 
u¾
)

160  
¡©ic_ÿ¡
<
CachedXSLStyËSh“t
*>(
»que¡Resourû
(
CachedResourû
::
XSLStyËSh“t
, 
u¾
, 
SŒšg
()));

164 #ià
ENABLE
(
XBL
)

165 
CachedXBLDocum’t
* 
	gDocLßd”
::
»que¡XBLDocum’t
(cÚ¡ 
SŒšg
& 
u¾
)

167  
¡©ic_ÿ¡
<
CachedXSLStyËSh“t
*>(
»que¡Resourû
(
CachedResourû
::
XBL
, 
u¾
, 
SŒšg
()));

171 
boŞ
 
	gDocLßd”
::
ÿnReque¡
(
CachedResourû
::
Ty³
 
ty³
, cÚ¡ 
KURL
& 
u¾
)

176 
	gty³
) {

177 
	gCachedResourû
::
ImageResourû
:

178 
CachedResourû
::
CSSStyËSh“t
:

179 
CachedResourû
::
Süt
:

180 
CachedResourû
::
FÚtResourû
:

184 #ià
ENABLE
(
XSLT
)

185 
	gCachedResourû
::
XSLStyËSh“t
:

187 #ià
ENABLE
(
XBL
)

188 
CachedResourû
::
XBL
:

190 #ià
ENABLE
(
XSLT
è|| ENABLE(
XBL
)

191 ià(!
m_doc
->
£cur™yOrigš
()->
ÿnReque¡
(
u¾
)) {

192 
´štAcûssD’›dMes§ge
(
u¾
);

193  
	gçl£
;

198 
ASSERT_NOT_REACHED
();

209 
	gty³
) {

210 
	gCachedResourû
::
Süt
:

211 #ià
ENABLE
(
XSLT
)

212 
CachedResourû
::
XSLStyËSh“t
:

214 #ià
ENABLE
(
XBL
)

215 
CachedResourû
::
XBL
:

218 ià(
F¿me
* 
f
 = 
äame
())

219 
f
->
lßd”
()->
checkIfRunIn£cu»CÚ‹Á
(
m_doc
->
£cur™yOrigš
(), 
u¾
);

221 
	gCachedResourû
::
ImageResourû
:

222 
CachedResourû
::
CSSStyËSh“t
:

223 
CachedResourû
::
FÚtResourû
: {

225 ià(
F¿me
* 
f
 = 
äame
()) {

226 
F¿me
* 
tİ
 = 
f
->
Œ“
()->top();

227 
	gtİ
->
lßd”
()->
checkIfDi¥ÏyIn£cu»CÚ‹Á
(
tİ
->
docum’t
()->
£cur™yOrigš
(), 
u¾
);

232 
ASSERT_NOT_REACHED
();

236  
	gŒue
;

239 
CachedResourû
* 
	gDocLßd”
::
»que¡Resourû
(CachedResourû::
Ty³
 
ty³
, cÚ¡ 
SŒšg
& 
u¾
, cÚ¡ SŒšg& 
ch¬£t
, 
boŞ
 
isP»lßd
)

241 
KURL
 
	gfuÎURL
 = 
m_doc
->
com¶‘eURL
(
u¾
);

243 ià(!
	gfuÎURL
.
isV®id
(è|| !
ÿnReque¡
(
ty³
, 
fuÎURL
))

246 ià(
ÿche
()->
di§bËd
()) {

247 
	gDocum’tResourûM­
::
™”©Ü
 
™
 = 
m_docum’tResourûs
.
fšd
(
fuÎURL
.
¡ršg
());

249 ià(
	g™
 !ğ
m_docum’tResourûs
.
’d
()) {

250 
™
->
£cÚd
->
£tDocLßd”
(0);

251 
	gm_docum’tResourûs
.
»move
(
™
);

255 
checkFÜR–ßd
(
fuÎURL
);

257 
CachedResourû
* 
	g»sourû
 = 
ÿche
()->
»que¡Resourû
(
this
, 
ty³
, 
fuÎURL
, 
ch¬£t
, 
isP»lßd
);

258 ià(
	g»sourû
) {

261 ià(
	gfuÎURL
 !ğ
»sourû
->
u¾
(è&& !
ÿnReque¡
(
ty³
, 
KURL
(
P¬£dURLSŒšg
,„esource->url())))

264 
	gm_docum’tResourûs
.
£t
(
»sourû
->
u¾
(),„esource);

265 
checkCacheObjeùStus
(
»sourû
);

267  
	g»sourû
;

270 
	gDocLßd”
::
´štAcûssD’›dMes§ge
(cÚ¡ 
KURL
& 
u¾
) const

272 ià(
u¾
.
isNuÎ
())

275 ià(!
äame
())

278 
S‘tšgs
* 
	g£‰šgs
 = 
äame
()->
£‰šgs
();

279 ià(!
	g£‰šgs
 || s‘tšgs->
´iv©eBrowsšgEÇbËd
())

282 
SŒšg
 
	gmes§ge
 = 
m_doc
->
u¾
().
isNuÎ
() ?

283 
SŒšg
::
fÜm©
("Unsafe‡ttempto†oad URL %s.",

284 
u¾
.
¡ršg
().
utf8
().
d©a
()) :

285 
SŒšg
::
fÜm©
("Unsafe‡ttempto†oad URL %s from frame with URL %s. "

287 
u¾
.
¡ršg
().
utf8
().
d©a
(),

288 
m_doc
->
u¾
().
¡ršg
().
utf8
().
d©a
());

291 
äame
()->
domWšdow
()->
cÚsŞe
()->
addMes§ge
(
Oth”Mes§geSourû
, 
LogMes§geTy³
, 
E¼ÜMes§geLev–
, 
mes§ge
, 1, 
SŒšg
());

294 
	gDocLßd”
::
£tAutoLßdImages
(
boŞ
 
’abË
)

296 ià(
’abË
 =ğ
m_autoLßdImages
)

299 
	gm_autoLßdImages
 = 
’abË
;

301 ià(!
	gm_autoLßdImages
)

304 
	gDocum’tResourûM­
::
™”©Ü
 
’d
 = 
m_docum’tResourûs
.end();

305 
	gDocum’tResourûM­
::
™”©Ü
 
™
 = 
m_docum’tResourûs
.
begš
(); 
	g™
 !ğ
’d
; ++it) {

306 
CachedResourû
* 
	g»sourû
 = 
™
->
£cÚd
.
g‘
();

307 ià(
	g»sourû
->
ty³
(è=ğ
CachedResourû
::
ImageResourû
) {

308 
CachedImage
* 
image
 = 
cÚ¡_ÿ¡
<CachedImage*>(
¡©ic_ÿ¡
<cÚ¡ CachedImage*>(
»sourû
));

310 ià(
	gimage
->
¡lN“dsLßd
())

311 
ÿche
()->
lßd”
()->
lßd
(
this
, 
image
, 
Œue
);

316 
CachePŞicy
 
	gDocLßd”
::
ÿchePŞicy
() const

318  
äame
(è? f¿me()->
lßd”
()->
sub»sourûCachePŞicy
(è: 
CachePŞicyV”ify
;

321 
	gDocLßd”
::
»moveCachedResourû
(
CachedResourû
* 
»sourû
) const

323 #iâdeà
NDEBUG


324 
Docum’tResourûM­
::
™”©Ü
 
™
 = 
m_docum’tResourûs
.
fšd
(
»sourû
->
u¾
());

325 ià(
	g™
 !ğ
m_docum’tResourûs
.
’d
())

326 
ASSERT
(
™
->
£cÚd
.
g‘
(è=ğ
»sourû
);

328 
	gm_docum’tResourûs
.
»move
(
»sourû
->
u¾
());

331 
	gDocLßd”
::
£tLßdInProg»ss
(
boŞ
 
lßd
)

333 
m_lßdInProg»ss
 = 
lßd
;

334 ià(!
	glßd
 && 
äame
())

335 
äame
()->
lßd”
()->
lßdDÚe
();

338 
	gDocLßd”
::
checkCacheObjeùStus
(
CachedResourû
* 
»sourû
)

341 ià(!
»sourû
 || !
äame
())

344 
	g»sourû
->
¡©us
()) {

345 
	gCachedResourû
::
Cached
:

347 
	gCachedResourû
::
NÙCached
:

348 
CachedResourû
::
Unknown
:

349 
CachedResourû
::
New
:

350 
CachedResourû
::
P’dšg
:

355 
äame
()->
lßd”
()->
lßdedResourûFromMemÜyCache
(
»sourû
);

358 
	gDocLßd”
::
šüem’tReque¡CouÁ
()

360 ++
m_»que¡CouÁ
;

363 
	gDocLßd”
::
deüem’tReque¡CouÁ
()

365 --
m_»que¡CouÁ
;

366 
ASSERT
(
m_»que¡CouÁ
 > -1);

369 
	gDocLßd”
::
»que¡CouÁ
()

371 ià(
lßdInProg»ss
())

372  
m_»que¡CouÁ
 + 1;

373  
	gm_»que¡CouÁ
;

376 
	gDocLßd”
::
´–ßd
(
CachedResourû
::
Ty³
 
ty³
, cÚ¡ 
SŒšg
& 
u¾
, cÚ¡ SŒšg& 
ch¬£t
, 
boŞ
 
»ã»nûdFromBody
)

378 
boŞ
 
	ghasR’d”šg
 = 
m_doc
->
body
(è&& m_doc->body()->
»nd””
();

379 ià(!
	ghasR’d”šg
 && (
	g»ã»nûdFromBody
 || 
	gty³
 =ğ
CachedResourû
::
ImageResourû
)) {

382 
P’dšgP»lßd
 
³ndšgP»lßd
 = { 
ty³
, 
u¾
, 
ch¬£t
 };

383 
	gm_³ndšgP»lßds
.
­³nd
(
³ndšgP»lßd
);

386 
»que¡P»lßd
(
ty³
, 
u¾
, 
ch¬£t
);

389 
	gDocLßd”
::
checkFÜP’dšgP»lßds
()

391 
couÁ
 = 
m_³ndšgP»lßds
.
size
();

392 ià(!
	gcouÁ
 || !
	gm_doc
->
body
(è|| !m_doc->body()->
»nd””
())

394 
	gi
 = 0; i < 
	gcouÁ
; ++i) {

395 
	gP’dšgP»lßd
& 
	g´–ßd
 = 
m_³ndšgP»lßds
[
i
];

397 ià(!
ÿchedResourû
(
m_doc
->
com¶‘eURL
(
´–ßd
.
m_u¾
)))

398 
»que¡P»lßd
(
´–ßd
.
m_ty³
,…»lßd.
m_u¾
,…»lßd.
m_ch¬£t
);

400 
	gm_³ndšgP»lßds
.
ş—r
();

403 
	gDocLßd”
::
»que¡P»lßd
(
CachedResourû
::
Ty³
 
ty³
, cÚ¡ 
SŒšg
& 
u¾
, cÚ¡ SŒšg& 
ch¬£t
)

405 
SŒšg
 
	g’codšg
;

406 ià(
	gty³
 =ğ
CachedResourû
::
Süt
 || 
ty³
 =ğCachedResourû::
CSSStyËSh“t
)

407 
’codšg
 = 
ch¬£t
.
isEm±y
(è? 
m_doc
->
äame
()->
lßd”
()->encoding() : charset;

409 
CachedResourû
* 
	g»sourû
 = 
»que¡Resourû
(
ty³
, 
u¾
, 
’codšg
, 
Œue
);

410 ià(!
	g»sourû
 || 
	gm_´–ßds
.
cÚšs
(
»sourû
))

412 
	g»sourû
->
šü—£P»lßdCouÁ
();

413 
	gm_´–ßds
.
add
(
»sourû
);

414 #ià
PRELOAD_DEBUG


415 
´štf
("PRELOADING %s\n", 
»sourû
->
u¾
().
Ïtš1
().
d©a
());

419 
	gDocLßd”
::
ş—rP»lßds
()

421 #ià
PRELOAD_DEBUG


422 
´štP»lßdSts
();

424 
	gLi¡HashS‘
<
	gCachedResourû
*>::
™”©Ü
 
’d
 = 
m_´–ßds
.end();

425 
	gLi¡HashS‘
<
	gCachedResourû
*>::
™”©Ü
 
™
 = 
m_´–ßds
.
begš
(); 
	g™
 !ğ
’d
; ++it) {

426 
CachedResourû
* 
	g»s
 = *
™
;

427 
	g»s
->
deü—£P»lßdCouÁ
();

428 ià(
	g»s
->
ÿnD–‘e
(è&& !»s->
šCache
())

429 
d–‘e
 
	g»s
;

430 ià(
	g»s
->
´–ßdResuÉ
(è=ğ
CachedResourû
::
P»lßdNÙReã»nûd
)

431 
ÿche
()->
»move
(
»s
);

433 
	gm_´–ßds
.
ş—r
();

436 
	gDocLßd”
::
ş—rP’dšgP»lßds
()

438 
m_³ndšgP»lßds
.
ş—r
();

441 #ià
PRELOAD_DEBUG


442 
	gDocLßd”
::
´štP»lßdSts
()

444 
süts
 = 0;

445 
	gsütMis£s
 = 0;

446 
	g¡yËsh“ts
 = 0;

447 
	g¡yËsh“tMis£s
 = 0;

448 
	gimages
 = 0;

449 
	gimageMis£s
 = 0;

450 
	gLi¡HashS‘
<
	gCachedResourû
*>::
™”©Ü
 
’d
 = 
m_´–ßds
.end();

451 
	gLi¡HashS‘
<
	gCachedResourû
*>::
™”©Ü
 
™
 = 
m_´–ßds
.
begš
(); 
	g™
 !ğ
’d
; ++it) {

452 
CachedResourû
* 
	g»s
 = *
™
;

453 ià(
	g»s
->
´–ßdResuÉ
(è=ğ
CachedResourû
::
P»lßdNÙReã»nûd
)

454 
´štf
("!! UNREFERENCED PRELOAD %s\n", 
»s
->
u¾
().
Ïtš1
().
d©a
());

455 ià(
	g»s
->
´–ßdResuÉ
(è=ğ
CachedResourû
::
P»lßdReã»nûdWheCom¶‘e
)

456 
´štf
("HIT COMPLETE PRELOAD %s\n", 
»s
->
u¾
().
Ïtš1
().
d©a
());

457 ià(
	g»s
->
´–ßdResuÉ
(è=ğ
CachedResourû
::
P»lßdReã»nûdWheLßdšg
)

458 
´štf
("HIT LOADING PRELOAD %s\n", 
»s
->
u¾
().
Ïtš1
().
d©a
());

460 ià(
	g»s
->
ty³
(è=ğ
CachedResourû
::
Süt
) {

461 
süts
++;

462 ià(
	g»s
->
´–ßdResuÉ
(è< 
	gCachedResourû
::
P»lßdReã»nûdWheLßdšg
)

463 
sütMis£s
++;

464 } ià(
	g»s
->
ty³
(è=ğ
CachedResourû
::
CSSStyËSh“t
) {

465 
¡yËsh“ts
++;

466 ià(
	g»s
->
´–ßdResuÉ
(è< 
	gCachedResourû
::
P»lßdReã»nûdWheLßdšg
)

467 
¡yËsh“tMis£s
++;

469 
	gimages
++;

470 ià(
	g»s
->
´–ßdResuÉ
(è< 
	gCachedResourû
::
P»lßdReã»nûdWheLßdšg
)

471 
imageMis£s
++;

474 ià(
	g»s
->
”rÜOccu¼ed
())

475 
ÿche
()->
»move
(
»s
);

477 
	g»s
->
deü—£P»lßdCouÁ
();

479 
	gm_´–ßds
.
ş—r
();

481 ià(
	gsüts
)

482 
´štf
("SCRIPTS: %d (%d h™s, h™„©%d%%)\n", 
süts
, süt - 
sütMis£s
, (scripts - scriptMisses) * 100 / scripts);

483 ià(
	g¡yËsh“ts
)

484 
´štf
("STYLESHEETS: %d (%d h™s, h™„©%d%%)\n", 
¡yËsh“ts
, styËsh“t - 
¡yËsh“tMis£s
, (stylesheets - stylesheetMisses) * 100 / stylesheets);

485 ià(
	gimages
)

486 
´štf
("IMAGES: %d (%d h™s, h™„©%d%%)\n", 
images
, image - 
imageMis£s
, (images - imageMisses) * 100 / images);

	@DocLoader.h

26 #iâdeà
DocLßd”_h


27 
	#DocLßd”_h


	)

29 
	~"CachedResourû.h
"

30 
	~"CachedResourûHªdË.h
"

31 
	~"CachePŞicy.h
"

32 
	~"SŒšgHash.h
"

33 
	~<wtf/HashM­.h
>

34 
	~<wtf/HashS‘.h
>

35 
	~<wtf/Li¡HashS‘.h
>

37 
Çme¥aû
 
	gWebCÜe
 {

39 
şass
 
	gCachedCSSStyËSh“t
;

40 
şass
 
	gCachedFÚt
;

41 
şass
 
	gCachedImage
;

42 
şass
 
	gCachedSüt
;

43 
şass
 
	gCachedXSLStyËSh“t
;

44 
şass
 
	gDocum’t
;

45 
şass
 
	gF¿me
;

46 
şass
 
	gImageLßd”
;

47 
şass
 
	gKURL
;

50 şas 
	cDocLßd”
 : 
public
 
NÚcİyabË


52 
ä›nd
 
şass
 
Cache
;

53 
ä›nd
 
şass
 
	gImageLßd”
;

55 
	gpublic
:

56 
DocLßd”
(
Docum’t
*);

57 ~
DocLßd”
();

59 
CachedImage
* 
»que¡Image
(cÚ¡ 
SŒšg
& 
u¾
);

60 
CachedCSSStyËSh“t
* 
»que¡CSSStyËSh“t
(cÚ¡ 
SŒšg
& 
u¾
, cÚ¡ SŒšg& 
ch¬£t
);

61 
CachedCSSStyËSh“t
* 
»que¡U£rCSSStyËSh“t
(cÚ¡ 
SŒšg
& 
u¾
, cÚ¡ SŒšg& 
ch¬£t
);

62 
CachedSüt
* 
»que¡Süt
(cÚ¡ 
SŒšg
& 
u¾
, cÚ¡ SŒšg& 
ch¬£t
);

63 
CachedFÚt
* 
»que¡FÚt
(cÚ¡ 
SŒšg
& 
u¾
);

65 #ià
ENABLE
(
XSLT
)

66 
CachedXSLStyËSh“t
* 
»que¡XSLStyËSh“t
(cÚ¡ 
SŒšg
& 
u¾
);

68 #ià
ENABLE
(
XBL
)

69 
CachedXBLDocum’t
* 
»que¡XBLDocum’t
(cÚ¡ 
SŒšg
 &
u¾
);

73 
´štAcûssD’›dMes§ge
(cÚ¡ 
KURL
& 
u¾
) const;

75 
CachedResourû
* 
ÿchedResourû
(cÚ¡ 
SŒšg
& 
u¾
ècÚ¡ {  
	gm_docum’tResourûs
.
g‘
(url).get(); }

77 
	gHashM­
<
	tSŒšg
, 
	tCachedResourûHªdË
<
	tCachedResourû
> > 
	tDocum’tResourûM­
;

78 cÚ¡ 
	gDocum’tResourûM­
& 
®lCachedResourûs
(ècÚ¡ {  
	gm_docum’tResourûs
; }

80 
boŞ
 
autoLßdImages
(ècÚ¡ {  
	gm_autoLßdImages
; }

81 
£tAutoLßdImages
(
boŞ
);

83 
CachePŞicy
 
ÿchePŞicy
() const;

85 
F¿me
* 
äame
() const;

86 
Docum’t
* 
doc
(ècÚ¡ {  
	gm_doc
; }

88 
»moveCachedResourû
(
CachedResourû
*) const;

90 
£tLßdInProg»ss
(
boŞ
);

91 
boŞ
 
lßdInProg»ss
(ècÚ¡ {  
	gm_lßdInProg»ss
; }

93 
£tAÎowSËResourûs
(
boŞ
 
®lowSËResourûs
è{ 
	gm_®lowSËResourûs
 =‡llowStaleResources; }

95 
šüem’tReque¡CouÁ
();

96 
deüem’tReque¡CouÁ
();

97 
»que¡CouÁ
();

99 
ş—rP»lßds
();

100 
ş—rP’dšgP»lßds
();

101 
´–ßd
(
CachedResourû
::
Ty³
, cÚ¡ 
SŒšg
& 
u¾
, cÚ¡ SŒšg& 
ch¬£t
, 
boŞ
 
»ã»nûdFromBody
);

102 
checkFÜP’dšgP»lßds
();

103 
´štP»lßdSts
();

105 
	g´iv©e
:

106 
CachedResourû
* 
»que¡Resourû
(CachedResourû::
Ty³
, cÚ¡ 
SŒšg
& 
u¾
, cÚ¡ SŒšg& 
ch¬£t
, 
boŞ
 
isP»lßd
 = 
çl£
);

107 
»que¡P»lßd
(
CachedResourû
::
Ty³
, cÚ¡ 
SŒšg
& 
u¾
, cÚ¡ SŒšg& 
ch¬£t
);

109 
checkFÜR–ßd
(cÚ¡ 
KURL
&);

110 
checkCacheObjeùStus
(
CachedResourû
*);

111 
boŞ
 
ÿnReque¡
(
CachedResourû
::
Ty³
, cÚ¡ 
KURL
&);

113 
Cache
* 
	gm_ÿche
;

114 
	gHashS‘
<
	gSŒšg
> 
	gm_»lßdedURLs
;

115 
mubË
 
Docum’tResourûM­
 
	gm_docum’tResourûs
;

116 
Docum’t
* 
	gm_doc
;

118 
	gm_»que¡CouÁ
;

120 
	gLi¡HashS‘
<
	gCachedResourû
*> 
	gm_´–ßds
;

121 
	sP’dšgP»lßd
 {

122 
	gCachedResourû
::
Ty³
 
m_ty³
;

123 
SŒšg
 
	gm_u¾
;

124 
SŒšg
 
	gm_ch¬£t
;

126 
	gVeùÜ
<
	gP’dšgP»lßd
> 
	gm_³ndšgP»lßds
;

129 
boŞ
 
	gm_autoLßdImages
 : 1;

130 
boŞ
 
	gm_lßdInProg»ss
 : 1;

131 
boŞ
 
	gm_®lowSËResourûs
 : 1;

	@DocumentLoader.cpp

29 
	~"cÚfig.h
"

30 
	~"Docum’tLßd”.h
"

32 
	~"AµliÿtiÚCacheHo¡.h
"

33 
	~"ArchiveFaùÜy.h
"

34 
	~"ArchiveResourûCŞËùiÚ.h
"

35 
	~"CachedPage.h
"

36 
	~"DocLßd”.h
"

37 
	~"Docum’t.h
"

38 
	~"Ev’t.h
"

39 
	~"F¿me.h
"

40 
	~"F¿meLßd”.h
"

41 
	~"F¿meT»e.h
"

42 
	~"Hi¡ÜyI‹m.h
"

43 
	~"Loggšg.h
"

44 
	~"MašResourûLßd”.h
"

45 
	~"Page.h
"

46 
	~"PÏtfÜmSŒšg.h
"

47 
	~"S‘tšgs.h
"

48 
	~"Sh¬edBufãr.h
"

49 
	~"XMLTok’iz”.h
"

51 
	~<wtf/As£¹iÚs.h
>

52 
	~<wtf/unicode/Unicode.h
>

54 
Çme¥aû
 
	gWebCÜe
 {

56 
ÿnûlAÎ
(cÚ¡ 
ResourûLßd”S‘
& 
lßd”s
)

58 cÚ¡ 
ResourûLßd”S‘
 
	gcİy
 = 
lßd”s
;

59 
	gResourûLßd”S‘
::
cÚ¡_™”©Ü
 
’d
 = 
cİy
.end();

60 
	gResourûLßd”S‘
::
cÚ¡_™”©Ü
 
™
 = 
cİy
.
begš
(); 
	g™
 !ğ
’d
; ++it)

61 (*
	g™
)->
ÿnûl
();

64 
£tAÎDeãrsLßdšg
(cÚ¡ 
ResourûLßd”S‘
& 
lßd”s
, 
boŞ
 
deãrs
)

66 cÚ¡ 
ResourûLßd”S‘
 
	gcİy
 = 
lßd”s
;

67 
	gResourûLßd”S‘
::
cÚ¡_™”©Ü
 
’d
 = 
cİy
.end();

68 
	gResourûLßd”S‘
::
cÚ¡_™”©Ü
 
™
 = 
cİy
.
begš
(); 
	g™
 !ğ
’d
; ++it)

69 (*
	g™
)->
£tDeãrsLßdšg
(
deãrs
);

72 
	gDocum’tLßd”
::
Docum’tLßd”
(cÚ¡ 
ResourûReque¡
& 
»q
, cÚ¡ 
Sub¡™u‹D©a
& 
sub¡™u‹D©a
)

73 : 
m_deãrMašResourûD©aLßd
(
Œue
)

74 , 
m_äame
(0)

75 , 
m_Üigš®Reque¡
(
»q
)

76 , 
m_sub¡™u‹D©a
(
sub¡™u‹D©a
)

77 , 
m_Üigš®Reque¡Cİy
(
»q
)

78 , 
m_»que¡
(
»q
)

79 , 
m_comm™‹d
(
çl£
)

80 , 
m_isStİpšg
(
çl£
)

81 , 
m_lßdšg
(
çl£
)

82 , 
m_gÙFœ¡By‹
(
çl£
)

83 , 
m_´im¬yLßdCom¶‘e
(
çl£
)

84 , 
m_isCl›ÁRedœeù
(
çl£
)

85 , 
m_¡İRecÜdšgRe¥Ú£s
(
çl£
)

86 , 
m_sub¡™u‹ResourûD–iv”yTim”
(
this
, &
Docum’tLßd”
::
sub¡™u‹ResourûD–iv”yTim”Fœed
)

87 , 
m_didC»©eGlob®Hi¡ÜyEÁry
(
çl£
)

88 #ià
ENABLE
(
OFFLINE_WEB_APPLICATIONS
)

89 , 
m_­¶iÿtiÚCacheHo¡
(
Ãw
 
AµliÿtiÚCacheHo¡
(
this
))

94 
F¿meLßd”
* 
	gDocum’tLßd”
::
äameLßd”
() const

96 ià(!
m_äame
)

98  
	gm_äame
->
lßd”
();

101 
	gDocum’tLßd”
::~
Docum’tLßd”
()

103 
ASSERT
(!
m_äame
 || 
äameLßd”
()->
aùiveDocum’tLßd”
(è!ğ
this
 || !äameLßd”()->
isLßdšg
());

106 
	gPassRefPŒ
<
	gSh¬edBufãr
> 
	gDocum’tLßd”
::
mašResourûD©a
() const

108 ià(
m_mašResourûD©a
)

109  
m_mašResourûD©a
;

110 ià(
	gm_mašResourûLßd”
)

111  
	gm_mašResourûLßd”
->
»sourûD©a
();

115 cÚ¡ 
	gResourûReque¡
& 
	gDocum’tLßd”
::
Üigš®Reque¡
() const

117  
m_Üigš®Reque¡
;

120 cÚ¡ 
	gResourûReque¡
& 
	gDocum’tLßd”
::
Üigš®Reque¡Cİy
() const

122  
m_Üigš®Reque¡Cİy
;

125 cÚ¡ 
	gResourûReque¡
& 
	gDocum’tLßd”
::
»que¡
() const

127  
m_»que¡
;

130 
	gResourûReque¡
& 
	gDocum’tLßd”
::
»que¡
()

132  
m_»que¡
;

135 cÚ¡ 
	gKURL
& 
	gDocum’tLßd”
::
u¾
() const

137  
»que¡
().
u¾
();

140 
	gDocum’tLßd”
::
»¶aûReque¡URLFÜSameDocum’tNavig©iÚ
(cÚ¡ 
KURL
& 
u¾
)

142 
m_Üigš®Reque¡Cİy
.
£tURL
(
u¾
);

143 
	gm_»que¡
.
£tURL
(
u¾
);

146 
	gDocum’tLßd”
::
£tReque¡
(cÚ¡ 
ResourûReque¡
& 
»q
)

150 
boŞ
 
hªdlšgUÄ—chabËURL
 = 
çl£
;

152 
	ghªdlšgUÄ—chabËURL
 = 
m_sub¡™u‹D©a
.
isV®id
(è&& !m_sub¡™u‹D©a.
çšgURL
().
isEm±y
();

154 ià(
	ghªdlšgUÄ—chabËURL
)

155 
	gm_comm™‹d
 = 
çl£
;

160 
ASSERT
(!
m_comm™‹d
);

162 
KURL
 
	gŞdURL
 = 
m_»que¡
.
u¾
();

163 
	gm_»que¡
 = 
»q
;

167 ià(!
	ghªdlšgUÄ—chabËURL
 && 
	gŞdURL
 !ğ
»q
.
u¾
())

168 
äameLßd”
()->
didReûiveS”v”RedœeùFÜProvisiÚ®LßdFÜF¿me
();

171 
	gDocum’tLßd”
::
£tMašDocum’tE¼Ü
(cÚ¡ 
ResourûE¼Ü
& 
”rÜ
)

173 
m_mašDocum’tE¼Ü
 = 
”rÜ
;

174 
äameLßd”
()->
£tMašDocum’tE¼Ü
(
this
, 
”rÜ
);

177 
	gDocum’tLßd”
::
ş—rE¼Üs
()

179 
m_mašDocum’tE¼Ü
 = 
ResourûE¼Ü
();

182 
	gDocum’tLßd”
::
mašReûivedE¼Ü
(cÚ¡ 
ResourûE¼Ü
& 
”rÜ
, 
boŞ
 
isCom¶‘e
)

184 
ASSERT
(!
”rÜ
.
isNuÎ
());

186 #ià
ENABLE
(
OFFLINE_WEB_APPLICATIONS
)

187 
	gm_­¶iÿtiÚCacheHo¡
->
çedLßdšgMašResourû
();

190 ià(!
äameLßd”
())

192 
£tMašDocum’tE¼Ü
(
”rÜ
);

193 ià(
	gisCom¶‘e
)

194 
äameLßd”
()->
mašReûivedCom¶‘eE¼Ü
(
this
, 
”rÜ
);

201 
	gDocum’tLßd”
::
¡İLßdšg
(
D©aba£PŞicy
 
d©aba£PŞicy
)

206 
boŞ
 
lßdšg
 = 
m_lßdšg
;

208 ià(
	gm_comm™‹d
) {

211 
Docum’t
* 
	gdoc
 = 
m_äame
->
docum’t
();

213 ià(
	glßdšg
 || 
	gdoc
->
·rsšg
())

214 
	gm_äame
->
lßd”
()->
¡İLßdšg
(
UÆßdEv’tPŞicyNÚe
, 
d©aba£PŞicy
);

218 
ÿnûlAÎ
(
m_muÉ¬tSub»sourûLßd”s
);

220 ià(!
	glßdšg
)

223 
	gRefPŒ
<
	gF¿me
> 
´ÙeùF¿me
(
m_äame
);

224 
	gRefPŒ
<
	gDocum’tLßd”
> 
´ÙeùLßd”
(
this
);

226 
	gm_isStİpšg
 = 
Œue
;

228 
F¿meLßd”
* 
	gäameLßd”
 = 
Docum’tLßd”
::
äameLßd”
();

230 ià(
	gm_mašResourûLßd”
)

232 
	gm_mašResourûLßd”
->
ÿnûl
();

233 ià(!
	gm_sub»sourûLßd”s
.
isEm±y
())

236 
£tMašDocum’tE¼Ü
(
äameLßd”
->
ÿnûÎedE¼Ü
(
m_»que¡
));

240 
mašReûivedE¼Ü
(
äameLßd”
->
ÿnûÎedE¼Ü
(
m_»que¡
), 
Œue
);

242 
¡İLßdšgSub»sourûs
();

243 
¡İLßdšgPlugIns
();

245 
	gm_isStİpšg
 = 
çl£
;

248 
	gDocum’tLßd”
::
£tupFÜR•Ïû
()

250 
äameLßd”
()->
£tupFÜR•Ïû
();

251 
	gm_comm™‹d
 = 
çl£
;

254 
	gDocum’tLßd”
::
comm™IfR—dy
()

256 ià(
m_gÙFœ¡By‹
 && !
m_comm™‹d
) {

257 
m_comm™‹d
 = 
Œue
;

258 
äameLßd”
()->
comm™ProvisiÚ®Lßd
(0);

262 
	gDocum’tLßd”
::
fšishedLßdšg
()

264 
m_gÙFœ¡By‹
 = 
Œue
;

265 
comm™IfR—dy
();

266 ià(
F¿meLßd”
* 
	glßd”
 = 
äameLßd”
()) {

267 
lßd”
->
fšishedLßdšgDocum’t
(
this
);

268 
	glßd”
->
’d
();

272 
	gDocum’tLßd”
::
comm™Lßd
(cÚ¡ * 
d©a
, 
Ëngth
)

276 
	gRefPŒ
<
	gDocum’tLßd”
> 
´Ùeù
(
this
);

278 
comm™IfR—dy
();

279 ià(
F¿meLßd”
* 
	gäameLßd”
 = 
Docum’tLßd”
::
äameLßd”
())

280 
äameLßd”
->
comm™‹dLßd
(
this
, 
d©a
, 
Ëngth
);

283 
boŞ
 
	gDocum’tLßd”
::
dÛsProg»ssiveLßd
(cÚ¡ 
SŒšg
& 
MIMETy³
) const

285  !
äameLßd”
()->
isR•Ïcšg
(è|| 
MIMETy³
 == "text/html";

288 
	gDocum’tLßd”
::
»ûivedD©a
(cÚ¡ * 
d©a
, 
Ëngth
)

290 
	gm_gÙFœ¡By‹
 = 
Œue
;

291 ià(
dÛsProg»ssiveLßd
(
m_»¥Ú£
.
mimeTy³
()))

292 
comm™Lßd
(
d©a
, 
Ëngth
);

295 
	gDocum’tLßd”
::
£tupFÜR•ÏûByMIMETy³
(cÚ¡ 
SŒšg
& 
ÃwMIMETy³
)

297 ià(!
m_gÙFœ¡By‹
)

300 
SŒšg
 
	gŞdMIMETy³
 = 
m_»¥Ú£
.
mimeTy³
();

302 ià(!
dÛsProg»ssiveLßd
(
ŞdMIMETy³
)) {

303 
äameLßd”
()->
»v”tToProvisiÚ®
(
this
);

304 
£tupFÜR•Ïû
();

305 
	gRefPŒ
<
	gSh¬edBufãr
> 
	g»sourûD©a
 = 
mašResourûD©a
();

306 
comm™Lßd
(
»sourûD©a
->
d©a
(),„esourûD©a->
size
());

309 
äameLßd”
()->
fšishedLßdšgDocum’t
(
this
);

310 
	gm_äame
->
lßd”
()->
’d
();

312 
äameLßd”
()->
£tR•Ïcšg
();

313 
	gm_gÙFœ¡By‹
 = 
çl£
;

315 ià(
dÛsProg»ssiveLßd
(
ÃwMIMETy³
)) {

316 
äameLßd”
()->
»v”tToProvisiÚ®
(
this
);

317 
£tupFÜR•Ïû
();

320 
¡İLßdšgSub»sourûs
();

321 
¡İLßdšgPlugIns
();

322 
ş—rArchiveResourûs
();

325 
	gDocum’tLßd”
::
upd©eLßdšg
()

327 ià(!
m_äame
) {

328 
£tLßdšg
(
çl£
);

331 
ASSERT
(
this
 =ğ
äameLßd”
()->
aùiveDocum’tLßd”
());

332 
£tLßdšg
(
äameLßd”
()->
isLßdšg
());

335 
	gDocum’tLßd”
::
£tF¿me
(
F¿me
* 
äame
)

337 ià(
m_äame
 =ğ
äame
)

339 
ASSERT
(
äame
 && !
m_äame
);

340 
	gm_äame
 = 
äame
;

341 
©chToF¿me
();

344 
	gDocum’tLßd”
::
©chToF¿me
()

346 
ASSERT
(
m_äame
);

349 
	gDocum’tLßd”
::
d‘achFromF¿me
()

351 
ASSERT
(
m_äame
);

352 #ià
ENABLE
(
OFFLINE_WEB_APPLICATIONS
)

353 
	gm_­¶iÿtiÚCacheHo¡
->
£tDOMAµliÿtiÚCache
(0);

355 
	gm_äame
 = 0;

358 
	gDocum’tLßd”
::
´•¬eFÜLßdS¹
()

360 
ASSERT
(!
m_isStİpšg
);

361 
£tPrim¬yLßdCom¶‘e
(
çl£
);

362 
ASSERT
(
äameLßd”
());

363 
ş—rE¼Üs
();

365 
£tLßdšg
(
Œue
);

367 
äameLßd”
()->
´•¬eFÜLßdS¹
();

370 
	gDocum’tLßd”
::
£tPrim¬yLßdCom¶‘e
(
boŞ
 
æag
)

372 
m_´im¬yLßdCom¶‘e
 = 
æag
;

373 ià(
	gæag
) {

374 ià(
	gm_mašResourûLßd”
) {

375 
	gm_mašResourûD©a
 = 
m_mašResourûLßd”
->
»sourûD©a
();

376 
	gm_mašResourûLßd”
 = 0;

379 ià(
	gthis
 =ğ
äameLßd”
()->
aùiveDocum’tLßd”
())

380 
upd©eLßdšg
();

384 
boŞ
 
	gDocum’tLßd”
::
isLßdšgInAPIS’£
() const

388 ià(
äameLßd”
()->
¡©e
(è!ğ
F¿meS‹Com¶‘e
) {

389 ià(!
m_´im¬yLßdCom¶‘e
 && 
isLßdšg
())

390  
Œue
;

391 ià(!
	gm_sub»sourûLßd”s
.
isEm±y
())

392  
	gŒue
;

393 
Docum’t
* 
	gdoc
 = 
m_äame
->
docum’t
();

394 ià(
	gdoc
->
docLßd”
()->
»que¡CouÁ
())

395  
	gŒue
;

396 ià(
Tok’iz”
* 
	gtok
 = 
doc
->
tok’iz”
())

397 ià(
tok
->
´oûssšgD©a
())

398  
Œue
;

400  
äameLßd”
()->
subäameIsLßdšg
();

403 
	gDocum’tLßd”
::
addAÎArchiveResourûs
(
Archive
* 
¬chive
)

405 ià(!
m_¬chiveResourûCŞËùiÚ
)

406 
m_¬chiveResourûCŞËùiÚ
.
£t
(
Ãw
 
ArchiveResourûCŞËùiÚ
);

408 
ASSERT
(
¬chive
);

409 ià(!
	g¬chive
)

412 
	gm_¬chiveResourûCŞËùiÚ
->
addAÎResourûs
(
¬chive
);

417 
	gDocum’tLßd”
::
addArchiveResourû
(
PassRefPŒ
<
ArchiveResourû
> 
»sourû
)

419 ià(!
m_¬chiveResourûCŞËùiÚ
)

420 
m_¬chiveResourûCŞËùiÚ
.
£t
(
Ãw
 
ArchiveResourûCŞËùiÚ
);

422 
ASSERT
(
»sourû
);

423 ià(!
	g»sourû
)

426 
	gm_¬chiveResourûCŞËùiÚ
->
addResourû
(
»sourû
);

429 
ArchiveResourû
* 
	gDocum’tLßd”
::
¬chiveResourûFÜURL
(cÚ¡ 
KURL
& 
u¾
) const

431 ià(!
m_¬chiveResourûCŞËùiÚ
)

434 
ArchiveResourû
* 
	g»sourû
 = 
m_¬chiveResourûCŞËùiÚ
->
¬chiveResourûFÜURL
(
u¾
);

436  
	g»sourû
 && !»sourû->
shouldIgnÜeWh’UÇrchivšg
() ?„esource : 0;

439 
	gPassRefPŒ
<
	gArchive
> 
	gDocum’tLßd”
::
pİArchiveFÜSubäame
(cÚ¡ 
SŒšg
& 
äameName
)

441  
m_¬chiveResourûCŞËùiÚ
 ? m_¬chiveResourûCŞËùiÚ->
pİSubäameArchive
(
äameName
) : 0;

444 
	gDocum’tLßd”
::
ş—rArchiveResourûs
()

446 
m_¬chiveResourûCŞËùiÚ
.
ş—r
();

447 
	gm_sub¡™u‹ResourûD–iv”yTim”
.
¡İ
();

450 
	gDocum’tLßd”
::
£tP¬£dArchiveD©a
(
PassRefPŒ
<
Sh¬edBufãr
> 
d©a
)

452 
m_·r£dArchiveD©a
 = 
d©a
;

455 
Sh¬edBufãr
* 
	gDocum’tLßd”
::
·r£dArchiveD©a
() const

457  
m_·r£dArchiveD©a
.
g‘
();

460 
	gPassRefPŒ
<
	gArchiveResourû
> 
	gDocum’tLßd”
::
mašResourû
() const

462 cÚ¡ 
ResourûRe¥Ú£
& 
r
 = 
»¥Ú£
();

463 
	gRefPŒ
<
	gSh¬edBufãr
> 
	gmašResourûBufãr
 = 
mašResourûD©a
();

464 ià(!
	gmašResourûBufãr
)

465 
	gmašResourûBufãr
 = 
Sh¬edBufãr
::
ü—‹
();

467  
	gArchiveResourû
::
ü—‹
(
mašResourûBufãr
, 
r
.
u¾
(),„.
mimeTy³
(),„.
‹xtEncodšgName
(), 
äame
()->
Œ“
()->
Çme
());

470 
	gPassRefPŒ
<
	gArchiveResourû
> 
	gDocum’tLßd”
::
sub»sourû
(cÚ¡ 
KURL
& 
u¾
) const

472 ià(!
isComm™‹d
())

475 
CachedResourû
* 
	g»sourû
 = 
m_äame
->
docum’t
()->
docLßd”
()->
ÿchedResourû
(
u¾
);

476 ià(!
	g»sourû
 || !»sourû->
isLßded
())

477  
¬chiveResourûFÜURL
(
u¾
);

481 ià(!
	g»sourû
->
makePurg—bË
(
çl£
))

484 
	gRefPŒ
<
	gSh¬edBufãr
> 
	gd©a
 = 
»sourû
->
d©a
();

485 ià(!
	gd©a
)

488  
	gArchiveResourû
::
ü—‹
(
d©a
.
»Ëa£
(), 
u¾
, 
»sourû
->
»¥Ú£
());

491 
	gDocum’tLßd”
::
g‘Sub»sourûs
(
VeùÜ
<
PassRefPŒ
<
ArchiveResourû
> >& 
sub»sourûs
) const

493 ià(!
isComm™‹d
())

496 
Docum’t
* 
	gdocum’t
 = 
m_äame
->
docum’t
();

498 cÚ¡ 
	gDocLßd”
::
Docum’tResourûM­
& 
®lResourûs
 = 
docum’t
->
docLßd”
()->
®lCachedResourûs
();

499 
	gDocLßd”
::
Docum’tResourûM­
::
cÚ¡_™”©Ü
 
’d
 = 
®lResourûs
.end();

500 
	gDocLßd”
::
Docum’tResourûM­
::
cÚ¡_™”©Ü
 
™
 = 
®lResourûs
.
begš
(); 
	g™
 !ğ
’d
; ++it) {

501 
	gRefPŒ
<
	gArchiveResourû
> 
	gsub»sourû
 = 
this
->
sub»sourû
(
KURL
(
P¬£dURLSŒšg
, 
™
->
£cÚd
->
u¾
()));

502 ià(
	gsub»sourû
)

503 
	gsub»sourûs
.
­³nd
(
sub»sourû
.
»Ëa£
());

509 
	gDocum’tLßd”
::
d–iv”Sub¡™u‹ResourûsAá”D–ay
()

511 ià(
m_³ndšgSub¡™u‹Resourûs
.
isEm±y
())

513 
ASSERT
(
m_äame
 && m_äame->
·ge
());

514 ià(
	gm_äame
->
·ge
()->
deãrsLßdšg
())

516 ià(!
	gm_sub¡™u‹ResourûD–iv”yTim”
.
isAùive
())

517 
	gm_sub¡™u‹ResourûD–iv”yTim”
.
¡¬tOÃShÙ
(0);

520 
	gDocum’tLßd”
::
sub¡™u‹ResourûD–iv”yTim”Fœed
(
Tim”
<
Docum’tLßd”
>*)

522 ià(
m_³ndšgSub¡™u‹Resourûs
.
isEm±y
())

524 
ASSERT
(
m_äame
 && m_äame->
·ge
());

525 ià(
	gm_äame
->
·ge
()->
deãrsLßdšg
())

528 
Sub¡™u‹ResourûM­
 
	gcİy
;

529 
	gcİy
.
sw­
(
m_³ndšgSub¡™u‹Resourûs
);

531 
	gSub¡™u‹ResourûM­
::
cÚ¡_™”©Ü
 
’d
 = 
cİy
.end();

532 
	gSub¡™u‹ResourûM­
::
cÚ¡_™”©Ü
 
™
 = 
cİy
.
begš
(); 
	g™
 !ğ
’d
; ++it) {

533 
	gRefPŒ
<
	gResourûLßd”
> 
	glßd”
 = 
™
->
fœ¡
;

534 
Sub¡™u‹Resourû
* 
	g»sourû
 = 
™
->
£cÚd
.
g‘
();

536 ià(
	g»sourû
) {

537 
Sh¬edBufãr
* 
	gd©a
 = 
»sourû
->
d©a
();

539 
	glßd”
->
didReûiveRe¥Ú£
(
»sourû
->
»¥Ú£
());

540 
	glßd”
->
didReûiveD©a
(
d©a
->d©a(), d©a->
size
(), d©a->size(), 
Œue
);

541 
	glßd”
->
didFšishLßdšg
();

545 
	glßd”
->
didFa
(
lßd”
->
ÿÂÙShowURLE¼Ü
());

550 #iâdeà
NDEBUG


551 
boŞ
 
	gDocum’tLßd”
::
isSub¡™u‹LßdP’dšg
(
ResourûLßd”
* 
lßd”
) const

553  
m_³ndšgSub¡™u‹Resourûs
.
cÚšs
(
lßd”
);

557 
	gDocum’tLßd”
::
ÿnûlP’dšgSub¡™u‹Lßd
(
ResourûLßd”
* 
lßd”
)

559 ià(
m_³ndšgSub¡™u‹Resourûs
.
isEm±y
())

561 
	gm_³ndšgSub¡™u‹Resourûs
.
»move
(
lßd”
);

562 ià(
	gm_³ndšgSub¡™u‹Resourûs
.
isEm±y
())

563 
	gm_sub¡™u‹ResourûD–iv”yTim”
.
¡İ
();

566 
boŞ
 
	gDocum’tLßd”
::
scheduËArchiveLßd
(
ResourûLßd”
* 
lßd”
, cÚ¡ 
ResourûReque¡
& 
»que¡
, cÚ¡ 
KURL
& 
Üigš®URL
)

568 
ArchiveResourû
* 
	g»sourû
 = 0;

570 ià(
	g»que¡
.
u¾
(è=ğ
Üigš®URL
)

571 
»sourû
 = 
¬chiveResourûFÜURL
(
Üigš®URL
);

573 ià(!
	g»sourû
) {

575 
boŞ
 
	gshouldFaLßd
 = 
m_äame
->
£‰šgs
()->
webArchiveDebugModeEÇbËd
(è&& 
ArchiveFaùÜy
::
isArchiveMimeTy³
(
»¥Ú£MIMETy³
());

577 ià(!
	gshouldFaLßd
)

578  
	gçl£
;

581 
	gm_³ndšgSub¡™u‹Resourûs
.
£t
(
lßd”
, 
»sourû
);

582 
d–iv”Sub¡™u‹ResourûsAá”D–ay
();

584  
	gŒue
;

587 
	gDocum’tLßd”
::
addRe¥Ú£
(cÚ¡ 
ResourûRe¥Ú£
& 
r
)

589 ià(!
m_¡İRecÜdšgRe¥Ú£s
)

590 
m_»¥Ú£s
.
­³nd
(
r
);

593 
	gDocum’tLßd”
::
¡İRecÜdšgRe¥Ú£s
()

595 
m_¡İRecÜdšgRe¥Ú£s
 = 
Œue
;

598 
	gDocum’tLßd”
::
£tT™Ë
(cÚ¡ 
SŒšg
& 
t™Ë
)

600 ià(
t™Ë
.
isEm±y
())

603 ià(
	gm_·geT™Ë
 !ğ
t™Ë
) {

604 
äameLßd”
()->
wlChªgeT™Ë
(
this
);

605 
	gm_·geT™Ë
 = 
t™Ë
;

606 
äameLßd”
()->
didChªgeT™Ë
(
this
);

610 
KURL
 
	gDocum’tLßd”
::
u¾FÜHi¡Üy
() const

615 ià(
m_sub¡™u‹D©a
.
isV®id
())

616  
uÄ—chabËURL
();

618  
	gm_Üigš®Reque¡Cİy
.
u¾
();

621 
boŞ
 
	gDocum’tLßd”
::
u¾FÜHi¡ÜyReæeùsFau»
() const

623  
m_sub¡™u‹D©a
.
isV®id
(è|| 
m_»¥Ú£
.
h‰pStusCode
() >= 400;

626 cÚ¡ 
	gKURL
& 
	gDocum’tLßd”
::
Üigš®URL
() const

628  
m_Üigš®Reque¡Cİy
.
u¾
();

631 cÚ¡ 
	gKURL
& 
	gDocum’tLßd”
::
»que¡URL
() const

633  
»que¡
().
u¾
();

636 cÚ¡ 
	gKURL
& 
	gDocum’tLßd”
::
»¥Ú£URL
() const

638  
m_»¥Ú£
.
u¾
();

641 cÚ¡ 
	gSŒšg
& 
	gDocum’tLßd”
::
»¥Ú£MIMETy³
() const

643  
m_»¥Ú£
.
mimeTy³
();

646 cÚ¡ 
	gKURL
& 
	gDocum’tLßd”
::
uÄ—chabËURL
() const

648  
m_sub¡™u‹D©a
.
çšgURL
();

651 
	gDocum’tLßd”
::
£tDeãrsLßdšg
(
boŞ
 
deãrs
)

653 ià(
m_mašResourûLßd”
)

654 
m_mašResourûLßd”
->
£tDeãrsLßdšg
(
deãrs
);

655 
£tAÎDeãrsLßdšg
(
m_sub»sourûLßd”s
, 
deãrs
);

656 
£tAÎDeãrsLßdšg
(
m_¶ugInSŒ—mLßd”s
, 
deãrs
);

657 ià(!
	gdeãrs
)

658 
d–iv”Sub¡™u‹ResourûsAá”D–ay
();

661 
	gDocum’tLßd”
::
¡İLßdšgPlugIns
()

663 
ÿnûlAÎ
(
m_¶ugInSŒ—mLßd”s
);

666 
	gDocum’tLßd”
::
¡İLßdšgSub»sourûs
()

668 
ÿnûlAÎ
(
m_sub»sourûLßd”s
);

671 
	gDocum’tLßd”
::
addSub»sourûLßd”
(
ResourûLßd”
* 
lßd”
)

673 
m_sub»sourûLßd”s
.
add
(
lßd”
);

674 
£tLßdšg
(
Œue
);

677 
	gDocum’tLßd”
::
»moveSub»sourûLßd”
(
ResourûLßd”
* 
lßd”
)

679 
m_sub»sourûLßd”s
.
»move
(
lßd”
);

680 
upd©eLßdšg
();

681 ià(
F¿me
* 
	gäame
 = 
m_äame
)

682 
äame
->
lßd”
()->
checkLßdCom¶‘e
();

685 
	gDocum’tLßd”
::
addPlugInSŒ—mLßd”
(
ResourûLßd”
* 
lßd”
)

687 
m_¶ugInSŒ—mLßd”s
.
add
(
lßd”
);

688 
£tLßdšg
(
Œue
);

691 
	gDocum’tLßd”
::
»movePlugInSŒ—mLßd”
(
ResourûLßd”
* 
lßd”
)

693 
m_¶ugInSŒ—mLßd”s
.
»move
(
lßd”
);

694 
upd©eLßdšg
();

697 
boŞ
 
	gDocum’tLßd”
::
isLßdšgMašResourû
() const

699  !!
m_mašResourûLßd”
;

702 
boŞ
 
	gDocum’tLßd”
::
isLßdšgSub»sourûs
() const

704  !
m_sub»sourûLßd”s
.
isEm±y
();

707 
boŞ
 
	gDocum’tLßd”
::
isLßdšgPlugIns
() const

709  !
m_¶ugInSŒ—mLßd”s
.
isEm±y
();

712 
boŞ
 
	gDocum’tLßd”
::
isLßdšgMuÉ¬tCÚ‹Á
() const

714  
m_mašResourûLßd”
 && m_mašResourûLßd”->
isLßdšgMuÉ¬tCÚ‹Á
();

717 
boŞ
 
	gDocum’tLßd”
::
¡¬tLßdšgMašResourû
(
id’tif›r
)

719 
ASSERT
(!
m_mašResourûLßd”
);

720 
	gm_mašResourûLßd”
 = 
MašResourûLßd”
::
ü—‹
(
m_äame
);

721 
	gm_mašResourûLßd”
->
£tId’tif›r
(
id’tif›r
);

725 
äameLßd”
()->
addExŒaF›ldsToMašResourûReque¡
(
m_»que¡
);

727 ià(!
	gm_mašResourûLßd”
->
lßd
(
m_»que¡
, 
m_sub¡™u‹D©a
)) {

730 
LOG_ERROR
("could‚Ù c»©WebResourûHªdË fÜ URL % -- should bÿughˆby…Şicy hªdË¸Ëv–", 
m_»que¡
.
u¾
().
¡ršg
().
ascii
().
d©a
());

731 
	gm_mašResourûLßd”
 = 0;

732  
	gçl£
;

735  
	gŒue
;

738 
	gDocum’tLßd”
::
ÿnûlMašResourûLßd
(cÚ¡ 
ResourûE¼Ü
& 
”rÜ
)

740 
m_mašResourûLßd”
->
ÿnûl
(
”rÜ
);

743 
	gDocum’tLßd”
::
sub»sourûLßd”FšishedLßdšgOÃP¬t
(
ResourûLßd”
* 
lßd”
)

745 
m_muÉ¬tSub»sourûLßd”s
.
add
(
lßd”
);

746 
	gm_sub»sourûLßd”s
.
»move
(
lßd”
);

747 
upd©eLßdšg
();

748 ià(
F¿me
* 
	gäame
 = 
m_äame
)

749 
äame
->
lßd”
()->
checkLßdCom¶‘e
();

752 
	gDocum’tLßd”
::
icÚLßdDecisiÚAvaabË
()

754 ià(
m_äame
)

755 
m_äame
->
lßd”
()->
icÚLßdDecisiÚAvaabË
();

	@DocumentLoader.h

29 #iâdeà
Docum’tLßd”_h


30 
	#Docum’tLßd”_h


	)

32 
	~"Navig©iÚAùiÚ.h
"

33 
	~"ResourûE¼Ü.h
"

34 
	~"ResourûReque¡.h
"

35 
	~"ResourûRe¥Ú£.h
"

36 
	~"Sub¡™u‹D©a.h
"

37 
	~"Tim”.h
"

39 
Çme¥aû
 
	gWebCÜe
 {

41 
şass
 
	gAµliÿtiÚCacheHo¡
;

42 
şass
 
	gArchive
;

43 
şass
 
	gArchiveResourû
;

44 
şass
 
	gArchiveResourûCŞËùiÚ
;

45 
şass
 
	gF¿me
;

46 
şass
 
	gF¿meLßd”
;

47 
şass
 
	gMašResourûLßd”
;

48 
şass
 
	gResourûLßd”
;

49 
şass
 
	gScheduËPaœ
;

50 
şass
 
	gSh¬edBufãr
;

51 
şass
 
	gSub¡™u‹Resourû
;

53 
	gHashS‘
<
	tRefPŒ
<
	tResourûLßd”
> > 
	tResourûLßd”S‘
;

54 
	gVeùÜ
<
	tResourûRe¥Ú£
> 
	tRe¥Ú£VeùÜ
;

56 
şass
 
	gDocum’tLßd”
 : 
public
 
RefCouÁed
<
Docum’tLßd”
> {

57 
public
:

58 
PassRefPŒ
<
Docum’tLßd”
> 
ü—‹
(cÚ¡ 
ResourûReque¡
& 
»que¡
, cÚ¡ 
Sub¡™u‹D©a
& 
d©a
)

60  
adİtRef
(
Ãw
 
Docum’tLßd”
(
»que¡
, 
d©a
));

62 
	gvœtu®
 ~
Docum’tLßd”
();

64 
£tF¿me
(
F¿me
*);

65 
F¿me
* 
äame
(ècÚ¡ {  
	gm_äame
; }

67 
vœtu®
 
©chToF¿me
();

68 
vœtu®
 
d‘achFromF¿me
();

70 
F¿meLßd”
* 
äameLßd”
() const;

71 
MašResourûLßd”
* 
mašResourûLßd”
(ècÚ¡ {  
	gm_mašResourûLßd”
.
g‘
(); }

72 
	gPassRefPŒ
<
	gSh¬edBufãr
> 
mašResourûD©a
() const;

74 cÚ¡ 
	gResourûReque¡
& 
Üigš®Reque¡
() const;

75 cÚ¡ 
	gResourûReque¡
& 
Üigš®Reque¡Cİy
() const;

77 cÚ¡ 
	gResourûReque¡
& 
»que¡
() const;

78 
	gResourûReque¡
& 
»que¡
();

79 
£tReque¡
(cÚ¡ 
ResourûReque¡
&);

81 cÚ¡ 
	gSub¡™u‹D©a
& 
sub¡™u‹D©a
(ècÚ¡ {  
	gm_sub¡™u‹D©a
; }

83 cÚ¡ 
	gKURL
& 
u¾
() const;

84 cÚ¡ 
	gKURL
& 
uÄ—chabËURL
() const;

86 cÚ¡ 
	gKURL
& 
Üigš®URL
() const;

87 cÚ¡ 
	gKURL
& 
»que¡URL
() const;

88 cÚ¡ 
	gKURL
& 
»¥Ú£URL
() const;

89 cÚ¡ 
	gSŒšg
& 
»¥Ú£MIMETy³
() const;

91 
»¶aûReque¡URLFÜSameDocum’tNavig©iÚ
(cÚ¡ 
KURL
&);

92 
boŞ
 
isStİpšg
(ècÚ¡ {  
	gm_isStİpšg
; }

93 
¡İLßdšg
(
D©aba£PŞicy
 = 
D©aba£PŞicyStİ
);

94 
£tComm™‹d
(
boŞ
 
comm™‹d
è{ 
	gm_comm™‹d
 = committed; }

95 
boŞ
 
isComm™‹d
(ècÚ¡ {  
	gm_comm™‹d
; }

96 
boŞ
 
isLßdšg
(ècÚ¡ {  
	gm_lßdšg
; }

97 
£tLßdšg
(
boŞ
 
lßdšg
è{ 
	gm_lßdšg
 =†oading; }

98 
upd©eLßdšg
();

99 
»ûivedD©a
(const *, );

100 
£tupFÜR•ÏûByMIMETy³
(cÚ¡ 
SŒšg
& 
ÃwMIMETy³
);

101 
fšishedLßdšg
();

102 cÚ¡ 
	gResourûRe¥Ú£
& 
»¥Ú£
(ècÚ¡ {  
	gm_»¥Ú£
; }

103 cÚ¡ 
	gResourûE¼Ü
& 
mašDocum’tE¼Ü
(ècÚ¡ {  
	gm_mašDocum’tE¼Ü
; }

104 
mašReûivedE¼Ü
(cÚ¡ 
ResourûE¼Ü
&, 
boŞ
 
isCom¶‘e
);

105 
£tRe¥Ú£
(cÚ¡ 
ResourûRe¥Ú£
& 
»¥Ú£
è{ 
	gm_»¥Ú£
 =„esponse; }

106 
´•¬eFÜLßdS¹
();

107 
boŞ
 
isCl›ÁRedœeù
(ècÚ¡ {  
	gm_isCl›ÁRedœeù
; }

108 
£tIsCl›ÁRedœeù
(
boŞ
 
isCl›ÁRedœeù
è{ 
	gm_isCl›ÁRedœeù
 = isClientRedirect; }

109 
boŞ
 
isLßdšgInAPIS’£
() const;

110 
£tPrim¬yLßdCom¶‘e
(
boŞ
);

111 
£tT™Ë
(cÚ¡ 
SŒšg
&);

112 cÚ¡ 
	gSŒšg
& 
ov”rideEncodšg
(ècÚ¡ {  
	gm_ov”rideEncodšg
; }

114 #ià
PLATFORM
(
MAC
)

115 
scheduË
(
ScheduËPaœ
*);

116 
unscheduË
(
ScheduËPaœ
*);

119 
addAÎArchiveResourûs
(
Archive
*);

120 
addArchiveResourû
(
PassRefPŒ
<
ArchiveResourû
>);

124 
	gPassRefPŒ
<
	gArchiveResourû
> 
sub»sourû
(cÚ¡ 
KURL
&) const;

126 
ArchiveResourû
* 
¬chiveResourûFÜURL
(cÚ¡ 
KURL
&) const;

128 
	gPassRefPŒ
<
	gArchive
> 
pİArchiveFÜSubäame
(cÚ¡ 
SŒšg
& 
äameName
);

129 
ş—rArchiveResourûs
();

130 
£tP¬£dArchiveD©a
(
PassRefPŒ
<
Sh¬edBufãr
>);

131 
Sh¬edBufãr
* 
·r£dArchiveD©a
() const;

133 
	gPassRefPŒ
<
	gArchiveResourû
> 
mašResourû
() const;

134 
g‘Sub»sourûs
(
VeùÜ
<
PassRefPŒ
<
ArchiveResourû
> >&) const;

136 
boŞ
 
scheduËArchiveLßd
(
ResourûLßd”
*, cÚ¡ 
ResourûReque¡
&, cÚ¡ 
KURL
&);

137 #iâdeà
NDEBUG


138 
boŞ
 
isSub¡™u‹LßdP’dšg
(
ResourûLßd”
*) const;

140 
ÿnûlP’dšgSub¡™u‹Lßd
(
ResourûLßd”
*);

142 
addRe¥Ú£
(cÚ¡ 
ResourûRe¥Ú£
&);

143 cÚ¡ 
	gRe¥Ú£VeùÜ
& 
»¥Ú£s
(ècÚ¡ {  
	gm_»¥Ú£s
; }

145 cÚ¡ 
	gNavig©iÚAùiÚ
& 
Œigg”šgAùiÚ
(ècÚ¡ {  
	gm_Œigg”šgAùiÚ
; }

146 
£tTrigg”šgAùiÚ
(cÚ¡ 
Navig©iÚAùiÚ
& 
aùiÚ
è{ 
	gm_Œigg”šgAùiÚ
 =‡ction; }

147 
£tOv”rideEncodšg
(cÚ¡ 
SŒšg
& 
’codšg
è{ 
	gm_ov”rideEncodšg
 =ƒncoding; }

148 
£tLa¡CheckedReque¡
(cÚ¡ 
ResourûReque¡
& 
»que¡
è{ 
	gm_Ï¡CheckedReque¡
 =„equest; }

149 cÚ¡ 
	gResourûReque¡
& 
Ï¡CheckedReque¡
(è{  
	gm_Ï¡CheckedReque¡
; }

151 
¡İRecÜdšgRe¥Ú£s
();

152 cÚ¡ 
	gSŒšg
& 
t™Ë
(ècÚ¡ {  
	gm_·geT™Ë
; }

154 
KURL
 
u¾FÜHi¡Üy
() const;

155 
boŞ
 
u¾FÜHi¡ÜyReæeùsFau»
() const;

162 
SŒšg
 
ş›ÁRedœeùSourûFÜHi¡Üy
(ècÚ¡ {  
	gm_ş›ÁRedœeùSourûFÜHi¡Üy
; }

163 
SŒšg
 
ş›ÁRedœeùDe¡š©iÚFÜHi¡Üy
(ècÚ¡ {  
u¾FÜHi¡Üy
(); }

164 
£tCl›ÁRedœeùSourûFÜHi¡Üy
(cÚ¡ 
SŒšg
& 
ş›ÁedœeùSourûFÜHi¡Üy
è{ 
	gm_ş›ÁRedœeùSourûFÜHi¡Üy
 = clientedirectSourceForHistory; }

166 
SŒšg
 
£rv”RedœeùSourûFÜHi¡Üy
(ècÚ¡ {  
u¾FÜHi¡Üy
(è=ğ
u¾
() ? String() : urlForHistory(); }

167 
SŒšg
 
£rv”RedœeùDe¡š©iÚFÜHi¡Üy
(ècÚ¡ {  
u¾
(); }

169 
boŞ
 
didC»©eGlob®Hi¡ÜyEÁry
(ècÚ¡ {  
	gm_didC»©eGlob®Hi¡ÜyEÁry
; }

170 
£tDidC»©eGlob®Hi¡ÜyEÁry
(
boŞ
 
didC»©eGlob®Hi¡ÜyEÁry
è{ 
	gm_didC»©eGlob®Hi¡ÜyEÁry
 = didCreateGlobalHistoryEntry; }

172 
£tDeãrsLßdšg
(
boŞ
);

174 
boŞ
 
¡¬tLßdšgMašResourû
(
id’tif›r
);

175 
ÿnûlMašResourûLßd
(cÚ¡ 
ResourûE¼Ü
&);

177 
icÚLßdDecisiÚAvaabË
();

179 
boŞ
 
isLßdšgMašResourû
() const;

180 
boŞ
 
isLßdšgSub»sourûs
() const;

181 
boŞ
 
isLßdšgPlugIns
() const;

182 
boŞ
 
isLßdšgMuÉ¬tCÚ‹Á
() const;

184 
¡İLßdšgPlugIns
();

185 
¡İLßdšgSub»sourûs
();

187 
addSub»sourûLßd”
(
ResourûLßd”
*);

188 
»moveSub»sourûLßd”
(
ResourûLßd”
*);

189 
addPlugInSŒ—mLßd”
(
ResourûLßd”
*);

190 
»movePlugInSŒ—mLßd”
(
ResourûLßd”
*);

192 
sub»sourûLßd”FšishedLßdšgOÃP¬t
(
ResourûLßd”
*);

194 
£tDeãrMašResourûD©aLßd
(
boŞ
 
deãr
è{ 
	gm_deãrMašResourûD©aLßd
 = defer; }

195 
boŞ
 
deãrMašResourûD©aLßd
(ècÚ¡ {  
	gm_deãrMašResourûD©aLßd
; }

197 
didT–lCl›ÁAboutLßd
(cÚ¡ 
SŒšg
& 
u¾
è{ 
	gm_»sourûsCl›ÁKnowsAbout
.
add
(url); }

198 
boŞ
 
haveTŞdCl›ÁAboutLßd
(cÚ¡ 
SŒšg
& 
u¾
è{  
	gm_»sourûsCl›ÁKnowsAbout
.
cÚšs
(url); }

199 
»cÜdMemÜyCacheLßdFÜFutu»Cl›ÁNÙifiÿtiÚ
(cÚ¡ 
SŒšg
& 
u¾
);

200 
keMemÜyCacheLßdsFÜCl›ÁNÙifiÿtiÚ
(
VeùÜ
<
SŒšg
>& 
lßds
);

202 #ià
ENABLE
(
OFFLINE_WEB_APPLICATIONS
)

203 
AµliÿtiÚCacheHo¡
* 
­¶iÿtiÚCacheHo¡
(ècÚ¡ {  
	gm_­¶iÿtiÚCacheHo¡
.
g‘
(); }

206 
	g´Ùeùed
:

207 
Docum’tLßd”
(cÚ¡ 
ResourûReque¡
&, cÚ¡ 
Sub¡™u‹D©a
&);

209 
boŞ
 
	gm_deãrMašResourûD©aLßd
;

211 
	g´iv©e
:

212 
£tupFÜR•Ïû
();

213 
comm™IfR—dy
();

214 
ş—rE¼Üs
();

215 
£tMašDocum’tE¼Ü
(cÚ¡ 
ResourûE¼Ü
&);

216 
comm™Lßd
(const *, );

217 
boŞ
 
dÛsProg»ssiveLßd
(cÚ¡ 
SŒšg
& 
MIMETy³
) const;

219 
d–iv”Sub¡™u‹ResourûsAá”D–ay
();

220 
sub¡™u‹ResourûD–iv”yTim”Fœed
(
Tim”
<
Docum’tLßd”
>*);

222 
F¿me
* 
	gm_äame
;

224 
	gRefPŒ
<
	gMašResourûLßd”
> 
	gm_mašResourûLßd”
;

225 
ResourûLßd”S‘
 
	gm_sub»sourûLßd”s
;

226 
ResourûLßd”S‘
 
	gm_muÉ¬tSub»sourûLßd”s
;

227 
ResourûLßd”S‘
 
	gm_¶ugInSŒ—mLßd”s
;

229 
	gRefPŒ
<
	gSh¬edBufãr
> 
	gm_mašResourûD©a
;

235 
ResourûReque¡
 
	gm_Üigš®Reque¡
;

237 
Sub¡™u‹D©a
 
	gm_sub¡™u‹D©a
;

241 
ResourûReque¡
 
	gm_Üigš®Reque¡Cİy
;

246 
ResourûReque¡
 
	gm_»que¡
;

248 
ResourûRe¥Ú£
 
	gm_»¥Ú£
;

250 
ResourûE¼Ü
 
	gm_mašDocum’tE¼Ü
;

252 
boŞ
 
	gm_comm™‹d
;

253 
boŞ
 
	gm_isStİpšg
;

254 
boŞ
 
	gm_lßdšg
;

255 
boŞ
 
	gm_gÙFœ¡By‹
;

256 
boŞ
 
	gm_´im¬yLßdCom¶‘e
;

257 
boŞ
 
	gm_isCl›ÁRedœeù
;

259 
SŒšg
 
	gm_·geT™Ë
;

261 
SŒšg
 
	gm_ov”rideEncodšg
;

265 
Navig©iÚAùiÚ
 
	gm_Œigg”šgAùiÚ
;

269 
ResourûReque¡
 
	gm_Ï¡CheckedReque¡
;

274 
Re¥Ú£VeùÜ
 
	gm_»¥Ú£s
;

275 
boŞ
 
	gm_¡İRecÜdšgRe¥Ú£s
;

277 
	gHashM­
<
	tRefPŒ
<
	tResourûLßd”
>, RefPŒ<
	tSub¡™u‹Resourû
> > 
	tSub¡™u‹ResourûM­
;

278 
Sub¡™u‹ResourûM­
 
	gm_³ndšgSub¡™u‹Resourûs
;

279 
	gTim”
<
	gDocum’tLßd”
> 
	gm_sub¡™u‹ResourûD–iv”yTim”
;

281 
	gOwnPŒ
<
	gArchiveResourûCŞËùiÚ
> 
	gm_¬chiveResourûCŞËùiÚ
;

282 
	gRefPŒ
<
	gSh¬edBufãr
> 
	gm_·r£dArchiveD©a
;

284 
	gHashS‘
<
	gSŒšg
> 
	gm_»sourûsCl›ÁKnowsAbout
;

285 
	gVeùÜ
<
	gSŒšg
> 
	gm_»sourûsLßdedFromMemÜyCacheFÜCl›ÁNÙifiÿtiÚ
;

287 
SŒšg
 
	gm_ş›ÁRedœeùSourûFÜHi¡Üy
;

288 
boŞ
 
	gm_didC»©eGlob®Hi¡ÜyEÁry
;

290 #ià
ENABLE
(
OFFLINE_WEB_APPLICATIONS
)

291 
ä›nd
 
şass
 
	gAµliÿtiÚCacheHo¡
;

292 
	gOwnPŒ
<
	gAµliÿtiÚCacheHo¡
> 
	gm_­¶iÿtiÚCacheHo¡
;

296 
šlše
 
	gDocum’tLßd”
::
»cÜdMemÜyCacheLßdFÜFutu»Cl›ÁNÙifiÿtiÚ
(cÚ¡ 
SŒšg
& 
u¾
)

298 
m_»sourûsLßdedFromMemÜyCacheFÜCl›ÁNÙifiÿtiÚ
.
­³nd
(
u¾
);

301 
šlše
 
	gDocum’tLßd”
::
keMemÜyCacheLßdsFÜCl›ÁNÙifiÿtiÚ
(
VeùÜ
<
SŒšg
>& 
lßdsS‘
)

303 
lßdsS‘
.
sw­
(
m_»sourûsLßdedFromMemÜyCacheFÜCl›ÁNÙifiÿtiÚ
);

304 
	gm_»sourûsLßdedFromMemÜyCacheFÜCl›ÁNÙifiÿtiÚ
.
ş—r
();

	@DocumentThreadableLoader.cpp

31 
	~"cÚfig.h
"

32 
	~"Docum’tTh»adabËLßd”.h
"

34 
	~"Auth’tiÿtiÚCh®Ënge.h
"

35 
	~"CrossOrigšAcûssCÚŒŞ.h
"

36 
	~"CrossOrigšP»æightResuÉCache.h
"

37 
	~"Docum’t.h
"

38 
	~"F¿me.h
"

39 
	~"F¿meLßd”.h
"

40 
	~"ResourûReque¡.h
"

41 
	~"Secur™yOrigš.h
"

42 
	~"Sub»sourûLßd”.h
"

43 
	~"Th»adabËLßd”Cl›Á.h
"

45 
Çme¥aû
 
	gWebCÜe
 {

47 
	gDocum’tTh»adabËLßd”
::
lßdResourûSynchrÚou¦y
(
Docum’t
* 
docum’t
, cÚ¡ 
ResourûReque¡
& 
»que¡
, 
Th»adabËLßd”Cl›Á
& 
ş›Á
, cÚ¡ 
Th»adabËLßd”O±iÚs
& 
İtiÚs
)

50 
	gRefPŒ
<
	gDocum’tTh»adabËLßd”
> 
	glßd”
 = 
adİtRef
(
Ãw
 
Docum’tTh»adabËLßd”
(
docum’t
, &
ş›Á
, 
LßdSynchrÚou¦y
, 
»que¡
, 
İtiÚs
));

51 
ASSERT
(
lßd”
->
hasOÃRef
());

54 
	gPassRefPŒ
<
	gDocum’tTh»adabËLßd”
> Docum’tTh»adabËLßd”::
ü—‹
(
Docum’t
* 
docum’t
, 
Th»adabËLßd”Cl›Á
* 
ş›Á
, cÚ¡ 
ResourûReque¡
& 
»que¡
, cÚ¡ 
Th»adabËLßd”O±iÚs
& 
İtiÚs
)

56 
	gRefPŒ
<
	gDocum’tTh»adabËLßd”
> 
	glßd”
 = 
adİtRef
(
Ãw
 
Docum’tTh»adabËLßd”
(
docum’t
, 
ş›Á
, 
LßdAsynchrÚou¦y
, 
»que¡
, 
İtiÚs
));

57 ià(!
	glßd”
->
	gm_lßd”
)

58 
	glßd”
 = 0;

59  
	glßd”
.
»Ëa£
();

62 
	gDocum’tTh»adabËLßd”
::
Docum’tTh»adabËLßd”
(
Docum’t
* 
docum’t
, 
Th»adabËLßd”Cl›Á
* 
ş›Á
, 
BlockšgBehaviÜ
 
blockšgBehaviÜ
, cÚ¡ 
ResourûReque¡
& 
»que¡
, cÚ¡ 
Th»adabËLßd”O±iÚs
& 
İtiÚs
)

63 : 
m_ş›Á
(
ş›Á
)

64 , 
m_docum’t
(
docum’t
)

65 , 
m_İtiÚs
(
İtiÚs
)

66 , 
m_§meOrigšReque¡
(
docum’t
->
£cur™yOrigš
()->
ÿnReque¡
(
»que¡
.
u¾
()))

67 , 
m_async
(
blockšgBehaviÜ
 =ğ
LßdAsynchrÚou¦y
)

69 
ASSERT
(
docum’t
);

70 
ASSERT
(
ş›Á
);

72 ià(
	gm_§meOrigšReque¡
 || 
	gm_İtiÚs
.
	güossOrigšReque¡PŞicy
 =ğ
AÎowCrossOrigšReque¡s
) {

73 
lßdReque¡
(
»que¡
, 
DoSecur™yCheck
);

77 ià(
	gm_İtiÚs
.
	güossOrigšReque¡PŞicy
 =ğ
D’yCrossOrigšReque¡s
) {

78 
m_ş›Á
->
didFa
(
ResourûE¼Ü
());

82 
ASSERT
(
m_İtiÚs
.
üossOrigšReque¡PŞicy
 =ğ
U£AcûssCÚŒŞ
);

84 ià(!
	gm_İtiÚs
.
	gfÜûP»æight
 && 
isSim¶eCrossOrigšAcûssReque¡
(
»que¡
.
h‰pM‘hod
(),„eque¡.
h‰pH—d”F›lds
()))

85 
makeSim¶eCrossOrigšAcûssReque¡
(
»que¡
);

87 
	gm_aùu®Reque¡
.
£t
(
Ãw
 
ResourûReque¡
(
»que¡
));

88 
	gm_aùu®Reque¡
->
£tAÎowCook›s
(
m_İtiÚs
.
®lowC»d’tŸls
);

90 ià(
	gCrossOrigšP»æightResuÉCache
::
sh¬ed
().
ÿnSkP»æight
(
docum’t
->
£cur™yOrigš
()->
toSŒšg
(), 
»que¡
.
u¾
(), 
m_İtiÚs
.
®lowC»d’tŸls
,„eque¡.
h‰pM‘hod
(),„eque¡.
h‰pH—d”F›lds
()))

91 
´eæightSucûss
();

93 
makeCrossOrigšAcûssReque¡W™hP»æight
(
»que¡
);

97 
	gDocum’tTh»adabËLßd”
::
makeSim¶eCrossOrigšAcûssReque¡
(cÚ¡ 
ResourûReque¡
& 
»que¡
)

99 
ASSERT
(
isSim¶eCrossOrigšAcûssReque¡
(
»que¡
.
h‰pM‘hod
(),„eque¡.
h‰pH—d”F›lds
()));

102 ià(!
	g»que¡
.
u¾
().
´ÙocŞInHTTPFamy
()) {

103 
	gm_ş›Á
->
didFa
(
ResourûE¼Ü
());

108 
ResourûReque¡
 
üossOrigšReque¡
(
»que¡
);

109 
	güossOrigšReque¡
.
»moveC»d’tŸls
();

110 
	güossOrigšReque¡
.
£tAÎowCook›s
(
m_İtiÚs
.
®lowC»d’tŸls
);

111 
	güossOrigšReque¡
.
£tHTTPOrigš
(
m_docum’t
->
£cur™yOrigš
()->
toSŒšg
());

113 
lßdReque¡
(
üossOrigšReque¡
, 
DoSecur™yCheck
);

116 
	gDocum’tTh»adabËLßd”
::
makeCrossOrigšAcûssReque¡W™hP»æight
(cÚ¡ 
ResourûReque¡
& 
»que¡
)

118 
ResourûReque¡
 
´eæightReque¡
(
»que¡
.
u¾
());

119 
	g´eæightReque¡
.
»moveC»d’tŸls
();

120 
	g´eæightReque¡
.
£tHTTPOrigš
(
m_docum’t
->
£cur™yOrigš
()->
toSŒšg
());

121 
	g´eæightReque¡
.
£tAÎowCook›s
(
m_İtiÚs
.
®lowC»d’tŸls
);

122 
	g´eæightReque¡
.
£tHTTPM‘hod
("OPTIONS");

123 
	g´eæightReque¡
.
£tHTTPH—d”F›ld
("Acûss-CÚŒŞ-Reque¡-M‘hod", 
»que¡
.
h‰pM‘hod
());

125 cÚ¡ 
	gHTTPH—d”M­
& 
	g»que¡H—d”F›lds
 = 
»que¡
.
h‰pH—d”F›lds
();

127 ià(
	g»que¡H—d”F›lds
.
size
() > 0) {

128 
	gVeùÜ
<
	gUCh¬
> 
	gh—d”Bufãr
;

129 
	gHTTPH—d”M­
::
cÚ¡_™”©Ü
 
™
 = 
»que¡H—d”F›lds
.
begš
();

130 
­³nd
(
h—d”Bufãr
, 
™
->
fœ¡
);

131 ++
	g™
;

133 
	gHTTPH—d”M­
::
cÚ¡_™”©Ü
 
’d
 = 
»que¡H—d”F›lds
.end();

134 ; 
	g™
 !ğ
’d
; ++it) {

135 
	gh—d”Bufãr
.
­³nd
(',');

136 
	gh—d”Bufãr
.
­³nd
(' ');

137 
­³nd
(
h—d”Bufãr
, 
™
->
fœ¡
);

140 
	g´eæightReque¡
.
£tHTTPH—d”F›ld
("Acûss-CÚŒŞ-Reque¡-H—d”s", 
SŒšg
::
adİt
(
h—d”Bufãr
));

143 
lßdReque¡
(
´eæightReque¡
, 
DoSecur™yCheck
);

146 
	gDocum’tTh»adabËLßd”
::~
Docum’tTh»adabËLßd”
()

148 ià(
m_lßd”
)

149 
m_lßd”
->
ş—rCl›Á
();

152 
	gDocum’tTh»adabËLßd”
::
ÿnûl
()

154 ià(!
m_lßd”
)

157 
	gm_lßd”
->
ÿnûl
();

158 
	gm_lßd”
->
ş—rCl›Á
();

159 
	gm_lßd”
 = 0;

160 
	gm_ş›Á
 = 0;

163 
	gDocum’tTh»adabËLßd”
::
wlS’dReque¡
(
Sub»sourûLßd”
* 
lßd”
, 
ResourûReque¡
& 
»que¡
, cÚ¡ 
ResourûRe¥Ú£
&)

165 
ASSERT
(
m_ş›Á
);

166 
ASSERT_UNUSED
(
lßd”
,†ßd” =ğ
m_lßd”
);

168 ià(!
isAÎowedRedœeù
(
»que¡
.
u¾
())) {

169 
	gRefPŒ
<
	gDocum’tTh»adabËLßd”
> 
´Ùeù
(
this
);

170 
	gm_ş›Á
->
didFaRedœeùCheck
();

171 
	g»que¡
 = 
ResourûReque¡
();

175 
	gDocum’tTh»adabËLßd”
::
didS’dD©a
(
Sub»sourûLßd”
* 
lßd”
, 
by‹sS’t
, 
tÙ®By‹sToBeS’t
)

177 
ASSERT
(
m_ş›Á
);

178 
ASSERT_UNUSED
(
lßd”
,†ßd” =ğ
m_lßd”
);

180 
	gm_ş›Á
->
didS’dD©a
(
by‹sS’t
, 
tÙ®By‹sToBeS’t
);

183 
	gDocum’tTh»adabËLßd”
::
didReûiveRe¥Ú£
(
Sub»sourûLßd”
* 
lßd”
, cÚ¡ 
ResourûRe¥Ú£
& 
»¥Ú£
)

185 
ASSERT
(
m_ş›Á
);

186 
ASSERT_UNUSED
(
lßd”
,†ßd” =ğ
m_lßd”
);

188 ià(
	gm_aùu®Reque¡
) {

189 ià(!
·s£sAcûssCÚŒŞCheck
(
»¥Ú£
, 
m_İtiÚs
.
®lowC»d’tŸls
, 
m_docum’t
->
£cur™yOrigš
())) {

190 
´eæightFau»
();

194 
	gOwnPŒ
<
	gCrossOrigšP»æightResuÉCacheI‹m
> 
´eæightResuÉ
(
Ãw
 
CrossOrigšP»æightResuÉCacheI‹m
(
m_İtiÚs
.
®lowC»d’tŸls
));

195 ià(!
	g´eæightResuÉ
->
·r£
(
»¥Ú£
)

196 || !
	g´eæightResuÉ
->
®lowsCrossOrigšM‘hod
(
m_aùu®Reque¡
->
h‰pM‘hod
())

197 || !
	g´eæightResuÉ
->
®lowsCrossOrigšH—d”s
(
m_aùu®Reque¡
->
h‰pH—d”F›lds
())) {

198 
´eæightFau»
();

202 
	gCrossOrigšP»æightResuÉCache
::
sh¬ed
().
­³ndEÁry
(
m_docum’t
->
£cur™yOrigš
()->
toSŒšg
(), 
m_aùu®Reque¡
->
u¾
(), 
´eæightResuÉ
.
»Ëa£
());

204 ià(!
	gm_§meOrigšReque¡
 && 
	gm_İtiÚs
.
	güossOrigšReque¡PŞicy
 =ğ
U£AcûssCÚŒŞ
) {

205 ià(!
·s£sAcûssCÚŒŞCheck
(
»¥Ú£
, 
m_İtiÚs
.
®lowC»d’tŸls
, 
m_docum’t
->
£cur™yOrigš
())) {

206 
m_ş›Á
->
didFa
(
ResourûE¼Ü
());

211 
	gm_ş›Á
->
didReûiveRe¥Ú£
(
»¥Ú£
);

215 
	gDocum’tTh»adabËLßd”
::
didReûiveD©a
(
Sub»sourûLßd”
* 
lßd”
, cÚ¡ * 
d©a
, 
ËngthReûived
)

217 
ASSERT
(
m_ş›Á
);

218 
ASSERT_UNUSED
(
lßd”
,†ßd” =ğ
m_lßd”
);

221 ià(
	gm_aùu®Reque¡
)

224 
	gm_ş›Á
->
didReûiveD©a
(
d©a
, 
ËngthReûived
);

227 
	gDocum’tTh»adabËLßd”
::
didFšishLßdšg
(
Sub»sourûLßd”
* 
lßd”
)

229 
ASSERT
(
lßd”
 =ğ
m_lßd”
);

230 
ASSERT
(
m_ş›Á
);

231 
didFšishLßdšg
(
lßd”
->
id’tif›r
());

234 
	gDocum’tTh»adabËLßd”
::
didFšishLßdšg
(
id’tif›r
)

236 ià(
m_aùu®Reque¡
) {

237 
ASSERT
(!
m_§meOrigšReque¡
);

238 
ASSERT
(
m_İtiÚs
.
üossOrigšReque¡PŞicy
 =ğ
U£AcûssCÚŒŞ
);

239 
´eæightSucûss
();

241 
	gm_ş›Á
->
didFšishLßdšg
(
id’tif›r
);

244 
	gDocum’tTh»adabËLßd”
::
didFa
(
Sub»sourûLßd”
* 
lßd”
, cÚ¡ 
ResourûE¼Ü
& 
”rÜ
)

246 
ASSERT
(
m_ş›Á
);

248 
ASSERT_UNUSED
(
lßd”
,†ßd” =ğ
m_lßd”
 || !m_loader);

250 
	gm_ş›Á
->
didFa
(
”rÜ
);

253 
boŞ
 
	gDocum’tTh»adabËLßd”
::
g‘ShouldU£C»d’tŸlStÜage
(
Sub»sourûLßd”
* 
lßd”
, boŞ& 
shouldU£C»d’tŸlStÜage
)

255 
ASSERT_UNUSED
(
lßd”
,†ßd” =ğ
m_lßd”
 || !m_loader);

257 ià(!
	gm_İtiÚs
.
	g®lowC»d’tŸls
) {

258 
	gshouldU£C»d’tŸlStÜage
 = 
çl£
;

259  
	gŒue
;

262  
	gçl£
;

265 
	gDocum’tTh»adabËLßd”
::
didReûiveAuth’tiÿtiÚCh®Ënge
(
Sub»sourûLßd”
* 
lßd”
, cÚ¡ 
Auth’tiÿtiÚCh®Ënge
&)

267 
ASSERT
(
lßd”
 =ğ
m_lßd”
);

269 ià(!
	gm_§meOrigšReque¡
) {

270 
	gRefPŒ
<
	gDocum’tTh»adabËLßd”
> 
´Ùeù
(
this
);

271 
	gm_ş›Á
->
didFa
(
lßd”
->
blockedE¼Ü
());

272 
ÿnûl
();

276 
	gDocum’tTh»adabËLßd”
::
»ûivedCªûÎ©iÚ
(
Sub»sourûLßd”
* 
lßd”
, cÚ¡ 
Auth’tiÿtiÚCh®Ënge
& 
ch®Ënge
)

278 
ASSERT
(
m_ş›Á
);

279 
ASSERT_UNUSED
(
lßd”
,†ßd” =ğ
m_lßd”
);

280 
	gm_ş›Á
->
didReûiveAuth’tiÿtiÚCªûÎ©iÚ
(
ch®Ënge
.
çu»Re¥Ú£
());

283 
	gDocum’tTh»adabËLßd”
::
´eæightSucûss
()

285 
OwnPŒ
<
ResourûReque¡
> 
aùu®Reque¡
;

286 
	gaùu®Reque¡
.
sw­
(
m_aùu®Reque¡
);

289 
lßdReque¡
(*
aùu®Reque¡
, 
SkSecur™yCheck
);

292 
	gDocum’tTh»adabËLßd”
::
´eæightFau»
()

294 
m_aùu®Reque¡
 = 0;

295 
	gm_ş›Á
->
didFa
(
ResourûE¼Ü
());

298 
	gDocum’tTh»adabËLßd”
::
lßdReque¡
(cÚ¡ 
ResourûReque¡
& 
»que¡
, 
Secur™yCheckPŞicy
 
£cur™yCheck
)

300 ià(
	gm_async
) {

302 
boŞ
 
	g£ndLßdC®lbacks
 = 
m_İtiÚs
.
£ndLßdC®lbacks
 && !
m_aùu®Reque¡
;

303 
boŞ
 
	g¢iffCÚ‹Á
 = 
m_İtiÚs
.
¢iffCÚ‹Á
 && !
m_aùu®Reque¡
;

306 
	gm_lßd”
 = 0;

307 
	gm_lßd”
 = 
Sub»sourûLßd”
::
ü—‹
(
m_docum’t
->
äame
(), 
this
, 
»que¡
, 
£cur™yCheck
, 
£ndLßdC®lbacks
, 
¢iffCÚ‹Á
);

312 
StÜedC»d’tŸls
 
	g¡ÜedC»d’tŸls
 = 
m_İtiÚs
.
®lowC»d’tŸls
 ? 
AÎowStÜedC»d’tŸls
 : 
DoNÙAÎowStÜedC»d’tŸls
;

314 
	gVeùÜ
<> 
	gd©a
;

315 
ResourûE¼Ü
 
	g”rÜ
;

316 
ResourûRe¥Ú£
 
	g»¥Ú£
;

317 
	gid’tif›r
 = 
¡d
::
num”ic_lim™s
<>::
max
();

318 ià(
	gm_docum’t
->
äame
())

319 
	gid’tif›r
 = 
m_docum’t
->
äame
()->
lßd”
()->
lßdResourûSynchrÚou¦y
(
»que¡
, 
¡ÜedC»d’tŸls
, 
”rÜ
, 
»¥Ú£
, 
d©a
);

323 ià(!
	g”rÜ
.
isNuÎ
(è&& !
	g»que¡
.
u¾
().
isLoÿlFe
(è&& 
	g»¥Ú£
.
h‰pStusCode
() <= 0) {

324 
m_ş›Á
->
didFa
(
”rÜ
);

331 ià(
	g»que¡
.
u¾
(è!ğ
»¥Ú£
.u¾(è&& !
isAÎowedRedœeù
(response.url())) {

332 
m_ş›Á
->
didFaRedœeùCheck
();

336 
didReûiveRe¥Ú£
(0, 
»¥Ú£
);

338 cÚ¡ * 
	gby‹s
 = 
¡©ic_ÿ¡
<cÚ¡ *>(
d©a
.data());

339 
	gËn
 = 
¡©ic_ÿ¡
<>(
d©a
.
size
());

340 
didReûiveD©a
(0, 
by‹s
, 
Ën
);

342 
didFšishLßdšg
(
id’tif›r
);

345 
boŞ
 
	gDocum’tTh»adabËLßd”
::
isAÎowedRedœeù
(cÚ¡ 
KURL
& 
u¾
)

347 ià(
m_İtiÚs
.
üossOrigšReque¡PŞicy
 =ğ
AÎowCrossOrigšReque¡s
)

348  
Œue
;

353  
	gm_§meOrigšReque¡
 && 
	gm_docum’t
->
£cur™yOrigš
()->
ÿnReque¡
(
u¾
);

	@DocumentThreadableLoader.h

31 #iâdeà
Docum’tTh»adabËLßd”_h


32 
	#Docum’tTh»adabËLßd”_h


	)

34 
	~"F¿meLßd”Ty³s.h
"

35 
	~"Sub»sourûLßd”Cl›Á.h
"

36 
	~"Th»adabËLßd”.h
"

37 
	~<wtf/OwnPŒ.h
>

38 
	~<wtf/PassRefPŒ.h
>

39 
	~<wtf/RefCouÁed.h
>

40 
	~<wtf/RefPŒ.h
>

42 
Çme¥aû
 
	gWebCÜe
 {

43 
şass
 
	gDocum’t
;

44 
şass
 
	gKURL
;

45 
şass
 
	gResourûReque¡
;

46 
şass
 
	gTh»adabËLßd”Cl›Á
;

48 
şass
 
	gDocum’tTh»adabËLßd”
 : 
public
 
RefCouÁed
<
Docum’tTh»adabËLßd”
>,…ubliø
	gTh»adabËLßd”
, 
´iv©e
 
	gSub»sourûLßd”Cl›Á
 {

49 
	gpublic
:

50 
lßdResourûSynchrÚou¦y
(
Docum’t
*, cÚ¡ 
ResourûReque¡
&, 
Th»adabËLßd”Cl›Á
&, cÚ¡ 
Th»adabËLßd”O±iÚs
&);

51 
	gPassRefPŒ
<
	gDocum’tTh»adabËLßd”
> 
ü—‹
(
Docum’t
*, 
Th»adabËLßd”Cl›Á
*, cÚ¡ 
ResourûReque¡
&, cÚ¡ 
Th»adabËLßd”O±iÚs
&);

52 
	gvœtu®
 ~
Docum’tTh»adabËLßd”
();

54 
vœtu®
 
ÿnûl
();

56 
usšg
 
	gRefCouÁed
<
	gDocum’tTh»adabËLßd”
>::
»f
;

57 
usšg
 
	gRefCouÁed
<
	gDocum’tTh»adabËLßd”
>::
d”ef
;

59 
	g´Ùeùed
:

60 
vœtu®
 
»fTh»adabËLßd”
(è{ 
»f
(); }

61 
vœtu®
 
d”efTh»adabËLßd”
(è{ 
d”ef
(); }

63 
	g´iv©e
:

64 
	eBlockšgBehaviÜ
 {

65 
LßdSynchrÚou¦y
,

66 
	gLßdAsynchrÚou¦y


69 
Docum’tTh»adabËLßd”
(
Docum’t
*, 
Th»adabËLßd”Cl›Á
*, 
BlockšgBehaviÜ
 
blockšgBehaviÜ
, cÚ¡ 
ResourûReque¡
&, cÚ¡ 
Th»adabËLßd”O±iÚs
& 
İtiÚs
);

71 
vœtu®
 
wlS’dReque¡
(
Sub»sourûLßd”
*, 
ResourûReque¡
&, cÚ¡ 
ResourûRe¥Ú£
& 
»dœeùRe¥Ú£
);

72 
vœtu®
 
didS’dD©a
(
Sub»sourûLßd”
*, 
by‹sS’t
, 
tÙ®By‹sToBeS’t
);

74 
vœtu®
 
didReûiveRe¥Ú£
(
Sub»sourûLßd”
*, cÚ¡ 
ResourûRe¥Ú£
&);

75 
vœtu®
 
didReûiveD©a
(
Sub»sourûLßd”
*, cÚ¡ *, 
ËngthReûived
);

76 
vœtu®
 
didFšishLßdšg
(
Sub»sourûLßd”
*);

77 
vœtu®
 
didFa
(
Sub»sourûLßd”
*, cÚ¡ 
ResourûE¼Ü
&);

79 
vœtu®
 
boŞ
 
g‘ShouldU£C»d’tŸlStÜage
(
Sub»sourûLßd”
*, boŞ& 
shouldU£C»d’tŸlStÜage
);

80 
vœtu®
 
didReûiveAuth’tiÿtiÚCh®Ënge
(
Sub»sourûLßd”
*, cÚ¡ 
Auth’tiÿtiÚCh®Ënge
&);

81 
vœtu®
 
»ûivedCªûÎ©iÚ
(
Sub»sourûLßd”
*, cÚ¡ 
Auth’tiÿtiÚCh®Ënge
&);

83 
didFšishLßdšg
(
id’tif›r
);

84 
makeSim¶eCrossOrigšAcûssReque¡
(cÚ¡ 
ResourûReque¡
& 
»que¡
);

85 
makeCrossOrigšAcûssReque¡W™hP»æight
(cÚ¡ 
ResourûReque¡
& 
»que¡
);

86 
´eæightSucûss
();

87 
´eæightFau»
();

89 
lßdReque¡
(cÚ¡ 
ResourûReque¡
&, 
Secur™yCheckPŞicy
);

90 
boŞ
 
isAÎowedRedœeù
(cÚ¡ 
KURL
&);

92 
	gRefPŒ
<
	gSub»sourûLßd”
> 
	gm_lßd”
;

93 
Th»adabËLßd”Cl›Á
* 
	gm_ş›Á
;

94 
Docum’t
* 
	gm_docum’t
;

95 
Th»adabËLßd”O±iÚs
 
	gm_İtiÚs
;

96 
boŞ
 
	gm_§meOrigšReque¡
;

97 
boŞ
 
	gm_async
;

98 
	gOwnPŒ
<
	gResourûReque¡
> 
	gm_aùu®Reque¡
;

	@EmptyClients.h

27 #iâdeà
Em±yCl›Ás_h


28 
	#Em±yCl›Ás_h


	)

30 
	~"ChromeCl›Á.h
"

31 
	~"CÚ‹xtM’uCl›Á.h
"

32 
	~"CÚsŞe.h
"

33 
	~"Docum’tLßd”.h
"

34 
	~"D¿gCl›Á.h
"

35 
	~"Ed™Commªd.h
"

36 
	~"Ed™ÜCl›Á.h
"

37 
	~"FlßtReù.h
"

38 
	~"FocusDœeùiÚ.h
"

39 
	~"F¿meLßd”Cl›Á.h
"

40 
	~"In¥eùÜCl›Á.h
"

41 
	~"PlugšH®‹rCl›Á.h
"

42 
	~"ResourûE¼Ü.h
"

57 
Çme¥aû
 
	gWebCÜe
 {

59 şas 
	cEm±yChromeCl›Á
 : 
public
 
ChromeCl›Á
 {

60 
public
:

61 
vœtu®
 ~
Em±yChromeCl›Á
() { }

62 
vœtu®
 
chromeDe¡royed
() { }

64 
vœtu®
 
£tWšdowReù
(cÚ¡ 
FlßtReù
&) { }

65 
vœtu®
 
FlßtReù
 
wšdowReù
() {  FloatRect(); }

67 
vœtu®
 
FlßtReù
 
·geReù
() {  FloatRect(); }

69 
vœtu®
 
sÿËFaùÜ
() {  1.f; }

71 
vœtu®
 
focus
() { }

72 
vœtu®
 
unfocus
() { }

74 
vœtu®
 
boŞ
 
ÿnTakeFocus
(
FocusDœeùiÚ
è{  
	gçl£
; }

75 
vœtu®
 
keFocus
(
FocusDœeùiÚ
) { }

77 
vœtu®
 
focu£dNodeChªged
(
Node
*) { }

79 
vœtu®
 
Page
* 
ü—‹Wšdow
(
F¿me
*, cÚ¡ 
F¿meLßdReque¡
&, cÚ¡ 
WšdowF—tu»s
&) {  0; }

80 
vœtu®
 
show
() { }

82 
vœtu®
 
boŞ
 
ÿnRunMod®
(è{  
	gçl£
; }

83 
vœtu®
 
runMod®
() { }

85 
vœtu®
 
£tToŞb¬sVisibË
(
boŞ
) { }

86 
vœtu®
 
boŞ
 
toŞb¬sVisibË
(è{  
	gçl£
; }

88 
vœtu®
 
£tStusb¬VisibË
(
boŞ
) { }

89 
vœtu®
 
boŞ
 
¡©usb¬VisibË
(è{  
	gçl£
; }

91 
vœtu®
 
£tSüŞlb¬sVisibË
(
boŞ
) { }

92 
vœtu®
 
boŞ
 
süŞlb¬sVisibË
(è{  
	gçl£
; }

94 
vœtu®
 
£tM’ub¬VisibË
(
boŞ
) { }

95 
vœtu®
 
boŞ
 
m’ub¬VisibË
(è{  
	gçl£
; }

97 
vœtu®
 
£tResizabË
(
boŞ
) { }

99 
vœtu®
 
addMes§geToCÚsŞe
(
Mes§geSourû
, 
Mes§geTy³
, 
Mes§geLev–
, cÚ¡ 
SŒšg
&, , const String&) { }

101 
vœtu®
 
boŞ
 
ÿnRunBefÜeUÆßdCÚfœmPª–
(è{  
	gçl£
; }

102 
vœtu®
 
boŞ
 
runBefÜeUÆßdCÚfœmPª–
(cÚ¡ 
SŒšg
&, 
F¿me
*è{  
	gŒue
; }

104 
vœtu®
 
şo£WšdowSoÚ
() { }

106 
vœtu®
 
runJavaSütAË¹
(
F¿me
*, cÚ¡ 
SŒšg
&) { }

107 
vœtu®
 
boŞ
 
runJavaSütCÚfœm
(
F¿me
*, cÚ¡ 
SŒšg
&è{  
	gçl£
; }

108 
vœtu®
 
boŞ
 
runJavaSütProm±
(
F¿me
*, cÚ¡ 
SŒšg
&, cÚ¡ SŒšg&, SŒšg&è{  
	gçl£
; }

109 
vœtu®
 
boŞ
 
shouldIÁ”ru±JavaSüt
(è{  
	gçl£
; }

111 
vœtu®
 
£tStusb¬Text
(cÚ¡ 
SŒšg
&) { }

113 
vœtu®
 
boŞ
 
bsToLšks
(ècÚ¡ {  
	gçl£
; }

115 
vœtu®
 
IÁReù
 
wšdowResiz”Reù
() const {  IntRect(); }

117 
vœtu®
 
šv®id©eWšdow
(cÚ¡ 
IÁReù
&, 
boŞ
) { }

118 
vœtu®
 
šv®id©eCÚ‹ÁsAndWšdow
(cÚ¡ 
IÁReù
&, 
boŞ
) { }

119 
vœtu®
 
šv®id©eCÚ‹ÁsFÜSlowSüŞl
(cÚ¡ 
IÁReù
&, 
boŞ
) {};

120 
vœtu®
 
süŞl
(cÚ¡ 
IÁSize
&, cÚ¡ 
IÁReù
&, const IntRect&) { }

122 
vœtu®
 
IÁPošt
 
sü“nToWšdow
(cÚ¡ IÁPošt& 
p
ècÚ¡ {  
	gp
; }

123 
vœtu®
 
IÁReù
 
wšdowToSü“n
(cÚ¡ IÁReù& 
r
ècÚ¡ {  
	gr
; }

124 
vœtu®
 
PÏtfÜmPageCl›Á
 
¶©fÜmPageCl›Á
() const {  0; }

125 
vœtu®
 
cÚ‹ÁsSizeChªged
(
F¿me
*, cÚ¡ 
IÁSize
&) const { }

127 
vœtu®
 
süŞlb¬sModeDidChªge
() const { }

128 
vœtu®
 
mou£DidMoveOv”EËm’t
(cÚ¡ 
H™Te¡ResuÉ
&, ) { }

130 
vœtu®
 
£tToŞT
(cÚ¡ 
SŒšg
&, 
TextDœeùiÚ
) { }

132 
vœtu®
 
´št
(
F¿me
*) { }

134 #ià
ENABLE
(
DATABASE
)

135 
vœtu®
 
exûededD©aba£QuÙa
(
F¿me
*, cÚ¡ 
SŒšg
&) { }

138 #ià
ENABLE
(
OFFLINE_WEB_APPLICATIONS
)

139 
vœtu®
 
»achedMaxAµCacheSize
(
št64_t
) { }

142 #ià
ENABLE
(
NOTIFICATIONS
)

143 
vœtu®
 
NÙifiÿtiÚP»£Á”
* 
nÙifiÿtiÚP»£Á”
() const {  0; }

146 
vœtu®
 
runO³nPª–
(
F¿me
*, 
PassRefPŒ
<
FeChoo£r
>) { }

147 
vœtu®
 
choo£IcÚFÜFes
(cÚ¡ 
VeùÜ
<
SŒšg
>&, 
PassRefPŒ
<
FeChoo£r
>) { }

149 
vœtu®
 
fÜmS‹DidChªge
(cÚ¡ 
Node
*) { }

151 
vœtu®
 
fÜmDidFocus
(cÚ¡ 
Node
*) { }

152 
vœtu®
 
fÜmDidBlur
(cÚ¡ 
Node
*) { }

154 
vœtu®
 
	gPassOwnPŒ
<
	gHTMLP¬£rQuœks
> 
ü—‹HTMLP¬£rQuœks
() {  0; }

156 
vœtu®
 
boŞ
 
£tCursÜ
(
PÏtfÜmCursÜHªdË
è{  
	gçl£
; }

158 
vœtu®
 
süŞlReùIÁoV›w
(cÚ¡ 
IÁReù
&, cÚ¡ 
SüŞlV›w
*) const {}

160 
vœtu®
 
»que¡GeŞoÿtiÚP”missiÚFÜF¿me
(
F¿me
*, 
GeŞoÿtiÚ
*) {}

161 
vœtu®
 
ÿnûlGeŞoÿtiÚP”missiÚReque¡FÜF¿me
(
F¿me
*, 
GeŞoÿtiÚ
*) {}

163 #ià
USE
(
ACCELERATED_COMPOSITING
)

164 
vœtu®
 
©chRoÙG¿phicsLay”
(
F¿me
*, 
G¿phicsLay”
*) {};

165 
vœtu®
 
£tN“dsOÃShÙD¿wšgSynchrÚiz©iÚ
() {};

166 
vœtu®
 
scheduËCompos™šgLay”Sync
() {};

169 #ià
ENABLE
(
TOUCH_EVENTS
)

170 
vœtu®
 
ÃedTouchEv’ts
(
boŞ
) { }

174 
şass
 
	gEm±yF¿meLßd”Cl›Á
 : 
public
 
F¿meLßd”Cl›Á
,…ubliø
	gNÚcİyabË
 {

175 
	gpublic
:

176 
vœtu®
 ~
Em±yF¿meLßd”Cl›Á
() { }

177 
vœtu®
 
äameLßd”De¡royed
() { }

179 
vœtu®
 
boŞ
 
hasWebV›w
(ècÚ¡ {  
Œue
; }

181 
vœtu®
 
makeR•»£Á©iÚ
(
Docum’tLßd”
*) { }

182 
vœtu®
 
fÜûLayout
() { }

183 
vœtu®
 
fÜûLayoutFÜNÚHTML
() { }

185 
vœtu®
 
£tCİ›sOnSüŞl
() { }

187 
vœtu®
 
d‘achedFromP¬’t2
() { }

188 
vœtu®
 
d‘achedFromP¬’t3
() { }

190 
vœtu®
 
dowÆßd
(
ResourûHªdË
*, cÚ¡ 
ResourûReque¡
&, cÚ¡ ResourûReque¡&, cÚ¡ 
ResourûRe¥Ú£
&) { }

192 
vœtu®
 
assignId’tif›rToIn™ŸlReque¡
(, 
Docum’tLßd”
*, cÚ¡ 
ResourûReque¡
&) { }

193 
vœtu®
 
boŞ
 
shouldU£C»d’tŸlStÜage
(
Docum’tLßd”
*, è{  
	gçl£
; }

194 
vœtu®
 
di¥©chWlS’dReque¡
(
Docum’tLßd”
*, , 
ResourûReque¡
&, cÚ¡ 
ResourûRe¥Ú£
&) { }

195 
vœtu®
 
di¥©chDidReûiveAuth’tiÿtiÚCh®Ënge
(
Docum’tLßd”
*, , cÚ¡ 
Auth’tiÿtiÚCh®Ënge
&) { }

196 
vœtu®
 
di¥©chDidCªûlAuth’tiÿtiÚCh®Ënge
(
Docum’tLßd”
*, , cÚ¡ 
Auth’tiÿtiÚCh®Ënge
&) { }

197 
vœtu®
 
di¥©chDidReûiveRe¥Ú£
(
Docum’tLßd”
*, , cÚ¡ 
ResourûRe¥Ú£
&) { }

198 
vœtu®
 
di¥©chDidReûiveCÚ‹ÁL’gth
(
Docum’tLßd”
*, , ) { }

199 
vœtu®
 
di¥©chDidFšishLßdšg
(
Docum’tLßd”
*, ) { }

200 
vœtu®
 
di¥©chDidFaLßdšg
(
Docum’tLßd”
*, , cÚ¡ 
ResourûE¼Ü
&) { }

201 
vœtu®
 
boŞ
 
di¥©chDidLßdResourûFromMemÜyCache
(
Docum’tLßd”
*, cÚ¡ 
ResourûReque¡
&, cÚ¡ 
ResourûRe¥Ú£
&, è{  
	gçl£
; }

203 
vœtu®
 
di¥©chDidHªdËOÆßdEv’ts
() { }

204 
vœtu®
 
di¥©chDidReûiveS”v”RedœeùFÜProvisiÚ®Lßd
() { }

205 
vœtu®
 
di¥©chDidCªûlCl›ÁRedœeù
() { }

206 
vœtu®
 
di¥©chWlP”fÜmCl›ÁRedœeù
(cÚ¡ 
KURL
&, , ) { }

207 
vœtu®
 
di¥©chDidChªgeLoÿtiÚW™hšPage
() { }

208 
vœtu®
 
di¥©chDidPushS‹W™hšPage
() { }

209 
vœtu®
 
di¥©chDidR•ÏûS‹W™hšPage
() { }

210 
vœtu®
 
di¥©chDidPİS‹W™hšPage
() { }

211 
vœtu®
 
di¥©chWlClo£
() { }

212 
vœtu®
 
di¥©chDidReûiveIcÚ
() { }

213 
vœtu®
 
di¥©chDidS¹ProvisiÚ®Lßd
() { }

214 
vœtu®
 
di¥©chDidReûiveT™Ë
(cÚ¡ 
SŒšg
&) { }

215 
vœtu®
 
di¥©chDidComm™Lßd
() { }

216 
vœtu®
 
di¥©chDidFaProvisiÚ®Lßd
(cÚ¡ 
ResourûE¼Ü
&) { }

217 
vœtu®
 
di¥©chDidFaLßd
(cÚ¡ 
ResourûE¼Ü
&) { }

218 
vœtu®
 
di¥©chDidFšishDocum’tLßd
() { }

219 
vœtu®
 
di¥©chDidFšishLßd
() { }

220 
vœtu®
 
di¥©chDidFœ¡Layout
() { }

221 
vœtu®
 
di¥©chDidFœ¡Visu®lyNÚEm±yLayout
() { }

223 
vœtu®
 
F¿me
* 
di¥©chC»©ePage
() {  0; }

224 
vœtu®
 
di¥©chShow
() { }

226 
vœtu®
 
di¥©chDecidePŞicyFÜMIMETy³
(
F¿mePŞicyFunùiÚ
, cÚ¡ 
SŒšg
&, cÚ¡ 
ResourûReque¡
&) { }

227 
vœtu®
 
di¥©chDecidePŞicyFÜNewWšdowAùiÚ
(
F¿mePŞicyFunùiÚ
, cÚ¡ 
Navig©iÚAùiÚ
&, cÚ¡ 
ResourûReque¡
&, 
PassRefPŒ
<
FÜmS‹
>, cÚ¡ 
SŒšg
&) { }

228 
vœtu®
 
di¥©chDecidePŞicyFÜNavig©iÚAùiÚ
(
F¿mePŞicyFunùiÚ
, cÚ¡ 
Navig©iÚAùiÚ
&, cÚ¡ 
ResourûReque¡
&, 
PassRefPŒ
<
FÜmS‹
>) { }

229 
vœtu®
 
ÿnûlPŞicyCheck
() { }

231 
vœtu®
 
di¥©chUÇbËToIm¶em’tPŞicy
(cÚ¡ 
ResourûE¼Ü
&) { }

233 
vœtu®
 
di¥©chWlSubm™FÜm
(
F¿mePŞicyFunùiÚ
, 
PassRefPŒ
<
FÜmS‹
>) { }

235 
vœtu®
 
di¥©chDidLßdMašResourû
(
Docum’tLßd”
*) { }

236 
vœtu®
 
»v”tToProvisiÚ®S‹
(
Docum’tLßd”
*) { }

237 
vœtu®
 
£tMašDocum’tE¼Ü
(
Docum’tLßd”
*, cÚ¡ 
ResourûE¼Ü
&) { }

239 
vœtu®
 
wlChªgeE¡im©edProg»ss
() { }

240 
vœtu®
 
didChªgeE¡im©edProg»ss
() { }

241 
vœtu®
 
po¡Prog»ssS¹edNÙifiÿtiÚ
() { }

242 
vœtu®
 
po¡Prog»ssE¡im©eChªgedNÙifiÿtiÚ
() { }

243 
vœtu®
 
po¡Prog»ssFšishedNÙifiÿtiÚ
() { }

245 
vœtu®
 
£tMašF¿meDocum’tR—dy
(
boŞ
) { }

247 
vœtu®
 
¡¬tDowÆßd
(cÚ¡ 
ResourûReque¡
&) { }

249 
vœtu®
 
wlChªgeT™Ë
(
Docum’tLßd”
*) { }

250 
vœtu®
 
didChªgeT™Ë
(
Docum’tLßd”
*) { }

252 
vœtu®
 
comm™‹dLßd
(
Docum’tLßd”
*, const *, ) { }

253 
vœtu®
 
fšishedLßdšg
(
Docum’tLßd”
*) { }

255 
vœtu®
 
ResourûE¼Ü
 
ÿnûÎedE¼Ü
(cÚ¡ 
ResourûReque¡
&è{ ResourûE¼Ü 
”rÜ
("", 0, "", ""); 
	g”rÜ
.
£tIsCªûÎ©iÚ
(
Œue
); ƒrror; }

256 
vœtu®
 
ResourûE¼Ü
 
blockedE¼Ü
(cÚ¡ 
ResourûReque¡
&) {  ResourceError("", 0, "", ""); }

257 
vœtu®
 
ResourûE¼Ü
 
ÿÂÙShowURLE¼Ü
(cÚ¡ 
ResourûReque¡
&) {  ResourceError("", 0, "", ""); }

258 
vœtu®
 
ResourûE¼Ü
 
š‹¼u±FÜPŞicyChªgeE¼Ü
(cÚ¡ 
ResourûReque¡
&) {  ResourceError("", 0, "", ""); }

260 
vœtu®
 
ResourûE¼Ü
 
ÿÂÙShowMIMETy³E¼Ü
(cÚ¡ 
ResourûRe¥Ú£
&) {  ResourceError("", 0, "", ""); }

261 
vœtu®
 
ResourûE¼Ü
 
feDÛsNÙExi¡E¼Ü
(cÚ¡ 
ResourûRe¥Ú£
&) {  ResourceError("", 0, "", ""); }

262 
vœtu®
 
ResourûE¼Ü
 
¶ugšWlHªdËLßdE¼Ü
(cÚ¡ 
ResourûRe¥Ú£
&) {  ResourceError("", 0, "", ""); }

264 
vœtu®
 
boŞ
 
shouldF®lBack
(cÚ¡ 
ResourûE¼Ü
&è{  
	gçl£
; }

266 
vœtu®
 
boŞ
 
ÿnHªdËReque¡
(cÚ¡ 
ResourûReque¡
&ècÚ¡ {  
	gçl£
; }

267 
vœtu®
 
boŞ
 
ÿnShowMIMETy³
(cÚ¡ 
SŒšg
&ècÚ¡ {  
	gçl£
; }

268 
vœtu®
 
boŞ
 
»´e£Á©iÚExi¡sFÜURLScheme
(cÚ¡ 
SŒšg
&ècÚ¡ {  
	gçl£
; }

269 
vœtu®
 
SŒšg
 
g’”©edMIMETy³FÜURLScheme
(const String&) const {  ""; }

271 
vœtu®
 
äameLßdCom¶‘ed
() { }

272 
vœtu®
 
»¡ÜeV›wS‹
() { }

273 
vœtu®
 
´ovisiÚ®LßdS¹ed
() { }

274 
vœtu®
 
boŞ
 
shouldT»©URLAsSameAsCu¼’t
(cÚ¡ 
KURL
&ècÚ¡ {  
	gçl£
; }

275 
vœtu®
 
didFšishLßd
() { }

276 
vœtu®
 
´•¬eFÜD©aSourûR•Ïûm’t
() { }

278 
vœtu®
 
	gPassRefPŒ
<
	gDocum’tLßd”
> 
ü—‹Docum’tLßd”
(cÚ¡ 
ResourûReque¡
& 
»que¡
, cÚ¡ 
Sub¡™u‹D©a
& 
sub¡™u‹D©a
è{  Docum’tLßd”::
ü—‹
(request, substituteData); }

279 
vœtu®
 
£tT™Ë
(cÚ¡ 
SŒšg
&, cÚ¡ 
KURL
&) { }

281 
vœtu®
 
SŒšg
 
u£rAg’t
(cÚ¡ 
KURL
&) {  ""; }

283 
vœtu®
 
§vePÏtfÜmD©aToCachedF¿me
(
CachedF¿me
*) { }

284 
vœtu®
 
Œªs™iÚToComm™‹dFromCachedF¿me
(
CachedF¿me
*) { }

285 
vœtu®
 
Œªs™iÚToComm™‹dFÜNewPage
() { }

287 
vœtu®
 
upd©eGlob®Hi¡Üy
() { }

288 
vœtu®
 
upd©eGlob®Hi¡ÜyRedœeùLšks
() { }

289 
vœtu®
 
boŞ
 
shouldGoToHi¡ÜyI‹m
(
Hi¡ÜyI‹m
*ècÚ¡ {  
	gçl£
; }

290 
vœtu®
 
di¥©chDidAddBackFÜw¬dI‹m
(
Hi¡ÜyI‹m
*) const { }

291 
vœtu®
 
di¥©chDidRemoveBackFÜw¬dI‹m
(
Hi¡ÜyI‹m
*) const { };

292 
vœtu®
 
di¥©chDidChªgeBackFÜw¬dIndex
() const { }

293 
vœtu®
 
§veV›wS‹ToI‹m
(
Hi¡ÜyI‹m
*) { }

294 
vœtu®
 
boŞ
 
ÿnCachePage
(ècÚ¡ {  
	gçl£
; }

295 
vœtu®
 
didDi¥ÏyIn£cu»CÚ‹Á
() { }

296 
vœtu®
 
didRunIn£cu»CÚ‹Á
(
Secur™yOrigš
*) { }

297 
vœtu®
 
	gPassRefPŒ
<
	gF¿me
> 
ü—‹F¿me
(cÚ¡ 
KURL
&, cÚ¡ 
SŒšg
&, 
HTMLF¿meOwÃrEËm’t
*, cÚ¡ SŒšg&, 
boŞ
, , ) {  0; }

298 
vœtu®
 
didT¿nsãrChdF¿meToNewDocum’t
() { }

299 
vœtu®
 
	gPassRefPŒ
<
	gWidg‘
> 
ü—‹Plugš
(cÚ¡ 
IÁSize
&, 
HTMLPlugInEËm’t
*, cÚ¡ 
KURL
&, cÚ¡ 
VeùÜ
<
SŒšg
>&, cÚ¡ VeùÜ<SŒšg>&, cÚ¡ SŒšg&, 
boŞ
) {  0; }

300 
vœtu®
 
	gPassRefPŒ
<
	gWidg‘
> 
ü—‹JavaAµËtWidg‘
(cÚ¡ 
IÁSize
&, 
HTMLAµËtEËm’t
*, cÚ¡ 
KURL
&, cÚ¡ 
VeùÜ
<
SŒšg
>&, const Vector<String>&) {  0; }

301 #ià
ENABLE
(
PLUGIN_PROXY_FOR_VIDEO
)

302 
vœtu®
 
	gPassRefPŒ
<
	gWidg‘
> 
ü—‹MedŸPÏy”ProxyPlugš
(cÚ¡ 
IÁSize
&, 
HTMLMedŸEËm’t
*, cÚ¡ 
KURL
&, cÚ¡ 
VeùÜ
<
SŒšg
>&, const Vector<String>&, const String&) {  0; }

305 
vœtu®
 
ObjeùCÚ‹ÁTy³
 
objeùCÚ‹ÁTy³
(cÚ¡ 
KURL
&, cÚ¡ 
SŒšg
&) {  ObjectContentType(); }

306 
vœtu®
 
SŒšg
 
ov”rideMedŸTy³
() const {  String(); }

308 
vœtu®
 
»dœeùD©aToPlugš
(
Widg‘
*) { }

309 
vœtu®
 
di¥©chDidCË¬WšdowObjeùInWÜld
(
DOMW¿µ”WÜld
*) { }

310 
vœtu®
 
docum’tEËm’tAvaabË
() { }

311 
vœtu®
 
didP”fÜmFœ¡Navig©iÚ
() const { }

313 
vœtu®
 
»gi¡”FÜIcÚNÙifiÿtiÚ
(
boŞ
) { }

315 #ià
USE
(
V8
)

316 
vœtu®
 
didC»©eSütCÚ‹xtFÜF¿me
() { }

317 
vœtu®
 
didDe¡roySütCÚ‹xtFÜF¿me
() { }

318 
vœtu®
 
didC»©eIsŞ©edSütCÚ‹xt
() { }

321 #ià
PLATFORM
(
MAC
)

322 
vœtu®
 
NSCachedURLRe¥Ú£
* 
wlCacheRe¥Ú£
(
Docum’tLßd”
*, , NSCachedURLRe¥Ú£* 
»¥Ú£
ècÚ¡ {  
	g»¥Ú£
; }

324 #ià
USE
(
CFNETWORK
)

325 
vœtu®
 
boŞ
 
shouldCacheRe¥Ú£
(
Docum’tLßd”
*, , cÚ¡ 
ResourûRe¥Ú£
&, cÚ¡ *, è{  
	gŒue
; }

330 
şass
 
	gEm±yEd™ÜCl›Á
 : 
public
 
Ed™ÜCl›Á
,…ubliø
	gNÚcİyabË
 {

331 
	gpublic
:

332 
vœtu®
 ~
Em±yEd™ÜCl›Á
() { }

333 
vœtu®
 
·geDe¡royed
() { }

335 
vœtu®
 
boŞ
 
shouldD–‘eRªge
(
Rªge
*è{  
çl£
; }

336 
vœtu®
 
boŞ
 
shouldShowD–‘eIÁ”çû
(
HTMLEËm’t
*è{  
	gçl£
; }

337 
vœtu®
 
boŞ
 
sm¬tIn£¹D–‘eEÇbËd
(è{  
	gçl£
; }

338 
vœtu®
 
boŞ
 
isS–eùT¿šgWh™e¥aûEÇbËd
(è{  
	gçl£
; }

339 
vœtu®
 
boŞ
 
isCÚtšuousS³ÎCheckšgEÇbËd
(è{  
	gçl£
; }

340 
vœtu®
 
toggËCÚtšuousS³ÎCheckšg
() { }

341 
vœtu®
 
boŞ
 
isG¿mm¬CheckšgEÇbËd
(è{  
	gçl£
; }

342 
vœtu®
 
toggËG¿mm¬Checkšg
() { }

343 
vœtu®
 
¥–lCheck”Docum’tTag
() {  -1; }

345 
vœtu®
 
boŞ
 
£ËùWÜdBefÜeM’uEv’t
(è{  
	gçl£
; }

346 
vœtu®
 
boŞ
 
isEd™abË
(è{  
	gçl£
; }

348 
vœtu®
 
boŞ
 
shouldBegšEd™šg
(
Rªge
*è{  
	gçl£
; }

349 
vœtu®
 
boŞ
 
shouldEndEd™šg
(
Rªge
*è{  
	gçl£
; }

350 
vœtu®
 
boŞ
 
shouldIn£¹Node
(
Node
*, 
Rªge
*, 
Ed™ÜIn£¹AùiÚ
è{  
	gçl£
; }

352 
vœtu®
 
boŞ
 
shouldIn£¹Text
(cÚ¡ 
SŒšg
&, 
Rªge
*, 
Ed™ÜIn£¹AùiÚ
è{  
	gçl£
; }

353 
vœtu®
 
boŞ
 
shouldChªgeS–eùedRªge
(
Rªge
*, Rªge*, 
EAffš™y
, boŞè{  
	gçl£
; }

355 
vœtu®
 
boŞ
 
shouldAµlyStyË
(
CSSStyËDeş¬©iÚ
*, 
Rªge
*è{  
	gçl£
; }

356 
vœtu®
 
boŞ
 
shouldMoveRªgeAá”D–‘e
(
Rªge
*, Rªge*è{  
	gçl£
; }

360 
vœtu®
 
didBegšEd™šg
() { }

361 
vœtu®
 
»¥ÚdToChªgedCÚ‹Ás
() { }

362 
vœtu®
 
»¥ÚdToChªgedS–eùiÚ
() { }

363 
vœtu®
 
didEndEd™šg
() { }

364 
vœtu®
 
didWr™eS–eùiÚToPa¡ebßrd
() { }

365 
vœtu®
 
didS‘S–eùiÚTy³sFÜPa¡ebßrd
() { }

370 
vœtu®
 
»gi¡”CommªdFÜUndo
(
PassRefPŒ
<
Ed™Commªd
>) { }

371 
vœtu®
 
»gi¡”CommªdFÜRedo
(
PassRefPŒ
<
Ed™Commªd
>) { }

372 
vœtu®
 
ş—rUndoRedoO³¿tiÚs
() { }

374 
vœtu®
 
boŞ
 
ÿnUndo
(ècÚ¡ {  
	gçl£
; }

375 
vœtu®
 
boŞ
 
ÿnRedo
(ècÚ¡ {  
	gçl£
; }

377 
vœtu®
 
undo
() { }

378 
vœtu®
 
»do
() { }

380 
vœtu®
 
hªdËKeybßrdEv’t
(
KeybßrdEv’t
*) { }

381 
vœtu®
 
hªdËIÅutM‘hodKeydown
(
KeybßrdEv’t
*) { }

383 
vœtu®
 
‹xtF›ldDidBegšEd™šg
(
EËm’t
*) { }

384 
vœtu®
 
‹xtF›ldDidEndEd™šg
(
EËm’t
*) { }

385 
vœtu®
 
‹xtDidChªgeInTextF›ld
(
EËm’t
*) { }

386 
vœtu®
 
boŞ
 
doTextF›ldCommªdFromEv’t
(
EËm’t
*, 
KeybßrdEv’t
*è{  
	gçl£
; }

387 
vœtu®
 
‹xtWlBeD–‘edInTextF›ld
(
EËm’t
*) { }

388 
vœtu®
 
‹xtDidChªgeInTextA»a
(
EËm’t
*) { }

390 #ià
PLATFORM
(
MAC
)

391 
vœtu®
 
m¬kedTextAbªdÚed
(
F¿me
*) { }

393 
vœtu®
 
NSSŒšg
* 
u£rVisibËSŒšg
(
NSURL
*) {  0; }

394 #ifdeà
BUILDING_ON_TIGER


395 
vœtu®
 
NSA¼ay
* 
·¡ebßrdTy³sFÜS–eùiÚ
(
F¿me
*) {  0; }

398 #ià
PLATFORM
(
MAC
è&& !
defšed
(
BUILDING_ON_TIGER
è&& !defšed(
BUILDING_ON_LEOPARD
)

399 
vœtu®
 
uµ”ÿ£WÜd
() { }

400 
vœtu®
 
low”ÿ£WÜd
() { }

401 
vœtu®
 
ÿp™®izeWÜd
() { }

402 
vœtu®
 
showSub¡™utiÚsPª–
(
boŞ
) { }

403 
vœtu®
 
boŞ
 
sub¡™utiÚsPª–IsShowšg
(è{  
	gçl£
; }

404 
vœtu®
 
toggËSm¬tIn£¹D–‘e
() { }

405 
vœtu®
 
boŞ
 
isAutom©icQuÙeSub¡™utiÚEÇbËd
(è{  
	gçl£
; }

406 
vœtu®
 
toggËAutom©icQuÙeSub¡™utiÚ
() { }

407 
vœtu®
 
boŞ
 
isAutom©icLškD‘eùiÚEÇbËd
(è{  
	gçl£
; }

408 
vœtu®
 
toggËAutom©icLškD‘eùiÚ
() { }

409 
vœtu®
 
boŞ
 
isAutom©icDashSub¡™utiÚEÇbËd
(è{  
	gçl£
; }

410 
vœtu®
 
toggËAutom©icDashSub¡™utiÚ
() { }

411 
vœtu®
 
boŞ
 
isAutom©icTextR•Ïûm’tEÇbËd
(è{  
	gçl£
; }

412 
vœtu®
 
toggËAutom©icTextR•Ïûm’t
() { }

413 
vœtu®
 
boŞ
 
isAutom©icS³ÎšgCÜ»ùiÚEÇbËd
(è{  
	gçl£
; }

414 
vœtu®
 
toggËAutom©icS³ÎšgCÜ»ùiÚ
() { }

416 
vœtu®
 
ignÜeWÜdInS³ÎDocum’t
(cÚ¡ 
SŒšg
&) { }

417 
vœtu®
 
Ë¬nWÜd
(cÚ¡ 
SŒšg
&) { }

418 
vœtu®
 
checkS³ÎšgOfSŒšg
(cÚ¡ 
UCh¬
*, , *, *) { }

419 
vœtu®
 
SŒšg
 
g‘AutoCÜ»ùSugge¡iÚFÜMis¥–ËdWÜd
(const String&) {  String(); }

420 
vœtu®
 
checkG¿mm¬OfSŒšg
(cÚ¡ 
UCh¬
*, , 
VeùÜ
<
G¿mm¬D‘a
>&, *, *) { }

421 #ià
PLATFORM
(
MAC
è&& !
defšed
(
BUILDING_ON_TIGER
è&& !defšed(
BUILDING_ON_LEOPARD
)

422 
vœtu®
 
checkTextOfP¬ag¿ph
(cÚ¡ 
UCh¬
*, , 
ušt64_t
, 
VeùÜ
<
TextCheckšgResuÉ
>&) { };

424 
vœtu®
 
upd©eS³ÎšgUIW™hG¿mm¬SŒšg
(cÚ¡ 
SŒšg
&, cÚ¡ 
G¿mm¬D‘a
&) { }

425 
vœtu®
 
upd©eS³ÎšgUIW™hMis¥–ËdWÜd
(cÚ¡ 
SŒšg
&) { }

426 
vœtu®
 
showS³ÎšgUI
(
boŞ
) { }

427 
vœtu®
 
boŞ
 
¥–lšgUIIsShowšg
(è{  
	gçl£
; }

428 
vœtu®
 
g‘Gues£sFÜWÜd
(cÚ¡ 
SŒšg
&, 
VeùÜ
<String>&) { }

429 
vœtu®
 
£tIÅutM‘hodS‹
(
boŞ
) { }

434 #ià
	$ENABLE
(
CONTEXT_MENUS
)

435 
şass
 
Em±yCÚ‹xtM’uCl›Á
 : 
public
 
CÚ‹xtM’uCl›Á
,…ubliø
NÚcİyabË
 {

436 
public
:

437 
vœtu®
 ~
	`Em±yCÚ‹xtM’uCl›Á
() { }

438 
vœtu®
 
	`cÚ‹xtM’uDe¡royed
() { }

440 
vœtu®
 
PÏtfÜmM’uDesütiÚ
 
	`g‘Cu¡omM’uFromDeçuÉI‹ms
(
CÚ‹xtM’u
*) {  0; }

441 
vœtu®
 
	`cÚ‹xtM’uI‹mS–eùed
(
CÚ‹xtM’uI‹m
*, cÚ¡ 
CÚ‹xtM’u
*) { }

443 
vœtu®
 
	`dowÆßdURL
(cÚ¡ 
KURL
&) { }

444 
vœtu®
 
	`cİyImageToClbßrd
(cÚ¡ 
H™Te¡ResuÉ
&) { }

445 
vœtu®
 
	`£¬chW™hGoogË
(cÚ¡ 
F¿me
*) { }

446 
vœtu®
 
	`lookUpInDiùiÚ¬y
(
F¿me
*) { }

447 
vœtu®
 
boŞ
 
	`isS³akšg
(è{  
çl£
; }

448 
vœtu®
 
	`¥—k
(cÚ¡ 
SŒšg
&) { }

449 
vœtu®
 
	`¡İS³akšg
() { }

451 #ià
	`PLATFORM
(
MAC
)

452 
vœtu®
 
	`£¬chW™hSpÙlight
() { }

454 
	}
};

457 #ià
	$ENABLE
(
DRAG_SUPPORT
)

458 
şass
 
Em±yD¿gCl›Á
 : 
public
 
D¿gCl›Á
,…ubliø
NÚcİyabË
 {

459 
public
:

460 
vœtu®
 ~
	`Em±yD¿gCl›Á
() {}

461 
vœtu®
 
	`wlP”fÜmD¿gDe¡š©iÚAùiÚ
(
D¿gDe¡š©iÚAùiÚ
, 
D¿gD©a
*) { }

462 
vœtu®
 
	`wlP”fÜmD¿gSourûAùiÚ
(
D¿gSourûAùiÚ
, cÚ¡ 
IÁPošt
&, 
Clbßrd
*) { }

463 
vœtu®
 
D¿gDe¡š©iÚAùiÚ
 
	`aùiÚMaskFÜD¿g
(
D¿gD©a
*è{  
D¿gDe¡š©iÚAùiÚNÚe
; }

464 
vœtu®
 
D¿gSourûAùiÚ
 
	`d¿gSourûAùiÚMaskFÜPošt
(cÚ¡ 
IÁPošt
&è{  
D¿gSourûAùiÚNÚe
; }

465 
vœtu®
 
	`¡¬tD¿g
(
D¿gImageRef
, cÚ¡ 
IÁPošt
&, cÚ¡ IÁPošt&, 
Clbßrd
*, 
F¿me
*, 
boŞ
) { }

466 
vœtu®
 
D¿gImageRef
 
	`ü—‹D¿gImageFÜLšk
(
KURL
&, cÚ¡ 
SŒšg
&, 
F¿me
*) {  0; }

467 
vœtu®
 
	`d¿gCÚŒŞËrDe¡royed
() { }

468 
	}
};

471 
şass
 
	gEm±yIn¥eùÜCl›Á
 : 
public
 
In¥eùÜCl›Á
,…ubliø
	gNÚcİyabË
 {

472 
	gpublic
:

473 
vœtu®
 ~
Em±yIn¥eùÜCl›Á
() { }

475 
vœtu®
 
š¥eùÜDe¡royed
() { }

477 
vœtu®
 
İ’In¥eùÜFrÚ‹nd
(
In¥eùÜCÚŒŞËr
*) { }

479 
vœtu®
 
highlight
(
Node
*) { }

480 
vœtu®
 
hideHighlight
() { }

482 
vœtu®
 
pİuÏ‹S‘tšg
(cÚ¡ 
SŒšg
&, String*) { }

483 
vœtu®
 
¡ÜeS‘tšg
(cÚ¡ 
SŒšg
&, const String&) { }

	@FTPDirectoryDocument.cpp

25 
	~"cÚfig.h
"

26 #ià
ENABLE
(
FTPDIR
)

27 
	~"FTPDœeùÜyDocum’t.h
"

29 
	~"Ch¬aù”Names.h
"

30 
	~"HTMLNames.h
"

31 
	~"HTMLTabËEËm’t.h
"

32 
	~"HTMLTok’iz”.h
"

33 
	~"LoÿlizedSŒšgs.h
"

34 
	~"Loggšg.h
"

35 
	~"FTPDœeùÜyP¬£r.h
"

36 
	~"Segm’‹dSŒšg.h
"

37 
	~"S‘tšgs.h
"

38 
	~"Sh¬edBufãr.h
"

39 
	~"Text.h
"

41 
	~<wtf/‹xt/CSŒšg.h
>

42 
	~<wtf/Cu¼’tTime.h
>

43 
	~<wtf/StdLibExŒas.h
>

45 
usšg
 
Çme¥aû
 
	g¡d
;

47 
Çme¥aû
 
	gWebCÜe
 {

49 
usšg
 
Çme¥aû
 
	gHTMLNames
;

51 şas 
	cFTPDœeùÜyTok’iz”
 : 
public
 
HTMLTok’iz”
 {

52 
public
:

53 
FTPDœeùÜyTok’iz”
(
HTMLDocum’t
*);

55 
vœtu®
 
wr™e
(cÚ¡ 
Segm’‹dSŒšg
&, 
boŞ
 
­³ndD©a
);

56 
vœtu®
 
fšish
();

58 
vœtu®
 
boŞ
 
isWa™šgFÜSüts
(ècÚ¡ {  
	gçl£
; }

60 
šlše
 
checkBufãr
(
Ën
 = 10)

62 ià((
m_de¡
 - 
m_bufãr
è> 
m_size
 - 
Ën
) {

64 
ÃwSize
 = 
max
(
m_size
 * 2, m_siz+ 
Ën
);

65 
	gŞdOff£t
 = 
m_de¡
 - 
m_bufãr
;

66 
	gm_bufãr
 = 
¡©ic_ÿ¡
<
UCh¬
*>(
ç¡R—Îoc
(
m_bufãr
, 
ÃwSize
 * (UChar)));

67 
	gm_de¡
 = 
m_bufãr
 + 
ŞdOff£t
;

68 
	gm_size
 = 
ÃwSize
;

72 
	g´iv©e
:

76 
boŞ
 
lßdDocum’tTem¶©e
();

77 
ü—‹BasicDocum’t
();

79 
·r£AndAµ’dOÃLše
(cÚ¡ 
SŒšg
&);

80 
­³ndEÁry
(cÚ¡ 
SŒšg
& 
Çme
, cÚ¡ SŒšg& 
size
, cÚ¡ SŒšg& 
d©e
, 
boŞ
 
isDœeùÜy
);

81 
	gPassRefPŒ
<
	gEËm’t
> 
ü—‹TDFÜF’ame
(cÚ¡ 
SŒšg
&);

83 
Docum’t
* 
	gm_doc
;

84 
	gRefPŒ
<
	gHTMLTabËEËm’t
> 
	gm_bËEËm’t
;

86 
boŞ
 
	gm_skLF
;

87 
boŞ
 
	gm_·r£dTem¶©e
;

89 
	gm_size
;

90 
UCh¬
* 
	gm_bufãr
;

91 
UCh¬
* 
	gm_de¡
;

92 
SŒšg
 
	gm_ÿ¼yOv”
;

94 
Li¡S‹
 
	gm_li¡S‹
;

97 
	gFTPDœeùÜyTok’iz”
::
	$FTPDœeùÜyTok’iz”
(
HTMLDocum’t
* 
doc
)

98 : 
	`HTMLTok’iz”
(
doc
, 
çl£
)

99 , 
	`m_doc
(
doc
)

100 , 
	`m_skLF
(
çl£
)

101 , 
	`m_·r£dTem¶©e
(
çl£
)

102 , 
	`m_size
(254)

103 , 
	`m_bufãr
(
¡©ic_ÿ¡
<
UCh¬
*>(
	`ç¡M®loc
((UCh¬è* 
m_size
)))

104 , 
	$m_de¡
(
m_bufãr
)

106 
	}
}

108 
	gFTPDœeùÜyTok’iz”
::
	$­³ndEÁry
(cÚ¡ 
SŒšg
& 
f’ame
, cÚ¡ SŒšg& 
size
, cÚ¡ SŒšg& 
d©e
, 
boŞ
 
isDœeùÜy
)

110 
Exû±iÚCode
 
ec
;

112 
RefPŒ
<
EËm’t
> 
rowEËm’t
 = 
m_bËEËm’t
->
	`š£¹Row
(-1, 
ec
);

113 
rowEËm’t
->
	`£tA‰ribu‹
("şass", "ápDœeùÜyEÁryRow", 
ec
);

115 
RefPŒ
<
EËm’t
> 
–em’t
 = 
m_doc
->
	`ü—‹EËm’t
(
tdTag
, 
çl£
);

116 
–em’t
->
	`­³ndChd
(
Text
::
	`ü—‹
(
m_doc
, 
	`SŒšg
(&
noB»akS·û
, 1)), 
ec
);

117 ià(
isDœeùÜy
)

118 
–em’t
->
	`£tA‰ribu‹
("şass", "ápDœeùÜyIcÚ fDœeùÜyTy³DœeùÜy", 
ec
);

120 
–em’t
->
	`£tA‰ribu‹
("şass", "ápDœeùÜyIcÚ fDœeùÜyTy³Fe", 
ec
);

121 
rowEËm’t
->
	`­³ndChd
(
–em’t
, 
ec
);

123 
–em’t
 = 
	`ü—‹TDFÜF’ame
(
f’ame
);

124 
–em’t
->
	`£tA‰ribu‹
("şass", "ápDœeùÜyFeName", 
ec
);

125 
rowEËm’t
->
	`­³ndChd
(
–em’t
, 
ec
);

127 
–em’t
 = 
m_doc
->
	`ü—‹EËm’t
(
tdTag
, 
çl£
);

128 
–em’t
->
	`­³ndChd
(
Text
::
	`ü—‹
(
m_doc
, 
d©e
), 
ec
);

129 
–em’t
->
	`£tA‰ribu‹
("şass", "ápDœeùÜyFeD©e", 
ec
);

130 
rowEËm’t
->
	`­³ndChd
(
–em’t
, 
ec
);

132 
–em’t
 = 
m_doc
->
	`ü—‹EËm’t
(
tdTag
, 
çl£
);

133 
–em’t
->
	`­³ndChd
(
Text
::
	`ü—‹
(
m_doc
, 
size
), 
ec
);

134 
–em’t
->
	`£tA‰ribu‹
("şass", "ápDœeùÜyFeSize", 
ec
);

135 
rowEËm’t
->
	`­³ndChd
(
–em’t
, 
ec
);

136 
	}
}

138 
	gPassRefPŒ
<
	gEËm’t
> 
	gFTPDœeùÜyTok’iz”
::
	$ü—‹TDFÜF’ame
(cÚ¡ 
SŒšg
& 
f’ame
)

140 
Exû±iÚCode
 
ec
;

142 
SŒšg
 
fuÎURL
 = 
m_doc
->
	`ba£URL
().
	`¡ršg
();

143 ià(
fuÎURL
[fuÎURL.
	`Ëngth
() - 1] == '/')

144 
fuÎURL
.
	`­³nd
(
f’ame
);

146 
fuÎURL
.
	`­³nd
("/" + 
f’ame
);

148 
RefPŒ
<
EËm’t
> 
ªchÜEËm’t
 = 
m_doc
->
	`ü—‹EËm’t
(
aTag
, 
çl£
);

149 
ªchÜEËm’t
->
	`£tA‰ribu‹
("h»f", 
fuÎURL
, 
ec
);

150 
ªchÜEËm’t
->
	`­³ndChd
(
Text
::
	`ü—‹
(
m_doc
, 
f’ame
), 
ec
);

152 
RefPŒ
<
EËm’t
> 
tdEËm’t
 = 
m_doc
->
	`ü—‹EËm’t
(
tdTag
, 
çl£
);

153 
tdEËm’t
->
	`­³ndChd
(
ªchÜEËm’t
, 
ec
);

155  
tdEËm’t
.
	`»Ëa£
();

156 
	}
}

158 
SŒšg
 
	$´oûssFesizeSŒšg
(cÚ¡ 
SŒšg
& 
size
, 
boŞ
 
isDœeùÜy
)

160 ià(
isDœeùÜy
)

163 
boŞ
 
v®id
;

164 
št64_t
 
by‹s
 = 
size
.
	`toUIÁ64
(&
v®id
);

165 ià(!
v®id
)

166  
	`unknownFeSizeText
();

168 ià(
by‹s
 < 1000000)

169  
SŒšg
::
	`fÜm©
("%.2àKB", 
¡©ic_ÿ¡
<>(
by‹s
)/1000);

171 ià(
by‹s
 < 1000000000)

172  
SŒšg
::
	`fÜm©
("%.2àMB", 
¡©ic_ÿ¡
<>(
by‹s
)/1000000);

174  
SŒšg
::
	`fÜm©
("%.2àGB", 
¡©ic_ÿ¡
<>(
by‹s
)/1000000000);

175 
	}
}

177 
boŞ
 
	$wasLa¡DayOfMÚth
(
y—r
, 
mÚth
, 
day
)

179 
Ï¡Days
[] = { 31, 0, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31 };

180 ià(
mÚth
 < 0 || month > 11)

181  
çl£
;

183 ià(
mÚth
 == 2) {

184 ià(
y—r
 % 4 == 0 && (year % 100 || year % 400 == 0)) {

185 ià(
day
 == 29)

186  
Œue
;

187  
çl£
;

190 ià(
day
 == 28)

191  
Œue
;

192  
çl£
;

195  
Ï¡Days
[
mÚth
] =ğ
day
;

196 
	}
}

198 
SŒšg
 
	$´oûssFeD©eSŒšg
(cÚ¡ 
FTPTime
& 
feTime
)

202 
SŒšg
 
timeOfDay
;

204 ià(!(
feTime
.
tm_hour
 =ğ0 && feTime.
tm_mš
 =ğ0 && feTime.
tm_£c
 == 0)) {

205 
hour
 = 
feTime
.
tm_hour
;

206 
	`ASSERT
(
hour
 >= 0 && hour < 24);

208 ià(
hour
 < 12) {

209 ià(
hour
 == 0)

210 
hour
 = 12;

211 
timeOfDay
 = 
SŒšg
::
	`fÜm©
(", %i:%02˜AM", 
hour
, 
feTime
.
tm_mš
);

213 
hour
 = hour - 12;

214 ià(
hour
 == 0)

215 
hour
 = 12;

216 
timeOfDay
 = 
SŒšg
::
	`fÜm©
(", %i:%02˜PM", 
hour
, 
feTime
.
tm_mš
);

221 
tm
 
now
;

222 
time_t
 
now_t
 = 
	`time
(
NULL
);

223 
	`g‘LoÿlTime
(&
now_t
, &
now
);

226 
now
.
tm_y—r
 += 1900;

228 ià(
feTime
.
tm_y—r
 =ğ
now
.tm_year) {

229 ià(
feTime
.
tm_mÚ
 =ğ
now
.tm_mon) {

230 ià(
feTime
.
tm_mday
 =ğ
now
.tm_mday)

231  "Today" + 
timeOfDay
;

232 ià(
feTime
.
tm_mday
 =ğ
now
.tm_mday - 1)

233  "Ye¡”day" + 
timeOfDay
;

236 ià(
now
.
tm_mday
 =ğ1 && (now.
tm_mÚ
 =ğ
feTime
.tm_mon + 1 || (now.tm_mon == 0 && fileTime.tm_mon == 11)) &&

237 
	`wasLa¡DayOfMÚth
(
feTime
.
tm_y—r
, feTime.
tm_mÚ
, feTime.
tm_mday
))

238  "Ye¡”day" + 
timeOfDay
;

241 ià(
feTime
.
tm_y—r
 =ğ
now
.tm_y—¸- 1 && feTime.
tm_mÚ
 =ğ12 && feTime.
tm_mday
 == 31 &&‚ow.tm_mon == 1 &&‚ow.tm_mday == 1)

242  "Ye¡”day" + 
timeOfDay
;

244 cÚ¡ * 
mÚths
[] = { "Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec", "???" };

246 
mÚth
 = 
feTime
.
tm_mÚ
;

247 ià(
mÚth
 < 0 || month > 11)

248 
mÚth
 = 12;

250 
SŒšg
 
d©eSŒšg
;

252 ià(
feTime
.
tm_y—r
 > -1)

253 
d©eSŒšg
 = 
SŒšg
::
	`fÜm©
("% %i, %i", 
mÚths
[
mÚth
], 
feTime
.
tm_mday
, feTime.
tm_y—r
);

255 
d©eSŒšg
 = 
SŒšg
::
	`fÜm©
("% %i, %i", 
mÚths
[
mÚth
], 
feTime
.
tm_mday
, 
now
.
tm_y—r
);

257  
d©eSŒšg
 + 
timeOfDay
;

258 
	}
}

260 
	gFTPDœeùÜyTok’iz”
::
	$·r£AndAµ’dOÃLše
(cÚ¡ 
SŒšg
& 
šputLše
)

262 
Li¡ResuÉ
 
»suÉ
;

263 
CSŒšg
 
Ïtš1IÅut
 = 
šputLše
.
	`Ïtš1
();

265 
FTPEÁryTy³
 
ty³ResuÉ
 = 
	`·r£OÃFTPLše
(
Ïtš1IÅut
.
	`d©a
(), 
m_li¡S‹
, 
»suÉ
);

268 ià(
ty³ResuÉ
 =ğ
FTPMiscEÁry
 ||y³ResuÉ =ğ
FTPJunkEÁry
)

271 
SŒšg
 
	`f’ame
(
»suÉ
.
f’ame
,„esuÉ.
f’ameL’gth
);

272 ià(
»suÉ
.
ty³
 =ğ
FTPDœeùÜyEÁry
) {

273 
f’ame
.
	`­³nd
("/");

276 ià(
f’ame
 == "./")

280 
	`LOG
(
FTP
, "Aµ’dšgƒÁry - %s, %s", 
f’ame
.
	`ascii
().
	`d©a
(), 
»suÉ
.
feSize
.ascii().data());

282 
	`­³ndEÁry
(
f’ame
, 
	`´oûssFesizeSŒšg
(
»suÉ
.
feSize
,„esuÉ.
ty³
 =ğ
FTPDœeùÜyEÁry
), 
	`´oûssFeD©eSŒšg
ÔesuÉ.
modif›dTime
),„esult.type == FTPDirectoryEntry);

283 
	}
}

285 
šlše
 
	gPassRefPŒ
<
	gSh¬edBufãr
> 
	$ü—‹Tem¶©eDocum’tD©a
(
S‘tšgs
* 
£‰šgs
)

287 
RefPŒ
<
Sh¬edBufãr
> 
bufãr
 = 0;

288 ià(
£‰šgs
)

289 
bufãr
 = 
Sh¬edBufãr
::
	`ü—‹W™hCÚ‹ÁsOfFe
(
£‰šgs
->
	`ápDœeùÜyTem¶©eP©h
());

290 ià(
bufãr
)

291 
	`LOG
(
FTP
, "Lßded FTPDœeùÜyTem¶©oàËngth %i\n", 
bufãr
->
	`size
());

292  
bufãr
.
	`»Ëa£
();

293 
	}
}

295 
boŞ
 
	gFTPDœeùÜyTok’iz”
::
	$lßdDocum’tTem¶©e
()

297 
	`DEFINE_STATIC_LOCAL
(
RefPŒ
<
Sh¬edBufãr
>, 
‹m¶©eDocum’tD©a
, (
	`ü—‹Tem¶©eDocum’tD©a
(
m_doc
->
	`£‰šgs
())));

302 ià(!
‹m¶©eDocum’tD©a
) {

303 
	`LOG_ERROR
("Could‚ot†oademplateData");

304  
çl£
;

308 
	`£tFÜûSynchrÚous
(
Œue
);

309 
HTMLTok’iz”
::
	`wr™e
(
	`SŒšg
(
‹m¶©eDocum’tD©a
->
	`d©a
(),em¶©eDocum’tD©a->
	`size
()), 
Œue
);

310 
	`£tFÜûSynchrÚous
(
çl£
);

312 
RefPŒ
<
EËm’t
> 
bËEËm’t
 = 
m_doc
->
	`g‘EËm’tById
("ftpDirectoryTable");

313 ià(!
bËEËm’t
)

314 
	`LOG_ERROR
("Unableo findƒlement by id \"ftpDirectoryTable\" inheemplate document.");

315 ià(!
bËEËm’t
->
	`hasTagName
(
bËTag
))

316 
	`LOG_ERROR
("Element of id \"ftpDirectoryTable\" is‚ot‡ableƒlement");

318 
m_bËEËm’t
 = 
¡©ic_ÿ¡
<
HTMLTabËEËm’t
*>(
bËEËm’t
.
	`g‘
());

321 ià(
m_bËEËm’t
)

322  
Œue
;

325 
bËEËm’t
 = 
m_doc
->
	`ü—‹EËm’t
(
bËTag
, 
çl£
);

326 
m_bËEËm’t
 = 
¡©ic_ÿ¡
<
HTMLTabËEËm’t
*>(
bËEËm’t
.
	`g‘
());

327 
Exû±iÚCode
 
ec
;

328 
m_bËEËm’t
->
	`£tA‰ribu‹
("id", "ápDœeùÜyTabË", 
ec
);

333 ià(
EËm’t
* 
body
 = 
m_doc
->
	`body
())

334 
body
->
	`­³ndChd
(
m_bËEËm’t
, 
ec
);

336 
m_doc
->
	`­³ndChd
(
m_bËEËm’t
, 
ec
);

338  
Œue
;

339 
	}
}

341 
	gFTPDœeùÜyTok’iz”
::
	$ü—‹BasicDocum’t
()

343 
	`LOG
(
FTP
, "Creating‡ basic FTP document structure‡s‚oemplate was†oaded");

348 
RefPŒ
<
EËm’t
> 
bodyEËm’t
 = 
m_doc
->
	`ü—‹EËm’t
(
bodyTag
, 
çl£
);

350 
Exû±iÚCode
 
ec
;

351 
m_doc
->
	`­³ndChd
(
bodyEËm’t
, 
ec
);

353 
RefPŒ
<
EËm’t
> 
bËEËm’t
 = 
m_doc
->
	`ü—‹EËm’t
(
bËTag
, 
çl£
);

354 
m_bËEËm’t
 = 
¡©ic_ÿ¡
<
HTMLTabËEËm’t
*>(
bËEËm’t
.
	`g‘
());

355 
m_bËEËm’t
->
	`£tA‰ribu‹
("id", "ápDœeùÜyTabË", 
ec
);

357 
bodyEËm’t
->
	`­³ndChd
(
m_bËEËm’t
, 
ec
);

358 
	}
}

360 
	gFTPDœeùÜyTok’iz”
::
	$wr™e
(cÚ¡ 
Segm’‹dSŒšg
& 
s
, 
boŞ
 )

364 ià(!
m_bËEËm’t
) {

365 ià(!
	`lßdDocum’tTem¶©e
())

366 
	`ü—‹BasicDocum’t
();

367 
	`ASSERT
(
m_bËEËm’t
);

370 
boŞ
 
foundNewLše
 = 
çl£
;

372 
m_de¡
 = 
m_bufãr
;

373 
Segm’‹dSŒšg
 
¡r
 = 
s
;

374 !
¡r
.
	`isEm±y
()) {

375 
UCh¬
 
c
 = *
¡r
;

377 ià(
c
 == '\r') {

378 *
m_de¡
++ = '\n';

379 
foundNewLše
 = 
Œue
;

381 
m_skLF
 = 
Œue
;

382 } ià(
c
 == '\n') {

383 ià(!
m_skLF
)

384 *
m_de¡
++ = 
c
;

386 
m_skLF
 = 
çl£
;

388 *
m_de¡
++ = 
c
;

389 
m_skLF
 = 
çl£
;

392 
¡r
.
	`advªû
();

395 
	`checkBufãr
();

398 ià(!
foundNewLše
) {

399 
m_de¡
 = 
m_bufãr
;

403 
UCh¬
* 
¡¬t
 = 
m_bufãr
;

404 
UCh¬
* 
cursÜ
 = 
¡¬t
;

406 
cursÜ
 < 
m_de¡
) {

407 ià(*
cursÜ
 == '\n') {

408 
m_ÿ¼yOv”
.
	`­³nd
(
	`SŒšg
(
¡¬t
, 
cursÜ
 - start));

409 
	`LOG
(
FTP
, "%s", 
m_ÿ¼yOv”
.
	`ascii
().
	`d©a
());

410 
	`·r£AndAµ’dOÃLše
(
m_ÿ¼yOv”
);

411 
m_ÿ¼yOv”
 = 
	`SŒšg
();

413 
¡¬t
 = ++
cursÜ
;

415 
cursÜ
++;

419 ià(
cursÜ
 - 
¡¬t
 > 1)

420 
m_ÿ¼yOv”
.
	`­³nd
(
	`SŒšg
(
¡¬t
, 
cursÜ
 - start - 1));

421 
	}
}

423 
	gFTPDœeùÜyTok’iz”
::
	$fšish
()

426 ià(!
m_ÿ¼yOv”
.
	`isEm±y
()) {

427 
	`·r£AndAµ’dOÃLše
(
m_ÿ¼yOv”
);

428 
m_ÿ¼yOv”
 = 
	`SŒšg
();

431 
m_bËEËm’t
 = 0;

432 
	`ç¡F»e
(
m_bufãr
);

434 
HTMLTok’iz”
::
	`fšish
();

435 
	}
}

437 
	gFTPDœeùÜyDocum’t
::
	$FTPDœeùÜyDocum’t
(
F¿me
* 
äame
)

438 : 
	$HTMLDocum’t
(
äame
)

440 #iâdeà
NDEBUG


441 
LogFTP
.
¡©e
 = 
WTFLogChªÃlOn
;

443 
	}
}

445 
Tok’iz”
* 
	gFTPDœeùÜyDocum’t
::
	$ü—‹Tok’iz”
()

447  
Ãw
 
	`FTPDœeùÜyTok’iz”
(
this
);

448 
	}
}

	@FTPDirectoryDocument.h

25 #iâdeà
FTPDœeùÜyDocum’t_h


26 
	#FTPDœeùÜyDocum’t_h


	)

28 
	~"HTMLDocum’t.h
"

30 
Çme¥aû
 
	gWebCÜe
 {

32 
şass
 
	gDOMIm¶em’tiÚ
;

34 şas 
	cFTPDœeùÜyDocum’t
 : 
public
 
HTMLDocum’t
 {

35 
public
:

36 
PassRefPŒ
<
FTPDœeùÜyDocum’t
> 
ü—‹
(
F¿me
* 
äame
)

38  
adİtRef
(
Ãw
 
FTPDœeùÜyDocum’t
(
äame
));

41 
	g´iv©e
:

42 
FTPDœeùÜyDocum’t
(
F¿me
*);

43 
vœtu®
 
Tok’iz”
* 
ü—‹Tok’iz”
();

	@FTPDirectoryParser.cpp

23 
	~"cÚfig.h
"

24 #ià
ENABLE
(
FTPDIR
)

25 
	~"FTPDœeùÜyP¬£r.h
"

27 #ià
PLATFORM
(
QT
)

28 
	~<QD©eTime
>

30 #–ià
OS
(
WINDOWS
è&& (
USE
(
PTHREADS
è|| 
HAVE
(
PTHREAD_H
))

31 
	~<±h»ad.h
>

34 
	~<wtf/ASCIICTy³.h
>

35 
	~<¡dio.h
>

37 
usšg
 
Çme¥aû
 
	gWTF
;

39 
Çme¥aû
 
	gWebCÜe
 {

40 #ià
PLATFORM
(
QT
è&& 
defšed
(
Q_WS_WIN32
)

44 
tm
 
gmtimeQt
(cÚ¡ 
QD©eTime
& 
šput
)

46 
tm
 
	g»suÉ
;

48 
QD©e
 
d©e
(
šput
.date());

49 
	g»suÉ
.
	gtm_y—r
 = 
d©e
.
y—r
() - 1900;

50 
	g»suÉ
.
	gtm_mÚ
 = 
d©e
.
mÚth
();

51 
	g»suÉ
.
	gtm_mday
 = 
d©e
.
day
();

52 
	g»suÉ
.
	gtm_wday
 = 
d©e
.
dayOfW“k
();

53 
	g»suÉ
.
	gtm_yday
 = 
d©e
.
dayOfY—r
();

55 
QTime
 
time
(
šput
.time());

56 
	g»suÉ
.
	gtm_£c
 = 
time
.
£cÚd
();

57 
	g»suÉ
.
	gtm_mš
 = 
time
.
mšu‹
();

58 
	g»suÉ
.
	gtm_hour
 = 
time
.
hour
();

60  
	g»suÉ
;

63 
tm
 *
gmtimeQt
(cÚ¡ 
time_t
 *cÚ¡ 
tim•
, tm *
»suÉ
)

65 cÚ¡ 
QD©eTime
 
dt
(QD©eTime::
äomTime_t
(*
tim•
));

66 *
	g»suÉ
 = 
WebCÜe
::
gmtimeQt
(
dt
);

67  
	g»suÉ
;

70 
	#gmtime_r
(
x
, 
y
è
	`gmtimeQt
(x, y)

	)

71 #–ià
OS
(
WINDOWS
è&& !
defšed
(
gmtime_r
)

72 #ià
defšed
(
_MSC_VER
) && (_MSC_VER >= 1400)

73 
	#gmtime_r
(
x
, 
y
è
	`gmtime_s
((y), (x))

	)

75 
	#gmtime_r
(
x
,
y
è(
	`gmtime
(x)?(*(y)=*gmtime(x),(y)):0)

	)

79 
šlše
 
FTPEÁryTy³
 
P¬sšgFaed
(
Li¡S‹
& 
¡©e
)

81 ià(
	g¡©e
.
	g·r£dOÃ
 || s‹.
	gli¡StyË
)

82  
	gFTPJunkEÁry
;

83  
	gFTPMiscEÁry
;

86 
FTPEÁryTy³
 
·r£OÃFTPLše
(cÚ¡ * 
lše
, 
Li¡S‹
& 
¡©e
, 
Li¡ResuÉ
& 
»suÉ
)

88 
	g»suÉ
.
ş—r
();

90 ià(!
	glše
)

91  
	gFTPJunkEÁry
;

93 
	g¡©e
.
	gnumLšes
++;

96 
	gÿ¼y_buf_Ën
 = 
¡©e
.
ÿ¼yBufãrL’gth
;

97 
	g¡©e
.
	gÿ¼yBufãrL’gth
 = 0;

99 
	glš–’
 = 0;

102 *
	glše
 =ğ' ' || *
lše
 == '\t')

103 
lše
++;

106 cÚ¡ * 
	gp
 = 
lše
;

107 *
	gp
 && *p != '\n')

108 
p
++;

109 
	glš–’
 = 
p
 - 
lše
;

111 ià(
	glš–’
 > 0 && *
	gp
 =ğ'\n' && *(
p
-1) == '\r')

112 
lš–’
--;

116 ià(
	glš–’
 > 0)

118 cÚ¡ *
	gmÚth_Çmes
 = "JanFebMarAprMayJunJulAugSepOctNovDec";

119 cÚ¡ *
	gtok’s
[16];

120 
	gtokËn
[((
tok’s
)/(tokens[0]))];

121 
	glš–’_§ns_w¥
;

122 
	gnumtoks
 = 0;

123 
	gtokm¬k”
 = 0;

124 
	gmÚth_num
 = 0;

125 
	gtbuf
[4];

126 
	gl¡yË
 = 0;

128 ià(
	gÿ¼y_buf_Ën
)

130 
	gtok’s
[0] = 
¡©e
.
ÿ¼yBufãr
;

131 
	gtokËn
[0] = 
ÿ¼y_buf_Ën
;

132 
	gnumtoks
++;

135 
	gpos
 = 0;

136 
	gpos
 < 
	glš–’
 && 
	gnumtoks
 < ((
	gtok’s
)/(tokens[0])) )

138 
	gpos
 < 
	glš–’
 &&

139 (
	glše
[
pos
] =ğ' ' || 
lše
[pos] == '\t' ||†ine[pos] == '\r'))

140 
pos
++;

141 ià(
	gpos
 < 
	glš–’
)

143 
	gtok’s
[
numtoks
] = &
lše
[
pos
];

144 
	gpos
 < 
	glš–’
 &&

145 (
	glše
[
pos
] !ğ' ' && 
lše
[pos] != '\t' &&†ine[pos] != '\r'))

146 
pos
++;

147 ià(
	gtok’s
[
numtoks
] !ğ&
lše
[
pos
])

149 
tokËn
[
numtoks
] = (&
lše
[
pos
] - 
tok’s
[numtoks]);

150 
	gnumtoks
++;

155 ià(!
	gnumtoks
)

156  
P¬sšgFaed
(
¡©e
);

158 
	glš–’_§ns_w¥
 = &(
tok’s
[
numtoks
-1][
tokËn
[numtoks-1]]) -okens[0];

159 ià(
	gnumtoks
 =ğ((
tok’s
)/(tokens[0])) )

161 
pos
 = 
lš–’
;

162 
	gpos
 > 0 && (
	glše
[
pos
-1] =ğ' ' || 
lše
[pos-1] == '\t'))

163 
pos
--;

164 
	glš–’_§ns_w¥
 = 
pos
;

168 #ià
defšed
(
SUPPORT_EPLF
)

170 ià(!
	gl¡yË
 && (!
	g¡©e
.
	gli¡StyË
 || state.listStyle == 'E'))

172 ià(*
lše
 =ğ'+' && 
lš–’
 > 4 && 
numtoks
 >= 2)

174 
pos
 = 1;

175 
	gpos
 < (
	glš–’
-1))

177 
	gp
 = &
lše
[
pos
++];

178 ià(*
	gp
 == '/')

179 
»suÉ
.
ty³
 = 
FTPDœeùÜyEÁry
;

180 ià(*
	gp
 == 'r')

181 
»suÉ
.
ty³
 = 
FTPFeEÁry
;

182 ià(*
	gp
 == 'm')

184 ià(
isASCIIDig™
(
lše
[
pos
]))

186 
pos
 < 
lš–’
 && 
isASCIIDig™
(
lše
[pos]))

187 
pos
++;

188 ià(
	gpos
 < 
	glš–’
 && 
	glše
[
pos
] == ',')

190 
£cÚds
 = 0;

191 
ssÿnf
(
p
 + 1, "%Îu", &
£cÚds
);

192 
time_t
 
	gt
 = 
¡©ic_ÿ¡
<time_t>(
£cÚds
);

195 
gmtime_r
(&
t
, &
»suÉ
.
modif›dTime
);

196 
	g»suÉ
.
	gmodif›dTime
.
	gtm_y—r
 += 1900;

200 ià(*
	gp
 == 's')

202 ià(
isASCIIDig™
(
lše
[
pos
]))

204 
pos
 < 
lš–’
 && 
isASCIIDig™
(
lše
[pos]))

205 
pos
++;

206 ià(
	gpos
 < 
	glš–’
 && 
	glše
[
pos
] == ',')

207 
»suÉ
.
feSize
 = 
SŒšg
(
p
 + 1, &
lše
[
pos
] -… + 1);

210 ià(
isASCIIAÍha
(*
p
))

212 
	gpos
 < 
	glš–’
 && *++
	gp
 != ',')

213 
pos
++;

215 ià(*
	gp
 !ğ'\t' || (
p
+1è!ğ
tok’s
[1])

221 
	g¡©e
.
	g·r£dOÃ
 = 
Œue
;

222 
	g¡©e
.
	gli¡StyË
 = 
l¡yË
 = 'E';

224 
	gp
 = &(
lše
[
lš–’_§ns_w¥
]);

225 
	g»suÉ
.
	gf’ame
 = 
tok’s
[1];

226 
	g»suÉ
.
	gf’ameL’gth
 = 
p
 - 
tok’s
[1];

228 ià(!
	g»suÉ
.
	gty³
)

230 
	g»suÉ
.
	gty³
 = 
FTPFeEÁry
;

231  
	gFTPJunkEÁry
;

233  
	g»suÉ
.
	gty³
;

235 ià(
	gpos
 >ğ(
lš–’
-1è|| 
lše
[
pos
] != ',')

237 
	gpos
++;

239 
	g»suÉ
.
ş—r
();

246 #ià
defšed
(
SUPPORT_VMS
)

247 ià(!
	gl¡yË
 && (!
	g¡©e
.
	gli¡StyË
 || state.listStyle == 'V'))

260 ià(!
¡©e
.
·r£dOÃ
 &&

261 (
numtoks
 =ğ1 || (numtok =ğ2 && 
tokËn
[0] == 9 &&

262 
memcmp
(
tok’s
[0], "Directory", 9)==0 )))

268 
p
 = 
tok’s
[0];

269 
	gpos
 = 
tokËn
[0];

270 ià(
	gnumtoks
 == 2)

272 
p
 = 
tok’s
[1];

273 
	gpos
 = 
tokËn
[1];

275 
	gpos
--;

276 ià(
	gpos
 >= 3)

278 
pos
 > 0 && 
p
[pos] != '[')

280 
pos
--;

281 ià(
	gp
[
pos
] =ğ'-' || 
p
[pos] == '$')

283 ià(
pos
 =ğ0 || 
p
[pos-1] == '[' ||…[pos-1] == '.' ||

284 (
p
[
pos
] == '-' && (p[pos+1] == ']' ||…[pos+1] == '.')))

287 ià(
	gp
[
pos
] !ğ'.' && 
p
[pos] != '~' &&

288 !
isASCIIDig™
(
p
[
pos
]è&& !
isASCIIAÍha
(p[pos]))

290 ià(
isASCIIAÍha
(
p
[
pos
]è&& 
	gp
[pos] !ğ
toASCIIUµ”
(p[pos]))

293 ià(
	gpos
 > 0)

295 
	gpos
--;

296 ià(
	gp
[
pos
] !ğ':' || 
p
[pos+1] != '[')

297 
pos
 = 0;

300 ià(
	gpos
 > 0 && 
	gp
[
pos
] == ':')

302 
pos
 > 0)

304 
pos
--;

305 ià(
	gp
[
pos
] !ğ'$' && 
p
[pos] != '_' &&…[pos] != '-' &&

306 
p
[
pos
] !ğ'~' && !
isASCIIDig™
Õ[pos]è&& !
isASCIIAÍha
(p[pos]))

308 ià(
isASCIIAÍha
(
p
[
pos
]è&& 
	gp
[pos] !ğ
toASCIIUµ”
(p[pos]))

311 ià(
	gpos
 == 0)

313 
¡©e
.
li¡StyË
 = 'V';

314  
	gFTPJunkEÁry
;

319 ià((
	gtok’s
[0][
tokËn
[0]-1]) != ';')

321 ià(
numtoks
 =ğ1 && (
¡©e
.
li¡StyË
 =ğ'V' && !
ÿ¼y_buf_Ën
))

322 
l¡yË
 = 'V';

323 ià(
	gnumtoks
 < 4)

325 ià(
	gtokËn
[1] >ğ10 && 
memcmp
(
tok’s
[1], "%RMS-E-PRV", 10) == 0)

326 
l¡yË
 = 'V';

327 ià((&
	glše
[
lš–’
] - 
	gtok’s
[1]) >= 22 &&

328 
memcmp
(
tok’s
[1], "insufficient…rivilege", 22) == 0)

329 
l¡yË
 = 'V';

330 ià(
	gnumtoks
 !ğ4 && 
numtoks
 != 6)

332 ià(
	gnumtoks
 == 6 && (

333 
tokËn
[5] < 4 || *
tok’s
[5] != '(' ||

334 (
tok’s
[5][
tokËn
[5]-1]) != ')' ))

336 iàĞ(
	gtokËn
[2] =ğ10 || 
tokËn
[2] == 11) &&

337 (
tok’s
[2][
tokËn
[2]-5]) == '-' &&

338 (
tok’s
[2][
tokËn
[2]-9]) == '-' &&

339 (((
tokËn
[3]==4 ||oklen[3]==5 ||oklen[3]==7 ||oklen[3]==8) &&

340 (
tok’s
[3][
tokËn
[3]-3]) == ':' ) ||

341 ((
tokËn
[3]==10 ||oklen[3]==11 ) &&

342 (
tok’s
[3][
tokËn
[3]-3]) == '.' )

344 
isASCIIDig™
(*
tok’s
[1]) &&

345 
isASCIIDig™
(*
tok’s
[2]) &&

346 
isASCIIDig™
(*
tok’s
[3])

349 
l¡yË
 = 'V';

351 ià(
	gl¡yË
 == 'V')

370 
tokm¬k”
 = 0;

371 
	gp
 = 
tok’s
[0];

372 
	gpos
 = 0;

373 ià(*
	gp
 =ğ'[' && 
tokËn
[0] >= 4)

375 ià(
p
[1] != ']')

377 
p
++;

378 
	gpos
++;

380 
	gl¡yË
 && 
	gpos
 < 
	gtokËn
[0] && *
	gp
 != ']')

382 ià(*
p
 != '$' && *p != '.' && *p != '_' && *p != '-' &&

383 *
p
 !ğ'~' && !
isASCIIDig™
(*pè&& !
isASCIIAÍha
(*p))

384 
l¡yË
 = 0;

385 
	gpos
++;

386 
	gp
++;

388 ià(
	gl¡yË
 && 
	gpos
 < (
	gtokËn
[0]-1))

391 
ASSERT
(*
p
 == ']');

392 
	gpos
++;

393 
	gp
++;

394 
	gtokm¬k”
 = 
pos
;

397 
	gl¡yË
 = 0;

400 
	gl¡yË
 && 
	gpos
 < 
	gtokËn
[0] && *
	gp
 != ';')

402 ià(*
p
 != '$' && *p != '.' && *p != '_' && *p != '-' &&

403 *
p
 !ğ'~' && !
isASCIIDig™
(*pè&& !
isASCIIAÍha
(*p))

404 
l¡yË
 = 0;

405 ià(
isASCIIAÍha
(*
p
è&& *
	gp
 !ğ
toASCIIUµ”
(*p))

406 
l¡yË
 = 0;

407 
	gp
++;

408 
	gpos
++;

410 ià(
	gl¡yË
 && *
	gp
 == ';')

412 ià(
pos
 =ğ0 ||…o =ğ(
tokËn
[0]-1))

413 
l¡yË
 = 0;

414 
	gpos
++;
	gl¡yË
 &&…o < 
	gtokËn
[0];pos++)

416 ià(!
isASCIIDig™
(
tok’s
[0][
pos
]))

417 
	gl¡yË
 = 0;

420 
	gpos
 = (
p
 - 
tok’s
[0]);

421 
	gpos
 -ğ
tokm¬k”
;

422 
	gp
 = &(
tok’s
[0][
tokm¬k”
]);

424 ià(!
	gl¡yË
 || 
	gpos
 =ğ0 || 
pos
 > 80)

426 
l¡yË
 = 0;

428 ià(
	gnumtoks
 == 1)

433 ià(
pos
 >ğ((
¡©e
.
ÿ¼yBufãr
)-1))

434 
pos
 = ((
¡©e
.
ÿ¼yBufãr
)-1);

435 
memıy
Ğ
¡©e
.
ÿ¼yBufãr
, 
p
, 
pos
 );

436 
	g¡©e
.
	gÿ¼yBufãrL’gth
 = 
pos
;

437  
	gFTPJunkEÁry
;

439 ià(
isASCIIDig™
(*
tok’s
[1]))

441 
	gpos
 = 0; 
	gl¡yË
 &&…o < (
	gtokËn
[1]);…os++)

443 ià(!
isASCIIDig™
((
tok’s
[1][
pos
])è&& (
	gtok’s
[1][pos]) != '/')

444 
l¡yË
 = 0;

446 ià(
	gl¡yË
 && 
	gnumtoks
 > 4)

448 
	gpos
 = 1; 
	gl¡yË
 &&…o < (
	gtokËn
[5]-1);…os++)

450 
	gp
 = &(
tok’s
[5][
pos
]);

451 ià(*
	gp
!='R' && *
p
!='W' && *p!='E' && *p!='D' && *p!=',')

452 
l¡yË
 = 0;

459 ià(
	gl¡yË
 == 'V')

461 
¡©e
.
·r£dOÃ
 = 
Œue
;

462 
	g¡©e
.
	gli¡StyË
 = 
l¡yË
;

464 ià(
isASCIIDig™
(*
tok’s
[1]))

467 ià(*
	gtok’s
[0] == '[')

469 
pos
 = 
tokËn
[0]-1;

470 
	gp
 = 
tok’s
[0]+1;

471 *
	gp
 != ']')

473 
p
++;

474 
	gpos
--;

476 
	gtokËn
[0] = --
pos
;

477 
	gtok’s
[0] = ++
p
;

479 
	gpos
 = 0;

480 
	gpos
 < 
	gtokËn
[0] && (
	gtok’s
[0][
pos
]) != ';')

481 
pos
++;

483 
	g»suÉ
.
	gÿ£S’s™ive
 = 
Œue
;

484 
	g»suÉ
.
	gty³
 = 
FTPFeEÁry
;

485 
	g»suÉ
.
	gf’ame
 = 
tok’s
[0];

486 
	g»suÉ
.
	gf’ameL’gth
 = 
pos
;

488 ià(
	gpos
 > 4)

490 
	gp
 = &(
tok’s
[0][
pos
-4]);

491 ià(
	gp
[0] =ğ'.' && 
p
[1] == 'D' &&…[2] == 'I' &&…[3] == 'R')

493 
»suÉ
.
f’ameL’gth
 -= 4;

494 
	g»suÉ
.
	gty³
 = 
FTPDœeùÜyEÁry
;

498 ià(
	g»suÉ
.
	gty³
 !ğ
FTPDœeùÜyEÁry
)

505 
pos
 = 0;

506 
	gpos
 < 
	gtokËn
[1] && (
	gtok’s
[1][
pos
]) != '/')

507 
pos
++;

516 ià(
	gpos
 < 
	gtokËn
[1] && ( (pos<<1) > (toklen[1]-1) ||

517 (
¡¹oul
(
tok’s
[1], (**)0, 10) >

518 
¡¹oul
(
tok’s
[1]+
pos
+1, (**)0, 10)) ))

520 ià(
	gpos
 > ((
	g»suÉ
.
	gã_size
)-1))

521 
	gpos
 = (
»suÉ
.
ã_size
)-1;

522 
memıy
Ğ
»suÉ
.
ã_size
, 
tok’s
[1], 
pos
 );

523 
	g»suÉ
.
	gã_size
[
pos
] = '\0';

545 
ušt64_t
 
	gsize
 = 
¡¹oul
(
tok’s
[1], 
NULL
, 10) * 512;

546 
	g»suÉ
.
	gfeSize
 = 
SŒšg
::
numb”
(
size
);

551 
	gp
 = 
tok’s
[2] + 2;

552 ià(*
	gp
 == '-')

553 
p
++;

554 
	gtbuf
[0] = 
p
[0];

555 
	gtbuf
[1] = 
toASCIILow”
(
p
[1]);

556 
	gtbuf
[2] = 
toASCIILow”
(
p
[2]);

557 
	gmÚth_num
 = 0;

558 
	gpos
 = 0;…os < (12*3);…os+=3)

560 ià(
tbuf
[0] =ğ
mÚth_Çmes
[
pos
+0] &&

561 
tbuf
[1] =ğ
mÚth_Çmes
[
pos
+1] &&

562 
tbuf
[2] =ğ
mÚth_Çmes
[
pos
+2])

564 
	gmÚth_num
++;

566 ià(
	gmÚth_num
 >= 12)

567 
mÚth_num
 = 0;

568 
	g»suÉ
.
	gmodif›dTime
.
	gtm_mÚ
 = 
mÚth_num
;

569 
	g»suÉ
.
	gmodif›dTime
.
	gtm_mday
 = 
©oi
(
tok’s
[2]);

570 
	g»suÉ
.
	gmodif›dTime
.
	gtm_y—r
 = 
©oi
(
p
+4);

572 
	gp
 = 
tok’s
[3] + 2;

573 ià(*
	gp
 == ':')

574 
p
++;

575 ià(
	gp
[2] == ':')

576 
»suÉ
.
modif›dTime
.
tm_£c
 = 
©oi
(
p
+3);

577 
	g»suÉ
.
	gmodif›dTime
.
	gtm_hour
 = 
©oi
(
tok’s
[3]);

578 
	g»suÉ
.
	gmodif›dTime
.
	gtm_mš
 = 
©oi
(
p
);

580  
	g»suÉ
.
	gty³
;

584  
	gFTPJunkEÁry
;

592 #ià
defšed
(
SUPPORT_CMS
)

594 ià(!
	gl¡yË
 && (!
	g¡©e
.
	gli¡StyË
 || state.listStyle == 'C'))

618 ià(
numtoks
 >ğ7 && (
tokËn
[0]+toklen[1]) <= 16)

620 
pos
 = 1; !
	gl¡yË
 && (
	gpos
+5è< 
	gnumtoks
;…os++)

622 
	gp
 = 
tok’s
[
pos
];

623 ià((
	gtokËn
[
pos
] =ğ1 && (*
p
 == 'F' || *p == 'V')) ||

624 (
tokËn
[
pos
] =ğ3 && *
p
 == 'D' &&…[1] == 'I' &&…[2] == 'R'))

626 ià(
tokËn
[
pos
+5] =ğ8 && (
tok’s
[pos+5][2]) == ':' &&

627 (
tok’s
[
pos
+5][5]) == ':' )

629 
p
 = 
tok’s
[
pos
+4];

630 ià((
	gtokËn
[
pos
+4] =ğ10 && 
p
[4] == '-' &&…[7] == '-') ||

631 (
tokËn
[
pos
+4] >= 7 &&oklen[pos+4] <= 9 &&

632 
p
[((p[1]!='/')?(2):(1))] == '/' &&

633 
p
[((p[1]!='/')?(5):(4))] == '/'))

636 iàĞ(*
tok’s
[
pos
+1] == '-' &&

637 *
tok’s
[
pos
+2] == '-' &&

638 *
tok’s
[
pos
+3] == '-') ||

639 (
isASCIIDig™
(*
tok’s
[
pos
+1]) &&

640 
isASCIIDig™
(*
tok’s
[
pos
+2]) &&

641 
isASCIIDig™
(*
tok’s
[
pos
+3])) )

643 
l¡yË
 = 'C';

644 
	gtokm¬k”
 = 
pos
;

653 ià(
	gl¡yË
 && !
	g¡©e
.
	gli¡StyË
)

655 
	gpos
 = 0, 
	gp
 = 
tok’s
[0]; 
	gl¡yË
 &&…o < 
	gtokËn
[0];…os++,…++)

657 ià(
isASCIIAÍha
(*
p
è&& 
toASCIIUµ”
(*p) != *p)

658 
l¡yË
 = 0;

660 
	gpos
 = 
tokm¬k”
+1;…os <=okmarker+3;…os++)

662 ià(!(
	gtokËn
[
pos
] =ğ1 && *
tok’s
[pos] == '-'))

664 
p
 = 
tok’s
[
pos
]; 
	gl¡yË
 && 
	gp
<(
	gtok’s
[pos]+
	gtokËn
[pos]);…++)

666 ià(!
isASCIIDig™
(*
p
))

667 
	gl¡yË
 = 0;

671 
	gpos
 = 0, 
	gp
 = 
tok’s
[
tokm¬k”
+4];

672 
	gl¡yË
 && 
	gpos
 < 
	gtokËn
[
tokm¬k”
+4];…os++, 
	gp
++)

674 ià(*
	gp
 == '/')

679 ià((
tok’s
[
tokm¬k”
+4][1]) == '/')

681 ià(
pos
 != 1 &&…os != 4)

682 
l¡yË
 = 0;

684 ià(
	gpos
 !ğ2 && 
pos
 != 5)

685 
l¡yË
 = 0;

687 ià(*
	gp
 !ğ'-' && !
isASCIIDig™
(*
p
))

688 
l¡yË
 = 0;

689 ià(*
	gp
 =ğ'-' && 
pos
 != 4 &&…os != 7)

690 
l¡yË
 = 0;

692 
	gpos
 = 0, 
	gp
 = 
tok’s
[
tokm¬k”
+5];

693 
	gl¡yË
 && 
	gpos
 < 
	gtokËn
[
tokm¬k”
+5];…os++, 
	gp
++)

695 ià(*
	gp
 !ğ':' && !
isASCIIDig™
(*
p
))

696 
l¡yË
 = 0;

697 ià(*
	gp
 =ğ':' && 
pos
 !ğ(
tokËn
[
tokm¬k”
+5]-3)

698 && 
pos
 !ğ(
tokËn
[
tokm¬k”
+5]-6))

699 
l¡yË
 = 0;

703 ià(
	gl¡yË
 == 'C')

705 
¡©e
.
·r£dOÃ
 = 
Œue
;

706 
	g¡©e
.
	gli¡StyË
 = 
l¡yË
;

708 
	gp
 = 
tok’s
[
tokm¬k”
+4];

709 ià(
	gtokËn
[
tokm¬k”
+4] == 10)

711 
»suÉ
.
modif›dTime
.
tm_y—r
 = 
©oi
(
p
+0) - 1900;

712 
	g»suÉ
.
	gmodif›dTime
.
	gtm_mÚ
 = 
©oi
(
p
+5) - 1;

713 
	g»suÉ
.
	gmodif›dTime
.
	gtm_mday
 = 
©oi
(
p
+8);

717 
	gpos
 = 
tokËn
[
tokm¬k”
+4];

718 
	g»suÉ
.
	gmodif›dTime
.
	gtm_mÚ
 = 
©oi
(
p
) - 1;

719 
	g»suÉ
.
	gmodif›dTime
.
	gtm_mday
 = 
©oi
((
p
+
pos
)-5);

720 
	g»suÉ
.
	gmodif›dTime
.
	gtm_y—r
 = 
©oi
((
p
+
pos
)-2);

721 ià(
	g»suÉ
.
	gmodif›dTime
.
	gtm_y—r
 < 70)

722 
	g»suÉ
.
	gmodif›dTime
.
	gtm_y—r
 += 100;

725 
	gp
 = 
tok’s
[
tokm¬k”
+5];

726 
	gpos
 = 
tokËn
[
tokm¬k”
+5];

727 
	g»suÉ
.
	gmodif›dTime
.
	gtm_hour
 = 
©oi
(
p
);

728 
	g»suÉ
.
	gmodif›dTime
.
	gtm_mš
 = 
©oi
((
p
+
pos
)-5);

729 
	g»suÉ
.
	gmodif›dTime
.
	gtm_£c
 = 
©oi
((
p
+
pos
)-2);

731 
	g»suÉ
.
	gÿ£S’s™ive
 = 
Œue
;

732 
	g»suÉ
.
	gf’ame
 = 
tok’s
[0];

733 
	g»suÉ
.
	gf’ameL’gth
 = 
tokËn
[0];

734 
	g»suÉ
.
	gty³
 = 
FTPFeEÁry
;

736 
	gp
 = 
tok’s
[
tokm¬k”
];

737 ià(
	gtokËn
[
tokm¬k”
] =ğ3 && *
p
=='D' &&…[1]=='I' &&…[2]=='R')

738 
»suÉ
.
ty³
 = 
FTPDœeùÜyEÁry
;

740 ià(Ğ
	gtokËn
[
tokm¬k”
+4] == 10 &&okmarker > 1) ||

741 Ğ
tokËn
[
tokm¬k”
+4] != 10 &&okmarker > 2))

743 *
dÙ
;

744 
	gp
 = &(
tok’s
[0][
tokËn
[0]]);

745 
memıy
Ğ&
dÙ
, &
p
, (dot) );

746 *
	gdÙ
++ = '.';

747 
	gp
 = 
tok’s
[1];

748 
	gpos
 = 0;…o < 
	gtokËn
[1];…os++)

749 *
	gdÙ
++ = *
p
++;

750 
	g»suÉ
.
	gf’ameL’gth
 +ğ1 + 
tokËn
[1];

762  
	g»suÉ
.
	gty³
;

770 #ià
defšed
(
SUPPORT_DOS
)

771 ià(!
	gl¡yË
 && (!
	g¡©e
.
	gli¡StyË
 || state.listStyle == 'W'))

781 ià((
numtoks
 >ğ4è&& 
tokËn
[0] == 8 &&oklen[1] == 7 &&

782 (*
tok’s
[2] =ğ'<' || 
isASCIIDig™
(*tokens[2])) )

784 
p
 = 
tok’s
[0];

785 iàĞ
isASCIIDig™
(
p
[0]è&& isASCIIDig™Õ[1]è&& 
	gp
[2]=='-' &&

786 
isASCIIDig™
(
p
[3]) && isASCIIDigit(p[4]) &&…[5]=='-' &&

787 
isASCIIDig™
(
p
[6]) && isASCIIDigit(p[7]) )

789 
p
 = 
tok’s
[1];

790 iàĞ
isASCIIDig™
(
p
[0]è&& isASCIIDig™Õ[1]è&& 
	gp
[2]==':' &&

791 
isASCIIDig™
(
p
[3]) && isASCIIDigit(p[4]) &&

792 (
p
[5]=='A' ||…[5]=='P') &&…[6]=='M')

794 
l¡yË
 = 'W';

795 ià(!
	g¡©e
.
	gli¡StyË
)

797 
	gp
 = 
tok’s
[2];

799 ià(*
	gp
 !ğ'<' || 
p
[
tokËn
[2]-1] != '>')

801 
pos
 = 1; (
	gl¡yË
 && 
	gpos
 < 
	gtokËn
[2]);…os++)

803 ià(!
isASCIIDig™
(*++
p
))

804 
	gl¡yË
 = 0;

812 ià(
	gl¡yË
 == 'W')

814 
¡©e
.
·r£dOÃ
 = 
Œue
;

815 
	g¡©e
.
	gli¡StyË
 = 
l¡yË
;

817 
	gp
 = &(
lše
[
lš–’
]);

818 
	g»suÉ
.
	gÿ£S’s™ive
 = 
Œue
;

819 
	g»suÉ
.
	gf’ame
 = 
tok’s
[3];

820 
	g»suÉ
.
	gf’ameL’gth
 = 
p
 - 
tok’s
[3];

821 
	g»suÉ
.
	gty³
 = 
FTPDœeùÜyEÁry
;

823 ià(*
	gtok’s
[2] != '<')

827 ià(
tok’s
[2] + 
tokËn
[2] - 
lše
 == 38) {

828 
»suÉ
.
f’ame
 = &(
lše
[39]);

829 
	g»suÉ
.
	gf’ameL’gth
 = 
p
 - 
»suÉ
.
f’ame
;

831 
	g»suÉ
.
	gty³
 = 
FTPFeEÁry
;

832 
	gpos
 = 
tokËn
[2];

833 
	g»suÉ
.
	gfeSize
 = 
SŒšg
(
tok’s
[2], 
pos
);

839 ià(
	gtok’s
[2] - 
	glše
 =ğ24 && (
tokËn
[2] == 5 ||oklen[2] == 10) &&

840 
tok’s
[3] - 
lše
 >= 39) {

841 
»suÉ
.
f’ame
 = &(
lše
[39]);

842 
	g»suÉ
.
	gf’ameL’gth
 = 
p
 - 
»suÉ
.
f’ame
;

845 ià((
	gtok’s
[2][1]) != 'D')

847 
»suÉ
.
ty³
 = 
FTPJunkEÁry
;

848 ià(
	g»suÉ
.
	gf’ameL’gth
 > 4)

850 
	gp
 = 
»suÉ
.
f’ame
;

851 
	gpos
 = 
»suÉ
.
f’ameL’gth
 - 4;…os > 0;…os--)

853 ià(
	gp
[0] =ğ' ' && 
p
[3] == ' ' &&…[2] == '>' &&

854 (
p
[1] == '=' ||…[1] == '-'))

856 
»suÉ
.
ty³
 = 
FTPLškEÁry
;

857 
	g»suÉ
.
	gf’ameL’gth
 = 
p
 - 
»suÉ
.
f’ame
;

858 
	g»suÉ
.
	glškÇme
 = 
p
 + 4;

859 
	g»suÉ
.
	glškÇmeL’gth
 = &(
lše
[
lš–’
])

860 - 
»suÉ
.
lškÇme
;

863 
	gp
++;

869 
	g»suÉ
.
	gmodif›dTime
.
	gtm_mÚ
 = 
©oi
(
tok’s
[0]+0);

870 ià(
	g»suÉ
.
	gmodif›dTime
.
	gtm_mÚ
 != 0)

872 
»suÉ
.
modif›dTime
.
tm_mÚ
--;

873 
	g»suÉ
.
	gmodif›dTime
.
	gtm_mday
 = 
©oi
(
tok’s
[0]+3);

874 
	g»suÉ
.
	gmodif›dTime
.
	gtm_y—r
 = 
©oi
(
tok’s
[0]+6);

878 ià(
	g»suÉ
.
	gmodif›dTime
.
	gtm_y—r
 < 80)

879 
	g»suÉ
.
	gmodif›dTime
.
	gtm_y—r
 += 2000;

880 ià(
	g»suÉ
.
	gmodif›dTime
.
	gtm_y—r
 < 100)

881 
	g»suÉ
.
	gmodif›dTime
.
	gtm_y—r
 += 1900;

884 
	g»suÉ
.
	gmodif›dTime
.
	gtm_hour
 = 
©oi
(
tok’s
[1]+0);

885 
	g»suÉ
.
	gmodif›dTime
.
	gtm_mš
 = 
©oi
(
tok’s
[1]+3);

886 ià((
	gtok’s
[1][5]è=ğ'P' && 
»suÉ
.
modif›dTime
.
tm_hour
 < 12)

887 
»suÉ
.
modif›dTime
.
tm_hour
 += 12;

896  
	g»suÉ
.
	gty³
;

903 #ià
defšed
(
SUPPORT_OS2
)

904 ià(!
	gl¡yË
 && (!
	g¡©e
.
	gli¡StyË
 || state.listStyle == 'O'))

927 
p
 = &(
lše
[
tokËn
[0]]);

929 ià(
	gnumtoks
 >ğ4 && 
tokËn
[0] <ğ18 && 
isASCIIDig™
(*
tok’s
[0]) &&

930 (
lš–’
 - 
tokËn
[0]) >= (53-18) &&

931 
p
[18-18] == ' ' &&…[34-18] == ' ' &&

932 
p
[37-18] == '-' &&…[40-18] == '-' &&…[43-18] == ' ' &&

933 
p
[45-18] == ' ' &&…[48-18] == ':' &&…[51-18] == ' ' &&

934 
isASCIIDig™
(
p
[35-18]) && isASCIIDigit(p[36-18]) &&

935 
isASCIIDig™
(
p
[38-18]) && isASCIIDigit(p[39-18]) &&

936 
isASCIIDig™
(
p
[41-18]) && isASCIIDigit(p[42-18]) &&

937 
isASCIIDig™
(
p
[46-18]) && isASCIIDigit(p[47-18]) &&

938 
isASCIIDig™
(
p
[49-18]) && isASCIIDigit(p[50-18])

941 
l¡yË
 = 'O';

942 ià(!
	g¡©e
.
	gli¡StyË
)

944 
	gpos
 = 1; 
	gl¡yË
 &&…o < 
	gtokËn
[0];…os++)

946 ià(!
isASCIIDig™
(
tok’s
[0][
pos
]))

947 
	gl¡yË
 = 0;

952 ià(
	gl¡yË
 == 'O')

954 
¡©e
.
·r£dOÃ
 = 
Œue
;

955 
	g¡©e
.
	gli¡StyË
 = 
l¡yË
;

957 
	gp
 = &(
lše
[
tokËn
[0]]);

959 
	g»suÉ
.
	gÿ£S’s™ive
 = 
Œue
;

960 
	g»suÉ
.
	gf’ame
 = &
p
[53-18];

961 
	g»suÉ
.
	gf’ameL’gth
 = (&(
lše
[
lš–’_§ns_w¥
]))

962 - (
»suÉ
.
f’ame
);

963 
	g»suÉ
.
	gty³
 = 
FTPFeEÁry
;

966 
	gpos
 = (18-18);…os < ((35-18)-4);…os++)

968 ià(
	gp
[
pos
+0] =ğ' ' && 
p
[pos+1] == 'D' &&

969 
p
[
pos
+2] == 'I' &&…[pos+3] == 'R')

971 
»suÉ
.
ty³
 = 
FTPDœeùÜyEÁry
;

976 ià(
	g»suÉ
.
	gty³
 !ğ
FTPDœeùÜyEÁry
)

978 
pos
 = 
tokËn
[0];

979 
	g»suÉ
.
	gfeSize
 = 
SŒšg
(
tok’s
[0], 
pos
);

982 
	g»suÉ
.
	gmodif›dTime
.
	gtm_mÚ
 = 
©oi
(&
p
[35-18]) - 1;

983 
	g»suÉ
.
	gmodif›dTime
.
	gtm_mday
 = 
©oi
(&
p
[38-18]);

984 
	g»suÉ
.
	gmodif›dTime
.
	gtm_y—r
 = 
©oi
(&
p
[41-18]);

985 ià(
	g»suÉ
.
	gmodif›dTime
.
	gtm_y—r
 < 80)

986 
	g»suÉ
.
	gmodif›dTime
.
	gtm_y—r
 += 100;

987 
	g»suÉ
.
	gmodif›dTime
.
	gtm_hour
 = 
©oi
(&
p
[46-18]);

988 
	g»suÉ
.
	gmodif›dTime
.
	gtm_mš
 = 
©oi
(&
p
[49-18]);

997  
	g»suÉ
.
	gty³
;

1005 #ià
defšed
(
SUPPORT_LSL
)

1006 ià(!
	gl¡yË
 && (!
	g¡©e
.
	gli¡StyË
 || state.listStyle == 'U'))

1033 
boŞ
 
isOldH–lsoá
 = 
çl£
;

1035 ià(
	gnumtoks
 >= 6)

1040 ià(
tokËn
[0] =ğ1 || (
tok’s
[0][1]) == '[')

1042 ià(*
tok’s
[0] == 'd' || *tokens[0] == '-')

1044 
pos
 = 
tokËn
[0]-1;

1045 
	gp
 = 
tok’s
[0] + 1;

1046 ià(
	gpos
 == 0)

1048 
p
 = 
tok’s
[1];

1049 
	gpos
 = 
tokËn
[1];

1051 ià((
	gpos
 =ğ9 || 
pos
 == 10) &&

1052 (*
p
 =ğ'[' &&…[
pos
-1] == ']') &&

1053 (
p
[1] == 'R' ||…[1] == '-') &&

1054 (
p
[2] == 'W' ||…[2] == '-') &&

1055 (
p
[3] == 'C' ||…[3] == '-') &&

1056 (
p
[4] == 'E' ||…[4] == '-'))

1059 
l¡yË
 = 'U';

1060 ià(
	gtokËn
[0] == 10)

1061 
isOldH–lsoá
 = 
Œue
;

1065 ià((
	gtokËn
[0] =ğ10 || 
tokËn
[0] == 11)

1066 && 
¡rchr
("-bcdÍsw?DFam", *
tok’s
[0]))

1068 
	gp
 = &(
tok’s
[0][1]);

1069 ià((
	gp
[0] =ğ'r' || 
p
[0] == '-') &&

1070 (
p
[1] == 'w' ||…[1] == '-') &&

1071 (
p
[3] == 'r' ||…[3] == '-') &&

1072 (
p
[4] == 'w' ||…[4] == '-') &&

1073 (
p
[6] == 'r' ||…[6] == '-') &&

1074 (
p
[7] == 'w' ||…[7] == '-'))

1077 
l¡yË
 = 'U';

1081 ià(
	gl¡yË
 == 'U')

1083 
l¡yË
 = 0;

1084 
	gpos
 = (
numtoks
-5); !
	gl¡yË
 &&…os > 1;…os--)

1090 ià(
isASCIIDig™
(*
tok’s
[
pos
])

1092 && 
	gtokËn
[
pos
+1] =ğ3 && 
isASCIIAÍha
(*
tok’s
[pos+1]) &&

1093 
isASCIIAÍha
(
tok’s
[
pos
+1][1]) && isASCIIAlpha(tokens[pos+1][2])

1095 && 
isASCIIDig™
(*
tok’s
[
pos
+2]) &&

1096 (
tokËn
[
pos
+2] == 1 ||

1097 (
tokËn
[
pos
+2] =ğ2 && 
isASCIIDig™
(
tok’s
[pos+2][1])))

1098 && 
tokËn
[
pos
+3] >ğ4 && 
isASCIIDig™
(*
tok’s
[pos+3])

1100 && (
tokËn
[
pos
+3] <= 5 || (

1101 (
tokËn
[
pos
+3] == 7 ||oklen[pos+3] == 8) &&

1102 (
tok’s
[
pos
+3][
tokËn
[pos+3]-3]) == ':'))

1103 && 
isASCIIDig™
(
tok’s
[
pos
+3][
tokËn
[pos+3]-2])

1104 && 
isASCIIDig™
(
tok’s
[
pos
+3][
tokËn
[pos+3]-1])

1107 ((
tokËn
[
pos
+3] == 4 ||oklen[pos+3] == 5) &&

1108 
isASCIIDig™
(
tok’s
[
pos
+3][1]) &&

1109 
isASCIIDig™
(
tok’s
[
pos
+3][2]) )

1111 || ((
tokËn
[
pos
+3] == 4 ||oklen[pos+3] == 7) &&

1112 (
tok’s
[
pos
+3][1]) == ':' &&

1113 
isASCIIDig™
(
tok’s
[
pos
+3][2]) && isASCIIDigit(tokens[pos+3][3]))

1115 || ((
tokËn
[
pos
+3] == 5 ||oklen[pos+3] == 8) &&

1116 
isASCIIDig™
(
tok’s
[
pos
+3][1]) && (tokens[pos+3][2]) == ':' &&

1117 
isASCIIDig™
(
tok’s
[
pos
+3][3]) && isASCIIDigit(tokens[pos+3][4]))

1121 
l¡yË
 = 'U';

1122 
	gtokm¬k”
 = 
pos
;

1125 
	gp
 = 
tok’s
[
tokm¬k”
];

1126 
	gi
 = 0; 
	gl¡yË
 && i < 
	gtokËn
[
tokm¬k”
]; ++i)

1128 ià(!
isASCIIDig™
(*
p
++))

1129 
	gl¡yË
 = 0;

1131 ià(
	gl¡yË
)

1133 
	gmÚth_num
 = 0;

1134 
	gp
 = 
tok’s
[
tokm¬k”
+1];

1135 
	gi
 = 0; i < (12*3); i+=3)

1137 ià(
p
[0] =ğ
mÚth_Çmes
[
i
+0] &&

1138 
p
[1] =ğ
mÚth_Çmes
[
i
+1] &&

1139 
p
[2] =ğ
mÚth_Çmes
[
i
+2])

1141 
	gmÚth_num
++;

1143 ià(
	gmÚth_num
 >= 12)

1144 
l¡yË
 = 0;

1150 ià(
	gl¡yË
 == 'U')

1152 
¡©e
.
·r£dOÃ
 = 
Œue
;

1153 
	g¡©e
.
	gli¡StyË
 = 
l¡yË
;

1155 
	g»suÉ
.
	gÿ£S’s™ive
 = 
çl£
;

1156 
	g»suÉ
.
	gty³
 = 
FTPJunkEÁry
;

1157 ià(*
	gtok’s
[0] =ğ'd' || *
tok’s
[0] == 'D')

1158 
»suÉ
.
ty³
 = 
FTPDœeùÜyEÁry
;

1159 ià(*
	gtok’s
[0] == 'l')

1160 
»suÉ
.
ty³
 = 
FTPLškEÁry
;

1161 ià(*
	gtok’s
[0] =ğ'-' || *
tok’s
[0] == 'F')

1162 
»suÉ
.
ty³
 = 
FTPFeEÁry
;

1164 ià(
	g»suÉ
.
	gty³
 !ğ
FTPDœeùÜyEÁry
)

1166 
pos
 = 
tokËn
[
tokm¬k”
];

1167 
	g»suÉ
.
	gfeSize
 = 
SŒšg
(
tok’s
[
tokm¬k”
], 
pos
);

1170 
	g»suÉ
.
	gmodif›dTime
.
	gtm_mÚ
 = 
mÚth_num
;

1171 
	g»suÉ
.
	gmodif›dTime
.
	gtm_mday
 = 
©oi
(
tok’s
[
tokm¬k”
+2]);

1172 ià(
	g»suÉ
.
	gmodif›dTime
.
	gtm_mday
 == 0)

1173 
»suÉ
.
modif›dTime
.
tm_mday
++;

1175 
	gp
 = 
tok’s
[
tokm¬k”
+3];

1176 
	gpos
 = ()
©oi
(
p
);

1177 ià(
	gp
[1] == ':')

1178 
p
--;

1179 ià(
	gp
[2] != ':')

1181 
»suÉ
.
modif›dTime
.
tm_y—r
 = 
pos
;

1185 
	g»suÉ
.
	gmodif›dTime
.
	gtm_hour
 = 
pos
;

1186 
	g»suÉ
.
	gmodif›dTime
.
	gtm_mš
 = 
©oi
(
p
+3);

1187 ià(
	gp
[5] == ':')

1188 
»suÉ
.
modif›dTime
.
tm_£c
 = 
©oi
(
p
+6);

1190 ià(!
	g¡©e
.
	gnow
)

1192 
time_t
 
	gnow
 = 
time
(
NULL
);

1193 
	g¡©e
.
	gnow
 = 
now
 * 1000000.0;

1196 
gmtime_r
(&
now
, &
¡©e
.
nowFTPTime
);

1197 
	g¡©e
.
	gnowFTPTime
.
	gtm_y—r
 += 1900;

1200 
	g»suÉ
.
	gmodif›dTime
.
	gtm_y—r
 = 
¡©e
.
nowFTPTime
.
tm_y—r
;

1201 iàĞ(Ğ
	g¡©e
.
	gnowFTPTime
.
	gtm_mÚ
 << 5è+ s‹.nowFTPTime.
	gtm_mday
) <

1202 ((
	g»suÉ
.
	gmodif›dTime
.
	gtm_mÚ
 << 5è+„esuÉ.modif›dTime.
	gtm_mday
) )

1203 
	g»suÉ
.
	gmodif›dTime
.
	gtm_y—r
--;

1209 ià(!
	gisOldH–lsoá
)

1210 
	g»suÉ
.
	gf’ame
 = 
tok’s
[
tokm¬k”
+3] + 
tokËn
[tokmarker+3] + 1;

1212 
	g»suÉ
.
	gf’ame
 = 
tok’s
[
tokm¬k”
+4];

1214 
	g»suÉ
.
	gf’ameL’gth
 = (&(
lše
[
lš–’
]))

1215 - (
»suÉ
.
f’ame
);

1217 ià(
	g»suÉ
.
	gty³
 =ğ
FTPLškEÁry
 && 
»suÉ
.
f’ameL’gth
 > 4)

1221 
feSize
 = 
»suÉ
.feSize.
toUIÁ
();

1223 ià(
	g»suÉ
.
	gf’ameL’gth
 > (
	gfeSize
 + 4) &&

1224 
¡ºcmp
(
»suÉ
.
f’ame
 +„esuÉ.
f’ameL’gth
 - 
feSize
 - 4, " -> ", 4) == 0)

1226 
»suÉ
.
lškÇme
 =„esuÉ.
f’ame
 + (»suÉ.
f’ameL’gth
 - 
feSize
);

1227 
	g»suÉ
.
	glškÇmeL’gth
 = (&(
lše
[
lš–’
])è- (
»suÉ
.
lškÇme
);

1228 
	g»suÉ
.
	gf’ameL’gth
 -ğ
feSize
 + 4;

1237 
	gp
 = 
»suÉ
.
f’ame
 + (»suÉ.
f’ameL’gth
 - 5);

1238 
	gpos
 = (
»suÉ
.
f’ameL’gth
 - 5);…os > 0;…os--)

1240 ià(
¡ºcmp
(
p
, " -> ", 4) == 0)

1242 
»suÉ
.
lškÇme
 = 
p
 + 4;

1243 
	g»suÉ
.
	glškÇmeL’gth
 = (&(
lše
[
lš–’
]))

1244 - (
»suÉ
.
lškÇme
);

1245 
	g»suÉ
.
	gf’ameL’gth
 = 
pos
;

1248 
	gp
--;

1253 #ià
defšed
(
SUPPORT_LSLF
)

1254 ià(
	g»suÉ
.
	gf’ameL’gth
 > 1)

1256 
	gp
 = 
»suÉ
.
f’ame
[»suÉ.
f’ameL’gth
-1];

1257 
	gpos
 = 
»suÉ
.
ty³
;

1258 ià(
	gpos
 == 'd') {

1259 ià(*
p
 =ğ'/'è
»suÉ
.
f’ameL’gth
--;

1260 } ià(
	gpos
 == 'l') {

1261 ià(*
p
 =ğ'@'è
»suÉ
.
f’ameL’gth
--;

1262 } ià(
	gpos
 == 'f') {

1263 ià(*
p
 =ğ'*'è
»suÉ
.
f’ameL’gth
--;

1264 } ià(*
	gp
 =ğ'=' || *
p
 == '%' || *p == '|') {

1265 
»suÉ
.
f’ameL’gth
--;

1277  
	g»suÉ
.
	gty³
;

1286 #ià
defšed
(
SUPPORT_W16
)

1287 ià(!
	gl¡yË
 && (!
	g¡©e
.
	gli¡StyË
 || state.listStyle == 'w'))

1312 ià(
numtoks
 >ğ4 && 
tokËn
[0] < 13 &&

1313 ((
tokËn
[1] =ğ5 && *
tok’s
[1] =ğ'<'è|| 
isASCIIDig™
(*tokens[1])) )

1315 ià(
numtoks
 == 4

1316 && (
tokËn
[2] == 8 ||oklen[2] == 9)

1317 && (((
tok’s
[2][2]) == '/' && (tokens[2][5]) == '/') ||

1318 ((
tok’s
[2][2]) == '-' && (tokens[2][5]) == '-'))

1319 && (
tokËn
[3] == 4 ||oklen[3] == 5)

1320 && (
tok’s
[3][
tokËn
[3]-3]) == ':'

1321 && 
isASCIIDig™
(
tok’s
[2][0]) && isASCIIDigit(tokens[2][1])

1322 && 
isASCIIDig™
(
tok’s
[2][3]) && isASCIIDigit(tokens[2][4])

1323 && 
isASCIIDig™
(
tok’s
[2][6]) && isASCIIDigit(tokens[2][7])

1324 && (
tokËn
[2] < 9 || 
isASCIIDig™
(
tok’s
[2][8]))

1325 && 
isASCIIDig™
(
tok’s
[3][
tokËn
[3]-1]) && isASCIIDigit(tokens[3][toklen[3]-2])

1326 && 
isASCIIDig™
(
tok’s
[3][
tokËn
[3]-4]) && isASCIIDigit(*tokens[3])

1329 
l¡yË
 = 'w';

1331 ià((
	gnumtoks
 =ğ6 || 
numtoks
 == 7)

1332 && 
tokËn
[2] == 3 &&oklen[3] == 2

1333 && 
tokËn
[4] == 4 &&oklen[5] == 5

1334 && (
tok’s
[5][2]) == ':'

1335 && 
isASCIIAÍha
(
tok’s
[2][0]) && isASCIIAlpha(tokens[2][1])

1336 && 
isASCIIAÍha
(
tok’s
[2][2])

1337 && 
isASCIIDig™
(
tok’s
[3][0]) && isASCIIDigit(tokens[3][1])

1338 && 
isASCIIDig™
(
tok’s
[4][0]) && isASCIIDigit(tokens[4][1])

1339 && 
isASCIIDig™
(
tok’s
[4][2]) && isASCIIDigit(tokens[4][3])

1340 && 
isASCIIDig™
(
tok’s
[5][0]) && isASCIIDigit(tokens[5][1])

1341 && 
isASCIIDig™
(
tok’s
[5][3]) && isASCIIDigit(tokens[5][4])

1345 
l¡yË
 = 'w';

1347 ià(
	gl¡yË
 && 
	g¡©e
.
	gli¡StyË
 !ğ
l¡yË
)

1349 
p
 = 
tok’s
[1];

1350 ià(
	gtokËn
[1] !ğ5 || 
p
[0] != '<' ||…[1] != 'D' ||

1351 
p
[2] != 'I' ||…[3] != 'R' ||…[4] != '>')

1353 
pos
 = 0; 
	gl¡yË
 && 
	gpos
 < 
	gtokËn
[1];…os++)

1355 ià(!
isASCIIDig™
(*
p
++))

1356 
	gl¡yË
 = 0;

1362 ià(
	gl¡yË
 == 'w')

1364 
¡©e
.
·r£dOÃ
 = 
Œue
;

1365 
	g¡©e
.
	gli¡StyË
 = 
l¡yË
;

1367 
	g»suÉ
.
	gÿ£S’s™ive
 = 
Œue
;

1368 
	g»suÉ
.
	gf’ame
 = 
tok’s
[0];

1369 
	g»suÉ
.
	gf’ameL’gth
 = 
tokËn
[0];

1370 
	g»suÉ
.
	gty³
 = 
FTPDœeùÜyEÁry
;

1372 
	gp
 = 
tok’s
[1];

1373 ià(
isASCIIDig™
(*
p
))

1375 
	g»suÉ
.
	gty³
 = 
FTPFeEÁry
;

1376 
	gpos
 = 
tokËn
[1];

1377 
	g»suÉ
.
	gfeSize
 = 
SŒšg
(
p
, 
pos
);

1380 
	gp
 = 
tok’s
[2];

1381 ià(
	gtokËn
[2] == 3)

1383 
tbuf
[0] = 
toASCIIUµ”
(
p
[0]);

1384 
	gtbuf
[1] = 
toASCIILow”
(
p
[1]);

1385 
	gtbuf
[2] = 
toASCIILow”
(
p
[2]);

1386 
	gpos
 = 0;…os < (12*3);…os+=3)

1388 ià(
tbuf
[0] =ğ
mÚth_Çmes
[
pos
+0] &&

1389 
tbuf
[1] =ğ
mÚth_Çmes
[
pos
+1] &&

1390 
tbuf
[2] =ğ
mÚth_Çmes
[
pos
+2])

1392 
»suÉ
.
modif›dTime
.
tm_mÚ
 = 
pos
/3;

1393 
	g»suÉ
.
	gmodif›dTime
.
	gtm_mday
 = 
©oi
(
tok’s
[3]);

1394 
	g»suÉ
.
	gmodif›dTime
.
	gtm_y—r
 = 
©oi
(
tok’s
[4]) - 1900;

1398 
	gpos
 = 5;

1402 
	g»suÉ
.
	gmodif›dTime
.
	gtm_mÚ
 = 
©oi
(
p
+0)-1;

1403 
	g»suÉ
.
	gmodif›dTime
.
	gtm_mday
 = 
©oi
(
p
+3);

1404 
	g»suÉ
.
	gmodif›dTime
.
	gtm_y—r
 = 
©oi
(
p
+6);

1405 ià(
	g»suÉ
.
	gmodif›dTime
.
	gtm_y—r
 < 80)

1406 
	g»suÉ
.
	gmodif›dTime
.
	gtm_y—r
 += 100;

1408 
	gpos
 = 3;

1411 
	g»suÉ
.
	gmodif›dTime
.
	gtm_hour
 = 
©oi
(
tok’s
[
pos
]);

1412 
	g»suÉ
.
	gmodif›dTime
.
	gtm_mš
 = 
©oi
(&(
tok’s
[
pos
][
tokËn
[pos]-2]));

1421  
	g»suÉ
.
	gty³
;

1429 #ià
defšed
(
SUPPORT_DLS
)

1430 ià(!
	gl¡yË
 &&

1431 (
	g¡©e
.
	gli¡StyË
 =ğ'D' || (!
¡©e
.
li¡StyË
 && s‹.
numLšes
 == 1)))

1468 ià(!
¡©e
.
li¡StyË
 && 
lše
[
lš–’
-1] == ':' &&

1469 
lš–’
 >ğ2 && 
tokËn
[
numtoks
-1] != 1)

1475 
pos
 = 0;

1476 
	gp
 = 
lše
;

1477 
	gpos
 < (
	glš–’
-1))

1480 ià(*
	gp
 =ğ'<' || *
p
 == '|' || *p == '>' ||

1481 *
p
 == '?' || *p == '*' || *p == '\\')

1483 ià(*
	gp
 =ğ'/' && 
pos
 < (
lš–’
-2è&& 
p
[1] == '/')

1485 
	gpos
++;

1486 
	gp
++;

1488 ià(
	gpos
 =ğ(
lš–’
-1))

1490 
¡©e
.
li¡StyË
 = 'D';

1491  
	gFTPJunkEÁry
;

1495 ià(!
	gl¡yË
 && 
	gnumtoks
 >= 2)

1497 
pos
 = 22;

1498 ià(
	g¡©e
.
	gli¡StyË
 && 
	gÿ¼y_buf_Ën
)

1499 
	gpos
 = 
tokËn
[1]-1;

1501 ià(
	glš–’
 > 
	gpos
)

1503 
	gp
 = &
lše
[
pos
];

1504 ià((*
	gp
 =ğ'-' || *
p
 =ğ'=' || 
isASCIIDig™
(*p)) &&

1505 ((
lš–’
 =ğ(
pos
+1)) ||

1506 (
lš–’
 >ğ(
pos
+3è&& 
p
[1] == ' ' &&…[2] == ' ')) )

1508 
tokm¬k”
 = 1;

1509 ià(!
	gÿ¼y_buf_Ën
)

1511 
	gpos
 = 1;

1512 
	gpos
 < 
	gnumtoks
 && (
	gtok’s
[
pos
]+
	gtokËn
[pos]è< (&
	glše
[23]))

1513 
	gpos
++;

1514 
	gtokm¬k”
 = 0;

1515 ià((
	gtok’s
[
pos
]+
	gtokËn
[pos]è=ğ(&
lše
[23]))

1516 
tokm¬k”
 = 
pos
;

1518 ià(
	gtokm¬k”
)

1520 
	gl¡yË
 = 'D';

1521 ià(*
	gtok’s
[
tokm¬k”
] =ğ'-' || *
tok’s
[tokmarker] == '=')

1523 ià(
tokËn
[
tokm¬k”
] != 1 ||

1524 (
tok’s
[
tokm¬k”
-1][
tokËn
[tokmarker-1]-1]) != '/')

1525 
l¡yË
 = 0;

1529 
	gpos
 = 0; 
	gl¡yË
 &&…o < 
	gtokËn
[
tokm¬k”
];…os++)

1531 ià(!
isASCIIDig™
(
tok’s
[
tokm¬k”
][
pos
]))

1532 
	gl¡yË
 = 0;

1535 ià(
	gl¡yË
 && !
	g¡©e
.
	gli¡StyË
)

1538 
	gp
 = 
tok’s
[0]; 
	gl¡yË
 &&

1539 
	gp
 < &(
	gtok’s
[
tokm¬k”
-1][
tokËn
[tokmarker-1]]);…++)

1541 ià(*
	gp
 =ğ'<' || *
p
 == '|' || *p == '>' ||

1542 *
p
 == '?' || *p == '*' || *p == '/' || *p == '\\')

1543 
l¡yË
 = 0;

1552 ià(!
	gl¡yË
 && 
	g¡©e
.
	gli¡StyË
 =ğ'D' && !
ÿ¼y_buf_Ën
)

1560 
pos
 = 
lš–’
;

1561 ià(
	gpos
 > ((
	g¡©e
.
	gÿ¼yBufãr
)-1))

1562 
	gpos
 = (
¡©e
.
ÿ¼yBufãr
)-1;

1563 
memıy
Ğ
¡©e
.
ÿ¼yBufãr
, 
lše
, 
pos
 );

1564 
	g¡©e
.
	gÿ¼yBufãrL’gth
 = 
pos
;

1565  
	gFTPJunkEÁry
;

1568 ià(
	gl¡yË
 == 'D')

1570 
¡©e
.
·r£dOÃ
 = 
Œue
;

1571 
	g¡©e
.
	gli¡StyË
 = 
l¡yË
;

1573 
	gp
 = &(
tok’s
[
tokm¬k”
-1][
tokËn
[tokmarker-1]]);

1574 
	g»suÉ
.
	gf’ame
 = 
tok’s
[0];

1575 
	g»suÉ
.
	gf’ameL’gth
 = 
p
 - 
tok’s
[0];

1576 
	g»suÉ
.
	gty³
 = 
FTPFeEÁry
;

1578 ià(
	g»suÉ
.
	gf’ame
[
»suÉ
.
f’ameL’gth
-1] == '/')

1580 ià(
»suÉ
.
lškÇmeL’gth
 == 1)

1581 
»suÉ
.
ty³
 = 
FTPJunkEÁry
;

1584 
	g»suÉ
.
	gf’ameL’gth
--;

1585 
	g»suÉ
.
	gty³
 = 
FTPDœeùÜyEÁry
;

1588 ià(
isASCIIDig™
(*
tok’s
[
tokm¬k”
]))

1590 
	gpos
 = 
tokËn
[
tokm¬k”
];

1591 
	g»suÉ
.
	gfeSize
 = 
SŒšg
(
tok’s
[
tokm¬k”
], 
pos
);

1594 ià((
	gtokm¬k”
+3è< 
	gnumtoks
 &&

1595 (&(
	gtok’s
[
numtoks
-1][
tokËn
[numtoks-1]]) -

1596 
	gtok’s
[
tokm¬k”
+1]) >= (1+1+3+1+4) )

1598 
pos
 = (
tokm¬k”
+3);

1599 
	gp
 = 
tok’s
[
pos
];

1600 
	gpos
 = 
tokËn
[
pos
];

1602 ià((
	gpos
 =ğ4 || 
pos
 == 5)

1603 && 
isASCIIDig™
(*
p
è&& isASCIIDig™Õ[
pos
-1]) && isASCIIDigit(p[pos-2])

1604 && ((
pos
 =ğ5 && 
p
[2] == ':') ||

1605 (
pos
 =ğ4 && (
isASCIIDig™
(
p
[1]) ||…[1] == ':')))

1608 
mÚth_num
 = 
tokm¬k”
+1;

1609 
	gpos
 = 
tokm¬k”
+2;

1610 ià(
isASCIIDig™
(*
tok’s
[
mÚth_num
]))

1612 
	gmÚth_num
++;

1613 
	gpos
--;

1615 
	gp
 = 
tok’s
[
mÚth_num
];

1616 ià(
isASCIIDig™
(*
tok’s
[
pos
])

1617 && (
	gtokËn
[
pos
] == 1 ||

1618 (
tokËn
[
pos
] =ğ2 && 
isASCIIDig™
(
tok’s
[pos][1])))

1619 && 
tokËn
[
mÚth_num
] == 3

1620 && 
isASCIIAÍha
(*
p
) && isASCIIAlpha(p[1]) && isASCIIAlpha(p[2]) )

1622 
pos
 = 
©oi
(
tok’s
[pos]);

1623 ià(
	gpos
 > 0 &&…os <= 31)

1625 
»suÉ
.
modif›dTime
.
tm_mday
 = 
pos
;

1626 
	gmÚth_num
 = 1;

1627 
	gpos
 = 0;…os < (12*3);…os+=3)

1629 ià(
p
[0] =ğ
mÚth_Çmes
[
pos
+0] &&

1630 
p
[1] =ğ
mÚth_Çmes
[
pos
+1] &&

1631 
p
[2] =ğ
mÚth_Çmes
[
pos
+2])

1633 
	gmÚth_num
++;

1635 ià(
	gmÚth_num
 > 12)

1636 
	g»suÉ
.
	gmodif›dTime
.
	gtm_mday
 = 0;

1638 
	g»suÉ
.
	gmodif›dTime
.
	gtm_mÚ
 = 
mÚth_num
 - 1;

1641 ià(
	g»suÉ
.
	gmodif›dTime
.
	gtm_mday
)

1643 
	gtokm¬k”
 += 3;

1644 
	gp
 = 
tok’s
[
tokm¬k”
];

1646 
	gpos
 = 
©oi
(
p
);

1647 ià(
	gpos
 > 24)

1648 
	g»suÉ
.
	gmodif›dTime
.
	gtm_y—r
 = 
pos
-1900;

1651 ià(
	gp
[1] == ':')

1652 
p
--;

1653 
	g»suÉ
.
	gmodif›dTime
.
	gtm_hour
 = 
pos
;

1654 
	g»suÉ
.
	gmodif›dTime
.
	gtm_mš
 = 
©oi
(
p
+3);

1655 ià(!
	g¡©e
.
	gnow
)

1657 
time_t
 
	gnow
 = 
time
(
NULL
);

1658 
	g¡©e
.
	gnow
 = 
now
 * 1000000.0;

1661 
gmtime_r
(&
now
, &
¡©e
.
nowFTPTime
);

1662 
	g¡©e
.
	gnowFTPTime
.
	gtm_y—r
 += 1900;

1664 
	g»suÉ
.
	gmodif›dTime
.
	gtm_y—r
 = 
¡©e
.
nowFTPTime
.
tm_y—r
;

1665 iàĞ(Ğ
	g¡©e
.
	gnowFTPTime
.
	gtm_mÚ
 << 4è+ s‹.nowFTPTime.
	gtm_mday
) <

1666 ((
	g»suÉ
.
	gmodif›dTime
.
	gtm_mÚ
 << 4è+„esuÉ.modif›dTime.
	gtm_mday
) )

1667 
	g»suÉ
.
	gmodif›dTime
.
	gtm_y—r
--;

1673 ià(
	gnumtoks
 > (
	gtokm¬k”
+2))

1675 
	gpos
 = 
tokm¬k”
+1;

1676 
	gp
 = 
tok’s
[
pos
];

1677 ià(
	gtokËn
[
pos
] =ğ2 && *
p
 == '-' &&…[1] == '>')

1679 
p
 = &(
tok’s
[
numtoks
-1][
tokËn
[numtoks-1]]);

1680 
	g»suÉ
.
	gty³
 = 
FTPLškEÁry
;

1681 
	g»suÉ
.
	glškÇme
 = 
tok’s
[
pos
+1];

1682 
	g»suÉ
.
	glškÇmeL’gth
 = 
p
 - 
»suÉ
.
lškÇme
;

1683 ià(
	g»suÉ
.
	glškÇmeL’gth
 > 1 &&

1684 
	g»suÉ
.
	glškÇme
[
»suÉ
.
lškÇmeL’gth
-1] == '/')

1685 
»suÉ
.
lškÇmeL’gth
--;

1696  
	g»suÉ
.
	gty³
;

1706  
P¬sšgFaed
(
¡©e
);

	@FTPDirectoryParser.h

71 #iâdeà
FTPDœeùÜyP¬£r_h


72 
	#FTPDœeùÜyP¬£r_h


	)

74 
	~"PÏtfÜmSŒšg.h
"

76 
	~<time.h
>

78 
	#SUPPORT_LSL


	)

79 
	#SUPPORT_DLS


	)

80 
	#SUPPORT_EPLF


	)

81 
	#SUPPORT_DOS


	)

82 
	#SUPPORT_VMS


	)

83 
	#SUPPORT_CMS


	)

84 
	#SUPPORT_OS2


	)

85 
	#SUPPORT_W16


	)

87 
Çme¥aû
 
	gWebCÜe
 {

89 
tm
 
	tFTPTime
;

91 
	sLi¡S‹
 {

92 
Li¡S‹
()

93 : 
now
(0)

94 , 
li¡StyË
(0)

95 , 
·r£dOÃ
(
çl£
)

96 , 
ÿ¼yBufãrL’gth
(0)

97 , 
numLšes
(0)

99 
mem£t
(&
nowFTPTime
, 0, (
FTPTime
));

102 
	gnow
;

103 
FTPTime
 
	gnowFTPTime
;

104 
	gli¡StyË
;

105 
boŞ
 
	g·r£dOÃ
;

106 
	gÿ¼yBufãr
[84];

107 
	gÿ¼yBufãrL’gth
;

108 
št64_t
 
	gnumLšes
;

111 
	eFTPEÁryTy³
 {

112 
	gFTPDœeùÜyEÁry
,

113 
	gFTPFeEÁry
,

114 
	gFTPLškEÁry
,

115 
	gFTPMiscEÁry
,

116 
	gFTPJunkEÁry


119 
	sLi¡ResuÉ


121 
Li¡ResuÉ
()

123 
ş—r
();

126 
ş—r
()

128 
	gv®id
 = 
çl£
;

129 
	gty³
 = 
FTPJunkEÁry
;

130 
	gf’ame
 = 0;

131 
	gf’ameL’gth
 = 0;

132 
	glškÇme
 = 0;

133 
	glškÇmeL’gth
 = 0;

134 
	gfeSize
.
Œunÿ‹
(0);

135 
	gÿ£S’s™ive
 = 
çl£
;

136 
mem£t
(&
modif›dTime
, 0, (
FTPTime
));

139 
boŞ
 
	gv®id
;

140 
FTPEÁryTy³
 
	gty³
;

142 cÚ¡ * 
	gf’ame
;

143 
ušt32_t
 
	gf’ameL’gth
;

145 cÚ¡ * 
	glškÇme
;

146 
ušt32_t
 
	glškÇmeL’gth
;

148 
SŒšg
 
	gfeSize
;

149 
FTPTime
 
	gmodif›dTime
;

150 
boŞ
 
	gÿ£S’s™ive
;

153 
FTPEÁryTy³
 
·r£OÃFTPLše
(cÚ¡ * 
šputLše
, 
Li¡S‹
&, 
Li¡ResuÉ
&);

	@FormState.cpp

29 
	~"cÚfig.h
"

30 
	~"FÜmS‹.h
"

32 
	~"F¿me.h
"

33 
	~"HTMLFÜmEËm’t.h
"

35 
Çme¥aû
 
	gWebCÜe
 {

37 
šlše
 
	gFÜmS‹
::
FÜmS‹
(
PassRefPŒ
<
HTMLFÜmEËm’t
> 
fÜm
, 
SŒšgPaœVeùÜ
& 
‹xtF›ldV®uesToAdİt
, PassRefPŒ<
F¿me
> 
sourûF¿me
, 
FÜmSubmissiÚTrigg”
 
fÜmSubmissiÚTrigg”
)

38 : 
m_fÜm
(
fÜm
)

39 , 
m_sourûF¿me
(
sourûF¿me
)

40 , 
m_fÜmSubmissiÚTrigg”
(
fÜmSubmissiÚTrigg”
)

42 
	gm_‹xtF›ldV®ues
.
sw­
(
‹xtF›ldV®uesToAdİt
);

45 
	gPassRefPŒ
<
	gFÜmS‹
> FÜmS‹::
ü—‹
(
PassRefPŒ
<
HTMLFÜmEËm’t
> 
fÜm
, 
SŒšgPaœVeùÜ
& 
‹xtF›ldV®uesToAdİt
, PassRefPŒ<
F¿me
> 
sourûF¿me
, 
FÜmSubmissiÚTrigg”
 
fÜmSubmissiÚTrigg”
)

47  
adİtRef
(
Ãw
 
FÜmS‹
(
fÜm
, 
‹xtF›ldV®uesToAdİt
, 
sourûF¿me
, 
fÜmSubmissiÚTrigg”
));

	@FormState.h

29 #iâdeà
FÜmS‹_h


30 
	#FÜmS‹_h


	)

32 
	~"PÏtfÜmSŒšg.h
"

34 
Çme¥aû
 
	gWebCÜe
 {

36 
şass
 
	gF¿me
;

37 
şass
 
	gHTMLFÜmEËm’t
;

39 
	eFÜmSubmissiÚTrigg”
 {

40 
	gSubm™‹dByJavaSüt
,

41 
	gNÙSubm™‹dByJavaSüt


44 
	gVeùÜ
<
	t¡d
::
	t·œ
<
	tSŒšg
, SŒšg> > 
	tSŒšgPaœVeùÜ
;

46 
şass
 
	gFÜmS‹
 : 
public
 
RefCouÁed
<
FÜmS‹
> {

47 
public
:

48 
PassRefPŒ
<
FÜmS‹
> 
ü—‹
(PassRefPŒ<
HTMLFÜmEËm’t
>, 
SŒšgPaœVeùÜ
& 
‹xtF›ldV®uesToAdİt
, PassRefPŒ<
F¿me
>, 
FÜmSubmissiÚTrigg”
);

50 
HTMLFÜmEËm’t
* 
fÜm
(ècÚ¡ {  
	gm_fÜm
.
g‘
(); }

51 cÚ¡ 
	gSŒšgPaœVeùÜ
& 
‹xtF›ldV®ues
(ècÚ¡ {  
	gm_‹xtF›ldV®ues
; }

52 
F¿me
* 
sourûF¿me
(ècÚ¡ {  
	gm_sourûF¿me
.
g‘
(); }

53 
FÜmSubmissiÚTrigg”
 
fÜmSubmissiÚTrigg”
(ècÚ¡ {  
	gm_fÜmSubmissiÚTrigg”
; }

55 
	g´iv©e
:

56 
FÜmS‹
(
PassRefPŒ
<
HTMLFÜmEËm’t
>, 
SŒšgPaœVeùÜ
& 
‹xtF›ldV®uesToAdİt
, PassRefPŒ<
F¿me
>, 
FÜmSubmissiÚTrigg”
);

58 
	gRefPŒ
<
	gHTMLFÜmEËm’t
> 
	gm_fÜm
;

59 
SŒšgPaœVeùÜ
 
	gm_‹xtF›ldV®ues
;

60 
	gRefPŒ
<
	gF¿me
> 
	gm_sourûF¿me
;

61 
FÜmSubmissiÚTrigg”
 
	gm_fÜmSubmissiÚTrigg”
;

	@FrameLoader.cpp

33 
	~"cÚfig.h
"

34 
	~"F¿meLßd”.h
"

36 
	~"AµliÿtiÚCacheHo¡.h
"

37 
	~"Archive.h
"

38 
	~"ArchiveFaùÜy.h
"

39 
	~"BackFÜw¬dLi¡.h
"

40 
	~"Cache.h
"

41 
	~"CachedPage.h
"

42 
	~"Chrome.h
"

43 
	~"DOMIm¶em’tiÚ.h
"

44 
	~"DOMWšdow.h
"

45 
	~"DocLßd”.h
"

46 
	~"Docum’t.h
"

47 
	~"Docum’tLßd”.h
"

48 
	~"Ed™Ü.h
"

49 
	~"Ed™ÜCl›Á.h
"

50 
	~"EËm’t.h
"

51 
	~"Ev’t.h
"

52 
	~"Ev’tNames.h
"

53 
	~"FlßtReù.h
"

54 
	~"FÜmS‹.h
"

55 
	~"F¿me.h
"

56 
	~"F¿meLßdReque¡.h
"

57 
	~"F¿meLßd”Cl›Á.h
"

58 
	~"F¿meT»e.h
"

59 
	~"F¿meV›w.h
"

60 
	~"HTMLAnchÜEËm’t.h
"

61 
	~"HTMLAµËtEËm’t.h
"

62 
	~"HTMLFÜmEËm’t.h
"

63 
	~"HTMLF¿meEËm’t.h
"

64 #ià
ENABLE
(
PLUGIN_PROXY_FOR_VIDEO
)

65 
	~"HTMLMedŸEËm’t.h
"

67 
	~"HTMLNames.h
"

68 
	~"HTMLObjeùEËm’t.h
"

69 
	~"HTTPP¬£rs.h
"

70 
	~"Hi¡ÜyI‹m.h
"

71 
	~"IcÚD©aba£.h
"

72 
	~"IcÚLßd”.h
"

73 
	~"In¥eùÜCÚŒŞËr.h
"

74 
	~"Loggšg.h
"

75 
	~"MIMETy³Regi¡ry.h
"

76 
	~"MašResourûLßd”.h
"

77 
	~"Page.h
"

78 
	~"PageCache.h
"

79 
	~"PageGroup.h
"

80 
	~"PageT¿ns™iÚEv’t.h
"

81 
	~"PÏûhŞd”Docum’t.h
"

82 
	~"PlugšD©a.h
"

83 
	~"PlugšD©aba£.h
"

84 
	~"PlugšDocum’t.h
"

85 
	~"Prog»ssT¿ck”.h
"

86 
	~"R’d”EmbeddedObjeù.h
"

87 #ià
ENABLE
(
PLUGIN_PROXY_FOR_VIDEO
)

88 
	~"R’d”Video.h
"

90 
	~"R’d”V›w.h
"

91 
	~"ResourûHªdË.h
"

92 
	~"ResourûReque¡.h
"

93 
	~"SütCÚŒŞËr.h
"

94 
	~"SütSourûCode.h
"

95 
	~"SütSŒšg.h
"

96 
	~"SütV®ue.h
"

97 
	~"Secur™yOrigš.h
"

98 
	~"Segm’‹dSŒšg.h
"

99 
	~"S‘tšgs.h
"

101 #ià
ENABLE
(
SHARED_WORKERS
)

102 
	~"Sh¬edWÜk”R•os™Üy.h
"

105 
	~"TextResourûDecod”.h
"

106 
	~"WšdowF—tu»s.h
"

107 
	~"XMLH‰pReque¡.h
"

108 
	~"XMLTok’iz”.h
"

109 
	~"XSSAud™Ü.h
"

110 
	~<wtf/‹xt/CSŒšg.h
>

111 
	~<wtf/Cu¼’tTime.h
>

112 
	~<wtf/StdLibExŒas.h
>

115 #ià
ENABLE
(
SVG
)

116 
	~"SVGDocum’t.h
"

117 
	~"SVGLoÿbË.h
"

118 
	~"SVGNames.h
"

119 
	~"SVGP»£rveA¥eùR©io.h
"

120 
	~"SVGSVGEËm’t.h
"

121 
	~"SVGV›wEËm’t.h
"

122 
	~"SVGV›wS³c.h
"

125 
Çme¥aû
 
	gWebCÜe
 {

127 #ià
ENABLE
(
SVG
)

128 
usšg
 
Çme¥aû
 
	gSVGNames
;

130 
usšg
 
Çme¥aû
 
	gHTMLNames
;

132 #ià
ENABLE
(
XHTMLMP
)

133 cÚ¡ 
	gdeçuÉAcû±H—d”
[] = "application/xml,application/vnd.wap.xhtml+xml,application/xhtml+xml;profile='http://www.wapforum.org/xhtml',text/html;q=0.9,text/plain;q=0.8,image/png,*/*;q=0.5";

135 cÚ¡ 
	gdeçuÉAcû±H—d”
[] = "application/xml,application/xhtml+xml,text/html;q=0.9,text/plain;q=0.8,image/png,*/*;q=0.5";

137 
	g¡ÜedTimeOfLa¡Com¶‘edLßd
;

139 
boŞ
 
isBackFÜw¬dLßdTy³
(
F¿meLßdTy³
 
ty³
)

141 
	gty³
) {

142 
	gF¿meLßdTy³Snd¬d
:

143 
F¿meLßdTy³R–ßd
:

144 
F¿meLßdTy³R–ßdFromOrigš
:

145 
F¿meLßdTy³Same
:

146 
F¿meLßdTy³RedœeùW™hLockedBackFÜw¬dLi¡
:

147 
F¿meLßdTy³R•Ïû
:

148  
çl£
;

149 
	gF¿meLßdTy³Back
:

150 
F¿meLßdTy³BackWMLDeckNÙAcûssibË
:

151 
F¿meLßdTy³FÜw¬d
:

152 
F¿meLßdTy³IndexedBackFÜw¬d
:

153  
Œue
;

155 
ASSERT_NOT_REACHED
();

156  
	gçl£
;

159 
numReque¡s
(
Docum’t
* 
docum’t
)

161 ià(!
	gdocum’t
)

164  
	gdocum’t
->
docLßd”
()->
»que¡CouÁ
();

167 
šlše
 
boŞ
 
ÿnReãrToP¬’tF¿meEncodšg
(cÚ¡ 
F¿me
* 
äame
, cÚ¡ F¿me* 
·»ÁF¿me
)

169  
	g·»ÁF¿me
 &&…¬’tF¿me->
docum’t
()->
£cur™yOrigš
()->
ÿnAcûss
(
äame
->document()->securityOrigin());

172 
	gF¿meLßd”
::
F¿meLßd”
(
F¿me
* 
äame
, 
F¿meLßd”Cl›Á
* 
ş›Á
)

173 : 
m_äame
(
äame
)

174 , 
m_ş›Á
(
ş›Á
)

175 , 
m_pŞicyCheck”
(
äame
)

176 , 
m_hi¡Üy
(
äame
)

177 , 
m_nÙiãr
(
äame
)

178 , 
m_¡©e
(
F¿meS‹Comm™‹dPage
)

179 , 
m_lßdTy³
(
F¿meLßdTy³Snd¬d
)

180 , 
m_d–eg©eIsHªdlšgProvisiÚ®LßdE¼Ü
(
çl£
)

181 , 
m_fœ¡LayoutDÚe
(
çl£
)

182 , 
m_quickRedœeùComšg
(
çl£
)

183 , 
m_£ÁRedœeùNÙifiÿtiÚ
(
çl£
)

184 , 
m_šStİAÎLßd”s
(
çl£
)

185 , 
m_isExecutšgJavaSütFÜmAùiÚ
(
çl£
)

186 , 
m_didC®lIm¶ic™Clo£
(
çl£
)

187 , 
m_wasUÆßdEv’tEm™‹d
(
çl£
)

188 , 
m_uÆßdEv’tBešgDi¥©ched
(
çl£
)

189 , 
m_isCom¶‘e
(
çl£
)

190 , 
m_isLßdšgMašResourû
(
çl£
)

191 , 
m_ÃedsCË¬
(
çl£
)

192 , 
m_»ûivedD©a
(
çl£
)

193 , 
m_’codšgWasCho£nByU£r
(
çl£
)

194 , 
m_cÚšsPlugIns
(
çl£
)

195 , 
m_checkTim”
(
this
, &
F¿meLßd”
::
checkTim”Fœed
)

196 , 
m_shouldC®lCheckCom¶‘ed
(
çl£
)

197 , 
m_shouldC®lCheckLßdCom¶‘e
(
çl£
)

198 , 
m_İ’”
(0)

199 , 
m_ü—tšgIn™ŸlEm±yDocum’t
(
çl£
)

200 , 
m_isDi¥ÏyšgIn™ŸlEm±yDocum’t
(
çl£
)

201 , 
m_comm™‹dFœ¡R—lDocum’tLßd
(
çl£
)

202 , 
m_didP”fÜmFœ¡Navig©iÚ
(
çl£
)

203 , 
m_lßdšgFromCachedPage
(
çl£
)

204 , 
m_suµ»ssO³ÃrInNewF¿me
(
çl£
)

205 , 
m_§ndboxFÏgs
(
SªdboxAÎ
)

206 , 
m_fÜûdSªdboxFÏgs
(
SªdboxNÚe
)

207 #iâdeà
NDEBUG


208 , 
m_didDi¥©chDidComm™Lßd
(
çl£
)

213 
	gF¿meLßd”
::~
F¿meLßd”
()

215 
£tO³Ãr
(0);

217 
	gHashS‘
<
	gF¿me
*>::
™”©Ü
 
’d
 = 
m_İ’edF¿mes
.end();

218 
	gHashS‘
<
	gF¿me
*>::
™”©Ü
 
™
 = 
m_İ’edF¿mes
.
begš
(); 
	g™
 !ğ
’d
; ++it)

219 (*
	g™
)->
lßd”
()->
	gm_İ’”
 = 0;

221 
	gm_ş›Á
->
äameLßd”De¡royed
();

224 
	gF¿meLßd”
::
š™
()

227 
m_isDi¥ÏyšgIn™ŸlEm±yDocum’t
 = 
çl£
;

228 
	gm_ü—tšgIn™ŸlEm±yDocum’t
 = 
Œue
;

229 
£tPŞicyDocum’tLßd”
(
m_ş›Á
->
ü—‹Docum’tLßd”
(
ResourûReque¡
(
KURL
(
P¬£dURLSŒšg
, "")), 
Sub¡™u‹D©a
()).
g‘
());

230 
£tProvisiÚ®Docum’tLßd”
(
m_pŞicyDocum’tLßd”
.
g‘
());

231 
£tS‹
(
F¿meS‹ProvisiÚ®
);

232 
	gm_´ovisiÚ®Docum’tLßd”
->
£tRe¥Ú£
(
ResourûRe¥Ú£
(
KURL
(), "‹xt/html", 0, 
SŒšg
(), String()));

233 
	gm_´ovisiÚ®Docum’tLßd”
->
fšishedLßdšg
();

234 
begš
(
KURL
(), 
çl£
);

235 
’d
();

236 
	gm_äame
->
docum’t
()->
ÿnûlP¬sšg
();

237 
	gm_ü—tšgIn™ŸlEm±yDocum’t
 = 
çl£
;

238 
	gm_didC®lIm¶ic™Clo£
 = 
Œue
;

241 
upd©eSªdboxFÏgs
();

244 
	gF¿meLßd”
::
£tDeãrsLßdšg
(
boŞ
 
deãrs
)

246 ià(
m_docum’tLßd”
)

247 
m_docum’tLßd”
->
£tDeãrsLßdšg
(
deãrs
);

248 ià(
	gm_´ovisiÚ®Docum’tLßd”
)

249 
	gm_´ovisiÚ®Docum’tLßd”
->
£tDeãrsLßdšg
(
deãrs
);

250 ià(
	gm_pŞicyDocum’tLßd”
)

251 
	gm_pŞicyDocum’tLßd”
->
£tDeãrsLßdšg
(
deãrs
);

253 ià(!
	gdeãrs
) {

254 
	gm_äame
->
»dœeùScheduËr
()->
¡¬tTim”
();

255 
¡¬tCheckCom¶‘eTim”
();

259 
F¿me
* 
	gF¿meLßd”
::
ü—‹Wšdow
(
F¿meLßd”
* 
äameLßd”FÜF¿meLookup
, cÚ¡ 
F¿meLßdReque¡
& 
»que¡
, cÚ¡ 
WšdowF—tu»s
& 
ã©u»s
, 
boŞ
& 
ü—‹d
)

261 
ASSERT
(!
ã©u»s
.
dŸlog
 || 
»que¡
.
äameName
().
isEm±y
());

263 ià(!
	g»que¡
.
äameName
().
isEm±y
() &&„equest.frameName() != "_blank") {

264 
F¿me
* 
äame
 = 
äameLßd”FÜF¿meLookup
->äame()->
Œ“
()->
fšd
(
»que¡
.
äameName
());

265 ià(
	gäame
 && 
shouldAÎowNavig©iÚ
(
äame
)) {

266 ià(!
	g»que¡
.
»sourûReque¡
().
u¾
().
isEm±y
())

267 
	gäame
->
lßd”
()->
lßdF¿meReque¡
(
»que¡
, 
çl£
, f®£, 0, 0, 
S’dReã¼”
);

268 ià(
Page
* 
	g·ge
 = 
äame
->
·ge
())

269 
·ge
->
chrome
()->
focus
();

270 
	gü—‹d
 = 
çl£
;

271  
	gäame
;

276 ià(
isDocum’tSªdboxed
(
SªdboxNavig©iÚ
))

280 
F¿meLßdReque¡
 
	g»que¡W™hReã¼”
 = 
»que¡
;

281 
	g»que¡W™hReã¼”
.
»sourûReque¡
().
£tHTTPReã¼”
(
m_outgošgReã¼”
);

282 
addHTTPOrigšIfN“ded
(
»que¡W™hReã¼”
.
»sourûReque¡
(), 
outgošgOrigš
());

284 
Page
* 
	gŞdPage
 = 
m_äame
->
·ge
();

285 ià(!
	gŞdPage
)

288 
Page
* 
	g·ge
 = 
ŞdPage
->
chrome
()->
ü—‹Wšdow
(
m_äame
, 
»que¡W™hReã¼”
, 
ã©u»s
);

289 ià(!
	g·ge
)

292 
F¿me
* 
	gäame
 = 
·ge
->
mašF¿me
();

293 ià(
	g»que¡
.
äameName
() != "_blank")

294 
äame
->
Œ“
()->
£tName
(
»que¡
.
äameName
());

296 
	g·ge
->
chrome
()->
£tToŞb¬sVisibË
(
ã©u»s
.
toŞB¬VisibË
 || f—tu»s.
loÿtiÚB¬VisibË
);

297 
	g·ge
->
chrome
()->
£tStusb¬VisibË
(
ã©u»s
.
¡©usB¬VisibË
);

298 
	g·ge
->
chrome
()->
£tSüŞlb¬sVisibË
(
ã©u»s
.
süŞlb¬sVisibË
);

299 
	g·ge
->
chrome
()->
£tM’ub¬VisibË
(
ã©u»s
.
m’uB¬VisibË
);

300 
	g·ge
->
chrome
()->
£tResizabË
(
ã©u»s
.
»sizabË
);

306 
FlßtReù
 
	gwšdowReù
 = 
·ge
->
chrome
()->
wšdowReù
();

307 
FlßtSize
 
	g·geSize
 = 
·ge
->
chrome
()->
·geReù
().
size
();

308 ià(
	gã©u»s
.
	gxS‘
)

309 
	gwšdowReù
.
£tX
(
ã©u»s
.
x
);

310 ià(
	gã©u»s
.
	gyS‘
)

311 
	gwšdowReù
.
£tY
(
ã©u»s
.
y
);

312 ià(
	gã©u»s
.
	gwidthS‘
)

313 
	gwšdowReù
.
£tWidth
(
ã©u»s
.
width
 + (
wšdowReù
.width(è- 
·geSize
.width()));

314 ià(
	gã©u»s
.
	gheightS‘
)

315 
	gwšdowReù
.
£tHeight
(
ã©u»s
.
height
 + (
wšdowReù
.height(è- 
·geSize
.height()));

316 
	g·ge
->
chrome
()->
£tWšdowReù
(
wšdowReù
);

318 
	g·ge
->
chrome
()->
show
();

320 
	gü—‹d
 = 
Œue
;

321  
	gäame
;

324 
boŞ
 
	gF¿meLßd”
::
ÿnHªdËReque¡
(cÚ¡ 
ResourûReque¡
& 
»que¡
)

326  
m_ş›Á
->
ÿnHªdËReque¡
(
»que¡
);

329 
	gF¿meLßd”
::
chªgeLoÿtiÚ
(cÚ¡ 
KURL
& 
u¾
, cÚ¡ 
SŒšg
& 
»ã¼”
, 
boŞ
 
lockHi¡Üy
, boŞ 
lockBackFÜw¬dLi¡
, boŞ 
u£rGe¡u»
, boŞ 
»äesh
)

331 
	gRefPŒ
<
	gF¿me
> 
´Ùeù
(
m_äame
);

333 
ResourûReque¡
 
»que¡
(
u¾
, 
»ã¼”
, 
»äesh
 ? 
R–ßdIgnÜšgCacheD©a
 : 
U£PrÙocŞCachePŞicy
);

335 ià(
	gm_äame
->
süt
()->
execu‹IfJavaSütURL
(
»que¡
.
u¾
(), 
u£rGe¡u»
))

338 
u¾S–eùed
(
»que¡
, "_£lf", 0, 
lockHi¡Üy
, 
lockBackFÜw¬dLi¡
, 
u£rGe¡u»
, 
S’dReã¼”
);

341 
	gF¿meLßd”
::
u¾S–eùed
(cÚ¡ 
ResourûReque¡
& 
»que¡
, cÚ¡ 
SŒšg
& 
·s£dT¬g‘
, 
PassRefPŒ
<
Ev’t
> 
Œigg”šgEv’t
, 
boŞ
 
lockHi¡Üy
, boŞ 
lockBackFÜw¬dLi¡
, boŞ 
u£rGe¡u»
, 
Reã¼”PŞicy
 
»ã¼”PŞicy
)

343 
ASSERT
(!
m_suµ»ssO³ÃrInNewF¿me
);

345 ià(
	gm_äame
->
süt
()->
execu‹IfJavaSütURL
(
»que¡
.
u¾
(), 
u£rGe¡u»
, 
çl£
))

348 
SŒšg
 
	grg‘
 = 
·s£dT¬g‘
;

349 ià(
	grg‘
.
isEm±y
())

350 
	grg‘
 = 
m_äame
->
docum’t
()->
ba£T¬g‘
();

352 
F¿meLßdReque¡
 
äameReque¡
(
»que¡
, 
rg‘
);

354 ià(
	g»ã¼”PŞicy
 =ğ
NoReã¼”
)

355 
m_suµ»ssO³ÃrInNewF¿me
 = 
Œue
;

356 ià(
	gäameReque¡
.
»sourûReque¡
().
h‰pReã¼”
().
isEm±y
())

357 
	gäameReque¡
.
»sourûReque¡
().
£tHTTPReã¼”
(
m_outgošgReã¼”
);

358 
addHTTPOrigšIfN“ded
(
äameReque¡
.
»sourûReque¡
(), 
outgošgOrigš
());

360 
lßdF¿meReque¡
(
äameReque¡
, 
lockHi¡Üy
, 
lockBackFÜw¬dLi¡
, 
Œigg”šgEv’t
, 0, 
»ã¼”PŞicy
);

362 
	gm_suµ»ssO³ÃrInNewF¿me
 = 
çl£
;

365 
boŞ
 
	gF¿meLßd”
::
»que¡F¿me
(
HTMLF¿meOwÃrEËm’t
* 
owÃrEËm’t
, cÚ¡ 
SŒšg
& 
u¾SŒšg
, cÚ¡ 
AtomicSŒšg
& 
äameName
, boŞ 
lockHi¡Üy
, boŞ 
lockBackFÜw¬dLi¡
)

368 
KURL
 
	gsütURL
;

369 
KURL
 
	gu¾
;

370 ià(
´ÙocŞIsJavaSüt
(
u¾SŒšg
)) {

371 
	gsütURL
 = 
com¶‘eURL
(
u¾SŒšg
);

372 
	gu¾
 = 
bÏnkURL
();

374 
	gu¾
 = 
com¶‘eURL
(
u¾SŒšg
);

376 
F¿me
* 
	gäame
 = 
owÃrEËm’t
->
cÚ‹ÁF¿me
();

377 ià(
	gäame
)

378 
	gäame
->
»dœeùScheduËr
()->
scheduËLoÿtiÚChªge
(
u¾
.
¡ršg
(), 
m_outgošgReã¼”
, 
lockHi¡Üy
, 
lockBackFÜw¬dLi¡
, 
isProûssšgU£rGe¡u»
());

380 
	gäame
 = 
lßdSubäame
(
owÃrEËm’t
, 
u¾
, 
äameName
, 
m_outgošgReã¼”
);

382 ià(!
	gäame
)

383  
	gçl£
;

385 ià(!
	gsütURL
.
isEm±y
())

386 
	gäame
->
süt
()->
execu‹IfJavaSütURL
(
sütURL
);

388  
	gŒue
;

391 
F¿me
* 
	gF¿meLßd”
::
lßdSubäame
(
HTMLF¿meOwÃrEËm’t
* 
owÃrEËm’t
, cÚ¡ 
KURL
& 
u¾
, cÚ¡ 
SŒšg
& 
Çme
, cÚ¡ SŒšg& 
»ã¼”
)

393 
boŞ
 
	g®lowsSüŞlšg
 = 
Œue
;

394 
	gm¬gšWidth
 = -1;

395 
	gm¬gšHeight
 = -1;

396 ià(
	gowÃrEËm’t
->
hasTagName
(
äameTag
è|| owÃrEËm’t->hasTagName(
iäameTag
)) {

397 
HTMLF¿meEËm’tBa£
* 
	go
 = 
¡©ic_ÿ¡
<HTMLF¿meEËm’tBa£*>(
owÃrEËm’t
);

398 
	g®lowsSüŞlšg
 = 
o
->
süŞlšgMode
(è!ğ
SüŞlb¬AlwaysOff
;

399 
	gm¬gšWidth
 = 
o
->
g‘M¬gšWidth
();

400 
	gm¬gšHeight
 = 
o
->
g‘M¬gšHeight
();

403 ià(!
	gSecur™yOrigš
::
ÿnLßd
(
u¾
, 
»ã¼”
, 0)) {

404 
	gF¿meLßd”
::
»pÜtLoÿlLßdFaed
(
m_äame
, 
u¾
.
¡ršg
());

408 
boŞ
 
	ghideReã¼”
 = 
Secur™yOrigš
::
shouldHideReã¼”
(
u¾
, 
»ã¼”
);

409 
	gRefPŒ
<
	gF¿me
> 
	gäame
 = 
m_ş›Á
->
ü—‹F¿me
(
u¾
, 
Çme
, 
owÃrEËm’t
, 
hideReã¼”
 ? 
SŒšg
(è: 
»ã¼”
, 
®lowsSüŞlšg
, 
m¬gšWidth
, 
m¬gšHeight
);

411 ià(!
	gäame
) {

412 
checkC®lIm¶ic™Clo£
();

422 
	gäame
->
lßd”
()->
	gm_isCom¶‘e
 = 
çl£
;

424 
R’d”Objeù
* 
	g»nd””
 = 
owÃrEËm’t
->
»nd””
();

425 
F¿meV›w
* 
	gv›w
 = 
äame
->
v›w
();

426 ià(
	g»nd””
 &&„’d””->
isWidg‘
(è&& 
	gv›w
)

427 
toR’d”Widg‘
(
»nd””
)->
£tWidg‘
(
v›w
);

429 
checkC®lIm¶ic™Clo£
();

440 ià(
	gäame
->
lßd”
()->
¡©e
(è=ğ
F¿meS‹Com¶‘e
)

441 
äame
->
lßd”
()->
checkCom¶‘ed
();

443  
	gäame
.
g‘
();

446 
	gF¿meLßd”
::
subm™FÜm
(cÚ¡ * 
aùiÚ
, cÚ¡ 
SŒšg
& 
u¾
, 
PassRefPŒ
<
FÜmD©a
> 
fÜmD©a
,

447 cÚ¡ 
SŒšg
& 
rg‘
, cÚ¡ SŒšg& 
cÚ‹ÁTy³
, cÚ¡ SŒšg& 
bound¬y
,

448 
boŞ
 
lockHi¡Üy
, 
PassRefPŒ
<
Ev’t
> 
ev’t
, PassRefPŒ<
FÜmS‹
> 
fÜmS‹
)

450 
ASSERT
(
aùiÚ
);

451 
ASSERT
(
¡rcmp
(
aùiÚ
, "GET") == 0 || strcmp(action, "POST") == 0);

452 
ASSERT
(
fÜmD©a
);

453 
ASSERT
(
fÜmS‹
);

454 
ASSERT
(
fÜmS‹
->
sourûF¿me
(è=ğ
m_äame
);

456 ià(!
	gm_äame
->
·ge
())

459 
KURL
 
	gu
 = 
com¶‘eURL
(
u¾
.
isNuÎ
() ? "" : url);

460 ià(
	gu
.
isEm±y
())

463 ià(
isDocum’tSªdboxed
(
SªdboxFÜms
))

466 ià(
´ÙocŞIsJavaSüt
(
u
)) {

467 
	gm_isExecutšgJavaSütFÜmAùiÚ
 = 
Œue
;

468 
	gm_äame
->
süt
()->
execu‹IfJavaSütURL
(
u
, 
çl£
, false);

469 
	gm_isExecutšgJavaSütFÜmAùiÚ
 = 
çl£
;

473 
F¿meLßdReque¡
 
	gäameReque¡
;

475 
SŒšg
 
	grg‘OrBa£T¬g‘
 = 
rg‘
.
isEm±y
(è? 
m_äame
->
docum’t
()->
ba£T¬g‘
() :arget;

476 
F¿me
* 
	grg‘F¿me
 = 
m_äame
->
Œ“
()->
fšd
(
rg‘OrBa£T¬g‘
);

477 ià(!
shouldAÎowNavig©iÚ
(
rg‘F¿me
))

479 ià(!
	grg‘F¿me
) {

480 ià(!
	gDOMWšdow
::
®lowPİUp
(
m_äame
è&& !
isProûssšgU£rGe¡u»
())

483 
	grg‘F¿me
 = 
m_äame
;

484 
	gäameReque¡
.
£tF¿meName
(
rg‘OrBa£T¬g‘
);

486 ià(!
	grg‘F¿me
->
·ge
())

501 ià(
	gm_äame
->
Œ“
()->
isDesûndªtOf
(
rg‘F¿me
)) {

502 ià(
	gm_subm™‹dFÜmURL
 =ğ
u
)

504 
	gm_subm™‹dFÜmURL
 = 
u
;

507 
	gfÜmD©a
->
g’”©eFes
(
m_äame
->
·ge
()->
chrome
()->
ş›Á
());

509 ià(!
	gm_outgošgReã¼”
.
isEm±y
())

510 
	gäameReque¡
.
»sourûReque¡
().
£tHTTPReã¼”
(
m_outgošgReã¼”
);

512 ià(
¡rcmp
(
aùiÚ
, "GET") == 0)

513 
u
.
£tQu”y
(
fÜmD©a
->
æ©‹nToSŒšg
());

515 
	gäameReque¡
.
»sourûReque¡
().
£tHTTPM‘hod
("POST");

516 
	gäameReque¡
.
»sourûReque¡
().
£tHTTPBody
(
fÜmD©a
);

519 ià(
	gcÚ‹ÁTy³
.
isNuÎ
() || contentType == "application/x-www-form-urlencoded")

520 
äameReque¡
.
»sourûReque¡
().
£tHTTPCÚ‹ÁTy³
(
cÚ‹ÁTy³
);

522 
	gäameReque¡
.
»sourûReque¡
().
£tHTTPCÚ‹ÁTy³
(
cÚ‹ÁTy³
 + "; bound¬y=" + 
bound¬y
);

525 
	gäameReque¡
.
»sourûReque¡
().
£tURL
(
u
);

526 
addHTTPOrigšIfN“ded
(
äameReque¡
.
»sourûReque¡
(), 
outgošgOrigš
());

528 
	grg‘F¿me
->
»dœeùScheduËr
()->
scheduËFÜmSubmissiÚ
(
äameReque¡
, 
lockHi¡Üy
, 
ev’t
, 
fÜmS‹
);

531 
	gF¿meLßd”
::
¡İLßdšg
(
UÆßdEv’tPŞicy
 
uÆßdEv’tPŞicy
, 
D©aba£PŞicy
 
d©aba£PŞicy
)

533 ià(
	gm_äame
->
docum’t
(è&& m_äame->docum’t()->
tok’iz”
())

534 
	gm_äame
->
docum’t
()->
tok’iz”
()->
¡İP¬sšg
();

536 ià(
	guÆßdEv’tPŞicy
 !ğ
UÆßdEv’tPŞicyNÚe
) {

537 ià(
m_äame
->
docum’t
()) {

538 ià(
m_didC®lIm¶ic™Clo£
 && !
m_wasUÆßdEv’tEm™‹d
) {

539 
Node
* 
cu¼’tFocu£dNode
 = 
m_äame
->
docum’t
()->
focu£dNode
();

540 ià(
	gcu¼’tFocu£dNode
)

541 
	gcu¼’tFocu£dNode
->
aboutToUÆßd
();

542 
	gm_uÆßdEv’tBešgDi¥©ched
 = 
Œue
;

543 ià(
	gm_äame
->
domWšdow
()) {

544 ià(
	guÆßdEv’tPŞicy
 =ğ
UÆßdEv’tPŞicyUÆßdAndPageHide
)

545 
m_äame
->
domWšdow
()->
di¥©chEv’t
(
PageT¿ns™iÚEv’t
::
ü—‹
(
ev’tNames
().
·gehideEv’t
, m_äame->
docum’t
()->
šPageCache
()), m_frame->document());

546 ià(!
	gm_äame
->
docum’t
()->
šPageCache
())

547 
	gm_äame
->
domWšdow
()->
di¥©chEv’t
(
Ev’t
::
ü—‹
(
ev’tNames
().
uÆßdEv’t
, 
çl£
, f®£), 
m_äame
->domWšdow()->
docum’t
());

549 
	gm_uÆßdEv’tBešgDi¥©ched
 = 
çl£
;

550 ià(
	gm_äame
->
docum’t
())

551 
	gm_äame
->
docum’t
()->
upd©eStyËIfN“ded
();

552 
	gm_wasUÆßdEv’tEm™‹d
 = 
Œue
;

557 ià(
	gm_äame
->
docum’t
(è&& !m_äame->docum’t()->
šPageCache
()) {

559 
boŞ
 
	gk“pEv’tLi¡’”s
 = 
m_isDi¥ÏyšgIn™ŸlEm±yDocum’t
 && 
m_´ovisiÚ®Docum’tLßd”


560 && 
m_äame
->
docum’t
()->
£cur™yOrigš
()->
isSecu»T¿ns™iÚTo
(
m_´ovisiÚ®Docum’tLßd”
->
u¾
());

562 ià(!
	gk“pEv’tLi¡’”s
)

563 
	gm_äame
->
docum’t
()->
»moveAÎEv’tLi¡’”s
();

567 
	gm_isCom¶‘e
 = 
Œue
;

568 
	gm_isLßdšgMašResourû
 = 
çl£
;

569 
	gm_didC®lIm¶ic™Clo£
 = 
Œue
;

571 ià(
	gm_äame
->
docum’t
(è&& m_äame->docum’t()->
·rsšg
()) {

572 
fšishedP¬sšg
();

573 
	gm_äame
->
docum’t
()->
£tP¬sšg
(
çl£
);

576 
	gm_wÜkšgURL
 = 
KURL
();

578 ià(
Docum’t
* 
	gdoc
 = 
m_äame
->
docum’t
()) {

579 ià(
DocLßd”
* 
docLßd”
 = 
doc
->docLoader())

580 
ÿche
()->
lßd”
()->
ÿnûlReque¡s
(
docLßd”
);

582 #ià
ENABLE
(
DATABASE
)

583 ià(
	gd©aba£PŞicy
 =ğ
D©aba£PŞicyStİ
)

584 
doc
->
¡İD©aba£s
(0);

586 
UNUSED_PARAM
(
d©aba£PŞicy
);

591 
F¿me
* 
	gchd
 = 
m_äame
->
Œ“
()->
fœ¡Chd
(); chd; chd = 
chd
->Œ“()->
ÃxtSiblšg
())

592 
chd
->
lßd”
()->
¡İLßdšg
(
uÆßdEv’tPŞicy
);

594 
	gm_äame
->
»dœeùScheduËr
()->
ÿnûl
();

597 
	gF¿meLßd”
::
¡İ
()

601 
RefPŒ
<
F¿me
> 
´ÙeùÜ
(
m_äame
);

603 ià(
	gm_äame
->
docum’t
()->
tok’iz”
())

604 
	gm_äame
->
docum’t
()->
tok’iz”
()->
¡İP¬sšg
();

605 
	gm_äame
->
docum’t
()->
fšishP¬sšg
();

607 ià(
	gm_icÚLßd”
)

608 
	gm_icÚLßd”
->
¡İLßdšg
();

611 
boŞ
 
	gF¿meLßd”
::
şo£URL
()

613 
hi¡Üy
()->
§veDocum’tS‹
();

616 
Docum’t
* 
	gcu¼’tDocum’t
 = 
m_äame
->
docum’t
();

617 
¡İLßdšg
(
cu¼’tDocum’t
 && !cu¼’tDocum’t->
šPageCache
(è? 
UÆßdEv’tPŞicyUÆßdAndPageHide
 : 
UÆßdEv’tPŞicyUÆßdOÆy
);

619 
	gm_äame
->
ed™Ü
()->
ş—rUndoRedoO³¿tiÚs
();

620  
	gŒue
;

623 
KURL
 
	gF¿meLßd”
::
icÚURL
()

626 ià(
m_äame
->
Œ“
(è&& m_äame->Œ“()->
·»Á
())

627  
KURL
();

630 ià(!
	gm_äame
->
docum’t
()->
icÚURL
().
isEm±y
())

631  
KURL
(
P¬£dURLSŒšg
, 
m_äame
->
docum’t
()->
icÚURL
());

634 ià(!
	gm_URL
.
´ÙocŞInHTTPFamy
())

635  
KURL
();

637 
KURL
 
	gu¾
;

638 
boŞ
 
	gcouldS‘PrÙocŞ
 = 
u¾
.
£tPrÙocŞ
(
m_URL
.
´ÙocŞ
());

639 
ASSERT_UNUSED
(
couldS‘PrÙocŞ
, couldSetProtocol);

640 
	gu¾
.
£tHo¡
(
m_URL
.
ho¡
());

641 ià(
	gm_URL
.
hasPÜt
())

642 
	gu¾
.
£tPÜt
(
m_URL
.
pÜt
());

643 
	gu¾
.
£tP©h
("/favicon.ico");

644  
	gu¾
;

647 
boŞ
 
	gF¿meLßd”
::
didO³nURL
(cÚ¡ 
KURL
& 
u¾
)

649 ià(
m_äame
->
»dœeùScheduËr
()->
»dœeùScheduËdDuršgLßd
()) {

652  
çl£
;

655 
	gm_äame
->
»dœeùScheduËr
()->
ÿnûl
();

656 
	gm_äame
->
ed™Ü
()->
ş—rLa¡Ed™Commªd
();

658 
	gm_isCom¶‘e
 = 
çl£
;

659 
	gm_isLßdšgMašResourû
 = 
Œue
;

660 
	gm_didC®lIm¶ic™Clo£
 = 
çl£
;

665 ià(!
	gm_ü—tšgIn™ŸlEm±yDocum’t
) {

666 
	gm_äame
->
£tJSStusB¬Text
(
SŒšg
());

667 
	gm_äame
->
£tJSDeçuÉStusB¬Text
(
SŒšg
());

669 
	gm_URL
 = 
u¾
;

670 ià(
	gm_URL
.
´ÙocŞInHTTPFamy
(è&& !m_URL.
ho¡
().
isEm±y
(è&& m_URL.
·th
().isEmpty())

671 
	gm_URL
.
£tP©h
("/");

672 
	gm_wÜkšgURL
 = 
m_URL
;

674 
¡¬‹d
();

676  
	gŒue
;

679 
	gF¿meLßd”
::
didEx¶ic™O³n
()

681 
m_isCom¶‘e
 = 
çl£
;

682 
	gm_didC®lIm¶ic™Clo£
 = 
çl£
;

685 
	gm_comm™‹dFœ¡R—lDocum’tLßd
 = 
Œue
;

691 
	gm_äame
->
»dœeùScheduËr
()->
ÿnûl
();

692 ià(
	gm_äame
->
docum’t
()->
u¾
(è!ğ
bÏnkURL
())

693 
m_URL
 = 
m_äame
->
docum’t
()->
u¾
();

697 
	gF¿meLßd”
::
ÿnûlAndCË¬
()

699 
m_äame
->
»dœeùScheduËr
()->
ÿnûl
();

701 ià(!
	gm_isCom¶‘e
)

702 
şo£URL
();

704 
ş—r
(
çl£
);

705 
	gm_äame
->
süt
()->
upd©ePÏtfÜmSütObjeùs
();

708 
	gF¿meLßd”
::
»¶aûDocum’t
(cÚ¡ 
SŒšg
& 
html
)

710 
¡İAÎLßd”s
();

711 
begš
(
m_URL
, 
Œue
, 
m_äame
->
docum’t
()->
£cur™yOrigš
());

712 
wr™e
(
html
);

713 
’d
();

716 
	gF¿meLßd”
::
ş—r
(
boŞ
 
ş—rWšdowPrİ”t›s
, boŞ 
ş—rSütObjeùs
, boŞ 
ş—rF¿meV›w
)

718 
	gm_äame
->
ed™Ü
()->
ş—r
();

720 ià(!
	gm_ÃedsCË¬
)

722 
	gm_ÃedsCË¬
 = 
çl£
;

724 ià(!
	gm_äame
->
docum’t
()->
šPageCache
()) {

725 
	gm_äame
->
docum’t
()->
ÿnûlP¬sšg
();

726 
	gm_äame
->
docum’t
()->
¡İAùiveDOMObjeùs
();

727 ià(
	gm_äame
->
docum’t
()->
©ched
()) {

728 
	gm_äame
->
docum’t
()->
wlRemove
();

729 
	gm_äame
->
docum’t
()->
d‘ach
();

731 
	gm_äame
->
docum’t
()->
»moveFocu£dNodeOfSubŒ“
(
m_äame
->document());

736 ià(
	gş—rWšdowPrİ”t›s
) {

737 
	gm_äame
->
ş—rDOMWšdow
();

738 
	gm_äame
->
süt
()->
ş—rWšdowSh–l
();

741 
	gm_äame
->
£ËùiÚ
()->
ş—r
();

742 
	gm_äame
->
ev’tHªdËr
()->
ş—r
();

743 ià(
	gş—rF¿meV›w
 && 
	gm_äame
->
v›w
())

744 
	gm_äame
->
v›w
()->
ş—r
();

748 
	gm_äame
->
£tDocum’t
(0);

749 
	gm_decod”
 = 0;

751 
	gm_cÚšsPlugIns
 = 
çl£
;

753 ià(
	gş—rSütObjeùs
)

754 
	gm_äame
->
süt
()->
ş—rSütObjeùs
();

756 
	gm_äame
->
»dœeùScheduËr
()->
ş—r
();

758 
	gm_checkTim”
.
¡İ
();

759 
	gm_shouldC®lCheckCom¶‘ed
 = 
çl£
;

760 
	gm_shouldC®lCheckLßdCom¶‘e
 = 
çl£
;

762 
	gm_»ûivedD©a
 = 
çl£
;

763 
	gm_isDi¥ÏyšgIn™ŸlEm±yDocum’t
 = 
çl£
;

765 ià(!
	gm_’codšgWasCho£nByU£r
)

766 
	gm_’codšg
 = 
SŒšg
();

769 
	gF¿meLßd”
::
»ûivedFœ¡D©a
()

771 
begš
(
m_wÜkšgURL
, 
çl£
);

773 
di¥©chDidComm™Lßd
();

774 
di¥©chDidCË¬WšdowObjeùsInAÎWÜlds
();

776 ià(
	gm_docum’tLßd”
) {

777 
SŒšg
 
	g±™Ë
 = 
m_docum’tLßd”
->
t™Ë
();

779 ià(!
	g±™Ë
.
isNuÎ
())

780 
	gm_ş›Á
->
di¥©chDidReûiveT™Ë
(
±™Ë
);

783 
	gm_wÜkšgURL
 = 
KURL
();

785 
	gd–ay
;

786 
SŒšg
 
	gu¾
;

787 ià(!
	gm_docum’tLßd”
)

789 ià(
	gm_äame
->
šV›wSourûMode
())

791 ià(!
·r£HTTPReäesh
(
m_docum’tLßd”
->
»¥Ú£
().
h‰pH—d”F›ld
("Reäesh"), 
çl£
, 
d–ay
, 
u¾
))

794 ià(
	gu¾
.
isEm±y
())

795 
	gu¾
 = 
m_URL
.
¡ršg
();

797 
	gu¾
 = 
m_äame
->
docum’t
()->
com¶‘eURL
(
u¾
).
¡ršg
();

799 
	gm_äame
->
»dœeùScheduËr
()->
scheduËRedœeù
(
d–ay
, 
u¾
);

802 cÚ¡ 
	gSŒšg
& 
	gF¿meLßd”
::
»¥Ú£MIMETy³
() const

804  
m_»¥Ú£MIMETy³
;

807 
	gF¿meLßd”
::
£tRe¥Ú£MIMETy³
(cÚ¡ 
SŒšg
& 
ty³
)

809 
m_»¥Ú£MIMETy³
 = 
ty³
;

812 
	gF¿meLßd”
::
begš
()

814 
begš
(
KURL
());

817 
	gF¿meLßd”
::
begš
(cÚ¡ 
KURL
& 
u¾
, 
boŞ
 
di¥©ch
, 
Secur™yOrigš
* 
Üigš
)

821 
	gRefPŒ
<
	gSecur™yOrigš
> 
	gfÜûdSecur™yOrigš
 = 
Üigš
;

823 
	gRefPŒ
<
	gDocum’t
> 
	gdocum’t
;

826 ià(!
	gm_isDi¥ÏyšgIn™ŸlEm±yDocum’t
 && 
	gm_ş›Á
->
shouldU£PlugšDocum’t
(
m_»¥Ú£MIMETy³
))

827 
	gdocum’t
 = 
PlugšDocum’t
::
ü—‹
(
m_äame
);

828 ià(!
	gm_ş›Á
->
hasHTMLV›w
())

829 
	gdocum’t
 = 
PÏûhŞd”Docum’t
::
ü—‹
(
m_äame
);

831 
	gdocum’t
 = 
DOMIm¶em’tiÚ
::
ü—‹Docum’t
(
m_»¥Ú£MIMETy³
, 
m_äame
, m_äame->
šV›wSourûMode
());

833 
boŞ
 
	g»£tSütšg
 = !(
m_isDi¥ÏyšgIn™ŸlEm±yDocum’t
 && 
m_äame
->
docum’t
()->
£cur™yOrigš
()->
isSecu»T¿ns™iÚTo
(
u¾
));

834 
ş—r
(
»£tSütšg
,„esetScripting);

835 ià(
	g»£tSütšg
)

836 
	gm_äame
->
süt
()->
upd©ePÏtfÜmSütObjeùs
();

838 
	gm_ÃedsCË¬
 = 
Œue
;

839 
	gm_isCom¶‘e
 = 
çl£
;

840 
	gm_didC®lIm¶ic™Clo£
 = 
çl£
;

841 
	gm_isLßdšgMašResourû
 = 
Œue
;

842 
	gm_isDi¥ÏyšgIn™ŸlEm±yDocum’t
 = 
m_ü—tšgIn™ŸlEm±yDocum’t
;

844 
KURL
 
»f
(
u¾
);

845 
	g»f
.
£tU£r
(
SŒšg
());

846 
	g»f
.
£tPass
(
SŒšg
());

847 
	g»f
.
»moveF¿gm’tId’tif›r
();

848 
	gm_outgošgReã¼”
 = 
»f
.
¡ršg
();

849 
	gm_URL
 = 
u¾
;

851 
	gdocum’t
->
£tURL
(
m_URL
);

852 
	gm_äame
->
£tDocum’t
(
docum’t
);

854 ià(
	gm_³ndšgS‹Objeù
) {

855 
	gdocum’t
->
¡©ePİ³d
(
m_³ndšgS‹Objeù
.
g‘
());

856 
	gm_³ndšgS‹Objeù
.
ş—r
();

859 ià(
	gm_decod”
)

860 
	gdocum’t
->
£tDecod”
(
m_decod”
.
g‘
());

861 ià(
	gfÜûdSecur™yOrigš
)

862 
	gdocum’t
->
£tSecur™yOrigš
(
fÜûdSecur™yOrigš
.
g‘
());

864 
	gm_äame
->
domWšdow
()->
£tURL
(
docum’t
->
u¾
());

865 
	gm_äame
->
domWšdow
()->
£tSecur™yOrigš
(
docum’t
->
£cur™yOrigš
());

867 ià(
	gdi¥©ch
)

868 
di¥©chDidCË¬WšdowObjeùsInAÎWÜlds
();

870 
upd©eFœ¡P¬tyFÜCook›s
();

872 
S‘tšgs
* 
	g£‰šgs
 = 
docum’t
->
£‰šgs
();

873 
	gdocum’t
->
docLßd”
()->
£tAutoLßdImages
(
£‰šgs
 && s‘tšgs->
lßdsImagesAutom©iÿÎy
());

875 ià(
	gm_docum’tLßd”
) {

876 
SŒšg
 
	gdnsP»ãtchCÚŒŞ
 = 
m_docum’tLßd”
->
»¥Ú£
().
h‰pH—d”F›ld
("X-DNS-Prefetch-Control");

877 ià(!
	gdnsP»ãtchCÚŒŞ
.
isEm±y
())

878 
	gdocum’t
->
·r£DNSP»ãtchCÚŒŞH—d”
(
dnsP»ãtchCÚŒŞ
);

881 
hi¡Üy
()->
»¡ÜeDocum’tS‹
();

883 
	gdocum’t
->
im¶ic™O³n
();

885 ià(
	gm_äame
->
v›w
(è&& 
	gm_ş›Á
->
hasHTMLV›w
())

886 
	gm_äame
->
v›w
()->
£tCÚ‹ÁsSize
(
IÁSize
());

889 
	gF¿meLßd”
::
wr™e
(cÚ¡ * 
¡r
, 
Ën
, 
boŞ
 
æush
)

891 ià(
	gËn
 =ğ0 && !
æush
)

894 ià(
	gËn
 == -1)

895 
Ën
 = 
¡¾’
(
¡r
);

897 
Tok’iz”
* 
	gtok’iz”
 = 
m_äame
->
docum’t
()->
tok’iz”
();

898 ià(
	gtok’iz”
 &&ok’iz”->
wªtsRawD©a
()) {

899 ià(
	gËn
 > 0)

900 
	gtok’iz”
->
wr™eRawD©a
(
¡r
, 
Ën
);

904 ià(!
	gm_decod”
) {

905 ià(
S‘tšgs
* 
	g£‰šgs
 = 
m_äame
->
£‰šgs
()) {

906 
m_decod”
 = 
TextResourûDecod”
::
ü—‹
(
m_»¥Ú£MIMETy³
,

907 
£‰šgs
->
deçuÉTextEncodšgName
(),

908 
£‰šgs
->
u£sEncodšgD‘eùÜ
());

909 
F¿me
* 
	g·»ÁF¿me
 = 
m_äame
->
Œ“
()->
·»Á
();

919 ià(
ÿnReãrToP¬’tF¿meEncodšg
(
m_äame
, 
·»ÁF¿me
))

920 
	gm_decod”
->
£tHštEncodšg
(
·»ÁF¿me
->
docum’t
()->
decod”
());

922 
	gm_decod”
 = 
TextResourûDecod”
::
ü—‹
(
m_»¥Ú£MIMETy³
, 
SŒšg
());

923 
F¿me
* 
	g·»ÁF¿me
 = 
m_äame
->
Œ“
()->
·»Á
();

924 ià(
	gm_’codšg
.
isEm±y
()) {

925 ià(
ÿnReãrToP¬’tF¿meEncodšg
(
m_äame
, 
·»ÁF¿me
))

926 
	gm_decod”
->
£tEncodšg
(
·»ÁF¿me
->
docum’t
()->
šputEncodšg
(), 
TextResourûDecod”
::
EncodšgFromP¬’tF¿me
);

928 
	gm_decod”
->
£tEncodšg
(
m_’codšg
,

929 
m_’codšgWasCho£nByU£r
 ? 
TextResourûDecod”
::
U£rCho£nEncodšg
 : TextResourûDecod”::
EncodšgFromHTTPH—d”
);

931 
	gm_äame
->
docum’t
()->
£tDecod”
(
m_decod”
.
g‘
());

934 
SŒšg
 
	gdecoded
 = 
m_decod”
->
decode
(
¡r
, 
Ën
);

935 ià(
	gæush
)

936 
	gdecoded
 +ğ
m_decod”
->
æush
();

937 ià(
	gdecoded
.
isEm±y
())

940 ià(!
	gm_»ûivedD©a
) {

941 
	gm_»ûivedD©a
 = 
Œue
;

942 ià(
	gm_decod”
->
’codšg
().
u£sVisu®Ord”šg
())

943 
	gm_äame
->
docum’t
()->
£tVisu®lyOrd”ed
();

944 
	gm_äame
->
docum’t
()->
»ÿlcStyË
(
Node
::
FÜû
);

947 ià(
	gtok’iz”
) {

948 
ASSERT
(!
tok’iz”
->
wªtsRawD©a
());

949 
	gtok’iz”
->
wr™e
(
decoded
, 
Œue
);

953 
	gF¿meLßd”
::
wr™e
(cÚ¡ 
SŒšg
& 
¡r
)

955 ià(
¡r
.
isNuÎ
())

958 ià(!
	gm_»ûivedD©a
) {

959 
	gm_»ûivedD©a
 = 
Œue
;

960 
	gm_äame
->
docum’t
()->
£tP¬£Mode
(
Docum’t
::
SŒiù
);

963 ià(
Tok’iz”
* 
	gtok’iz”
 = 
m_äame
->
docum’t
()->
tok’iz”
())

964 
tok’iz”
->
wr™e
(
¡r
, 
Œue
);

967 
	gF¿meLßd”
::
’d
()

969 
m_isLßdšgMašResourû
 = 
çl£
;

970 
’dIfNÙLßdšgMašResourû
();

973 
	gF¿meLßd”
::
’dIfNÙLßdšgMašResourû
()

975 ià(
m_isLßdšgMašResourû
 || !
m_äame
->
·ge
(è|| !m_äame->
docum’t
())

981 
	gRefPŒ
<
	gF¿me
> 
´ÙeùÜ
(
m_äame
);

984 
wr™e
(0, 0, 
Œue
);

985 
	gm_äame
->
docum’t
()->
fšishP¬sšg
();

988 
	gF¿meLßd”
::
icÚLßdDecisiÚAvaabË
()

990 ià(!
m_mayLßdIcÚL©”
)

992 
LOG
(
IcÚD©aba£
, "F¿meLßd” %°wa tŞd‡†ßd decisiÚ i avaabË fÜ it icÚ", 
this
);

993 
¡¬tIcÚLßd”
();

994 
	gm_mayLßdIcÚL©”
 = 
çl£
;

997 
	gF¿meLßd”
::
¡¬tIcÚLßd”
()

1001 ià(!
isLßdšgMašF¿me
())

1004 ià(!
icÚD©aba£
(è|| !icÚD©aba£()->
isEÇbËd
())

1007 
KURL
 
u¾
(
icÚURL
());

1008 
SŒšg
 
u¾SŒšg
(
u¾
.
¡ršg
());

1009 ià(
	gu¾SŒšg
.
isEm±y
())

1013 ià(
lßdTy³
(è!ğ
F¿meLßdTy³R–ßd
 &&†ßdTy³(è!ğ
F¿meLßdTy³R–ßdFromOrigš
) {

1014 
IcÚLßdDecisiÚ
 
decisiÚ
 = 
icÚD©aba£
()->
lßdDecisiÚFÜIcÚURL
(
u¾SŒšg
, 
m_docum’tLßd”
.
g‘
());

1015 ià(
	gdecisiÚ
 =ğ
IcÚLßdNo
) {

1016 
LOG
(
IcÚD©aba£
, "F¿meLßd”::¡¬tIcÚLßd”(è- TŞd‚ÙØlßdhi icÚ, comm™tšg icÚURL % tØd©aba£ fÜ…ageURL m­pšg", 
u¾SŒšg
.
ascii
().
d©a
());

1017 
comm™IcÚURLToIcÚD©aba£
(
u¾
);

1023 ià(!
icÚD©aba£
()->
icÚD©aKnownFÜIcÚURL
(
u¾SŒšg
)) {

1024 
LOG
(
IcÚD©aba£
, "TŞd‚ÙØlßd icÚ % buˆicÚ d©¨i nÙ y‘‡vaabË -„egi¡”šg fÜ‚ÙifiÿtiÚ‡nd„eque¡šg†ßd from disk", 
u¾SŒšg
.
ascii
().
d©a
());

1025 
	gm_ş›Á
->
»gi¡”FÜIcÚNÙifiÿtiÚ
();

1026 
icÚD©aba£
()->
icÚFÜPageURL
(
m_URL
.
¡ršg
(), 
IÁSize
(0, 0));

1027 
icÚD©aba£
()->
icÚFÜPageURL
(
Üigš®Reque¡URL
().
¡ršg
(), 
IÁSize
(0, 0));

1029 
	gm_ş›Á
->
di¥©chDidReûiveIcÚ
();

1034 ià(
	gdecisiÚ
 =ğ
IcÚLßdUnknown
) {

1039 
LOG
(
IcÚD©aba£
, "F¿meLßd” %°mighˆlßd icÚ % Ï‹r", 
this
, 
u¾SŒšg
.
ascii
().
d©a
());

1040 
	gm_mayLßdIcÚL©”
 = 
Œue
;

1041 
	gm_ş›Á
->
»gi¡”FÜIcÚNÙifiÿtiÚ
();

1042 
comm™IcÚURLToIcÚD©aba£
(
u¾
);

1049 
S‘tšgs
* 
	g£‰šgs
 = 
m_äame
->
£‰šgs
();

1050 ià(
	g£‰šgs
 && !£‰šgs->
lßdsImagesAutom©iÿÎy
())

1054 ià(!
	gm_icÚLßd”
)

1055 
	gm_icÚLßd”
.
£t
(
IcÚLßd”
::
ü—‹
(
m_äame
).
»Ëa£
());

1057 
	gm_icÚLßd”
->
¡¬tLßdšg
();

1060 
	gF¿meLßd”
::
comm™IcÚURLToIcÚD©aba£
(cÚ¡ 
KURL
& 
icÚ
)

1062 
ASSERT
(
icÚD©aba£
());

1063 
LOG
(
IcÚD©aba£
, "Comm™tšg icÚURL % tØd©aba£ fÜ…ageURL % ªd %s", 
icÚ
.
¡ršg
().
ascii
().
d©a
(), 
m_URL
.¡ršg().ascii().d©a(), 
Üigš®Reque¡URL
().string().ascii().data());

1064 
icÚD©aba£
()->
£tIcÚURLFÜPageURL
(
icÚ
.
¡ršg
(), 
m_URL
.string());

1065 
icÚD©aba£
()->
£tIcÚURLFÜPageURL
(
icÚ
.
¡ršg
(), 
Üigš®Reque¡URL
().string());

1068 
	gF¿meLßd”
::
fšishedP¬sšg
()

1070 ià(
m_ü—tšgIn™ŸlEm±yDocum’t
)

1073 
	gm_äame
->
šjeùU£rSüts
(
InjeùAtDocum’tEnd
);

1078 
	gRefPŒ
<
	gF¿me
> 
	g´ÙeùÜ
 = 
m_äame
->
v›w
() ? m_frame : 0;

1080 
	gm_ş›Á
->
di¥©chDidFšishDocum’tLßd
();

1082 
checkCom¶‘ed
();

1084 ià(!
	gm_äame
->
v›w
())

1089 
	gm_äame
->
v›w
()->
»¡ÜeSüŞlb¬
();

1090 
	gm_äame
->
v›w
()->
süŞlToF¿gm’t
(
m_URL
);

1093 
	gF¿meLßd”
::
lßdDÚe
()

1095 
checkCom¶‘ed
();

1098 
boŞ
 
	gF¿meLßd”
::
®lChd»nA»Com¶‘e
() const

1100 
F¿me
* 
chd
 = 
m_äame
->
Œ“
()->
fœ¡Chd
(); 
	gchd
; chd = chd->Œ“()->
ÃxtSiblšg
()) {

1101 ià(!
chd
->
lßd”
()->
m_isCom¶‘e
)

1102  
çl£
;

1104  
	gŒue
;

1107 
boŞ
 
	gF¿meLßd”
::
®lAnû¡ÜsA»Com¶‘e
() const

1109 
F¿me
* 
ªû¡Ü
 = 
m_äame
; 
	gªû¡Ü
;‡nû¡Ü =‡nû¡Ü->
Œ“
()->
·»Á
()) {

1110 ià(!
ªû¡Ü
->
lßd”
()->
m_isCom¶‘e
)

1111  
çl£
;

1113  
	gŒue
;

1116 
	gF¿meLßd”
::
checkCom¶‘ed
()

1118 
m_shouldC®lCheckCom¶‘ed
 = 
çl£
;

1120 ià(
	gm_äame
->
v›w
())

1121 
	gm_äame
->
v›w
()->
checkStİD–ayšgDeã¼edR•ašts
();

1124 ià(!
®lChd»nA»Com¶‘e
())

1128 ià(
	gm_isCom¶‘e
)

1132 ià(
	gm_äame
->
docum’t
()->
·rsšg
())

1136 ià(
numReque¡s
(
m_äame
->
docum’t
()))

1140 
	gm_isCom¶‘e
 = 
Œue
;

1142 
	gRefPŒ
<
	gF¿me
> 
´Ùeù
(
m_äame
);

1143 
checkC®lIm¶ic™Clo£
();

1145 
	gm_äame
->
»dœeùScheduËr
()->
¡¬tTim”
();

1147 
com¶‘ed
();

1148 ià(
	gm_äame
->
·ge
())

1149 
checkLßdCom¶‘e
();

1152 
	gF¿meLßd”
::
checkTim”Fœed
(
Tim”
<
F¿meLßd”
>*)

1154 ià(
Page
* 
·ge
 = 
m_äame
->page()) {

1155 ià(
·ge
->
deãrsLßdšg
())

1158 ià(
	gm_shouldC®lCheckCom¶‘ed
)

1159 
checkCom¶‘ed
();

1160 ià(
	gm_shouldC®lCheckLßdCom¶‘e
)

1161 
checkLßdCom¶‘e
();

1164 
	gF¿meLßd”
::
¡¬tCheckCom¶‘eTim”
()

1166 ià(!(
m_shouldC®lCheckCom¶‘ed
 || 
m_shouldC®lCheckLßdCom¶‘e
))

1168 ià(
	gm_checkTim”
.
isAùive
())

1170 
	gm_checkTim”
.
¡¬tOÃShÙ
(0);

1173 
	gF¿meLßd”
::
scheduËCheckCom¶‘ed
()

1175 
m_shouldC®lCheckCom¶‘ed
 = 
Œue
;

1176 
¡¬tCheckCom¶‘eTim”
();

1179 
	gF¿meLßd”
::
scheduËCheckLßdCom¶‘e
()

1181 
m_shouldC®lCheckLßdCom¶‘e
 = 
Œue
;

1182 
¡¬tCheckCom¶‘eTim”
();

1185 
	gF¿meLßd”
::
checkC®lIm¶ic™Clo£
()

1187 ià(
m_didC®lIm¶ic™Clo£
 || 
m_äame
->
docum’t
()->
·rsšg
())

1190 ià(!
®lChd»nA»Com¶‘e
())

1193 
	gm_didC®lIm¶ic™Clo£
 = 
Œue
;

1194 
	gm_wasUÆßdEv’tEm™‹d
 = 
çl£
;

1195 
	gm_äame
->
docum’t
()->
im¶ic™Clo£
();

1198 
KURL
 
	gF¿meLßd”
::
ba£URL
() const

1200 
ASSERT
(
m_äame
->
docum’t
());

1201  
	gm_äame
->
docum’t
()->
ba£URL
();

1204 
KURL
 
	gF¿meLßd”
::
com¶‘eURL
(cÚ¡ 
SŒšg
& 
u¾
)

1206 
ASSERT
(
m_äame
->
docum’t
());

1207  
	gm_äame
->
docum’t
()->
com¶‘eURL
(
u¾
);

1210 
	gF¿meLßd”
::
lßdURLIÁoChdF¿me
(cÚ¡ 
KURL
& 
u¾
, cÚ¡ 
SŒšg
& 
»ã»r
, 
F¿me
* 
chdF¿me
)

1212 
ASSERT
(
chdF¿me
);

1214 
Hi¡ÜyI‹m
* 
	g·»ÁI‹m
 = 
hi¡Üy
()->
cu¼’tI‹m
();

1215 
F¿meLßdTy³
 
	glßdTy³
 = 
this
->
lßdTy³
();

1216 
F¿meLßdTy³
 
	gchdLßdTy³
 = 
F¿meLßdTy³RedœeùW™hLockedBackFÜw¬dLi¡
;

1218 
KURL
 
	gwÜkšgURL
 = 
u¾
;

1222 ià(
	g·»ÁI‹m
 &&…¬’tI‹m->
chd»n
().
size
(è&& 
isBackFÜw¬dLßdTy³
(
lßdTy³
)) {

1223 
Hi¡ÜyI‹m
* 
	gchdI‹m
 = 
·»ÁI‹m
->
chdI‹mW™hT¬g‘
(
chdF¿me
->
Œ“
()->
Çme
());

1224 ià(
	gchdI‹m
) {

1228 
	gwÜkšgURL
 = 
KURL
(
P¬£dURLSŒšg
, 
chdI‹m
->
Üigš®URLSŒšg
());

1229 
	gchdLßdTy³
 = 
lßdTy³
;

1230 
	gchdF¿me
->
lßd”
()->
hi¡Üy
()->
£tProvisiÚ®I‹m
(
chdI‹m
);

1234 
	gRefPŒ
<
	gArchive
> 
	gsubäameArchive
 = 
aùiveDocum’tLßd”
()->
pİArchiveFÜSubäame
(
chdF¿me
->
Œ“
()->
Çme
());

1236 ià(
	gsubäameArchive
)

1237 
	gchdF¿me
->
lßd”
()->
lßdArchive
(
subäameArchive
.
»Ëa£
());

1239 
	gchdF¿me
->
lßd”
()->
lßdURL
(
wÜkšgURL
, 
»ã»r
, 
SŒšg
(), 
çl£
, 
chdLßdTy³
, 0, 0);

1242 
	gF¿meLßd”
::
lßdArchive
(
PassRefPŒ
<
Archive
> 
´pArchive
)

1244 
RefPŒ
<
Archive
> 
¬chive
 = 
´pArchive
;

1246 
ArchiveResourû
* 
	gmašResourû
 = 
¬chive
->
mašResourû
();

1247 
ASSERT
(
mašResourû
);

1248 ià(!
	gmašResourû
)

1251 
Sub¡™u‹D©a
 
sub¡™u‹D©a
(
mašResourû
->
d©a
(), mašResourû->
mimeTy³
(), mašResourû->
‹xtEncodšg
(), 
KURL
());

1253 
ResourûReque¡
 
»que¡
(
mašResourû
->
u¾
());

1254 #ià
PLATFORM
(
MAC
)

1255 
	g»que¡
.
­¶yWebArchiveHackFÜMa
();

1258 
	gRefPŒ
<
	gDocum’tLßd”
> 
	gdocum’tLßd”
 = 
m_ş›Á
->
ü—‹Docum’tLßd”
(
»que¡
, 
sub¡™u‹D©a
);

1259 
	gdocum’tLßd”
->
addAÎArchiveResourûs
(
¬chive
.
g‘
());

1260 
lßd
(
docum’tLßd”
.
g‘
());

1263 
SŒšg
 
	gF¿meLßd”
::
’codšg
() const

1265 ià(
m_’codšgWasCho£nByU£r
 && !
m_’codšg
.
isEm±y
())

1266  
m_’codšg
;

1267 ià(
	gm_decod”
 && m_decod”->
’codšg
().
isV®id
())

1268  
	gm_decod”
->
’codšg
().
Çme
();

1269 
S‘tšgs
* 
	g£‰šgs
 = 
m_äame
->
£‰šgs
();

1270  
	g£‰šgs
 ? s‘tšgs->
deçuÉTextEncodšgName
(è: 
SŒšg
();

1273 
boŞ
 
	gF¿meLßd”
::
»que¡Objeù
(
R’d”EmbeddedObjeù
* 
»nd””
, cÚ¡ 
SŒšg
& 
u¾
, cÚ¡ 
AtomicSŒšg
& 
äameName
,

1274 cÚ¡ 
SŒšg
& 
mimeTy³
, cÚ¡ 
VeùÜ
<SŒšg>& 
·¿mNames
, cÚ¡ VeùÜ<SŒšg>& 
·¿mV®ues
)

1276 ià(
	gu¾
.
isEm±y
(è&& 
	gmimeTy³
.isEmpty())

1277  
	gçl£
;

1279 ià(!
	gm_äame
->
süt
()->
xssAud™Ü
()->
ÿnLßdObjeù
(
u¾
)) {

1281  
	gçl£
;

1284 
KURL
 
	gcom¶‘edURL
;

1285 ià(!
	gu¾
.
isEm±y
())

1286 
	gcom¶‘edURL
 = 
com¶‘eURL
(
u¾
);

1288 
boŞ
 
	gu£F®lback
;

1289 ià(
shouldU£Plugš
(
com¶‘edURL
, 
mimeTy³
, 
»nd””
->
hasF®lbackCÚ‹Á
(), 
u£F®lback
)) {

1290 
S‘tšgs
* 
	g£‰šgs
 = 
m_äame
->
£‰šgs
();

1291 ià((!
®lowPlugšs
(
AboutToIn¡ªtŸ‹Plugš
)

1295 && !
	gMIMETy³Regi¡ry
::
isAµliÿtiÚPlugšMIMETy³
(
mimeTy³
))

1296 || (!
£‰šgs
->
isJavaEÇbËd
(è&& 
MIMETy³Regi¡ry
::
isJavaAµËtMIMETy³
(
mimeTy³
)))

1297  
çl£
;

1298 ià(
isDocum’tSªdboxed
(
SªdboxPlugšs
))

1299  
	gçl£
;

1300  
lßdPlugš
(
»nd””
, 
com¶‘edURL
, 
mimeTy³
, 
·¿mNames
, 
·¿mV®ues
, 
u£F®lback
);

1303 
ASSERT
(
»nd””
->
node
()->
hasTagName
(
objeùTag
è||„’d””->node()->hasTagName(
embedTag
));

1304 
HTMLPlugInEËm’t
* 
	g–em’t
 = 
¡©ic_ÿ¡
<HTMLPlugInEËm’t*>(
»nd””
->
node
());

1309  
»que¡F¿me
(
–em’t
, 
com¶‘edURL
, 
äameName
);

1312 
boŞ
 
	gF¿meLßd”
::
shouldU£Plugš
(cÚ¡ 
KURL
& 
u¾
, cÚ¡ 
SŒšg
& 
mimeTy³
, boŞ 
hasF®lback
, boŞ& 
u£F®lback
)

1314 ià(
	gm_ş›Á
->
shouldU£PlugšDocum’t
(
mimeTy³
)) {

1315 
	gu£F®lback
 = 
çl£
;

1316  
	gŒue
;

1321 ià(
	gm_äame
->
·ge
(è&& (
	gmimeTy³
 =ğ"image/tiff" || 
mimeTy³
 == "image/tif" || mimeType == "image/x-tiff")) {

1322 cÚ¡ 
PlugšD©a
* 
¶ugšD©a
 = 
m_äame
->
·ge
()->pluginData();

1323 
SŒšg
 
	g¶ugšName
 = 
¶ugšD©a
 ?…lugšD©a->
¶ugšNameFÜMimeTy³
(
mimeTy³
) : String();

1324 ià(!
	g¶ugšName
.
isEm±y
(è&& !¶ugšName.
cÚšs
("QuickTime", 
çl£
))

1325  
	gŒue
;

1328 
ObjeùCÚ‹ÁTy³
 
	gobjeùTy³
 = 
m_ş›Á
->
objeùCÚ‹ÁTy³
(
u¾
, 
mimeTy³
);

1331 
	gu£F®lback
 = 
objeùTy³
 =ğ
ObjeùCÚ‹ÁNÚe
 && 
hasF®lback
;

1332  
	gobjeùTy³
 =ğ
ObjeùCÚ‹ÁNÚe
 || 
objeùTy³
 =ğ
ObjeùCÚ‹ÁN‘sÿ³Plugš
 || objeùTy³ =ğ
ObjeùCÚ‹ÁOth”Plugš
;

1335 
ObjeùCÚ‹ÁTy³
 
	gF¿meLßd”
::
deçuÉObjeùCÚ‹ÁTy³
(cÚ¡ 
KURL
& 
u¾
, cÚ¡ 
SŒšg
& 
mimeTy³In
)

1337 
SŒšg
 
	gmimeTy³
 = 
mimeTy³In
;

1339 ià(
	gmimeTy³
.
isEm±y
())

1340 
	gmimeTy³
 = 
MIMETy³Regi¡ry
::
g‘MIMETy³FÜEx‹nsiÚ
(
u¾
.
·th
().
sub¡ršg
(u¾.·th().
»v”£Fšd
('.') + 1));

1342 ià(
	gmimeTy³
.
isEm±y
())

1343  
	gObjeùCÚ‹ÁF¿me
;

1345 ià(
	gMIMETy³Regi¡ry
::
isSuµÜ‹dImageMIMETy³
(
mimeTy³
))

1346  
WebCÜe
::
ObjeùCÚ‹ÁImage
;

1348 #ià!
PLATFORM
(
MAC
è&& !PLATFORM(
CHROMIUM
)

1349 ià(
	gPlugšD©aba£
::
š¡®ËdPlugšs
()->
isMIMETy³Regi¡”ed
(
mimeTy³
))

1350  
WebCÜe
::
ObjeùCÚ‹ÁN‘sÿ³Plugš
;

1353 ià(
	gMIMETy³Regi¡ry
::
isSuµÜ‹dNÚImageMIMETy³
(
mimeTy³
))

1354  
WebCÜe
::
ObjeùCÚ‹ÁF¿me
;

1356  
	gWebCÜe
::
ObjeùCÚ‹ÁNÚe
;

1359 
HTMLPlugInEËm’t
* 
toPlugInEËm’t
(
Node
* 
node
)

1361 ià(!
	gnode
)

1364 
ASSERT
(
node
->
hasTagName
(
objeùTag
è||‚ode->hasTagName(
embedTag
)

1365 || 
node
->
hasTagName
(
­¶‘Tag
));

1367  
	g¡©ic_ÿ¡
<
	gHTMLPlugInEËm’t
*>(
	gnode
);

1370 
boŞ
 
	gF¿meLßd”
::
lßdPlugš
(
R’d”EmbeddedObjeù
* 
»nd””
, cÚ¡ 
KURL
& 
u¾
, cÚ¡ 
SŒšg
& 
mimeTy³
,

1371 cÚ¡ 
VeùÜ
<
SŒšg
>& 
·¿mNames
, cÚ¡ VeùÜ<SŒšg>& 
·¿mV®ues
, 
boŞ
 
u£F®lback
)

1373 
	gRefPŒ
<
	gWidg‘
> 
	gwidg‘
;

1375 ià(
	g»nd””
 && !
	gu£F®lback
) {

1376 
HTMLPlugInEËm’t
* 
	g–em’t
 = 
toPlugInEËm’t
(
»nd””
->
node
());

1378 ià(!
	gSecur™yOrigš
::
ÿnLßd
(
u¾
, 
SŒšg
(), 
äame
()->
docum’t
())) {

1379 
	gF¿meLßd”
::
»pÜtLoÿlLßdFaed
(
m_äame
, 
u¾
.
¡ršg
());

1380  
	gçl£
;

1383 
checkIfRunIn£cu»CÚ‹Á
(
m_äame
->
docum’t
()->
£cur™yOrigš
(), 
u¾
);

1385 
	gwidg‘
 = 
m_ş›Á
->
ü—‹Plugš
(
IÁSize
(
»nd””
->
cÚ‹ÁWidth
(),„’d””->
cÚ‹ÁHeight
()),

1386 
–em’t
, 
u¾
, 
·¿mNames
, 
·¿mV®ues
, 
mimeTy³
,

1387 
m_äame
->
docum’t
()->
isPlugšDocum’t
(è&& !
m_cÚšsPlugIns
);

1388 ià(
	gwidg‘
) {

1389 
	g»nd””
->
£tWidg‘
(
widg‘
);

1390 
	gm_cÚšsPlugIns
 = 
Œue
;

1392 #ià
ENABLE
(
PLUGIN_PROXY_FOR_VIDEO
)

1393 
	g»nd””
->
node
()->
£tN“dsStyËReÿlc
(
SyÁh‘icStyËChªge
);

1396 
	g»nd””
->
£tShowsMissšgPlugšIndiÿtÜ
();

1399  
	gwidg‘
 != 0;

1402 #ià
ENABLE
(
PLUGIN_PROXY_FOR_VIDEO
)

1403 
	gPassRefPŒ
<
	gWidg‘
> 
	gF¿meLßd”
::
lßdMedŸPÏy”ProxyPlugš
(
Node
* 
node
, cÚ¡ 
KURL
& 
u¾
,

1404 cÚ¡ 
VeùÜ
<
SŒšg
>& 
·¿mNames
, cÚ¡ VeùÜ<SŒšg>& 
·¿mV®ues
)

1406 
ASSERT
(
node
->
hasTagName
(
videoTag
è||‚ode->hasTagName(
audioTag
));

1408 ià(!
	gm_äame
->
süt
()->
xssAud™Ü
()->
ÿnLßdObjeù
(
u¾
.
¡ršg
()))

1411 
KURL
 
	gcom¶‘edURL
;

1412 ià(!
	gu¾
.
isEm±y
())

1413 
	gcom¶‘edURL
 = 
com¶‘eURL
(
u¾
);

1415 ià(!
	gSecur™yOrigš
::
ÿnLßd
(
com¶‘edURL
, 
SŒšg
(), 
äame
()->
docum’t
())) {

1416 
	gF¿meLßd”
::
»pÜtLoÿlLßdFaed
(
m_äame
, 
com¶‘edURL
.
¡ršg
());

1420 
HTMLMedŸEËm’t
* 
	gmedŸEËm’t
 = 
¡©ic_ÿ¡
<HTMLMedŸEËm’t*>(
node
);

1421 
R’d”P¬t
* 
	g»nd””
 = 
toR’d”P¬t
(
node
->
»nd””
());

1422 
IÁSize
 
	gsize
;

1424 ià(
	g»nd””
)

1425 
	gsize
 = 
IÁSize
(
»nd””
->
cÚ‹ÁWidth
(),„’d””->
cÚ‹ÁHeight
());

1426 ià(
	gmedŸEËm’t
->
isVideo
())

1427 
	gsize
 = 
R’d”Video
::
deçuÉSize
();

1429 
checkIfRunIn£cu»CÚ‹Á
(
m_äame
->
docum’t
()->
£cur™yOrigš
(), 
com¶‘edURL
);

1431 
	gRefPŒ
<
	gWidg‘
> 
	gwidg‘
 = 
m_ş›Á
->
ü—‹MedŸPÏy”ProxyPlugš
(
size
, 
medŸEËm’t
, 
com¶‘edURL
,

1432 
·¿mNames
, 
·¿mV®ues
, "application/x-media-element-proxy-plugin");

1434 ià(
	gwidg‘
 && 
	g»nd””
) {

1435 
	g»nd””
->
£tWidg‘
(
widg‘
);

1436 
	gm_cÚšsPlugIns
 = 
Œue
;

1437 
	g»nd””
->
node
()->
£tN“dsStyËReÿlc
(
SyÁh‘icStyËChªge
);

1440  
	gwidg‘
 ? widg‘.
»Ëa£
() : 0;

1444 
SŒšg
 
	gF¿meLßd”
::
outgošgReã¼”
() const

1446  
m_outgošgReã¼”
;

1449 
SŒšg
 
	gF¿meLßd”
::
outgošgOrigš
() const

1451  
m_äame
->
docum’t
()->
£cur™yOrigš
()->
toSŒšg
();

1454 
boŞ
 
	gF¿meLßd”
::
isMixedCÚ‹Á
(
Secur™yOrigš
* 
cÚ‹xt
, cÚ¡ 
KURL
& 
u¾
)

1456 ià(
	gcÚ‹xt
->
´ÙocŞ
() != "https")

1457  
çl£
;

1459 ià(!
	gu¾
.
isV®id
(è|| 
	gSecur™yOrigš
::
shouldT»©URLSchemeAsSecu»
(
u¾
.
´ÙocŞ
()))

1460  
çl£
;

1462  
	gŒue
;

1465 
	gF¿meLßd”
::
checkIfDi¥ÏyIn£cu»CÚ‹Á
(
Secur™yOrigš
* 
cÚ‹xt
, cÚ¡ 
KURL
& 
u¾
)

1467 ià(!
isMixedCÚ‹Á
(
cÚ‹xt
, 
u¾
))

1470 
SŒšg
 
	gmes§ge
 = SŒšg::
fÜm©
("The…age‡t %s displayed insecure content from %s.\n",

1471 
m_URL
.
¡ršg
().
utf8
().
d©a
(), 
u¾
.string().utf8().data());

1472 
	gm_äame
->
domWšdow
()->
cÚsŞe
()->
addMes§ge
(
HTMLMes§geSourû
, 
LogMes§geTy³
, 
W¬nšgMes§geLev–
, 
mes§ge
, 1, 
SŒšg
());

1474 
	gm_ş›Á
->
didDi¥ÏyIn£cu»CÚ‹Á
();

1477 
	gF¿meLßd”
::
checkIfRunIn£cu»CÚ‹Á
(
Secur™yOrigš
* 
cÚ‹xt
, cÚ¡ 
KURL
& 
u¾
)

1479 ià(!
isMixedCÚ‹Á
(
cÚ‹xt
, 
u¾
))

1482 
SŒšg
 
	gmes§ge
 = SŒšg::
fÜm©
("The…age‡t %s„an insecure content from %s.\n",

1483 
m_URL
.
¡ršg
().
utf8
().
d©a
(), 
u¾
.string().utf8().data());

1484 
	gm_äame
->
domWšdow
()->
cÚsŞe
()->
addMes§ge
(
HTMLMes§geSourû
, 
LogMes§geTy³
, 
W¬nšgMes§geLev–
, 
mes§ge
, 1, 
SŒšg
());

1486 
	gm_ş›Á
->
didRunIn£cu»CÚ‹Á
(
cÚ‹xt
);

1489 
F¿me
* 
	gF¿meLßd”
::
İ’”
()

1491  
m_İ’”
;

1494 
	gF¿meLßd”
::
£tO³Ãr
(
F¿me
* 
İ’”
)

1496 ià(
m_İ’”
)

1497 
m_İ’”
->
lßd”
()->
m_İ’edF¿mes
.
»move
(
m_äame
);

1498 ià(
	gİ’”
)

1499 
	gİ’”
->
lßd”
()->
	gm_İ’edF¿mes
.
add
(
m_äame
);

1500 
	gm_İ’”
 = 
İ’”
;

1502 ià(
	gm_äame
->
docum’t
()) {

1503 
	gm_äame
->
docum’t
()->
š™Secur™yCÚ‹xt
();

1504 
	gm_äame
->
domWšdow
()->
£tSecur™yOrigš
(
m_äame
->
docum’t
()->
£cur™yOrigš
());

1508 
	gF¿meLßd”
::
hªdËF®lbackCÚ‹Á
()

1510 
HTMLF¿meOwÃrEËm’t
* 
owÃr
 = 
m_äame
->
owÃrEËm’t
();

1511 ià(!
	gowÃr
 || !owÃr->
hasTagName
(
objeùTag
))

1513 
	g¡©ic_ÿ¡
<
	gHTMLObjeùEËm’t
*>(
	gowÃr
)->
»nd”F®lbackCÚ‹Á
();

1516 
	gF¿meLßd”
::
´ovisiÚ®LßdS¹ed
()

1518 
m_fœ¡LayoutDÚe
 = 
çl£
;

1519 
	gm_äame
->
»dœeùScheduËr
()->
ÿnûl
(
Œue
);

1520 
	gm_ş›Á
->
´ovisiÚ®LßdS¹ed
();

1523 
boŞ
 
	gF¿meLßd”
::
isProûssšgU£rGe¡u»
()

1525 
F¿me
* 
äame
 = 
m_äame
->
Œ“
()->
tİ
();

1526 ià(!
	gäame
->
süt
()->
ÿnExecu‹Süts
(
NÙAboutToExecu‹Süt
))

1527  
	gŒue
;

1528  
	gäame
->
süt
()->
´oûssšgU£rGe¡u»
(
mašTh»adNÜm®WÜld
());

1531 
	gF¿meLßd”
::
»£tMuÉËFÜmSubmissiÚPrÙeùiÚ
()

1533 
m_subm™‹dFÜmURL
 = 
KURL
();

1536 
	gF¿meLßd”
::
£tEncodšg
(cÚ¡ 
SŒšg
& 
Çme
, 
boŞ
 
u£rCho£n
)

1538 ià(!
	gm_wÜkšgURL
.
isEm±y
())

1539 
»ûivedFœ¡D©a
();

1540 
	gm_’codšg
 = 
Çme
;

1541 
	gm_’codšgWasCho£nByU£r
 = 
u£rCho£n
;

1544 
	gF¿meLßd”
::
addD©a
(cÚ¡ * 
by‹s
, 
Ëngth
)

1546 
ASSERT
(
m_wÜkšgURL
.
isEm±y
());

1547 
ASSERT
(
m_äame
->
docum’t
());

1548 
ASSERT
(
m_äame
->
docum’t
()->
·rsšg
());

1549 
wr™e
(
by‹s
, 
Ëngth
);

1552 #ià
ENABLE
(
WML
)

1553 
šlše
 
boŞ
 
äameCÚšsWMLCÚ‹Á
(
F¿me
* 
äame
)

1555 
Docum’t
* 
	gdocum’t
 = 
äame
 ? f¿me->
docum’t
() : 0;

1556 ià(!
	gdocum’t
)

1557  
	gçl£
;

1559  
	gdocum’t
->
cÚšsWMLCÚ‹Á
(è|| docum’t->
isWMLDocum’t
();

1563 
boŞ
 
	gF¿meLßd”
::
ÿnCachePageCÚššgThisF¿me
()

1565 
F¿me
* 
chd
 = 
m_äame
->
Œ“
()->
fœ¡Chd
(); 
	gchd
; chd = chd->Œ“()->
ÃxtSiblšg
()) {

1566 ià(!
chd
->
lßd”
()->
ÿnCachePageCÚššgThisF¿me
())

1567  
çl£
;

1570  
	gm_docum’tLßd”


1571 && 
	gm_docum’tLßd”
->
mašDocum’tE¼Ü
().
isNuÎ
()

1577 && !
	gm_cÚšsPlugIns


1578 && !
	gm_URL
.
´ÙocŞIs
("https")

1579 && (!
	gm_äame
->
domWšdow
(è|| !m_äame->domWšdow()->
hasEv’tLi¡’”s
(
ev’tNames
().
uÆßdEv’t
))

1580 #ià
ENABLE
(
DATABASE
)

1581 && !
	gm_äame
->
docum’t
()->
hasO³nD©aba£s
()

1583 #ià
ENABLE
(
SHARED_WORKERS
)

1584 && !
	gSh¬edWÜk”R•os™Üy
::
hasSh¬edWÜk”s
(
m_äame
->
docum’t
())

1586 && !
m_äame
->
docum’t
()->
usšgGeŞoÿtiÚ
()

1587 && 
hi¡Üy
()->
cu¼’tI‹m
()

1588 && !
m_quickRedœeùComšg


1589 && !
m_docum’tLßd”
->
isLßdšgInAPIS’£
()

1590 && !
m_docum’tLßd”
->
isStİpšg
()

1591 && 
m_äame
->
docum’t
()->
ÿnSu¥’dAùiveDOMObjeùs
()

1592 #ià
ENABLE
(
OFFLINE_WEB_APPLICATIONS
)

1595 && 
m_docum’tLßd”
->
­¶iÿtiÚCacheHo¡
()->
ÿnCacheInPageCache
()

1597 #ià
ENABLE
(
WML
)

1598 && !
äameCÚšsWMLCÚ‹Á
(
m_äame
)

1600 && 
m_ş›Á
->
ÿnCachePage
()

1604 
boŞ
 
	gF¿meLßd”
::
ÿnCachePage
()

1606 #iâdeà
NDEBUG


1607 
logCªCachePageDecisiÚ
();

1617 
F¿meLßdTy³
 
	glßdTy³
 = 
this
->
lßdTy³
();

1619  !
	gm_äame
->
Œ“
()->
·»Á
()

1620 && 
ÿnCachePageCÚššgThisF¿me
()

1621 && 
	gm_äame
->
·ge
()

1622 && 
	gm_äame
->
·ge
()->
backFÜw¬dLi¡
()->
’abËd
()

1623 && 
	gm_äame
->
·ge
()->
backFÜw¬dLi¡
()->
ÿ·c™y
() > 0

1624 && 
	gm_äame
->
·ge
()->
£‰šgs
()->
u£sPageCache
()

1625 && 
	glßdTy³
 !ğ
F¿meLßdTy³R–ßd


1626 && 
lßdTy³
 !ğ
F¿meLßdTy³R–ßdFromOrigš


1627 && 
lßdTy³
 !ğ
F¿meLßdTy³Same


1631 #iâdeà
NDEBUG


1632 
	gSŒšg
& 
·geCacheLogP»fix
(
šd’tLev–
)

1634 
	g´eviousInd’t
 = -1;

1635 
DEFINE_STATIC_LOCAL
(
SŒšg
, 
´efix
, ());

1637 ià(
	gšd’tLev–
 !ğ
´eviousInd’t
) {

1638 
´eviousInd’t
 = 
šd’tLev–
;

1639 
	g´efix
.
Œunÿ‹
(0);

1640 
	gi
 = 0; i < 
	g´eviousInd’t
; ++i)

1641 
	g´efix
 += " ";

1644  
	g´efix
;

1647 
·geCacheLog
(cÚ¡ 
SŒšg
& 
´efix
, cÚ¡ SŒšg& 
mes§ge
)

1649 
LOG
(
PageCache
, "%s%s", 
´efix
.
utf8
().
d©a
(), 
mes§ge
.utf8().data());

1652 
	#PCLOG
(...è
	`·geCacheLog
(
	`·geCacheLogP»fix
(
šd’tLev–
), 
SŒšg
::
	`fÜm©
(
__VA_ARGS__
))

	)

1654 
	gF¿meLßd”
::
logCªCachePageDecisiÚ
()

1657 ià(
m_ü—tšgIn™ŸlEm±yDocum’t
)

1659 
KURL
 
	gcu¼’tURL
 = 
m_docum’tLßd”
 ? m_docum’tLßd”->
u¾
() : KURL();

1660 ià(
	gcu¼’tURL
.
isEm±y
())

1663 
	gšd’tLev–
 = 0;

1664 
PCLOG
("--------\n Determining if…age can be cached:");

1666 
boŞ
 
	gÿÂÙCache
 = !
logCªCacheF¿meDecisiÚ
(1);

1668 
F¿meLßdTy³
 
	glßdTy³
 = 
this
->
lßdTy³
();

1670 ià(
	gm_äame
->
Œ“
()->
·»Á
())

1671 { 
PCLOG
(" -F¿mha ¨·»Á f¿me"); 
	gÿÂÙCache
 = 
Œue
; }

1672 ià(!
	gm_äame
->
·ge
()) {

1673 
PCLOG
(" -There is‚o Page object");

1674 
	gÿÂÙCache
 = 
Œue
;

1677 ià(!
	gm_äame
->
·ge
()->
backFÜw¬dLi¡
()->
’abËd
())

1678 { 
PCLOG
(" -Thback/fÜw¬d†i¡ i di§bËd"); 
	gÿÂÙCache
 = 
Œue
; }

1679 ià(!(
	gm_äame
->
·ge
()->
backFÜw¬dLi¡
()->
ÿ·c™y
() > 0))

1680 { 
PCLOG
(" -Thback/fÜw¬d†i¡ ha ¨0 c­ac™y"); 
	gÿÂÙCache
 = 
Œue
; }

1681 ià(!
	gm_äame
->
·ge
()->
£‰šgs
()->
u£sPageCache
())

1682 { 
PCLOG
(" -Pag£‰šg §y b/àÿchdi§bËd"); 
	gÿÂÙCache
 = 
Œue
; }

1683 ià(
	glßdTy³
 =ğ
F¿meLßdTy³R–ßd
)

1684 { 
PCLOG
(" -Lßdy³ is: R–ßd"); 
	gÿÂÙCache
 = 
Œue
; }

1685 ià(
	glßdTy³
 =ğ
F¿meLßdTy³R–ßdFromOrigš
)

1686 { 
PCLOG
(" -Lßdy³ is: R–ßd from origš"); 
	gÿÂÙCache
 = 
Œue
; }

1687 ià(
	glßdTy³
 =ğ
F¿meLßdTy³Same
)

1688 { 
PCLOG
(" -Lßdy³ is: Same"); 
	gÿÂÙCache
 = 
Œue
; }

1689 } 
	gçl£
);

1691 
PCLOG
(
ÿÂÙCache
 ? " Page CANNOT be cached\n--------" : " Page CAN be cached\n--------");

1694 
boŞ
 
	gF¿meLßd”
::
logCªCacheF¿meDecisiÚ
(
šd’tLev–
)

1697 ià(
m_ü—tšgIn™ŸlEm±yDocum’t
)

1698  
çl£
;

1699 
KURL
 
	gcu¼’tURL
 = 
m_docum’tLßd”
 ? m_docum’tLßd”->
u¾
() : KURL();

1700 ià(
	gcu¼’tURL
.
isEm±y
())

1701  
	gçl£
;

1703 
PCLOG
("+---");

1704 
KURL
 
	gÃwURL
 = 
m_´ovisiÚ®Docum’tLßd”
 ? m_´ovisiÚ®Docum’tLßd”->
u¾
() : KURL();

1705 ià(!
	gÃwURL
.
isEm±y
())

1706 
PCLOG
(" D‘”mššg iàäamÿÀbÿched‚avig©šg from (%sètØ(%s):", 
cu¼’tURL
.
¡ršg
().
utf8
().
d©a
(), 
ÃwURL
.string().utf8().data());

1708 
PCLOG
(" D‘”mššg iàsubäamw™h URL (%sèÿÀbÿched:", 
cu¼’tURL
.
¡ršg
().
utf8
().
d©a
());

1710 
boŞ
 
	gÿÂÙCache
 = 
çl£
;

1713 ià(!
	gm_docum’tLßd”
) {

1714 
PCLOG
(" -There is‚o DocumentLoader object");

1715 
	gÿÂÙCache
 = 
Œue
;

1718 ià(!
	gm_docum’tLßd”
->
mašDocum’tE¼Ü
().
isNuÎ
())

1719 { 
PCLOG
(" -Maš docum’ˆha ªƒ¼Ü"); 
	gÿÂÙCache
 = 
Œue
; }

1720 ià(
	gm_cÚšsPlugIns
)

1721 { 
PCLOG
(" -F¿mcÚš ¶ugšs"); 
	gÿÂÙCache
 = 
Œue
; }

1722 ià(
	gm_URL
.
´ÙocŞIs
("https"))

1723 { 
PCLOG
(" -F¿mi HTTPS"); 
	gÿÂÙCache
 = 
Œue
; }

1724 ià(
	gm_äame
->
domWšdow
(è&& m_äame->domWšdow()->
hasEv’tLi¡’”s
(
ev’tNames
().
uÆßdEv’t
))

1725 { 
PCLOG
(" -F¿mha ª uÆßdƒv’ˆli¡’”"); 
	gÿÂÙCache
 = 
Œue
; }

1726 #ià
ENABLE
(
DATABASE
)

1727 ià(
	gm_äame
->
docum’t
()->
hasO³nD©aba£s
())

1728 { 
PCLOG
(" -F¿mha İ’ d©aba£ hªdËs"); 
	gÿÂÙCache
 = 
Œue
; }

1730 #ià
ENABLE
(
SHARED_WORKERS
)

1731 ià(
	gSh¬edWÜk”R•os™Üy
::
hasSh¬edWÜk”s
(
m_äame
->
docum’t
()))

1732 { 
PCLOG
(" -F¿mha assocŸ‹d Sh¬edWÜk”s"); 
	gÿÂÙCache
 = 
Œue
; }

1734 ià(
	gm_äame
->
docum’t
()->
usšgGeŞoÿtiÚ
())

1735 { 
PCLOG
(" -F¿mu£ GeŞoÿtiÚ"); 
	gÿÂÙCache
 = 
Œue
; }

1736 ià(!
hi¡Üy
()->
cu¼’tI‹m
())

1737 { 
PCLOG
(" -NØcu¼’ˆhi¡Üy i‹m"); 
	gÿÂÙCache
 = 
Œue
; }

1738 ià(
	gm_quickRedœeùComšg
)

1739 { 
PCLOG
(" -Quick„edœeù i comšg"); 
	gÿÂÙCache
 = 
Œue
; }

1740 ià(
	gm_docum’tLßd”
->
isLßdšgInAPIS’£
())

1741 { 
PCLOG
(" -Docum’tLßd” i ¡Èlßdšg iÀAPI s’£"); 
	gÿÂÙCache
 = 
Œue
; }

1742 ià(
	gm_docum’tLßd”
->
isStİpšg
())

1743 { 
PCLOG
(" -Docum’tLßd” i šhmiddË oà¡İpšg"); 
	gÿÂÙCache
 = 
Œue
; }

1744 ià(!
	gm_äame
->
docum’t
()->
ÿnSu¥’dAùiveDOMObjeùs
())

1745 { 
PCLOG
(" -Thdocum’ˆÿÂÙ su¥eù it aùivDOM Objeùs"); 
	gÿÂÙCache
 = 
Œue
; }

1746 #ià
ENABLE
(
OFFLINE_WEB_APPLICATIONS
)

1747 ià(!
	gm_docum’tLßd”
->
­¶iÿtiÚCacheHo¡
()->
ÿnCacheInPageCache
())

1748 { 
PCLOG
(" -ThDocum’tLßd” u£ ª‡µliÿtiÚ cache"); 
	gÿÂÙCache
 = 
Œue
; }

1750 ià(!
	gm_ş›Á
->
ÿnCachePage
())

1751 { 
PCLOG
(" -Thş›Á say thi äamÿÂÙ bÿched"); 
	gÿÂÙCache
 = 
Œue
; }

1752 } 
	gçl£
);

1754 
F¿me
* 
	gchd
 = 
m_äame
->
Œ“
()->
fœ¡Chd
(); chd; chd = 
chd
->Œ“()->
ÃxtSiblšg
())

1755 ià(!
chd
->
lßd”
()->
logCªCacheF¿meDecisiÚ
(
šd’tLev–
 + 1))

1756 
ÿÂÙCache
 = 
Œue
;

1758 
PCLOG
(
ÿÂÙCache
 ? " Frame CANNOT be cached" : " Frame CAN be cached");

1759 
PCLOG
("+---");

1761  !
	gÿÂÙCache
;

1765 
	gF¿meLßd”
::
upd©eFœ¡P¬tyFÜCook›s
()

1767 ià(
m_äame
->
Œ“
()->
·»Á
())

1768 
£tFœ¡P¬tyFÜCook›s
(
m_äame
->
Œ“
()->
·»Á
()->
docum’t
()->
fœ¡P¬tyFÜCook›s
());

1770 
£tFœ¡P¬tyFÜCook›s
(
m_URL
);

1773 
	gF¿meLßd”
::
£tFœ¡P¬tyFÜCook›s
(cÚ¡ 
KURL
& 
u¾
)

1775 
m_äame
->
docum’t
()->
£tFœ¡P¬tyFÜCook›s
(
u¾
);

1776 
F¿me
* 
	gchd
 = 
m_äame
->
Œ“
()->
fœ¡Chd
(); chd; chd = 
chd
->Œ“()->
ÃxtSiblšg
())

1777 
chd
->
lßd”
()->
£tFœ¡P¬tyFÜCook›s
(
u¾
);

1782 
	gF¿meLßd”
::
lßdInSameDocum’t
(cÚ¡ 
KURL
& 
u¾
, 
S”ŸlizedSütV®ue
* 
¡©eObjeù
, 
boŞ
 
isNewNavig©iÚ
)

1785 
ASSERT
(!
¡©eObjeù
 || (¡©eObjeù && !
isNewNavig©iÚ
));

1788 
	gm_äame
->
docum’t
()->
£tURL
(
u¾
);

1789 
docum’tLßd”
()->
»¶aûReque¡URLFÜSameDocum’tNavig©iÚ
(
u¾
);

1790 ià(
	gisNewNavig©iÚ
 && !
shouldT»©URLAsSameAsCu¼’t
(
u¾
è&& !
	g¡©eObjeù
) {

1802 
hi¡Üy
()->
upd©eBackFÜw¬dLi¡FÜF¿gm’tSüŞl
();

1805 
SŒšg
 
	gŞdURL
;

1806 
boŞ
 
	ghashChªge
 = 
equ®IgnÜšgF¿gm’tId’tif›r
(
u¾
, 
m_URL
è&& 
	gu¾
.
äagm’tId’tif›r
() != m_URL.fragmentIdentifier();

1807 
	gŞdURL
 = 
m_URL
;

1809 
	gm_URL
 = 
u¾
;

1810 
hi¡Üy
()->
upd©eFÜSameDocum’tNavig©iÚ
();

1813 ià(
	ghashChªge
)

1814 
	gm_äame
->
ev’tHªdËr
()->
¡İAutosüŞlTim”
();

1818 
¡¬‹d
();

1822 ià(
F¿meV›w
* 
	gv›w
 = 
m_äame
->
v›w
())

1823 
v›w
->
süŞlToF¿gm’t
(
m_URL
);

1825 
	gm_isCom¶‘e
 = 
çl£
;

1826 
checkCom¶‘ed
();

1828 ià(
	gisNewNavig©iÚ
) {

1832 
checkLßdCom¶‘e
();

1835 
	gm_ş›Á
->
di¥©chDidNavig©eW™hšPage
();

1837 ià(
	g¡©eObjeù
) {

1838 
	gm_äame
->
docum’t
()->
¡©ePİ³d
(
¡©eObjeù
);

1839 
	gm_ş›Á
->
di¥©chDidPİS‹W™hšPage
();

1842 ià(
	ghashChªge
) {

1843 
	gm_äame
->
docum’t
()->
’queueHashchªgeEv’t
(
ŞdURL
, 
m_URL
);

1844 
	gm_ş›Á
->
di¥©chDidChªgeLoÿtiÚW™hšPage
();

1848 
	gm_ş›Á
->
didFšishLßd
();

1851 
boŞ
 
	gF¿meLßd”
::
isCom¶‘e
() const

1853  
m_isCom¶‘e
;

1856 
	gF¿meLßd”
::
com¶‘ed
()

1858 
RefPŒ
<
F¿me
> 
´Ùeù
(
m_äame
);

1860 
F¿me
* 
	gdesûndªt
 = 
m_äame
->
Œ“
()->
Œav”£Next
(m_äame); desûndªt; desûndªˆğ
desûndªt
->tree()->traverseNext(m_frame))

1861 
desûndªt
->
»dœeùScheduËr
()->
¡¬tTim”
();

1863 ià(
F¿me
* 
	g·»Á
 = 
m_äame
->
Œ“
()->
·»Á
())

1864 
·»Á
->
lßd”
()->
checkCom¶‘ed
();

1866 ià(
	gm_äame
->
v›w
())

1867 
	gm_äame
->
v›w
()->
maššSüŞlPos™iÚAtAnchÜ
(0);

1870 
	gF¿meLßd”
::
¡¬‹d
()

1872 
F¿me
* 
äame
 = 
m_äame
; 
	gäame
; f¿mğäame->
Œ“
()->
·»Á
())

1873 
äame
->
lßd”
()->
m_isCom¶‘e
 = 
çl£
;

1876 
boŞ
 
	gF¿meLßd”
::
®lowPlugšs
(
R—sÚFÜC®lšgAÎowPlugšs
 
»asÚ
)

1878 
S‘tšgs
* 
£‰šgs
 = 
m_äame
->settings();

1879 
boŞ
 
	g®lowed
 = 
m_ş›Á
->
®lowPlugšs
(
£‰šgs
 && s‘tšgs->
¬ePlugšsEÇbËd
());

1880 ià(!
	g®lowed
 && 
	g»asÚ
 =ğ
AboutToIn¡ªtŸ‹Plugš
)

1881 
m_äame
->
lßd”
()->
ş›Á
()->
didNÙAÎowPlugšs
();

1882  
	g®lowed
;

1885 
boŞ
 
	gF¿meLßd”
::
cÚšsPlugšs
() const

1887  
m_cÚšsPlugIns
;

1890 
	gF¿meLßd”
::
´•¬eFÜLßdS¹
()

1892 ià(
Page
* 
·ge
 = 
m_äame
->page())

1893 
·ge
->
´og»ss
()->
´og»ssS¹ed
(
m_äame
);

1894 
	gm_ş›Á
->
di¥©chDidS¹ProvisiÚ®Lßd
();

1897 
	gF¿meLßd”
::
£tupFÜR•Ïû
()

1899 
£tS‹
(
F¿meS‹ProvisiÚ®
);

1900 
	gm_´ovisiÚ®Docum’tLßd”
 = 
m_docum’tLßd”
;

1901 
	gm_docum’tLßd”
 = 0;

1902 
d‘achChd»n
();

1905 
	gF¿meLßd”
::
£tupFÜR•ÏûByMIMETy³
(cÚ¡ 
SŒšg
& 
ÃwMIMETy³
)

1907 
aùiveDocum’tLßd”
()->
£tupFÜR•ÏûByMIMETy³
(
ÃwMIMETy³
);

1913 
boŞ
 
isF“dW™hNe¡edPrÙocŞInHTTPFamy
(cÚ¡ 
KURL
& 
u¾
)

1915 cÚ¡ 
	gSŒšg
& 
	gu¾SŒšg
 = 
u¾
.
¡ršg
();

1916 ià(!
	gu¾SŒšg
.
¡¬tsW™h
("ãed", 
çl£
))

1917  
	gçl£
;

1919  
	gu¾SŒšg
.
¡¬tsW™h
("ãed://", 
çl£
)

1920 || 
	gu¾SŒšg
.
¡¬tsW™h
("ãed:h‰p:", 
çl£
) || urlString.startsWith("feed:https:", false)

1921 || 
	gu¾SŒšg
.
¡¬tsW™h
("ãeds:h‰p:", 
çl£
) || urlString.startsWith("feeds:https:", false)

1922 || 
	gu¾SŒšg
.
¡¬tsW™h
("ãed£¬ch:h‰p:", 
çl£
) || urlString.startsWith("feedsearch:https:", false);

1925 
	gF¿meLßd”
::
lßdF¿meReque¡
(cÚ¡ 
F¿meLßdReque¡
& 
»que¡
, 
boŞ
 
lockHi¡Üy
, boŞ 
lockBackFÜw¬dLi¡
,

1926 
PassRefPŒ
<
Ev’t
> 
ev’t
, PassRefPŒ<
FÜmS‹
> 
fÜmS‹
, 
Reã¼”PŞicy
 
»ã¼”PŞicy
)

1928 
KURL
 
	gu¾
 = 
»que¡
.
»sourûReque¡
().
u¾
();

1930 
SŒšg
 
	g»ã¼”
;

1931 
SŒšg
 
	g¬gsReã¼”
 = 
»que¡
.
»sourûReque¡
().
h‰pReã¼”
();

1932 ià(!
	g¬gsReã¼”
.
isEm±y
())

1933 
	g»ã¼”
 = 
¬gsReã¼”
;

1935 
	g»ã¼”
 = 
m_outgošgReã¼”
;

1937 
ASSERT
(
äame
()->
docum’t
());

1938 ià(
	gSecur™yOrigš
::
shouldT»©URLAsLoÿl
(
u¾
.
¡ršg
()è&& !
isF“dW™hNe¡edPrÙocŞInHTTPFamy
(url)) {

1939 ià(!
Secur™yOrigš
::
ÿnLßd
(
u¾
, 
SŒšg
(), 
äame
()->
docum’t
()è&& !
	gSecur™yOrigš
::ÿnLßd(u¾, 
»ã¼”
, 0)) {

1940 
	gF¿meLßd”
::
»pÜtLoÿlLßdFaed
(
m_äame
, 
u¾
.
¡ršg
());

1945 ià(
	gSecur™yOrigš
::
shouldHideReã¼”
(
u¾
, 
»ã¼”
è|| 
	g»ã¼”PŞicy
 =ğ
NoReã¼”
)

1946 
»ã¼”
 = 
SŒšg
();

1948 
F¿meLßdTy³
 
	glßdTy³
;

1949 ià(
	g»que¡
.
»sourûReque¡
().
ÿchePŞicy
(è=ğ
R–ßdIgnÜšgCacheD©a
)

1950 
lßdTy³
 = 
F¿meLßdTy³R–ßd
;

1951 ià(
	glockBackFÜw¬dLi¡
)

1952 
	glßdTy³
 = 
F¿meLßdTy³RedœeùW™hLockedBackFÜw¬dLi¡
;

1954 
	glßdTy³
 = 
F¿meLßdTy³Snd¬d
;

1956 ià(
	g»que¡
.
»sourûReque¡
().
h‰pM‘hod
() == "POST")

1957 
lßdPo¡Reque¡
(
»que¡
.
»sourûReque¡
(), 
»ã¼”
,„eque¡.
äameName
(), 
lockHi¡Üy
, 
lßdTy³
, 
ev’t
, 
fÜmS‹
.
g‘
());

1959 
lßdURL
(
»que¡
.
»sourûReque¡
().
u¾
(), 
»ã¼”
,„eque¡.
äameName
(), 
lockHi¡Üy
, 
lßdTy³
, 
ev’t
, 
fÜmS‹
.
g‘
());

1963 
F¿me
* 
	gsourûF¿me
 = 
fÜmS‹
 ? fÜmS‹->
sourûF¿me
(è: 
m_äame
;

1964 
F¿me
* 
	grg‘F¿me
 = 
sourûF¿me
->
lßd”
()->
fšdF¿meFÜNavig©iÚ
(
»que¡
.
äameName
());

1965 ià(
	grg‘F¿me
 &&¬g‘F¿m!ğ
sourûF¿me
) {

1966 ià(
Page
* 
·ge
 = 
rg‘F¿me
->page())

1967 
·ge
->
chrome
()->
focus
();

1971 
	gF¿meLßd”
::
lßdURL
(cÚ¡ 
KURL
& 
ÃwURL
, cÚ¡ 
SŒšg
& 
»ã¼”
, cÚ¡ SŒšg& 
äameName
, 
boŞ
 
lockHi¡Üy
, 
F¿meLßdTy³
 
ÃwLßdTy³
,

1972 
PassRefPŒ
<
Ev’t
> 
ev’t
, PassRefPŒ<
FÜmS‹
> 
´pFÜmS‹
)

1974 
	gRefPŒ
<
	gFÜmS‹
> 
	gfÜmS‹
 = 
´pFÜmS‹
;

1975 
boŞ
 
	gisFÜmSubmissiÚ
 = 
fÜmS‹
;

1977 
ResourûReque¡
 
»que¡
(
ÃwURL
);

1978 ià(!
	g»ã¼”
.
isEm±y
()) {

1979 
	g»que¡
.
£tHTTPReã¼”
(
»ã¼”
);

1980 
	gRefPŒ
<
	gSecur™yOrigš
> 
	g»ã¼”Origš
 = 
Secur™yOrigš
::
ü—‹FromSŒšg
(
»ã¼”
);

1981 
addHTTPOrigšIfN“ded
(
»que¡
, 
»ã¼”Origš
->
toSŒšg
());

1983 
addExŒaF›ldsToReque¡
(
»que¡
, 
ÃwLßdTy³
, 
Œue
, 
ev’t
 || 
isFÜmSubmissiÚ
);

1984 ià(
	gÃwLßdTy³
 =ğ
F¿meLßdTy³R–ßd
 || 
ÃwLßdTy³
 =ğ
F¿meLßdTy³R–ßdFromOrigš
)

1985 
»que¡
.
£tCachePŞicy
(
R–ßdIgnÜšgCacheD©a
);

1987 
ASSERT
(
ÃwLßdTy³
 !ğ
F¿meLßdTy³Same
);

1990 
F¿me
* 
	grg‘F¿me
 = 
isFÜmSubmissiÚ
 ? 0 : 
fšdF¿meFÜNavig©iÚ
(
äameName
);

1991 ià(
	grg‘F¿me
 &&¬g‘F¿m!ğ
m_äame
) {

1992 
rg‘F¿me
->
lßd”
()->
lßdURL
(
ÃwURL
, 
»ã¼”
, 
SŒšg
(), 
lockHi¡Üy
, 
ÃwLßdTy³
, 
ev’t
, 
fÜmS‹
.
»Ëa£
());

1996 ià(
	gm_uÆßdEv’tBešgDi¥©ched
)

1999 
Navig©iÚAùiÚ
 
aùiÚ
(
ÃwURL
, 
ÃwLßdTy³
, 
isFÜmSubmissiÚ
, 
ev’t
);

2001 ià(!
	grg‘F¿me
 && !
	gäameName
.
isEm±y
()) {

2002 
pŞicyCheck”
()->
checkNewWšdowPŞicy
(
aùiÚ
, 
F¿meLßd”
::
ÿÎCÚtšueLßdAá”NewWšdowPŞicy
,

2003 
»que¡
, 
fÜmS‹
.
»Ëa£
(), 
äameName
, 
this
);

2007 
	gRefPŒ
<
	gDocum’tLßd”
> 
	gŞdDocum’tLßd”
 = 
m_docum’tLßd”
;

2009 
boŞ
 
	g§meURL
 = 
shouldT»©URLAsSameAsCu¼’t
(
ÃwURL
);

2014 ià(
shouldSüŞlToAnchÜ
(
isFÜmSubmissiÚ
, 
ÃwLßdTy³
, 
ÃwURL
)) {

2015 
	gŞdDocum’tLßd”
->
£tTrigg”šgAùiÚ
(
aùiÚ
);

2016 
pŞicyCheck”
()->
¡İCheck
();

2017 
pŞicyCheck”
()->
£tLßdTy³
(
ÃwLßdTy³
);

2018 
pŞicyCheck”
()->
checkNavig©iÚPŞicy
(
»que¡
, 
ŞdDocum’tLßd”
.
g‘
(), 
fÜmS‹
.
»Ëa£
(),

2019 
ÿÎCÚtšueF¿gm’tSüŞlAá”Navig©iÚPŞicy
, 
this
);

2022 
boŞ
 
	gisRedœeù
 = 
m_quickRedœeùComšg
;

2023 
lßdW™hNavig©iÚAùiÚ
(
»que¡
, 
aùiÚ
, 
lockHi¡Üy
, 
ÃwLßdTy³
, 
fÜmS‹
.
»Ëa£
());

2024 ià(
	gisRedœeù
) {

2025 
	gm_quickRedœeùComšg
 = 
çl£
;

2026 ià(
	gm_´ovisiÚ®Docum’tLßd”
)

2027 
	gm_´ovisiÚ®Docum’tLßd”
->
£tIsCl›ÁRedœeù
(
Œue
);

2028 } ià(
	g§meURL
)

2032 
	gm_lßdTy³
 = 
F¿meLßdTy³Same
;

2036 
	gF¿meLßd”
::
lßd
(cÚ¡ 
ResourûReque¡
& 
»que¡
, 
boŞ
 
lockHi¡Üy
)

2038 
lßd
(
»que¡
, 
Sub¡™u‹D©a
(), 
lockHi¡Üy
);

2041 
	gF¿meLßd”
::
lßd
(cÚ¡ 
ResourûReque¡
& 
»que¡
, cÚ¡ 
Sub¡™u‹D©a
& 
sub¡™u‹D©a
, 
boŞ
 
lockHi¡Üy
)

2043 ià(
	gm_šStİAÎLßd”s
)

2047 
	gm_lßdTy³
 = 
F¿meLßdTy³Snd¬d
;

2048 
	gRefPŒ
<
	gDocum’tLßd”
> 
	glßd”
 = 
m_ş›Á
->
ü—‹Docum’tLßd”
(
»que¡
, 
sub¡™u‹D©a
);

2049 ià(
	glockHi¡Üy
 && 
	gm_docum’tLßd”
)

2050 
	glßd”
->
£tCl›ÁRedœeùSourûFÜHi¡Üy
(
m_docum’tLßd”
->
didC»©eGlob®Hi¡ÜyEÁry
(è? m_docum’tLßd”->
u¾FÜHi¡Üy
(è: m_docum’tLßd”->
ş›ÁRedœeùSourûFÜHi¡Üy
());

2051 
lßd
(
lßd”
.
g‘
());

2054 
	gF¿meLßd”
::
lßd
(cÚ¡ 
ResourûReque¡
& 
»que¡
, cÚ¡ 
SŒšg
& 
äameName
, 
boŞ
 
lockHi¡Üy
)

2056 ià(
	gäameName
.
isEm±y
()) {

2057 
lßd
(
»que¡
, 
lockHi¡Üy
);

2061 
F¿me
* 
	gäame
 = 
fšdF¿meFÜNavig©iÚ
(
äameName
);

2062 ià(
	gäame
) {

2063 
	gäame
->
lßd”
()->
lßd
(
»que¡
, 
lockHi¡Üy
);

2067 
pŞicyCheck”
()->
checkNewWšdowPŞicy
(
Navig©iÚAùiÚ
(
»que¡
.
u¾
(), 
Navig©iÚTy³Oth”
), 
F¿meLßd”
::
ÿÎCÚtšueLßdAá”NewWšdowPŞicy
,„eque¡, 0, 
äameName
, 
this
);

2070 
	gF¿meLßd”
::
lßdW™hNavig©iÚAùiÚ
(cÚ¡ 
ResourûReque¡
& 
»que¡
, cÚ¡ 
Navig©iÚAùiÚ
& 
aùiÚ
, 
boŞ
 
lockHi¡Üy
, 
F¿meLßdTy³
 
ty³
, 
PassRefPŒ
<
FÜmS‹
> 
fÜmS‹
)

2072 
	gRefPŒ
<
	gDocum’tLßd”
> 
	glßd”
 = 
m_ş›Á
->
ü—‹Docum’tLßd”
(
»que¡
, 
Sub¡™u‹D©a
());

2073 ià(
	glockHi¡Üy
 && 
	gm_docum’tLßd”
)

2074 
	glßd”
->
£tCl›ÁRedœeùSourûFÜHi¡Üy
(
m_docum’tLßd”
->
didC»©eGlob®Hi¡ÜyEÁry
(è? m_docum’tLßd”->
u¾FÜHi¡Üy
(è: m_docum’tLßd”->
ş›ÁRedœeùSourûFÜHi¡Üy
());

2076 
	glßd”
->
£tTrigg”šgAùiÚ
(
aùiÚ
);

2077 ià(
	gm_docum’tLßd”
)

2078 
	glßd”
->
£tOv”rideEncodšg
(
m_docum’tLßd”
->
ov”rideEncodšg
());

2080 
lßdW™hDocum’tLßd”
(
lßd”
.
g‘
(), 
ty³
, 
fÜmS‹
);

2083 
	gF¿meLßd”
::
lßd
(
Docum’tLßd”
* 
ÃwDocum’tLßd”
)

2085 
ResourûReque¡
& 
r
 = 
ÃwDocum’tLßd”
->
»que¡
();

2086 
addExŒaF›ldsToMašResourûReque¡
(
r
);

2087 
F¿meLßdTy³
 
	gty³
;

2089 ià(
shouldT»©URLAsSameAsCu¼’t
(
ÃwDocum’tLßd”
->
Üigš®Reque¡
().
u¾
())) {

2090 
	gr
.
£tCachePŞicy
(
R–ßdIgnÜšgCacheD©a
);

2091 
	gty³
 = 
F¿meLßdTy³Same
;

2093 
	gty³
 = 
F¿meLßdTy³Snd¬d
;

2095 ià(
	gm_docum’tLßd”
)

2096 
	gÃwDocum’tLßd”
->
£tOv”rideEncodšg
(
m_docum’tLßd”
->
ov”rideEncodšg
());

2105 ià(
shouldR–ßdToHªdËUÄ—chabËURL
(
ÃwDocum’tLßd”
)) {

2106 
ASSERT
(
ty³
 =ğ
F¿meLßdTy³Snd¬d
);

2107 
	gty³
 = 
F¿meLßdTy³R–ßd
;

2110 
lßdW™hDocum’tLßd”
(
ÃwDocum’tLßd”
, 
ty³
, 0);

2113 
	gF¿meLßd”
::
lßdW™hDocum’tLßd”
(
Docum’tLßd”
* 
lßd”
, 
F¿meLßdTy³
 
ty³
, 
PassRefPŒ
<
FÜmS‹
> 
´pFÜmS‹
)

2115 
ASSERT
(
m_ş›Á
->
hasWebV›w
());

2120 
ASSERT
(
m_äame
->
v›w
());

2122 ià(
	gm_uÆßdEv’tBešgDi¥©ched
)

2125 
pŞicyCheck”
()->
£tLßdTy³
(
ty³
);

2126 
	gRefPŒ
<
	gFÜmS‹
> 
	gfÜmS‹
 = 
´pFÜmS‹
;

2127 
boŞ
 
	gisFÜmSubmissiÚ
 = 
fÜmS‹
;

2129 cÚ¡ 
	gKURL
& 
	gÃwURL
 = 
lßd”
->
»que¡
().
u¾
();

2131 ià(
shouldSüŞlToAnchÜ
(
isFÜmSubmissiÚ
, 
pŞicyCheck”
()->
lßdTy³
(), 
ÃwURL
)) {

2132 
	gRefPŒ
<
	gDocum’tLßd”
> 
	gŞdDocum’tLßd”
 = 
m_docum’tLßd”
;

2133 
Navig©iÚAùiÚ
 
aùiÚ
(
ÃwURL
, 
pŞicyCheck”
()->
lßdTy³
(), 
isFÜmSubmissiÚ
);

2135 
	gŞdDocum’tLßd”
->
£tTrigg”šgAùiÚ
(
aùiÚ
);

2136 
pŞicyCheck”
()->
¡İCheck
();

2137 
pŞicyCheck”
()->
checkNavig©iÚPŞicy
(
lßd”
->
»que¡
(), 
ŞdDocum’tLßd”
.
g‘
(), 
fÜmS‹
,

2138 
ÿÎCÚtšueF¿gm’tSüŞlAá”Navig©iÚPŞicy
, 
this
);

2140 ià(
F¿me
* 
	g·»Á
 = 
m_äame
->
Œ“
()->
·»Á
())

2141 
lßd”
->
£tOv”rideEncodšg
(
·»Á
->lßd”()->
docum’tLßd”
()->
ov”rideEncodšg
());

2143 
pŞicyCheck”
()->
¡İCheck
();

2144 
£tPŞicyDocum’tLßd”
(
lßd”
);

2145 ià(
	glßd”
->
Œigg”šgAùiÚ
().
isEm±y
())

2146 
	glßd”
->
£tTrigg”šgAùiÚ
(
Navig©iÚAùiÚ
(
ÃwURL
, 
pŞicyCheck”
()->
lßdTy³
(), 
isFÜmSubmissiÚ
));

2148 ià(
EËm’t
* 
	gowÃrEËm’t
 = 
m_äame
->
docum’t
()->
owÃrEËm’t
()) {

2149 ià(!
owÃrEËm’t
->
di¥©chBefÜeLßdEv’t
(
lßd”
->
»que¡
().
u¾
().
¡ršg
())) {

2150 
cÚtšueLßdAá”Navig©iÚPŞicy
(
lßd”
->
»que¡
(), 
fÜmS‹
, 
çl£
);

2155 
pŞicyCheck”
()->
checkNavig©iÚPŞicy
(
lßd”
->
»que¡
(),†ßd”, 
fÜmS‹
,

2156 
ÿÎCÚtšueLßdAá”Navig©iÚPŞicy
, 
this
);

2160 
	gF¿meLßd”
::
»pÜtLoÿlLßdFaed
(
F¿me
* 
äame
, cÚ¡ 
SŒšg
& 
u¾
)

2162 
ASSERT
(!
u¾
.
isEm±y
());

2163 ià(!
	gäame
)

2166 
	gäame
->
domWšdow
()->
cÚsŞe
()->
addMes§ge
(
JSMes§geSourû
, 
LogMes§geTy³
, 
E¼ÜMes§geLev–
, "NÙ‡ÎowedØlßd†oÿÈ»sourû: " + 
u¾
, 0, 
SŒšg
());

2169 cÚ¡ 
	gResourûReque¡
& 
	gF¿meLßd”
::
š™ŸlReque¡
() const

2171  
aùiveDocum’tLßd”
()->
Üigš®Reque¡
();

2174 
	gF¿meLßd”
::
»ûivedD©a
(cÚ¡ * 
d©a
, 
Ëngth
)

2176 
aùiveDocum’tLßd”
()->
»ûivedD©a
(
d©a
, 
Ëngth
);

2179 
boŞ
 
	gF¿meLßd”
::
wlLßdMedŸEËm’tURL
(
KURL
& 
u¾
)

2181 
ResourûReque¡
 
»que¡
(
u¾
);

2183 
	gid’tif›r
;

2184 
ResourûE¼Ü
 
	g”rÜ
;

2185 
»que¡FromD–eg©e
(
»que¡
, 
id’tif›r
, 
”rÜ
);

2186 
nÙif›r
()->
£ndRemaššgD–eg©eMes§ges
(
m_docum’tLßd”
.
g‘
(), 
id’tif›r
, 
ResourûRe¥Ú£
(
u¾
, 
SŒšg
(), -1, SŒšg(), SŒšg()), -1, 
”rÜ
);

2188 
	gu¾
 = 
»que¡
.
u¾
();

2190  
	g”rÜ
.
isNuÎ
();

2193 
ResourûE¼Ü
 
	gF¿meLßd”
::
š‹¼u±iÚFÜPŞicyChªgeE¼Ü
(cÚ¡ 
ResourûReque¡
& 
»que¡
)

2195  
m_ş›Á
->
š‹¼u±FÜPŞicyChªgeE¼Ü
(
»que¡
);

2198 
boŞ
 
	gF¿meLßd”
::
shouldR–ßdToHªdËUÄ—chabËURL
(
Docum’tLßd”
* 
docLßd”
)

2200 
KURL
 
uÄ—chabËURL
 = 
docLßd”
->unreachableURL();

2202 ià(
	guÄ—chabËURL
.
isEm±y
())

2203  
	gçl£
;

2205 ià(!
isBackFÜw¬dLßdTy³
(
pŞicyCheck”
()->
lßdTy³
()))

2206  
	gçl£
;

2213 
Docum’tLßd”
* 
	gcom·»Docum’tLßd”
 = 0;

2214 ià(
pŞicyCheck”
()->
d–eg©eIsDecidšgNavig©iÚPŞicy
(è||…ŞicyCheck”()->
d–eg©eIsHªdlšgUnim¶em’bËPŞicy
())

2215 
	gcom·»Docum’tLßd”
 = 
m_pŞicyDocum’tLßd”
.
g‘
();

2216 ià(
	gm_d–eg©eIsHªdlšgProvisiÚ®LßdE¼Ü
)

2217 
	gcom·»Docum’tLßd”
 = 
m_´ovisiÚ®Docum’tLßd”
.
g‘
();

2219  
	gcom·»Docum’tLßd”
 && 
	guÄ—chabËURL
 =ğ
com·»Docum’tLßd”
->
»que¡
().
u¾
();

2222 
	gF¿meLßd”
::
»lßdW™hOv”rideEncodšg
(cÚ¡ 
SŒšg
& 
’codšg
)

2224 ià(!
m_docum’tLßd”
)

2227 
ResourûReque¡
 
	g»que¡
 = 
m_docum’tLßd”
->
»que¡
();

2228 
KURL
 
	guÄ—chabËURL
 = 
m_docum’tLßd”
->
uÄ—chabËURL
();

2229 ià(!
	guÄ—chabËURL
.
isEm±y
())

2230 
	g»que¡
.
£tURL
(
uÄ—chabËURL
);

2232 
	g»que¡
.
£tCachePŞicy
(
R‘uºCacheD©aEl£Lßd
);

2234 
	gRefPŒ
<
	gDocum’tLßd”
> 
	glßd”
 = 
m_ş›Á
->
ü—‹Docum’tLßd”
(
»que¡
, 
Sub¡™u‹D©a
());

2235 
£tPŞicyDocum’tLßd”
(
lßd”
.
g‘
());

2237 
	glßd”
->
£tOv”rideEncodšg
(
’codšg
);

2239 
lßdW™hDocum’tLßd”
(
lßd”
.
g‘
(), 
F¿meLßdTy³R–ßd
, 0);

2242 
	gF¿meLßd”
::
»lßd
(
boŞ
 
’dToEndR–ßd
)

2244 ià(!
m_docum’tLßd”
)

2249 ià(
	gm_docum’tLßd”
->
»que¡
().
u¾
().
isEm±y
())

2252 
ResourûReque¡
 
	gš™ŸlReque¡
 = 
m_docum’tLßd”
->
»que¡
();

2255 
KURL
 
	guÄ—chabËURL
 = 
m_docum’tLßd”
->
uÄ—chabËURL
();

2256 ià(!
	guÄ—chabËURL
.
isEm±y
())

2257 
	gš™ŸlReque¡
.
£tURL
(
uÄ—chabËURL
);

2261 
	gRefPŒ
<
	gDocum’tLßd”
> 
	glßd”
 = 
m_ş›Á
->
ü—‹Docum’tLßd”
(
š™ŸlReque¡
, 
Sub¡™u‹D©a
());

2263 
	gResourûReque¡
& 
	g»que¡
 = 
lßd”
->
»que¡
();

2266 
	g»que¡
.
£tCachePŞicy
(
R–ßdIgnÜšgCacheD©a
);

2269 ià(
	g»que¡
.
h‰pM‘hod
() == "POST")

2270 
lßd”
->
£tTrigg”šgAùiÚ
(
Navig©iÚAùiÚ
(
»que¡
.
u¾
(), 
Navig©iÚTy³FÜmResubm™‹d
));

2272 
	glßd”
->
£tOv”rideEncodšg
(
m_docum’tLßd”
->
ov”rideEncodšg
());

2274 
lßdW™hDocum’tLßd”
(
lßd”
.
g‘
(), 
’dToEndR–ßd
 ? 
F¿meLßdTy³R–ßdFromOrigš
 : 
F¿meLßdTy³R–ßd
, 0);

2277 
boŞ
 
ÿnAcûssAnû¡Ü
(cÚ¡ 
Secur™yOrigš
* 
aùiveSecur™yOrigš
, 
F¿me
* 
rg‘F¿me
)

2281 ià(!
	grg‘F¿me
)

2282  
	gçl£
;

2284 
F¿me
* 
	gªû¡ÜF¿me
 = 
rg‘F¿me
;‡nû¡ÜF¿me;‡nû¡ÜF¿mğ
ªû¡ÜF¿me
->
Œ“
()->
·»Á
()) {

2285 
Docum’t
* 
ªû¡ÜDocum’t
 = 
ªû¡ÜF¿me
->
docum’t
();

2286 ià(!
	gªû¡ÜDocum’t
)

2287  
	gŒue
;

2289 cÚ¡ 
Secur™yOrigš
* 
	gªû¡ÜSecur™yOrigš
 = 
ªû¡ÜDocum’t
->
£cur™yOrigš
();

2290 ià(
	gaùiveSecur™yOrigš
->
ÿnAcûss
(
ªû¡ÜSecur™yOrigš
))

2291  
	gŒue
;

2294  
	gçl£
;

2297 
boŞ
 
	gF¿meLßd”
::
shouldAÎowNavig©iÚ
(
F¿me
* 
rg‘F¿me
) const

2308 ià(!
rg‘F¿me
)

2309  
Œue
;

2312 ià(
	gm_äame
 =ğ
rg‘F¿me
)

2313  
Œue
;

2318 ià(!
isDocum’tSªdboxed
(
SªdboxTİNavig©iÚ
è&& 
	grg‘F¿me
 =ğ
m_äame
->
Œ“
()->
tİ
())

2319  
Œue
;

2322 ià(
isDocum’tSªdboxed
(
SªdboxNavig©iÚ
è&& !
	grg‘F¿me
->
Œ“
()->
isDesûndªtOf
(
m_äame
))

2323  
	gçl£
;

2326 ià(!
	grg‘F¿me
->
Œ“
()->
·»Á
(è&& 
	gm_äame
->
lßd”
()->
İ’”
(è=ğ
rg‘F¿me
)

2327  
Œue
;

2329 
Docum’t
* 
	gaùiveDocum’t
 = 
m_äame
->
docum’t
();

2330 
ASSERT
(
aùiveDocum’t
);

2331 cÚ¡ 
Secur™yOrigš
* 
	gaùiveSecur™yOrigš
 = 
aùiveDocum’t
->
£cur™yOrigš
();

2334 ià(!
	grg‘F¿me
->
Œ“
()->
·»Á
(è&& 
ÿnAcûssAnû¡Ü
(
aùiveSecur™yOrigš
, 
rg‘F¿me
->
lßd”
()->
İ’”
()))

2335  
	gŒue
;

2338 ià(
ÿnAcûssAnû¡Ü
(
aùiveSecur™yOrigš
, 
rg‘F¿me
))

2339  
	gŒue
;

2341 
S‘tšgs
* 
	g£‰šgs
 = 
rg‘F¿me
->
£‰šgs
();

2342 ià(
	g£‰šgs
 && !£‰šgs->
´iv©eBrowsšgEÇbËd
()) {

2343 
Docum’t
* 
	grg‘Docum’t
 = 
rg‘F¿me
->
docum’t
();

2345 
SŒšg
 
	gmes§ge
 = SŒšg::
fÜm©
("Unsafe JavaScript‡ttempto initiate‡‚avigation change for frame with URL %s from frame with URL %s.\n",

2346 
rg‘Docum’t
->
u¾
().
¡ršg
().
utf8
().
d©a
(), 
aùiveDocum’t
->url().string().utf8().data());

2349 
	grg‘F¿me
->
domWšdow
()->
cÚsŞe
()->
addMes§ge
(
JSMes§geSourû
, 
LogMes§geTy³
, 
E¼ÜMes§geLev–
, 
mes§ge
, 1, 
SŒšg
());

2352  
	gçl£
;

2355 
	gF¿meLßd”
::
¡İLßdšgSubäames
()

2357 
RefPŒ
<
F¿me
> 
chd
 = 
m_äame
->
Œ“
()->
fœ¡Chd
(); 
	gchd
; chd = chd->Œ“()->
ÃxtSiblšg
())

2358 
chd
->
lßd”
()->
¡İAÎLßd”s
();

2361 
	gF¿meLßd”
::
¡İAÎLßd”s
(
D©aba£PŞicy
 
d©aba£PŞicy
)

2363 
ASSERT
(!
m_äame
->
docum’t
(è|| !m_äame->docum’t()->
šPageCache
());

2364 ià(
	gm_uÆßdEv’tBešgDi¥©ched
)

2368 ià(
	gm_šStİAÎLßd”s
)

2371 
	gm_šStİAÎLßd”s
 = 
Œue
;

2373 
pŞicyCheck”
()->
¡İCheck
();

2375 
¡İLßdšgSubäames
();

2376 ià(
	gm_´ovisiÚ®Docum’tLßd”
)

2377 
	gm_´ovisiÚ®Docum’tLßd”
->
¡İLßdšg
(
d©aba£PŞicy
);

2378 ià(
	gm_docum’tLßd”
)

2379 
	gm_docum’tLßd”
->
¡İLßdšg
(
d©aba£PŞicy
);

2381 
£tProvisiÚ®Docum’tLßd”
(0);

2383 ià(
	gm_docum’tLßd”
)

2384 
	gm_docum’tLßd”
->
ş—rArchiveResourûs
();

2386 
	gm_checkTim”
.
¡İ
();

2388 
	gm_šStİAÎLßd”s
 = 
çl£
;

2391 
	gF¿meLßd”
::
¡İFÜU£rCªûl
(
boŞ
 
deãrCheckLßdCom¶‘e
)

2393 
¡İAÎLßd”s
();

2395 ià(
	gdeãrCheckLßdCom¶‘e
)

2396 
scheduËCheckLßdCom¶‘e
();

2397 ià(
	gm_äame
->
·ge
())

2398 
checkLßdCom¶‘e
();

2401 
Docum’tLßd”
* 
	gF¿meLßd”
::
aùiveDocum’tLßd”
() const

2403 ià(
m_¡©e
 =ğ
F¿meS‹ProvisiÚ®
)

2404  
m_´ovisiÚ®Docum’tLßd”
.
g‘
();

2405  
	gm_docum’tLßd”
.
g‘
();

2408 
boŞ
 
	gF¿meLßd”
::
isLßdšg
() const

2410 
Docum’tLßd”
* 
docLßd”
 = 
aùiveDocum’tLßd”
();

2411 ià(!
	gdocLßd”
)

2412  
	gçl£
;

2413  
	gdocLßd”
->
isLßdšgMašResourû
(è|| docLßd”->
isLßdšgSub»sourûs
(è|| docLßd”->
isLßdšgPlugIns
();

2416 
boŞ
 
	gF¿meLßd”
::
äameHasLßded
() const

2418  
m_comm™‹dFœ¡R—lDocum’tLßd
 || (
m_´ovisiÚ®Docum’tLßd”
 && !
m_ü—tšgIn™ŸlEm±yDocum’t
);

2421 
	gF¿meLßd”
::
£tDocum’tLßd”
(
Docum’tLßd”
* 
lßd”
)

2423 ià(!
lßd”
 && !
m_docum’tLßd”
)

2426 
ASSERT
(
lßd”
 !ğ
m_docum’tLßd”
);

2427 
ASSERT
(!
lßd”
 ||†ßd”->
äameLßd”
(è=ğ
this
);

2429 
	gm_ş›Á
->
´•¬eFÜD©aSourûR•Ïûm’t
();

2430 
d‘achChd»n
();

2431 ià(
	gm_docum’tLßd”
)

2432 
	gm_docum’tLßd”
->
d‘achFromF¿me
();

2434 
	gm_docum’tLßd”
 = 
lßd”
;

2437 
	gF¿meLßd”
::
£tPŞicyDocum’tLßd”
(
Docum’tLßd”
* 
lßd”
)

2439 ià(
m_pŞicyDocum’tLßd”
 =ğ
lßd”
)

2442 
ASSERT
(
m_äame
);

2443 ià(
	glßd”
)

2444 
	glßd”
->
£tF¿me
(
m_äame
);

2445 ià(
	gm_pŞicyDocum’tLßd”


2446 && 
	gm_pŞicyDocum’tLßd”
 !ğ
m_´ovisiÚ®Docum’tLßd”


2447 && 
m_pŞicyDocum’tLßd”
 !ğ
m_docum’tLßd”
)

2448 
m_pŞicyDocum’tLßd”
->
d‘achFromF¿me
();

2450 
	gm_pŞicyDocum’tLßd”
 = 
lßd”
;

2453 
	gF¿meLßd”
::
£tProvisiÚ®Docum’tLßd”
(
Docum’tLßd”
* 
lßd”
)

2455 
ASSERT
(!
lßd”
 || !
m_´ovisiÚ®Docum’tLßd”
);

2456 
ASSERT
(!
lßd”
 ||†ßd”->
äameLßd”
(è=ğ
this
);

2458 ià(
	gm_´ovisiÚ®Docum’tLßd”
 && m_´ovisiÚ®Docum’tLßd” !ğ
m_docum’tLßd”
)

2459 
m_´ovisiÚ®Docum’tLßd”
->
d‘achFromF¿me
();

2461 
	gm_´ovisiÚ®Docum’tLßd”
 = 
lßd”
;

2464 
	gF¿meLßd”
::
timeOfLa¡Com¶‘edLßd
()

2466  
¡ÜedTimeOfLa¡Com¶‘edLßd
;

2469 
	gF¿meLßd”
::
£tS‹
(
F¿meS‹
 
ÃwS‹
)

2471 
m_¡©e
 = 
ÃwS‹
;

2473 ià(
	gÃwS‹
 =ğ
F¿meS‹ProvisiÚ®
)

2474 
´ovisiÚ®LßdS¹ed
();

2475 ià(
	gÃwS‹
 =ğ
F¿meS‹Com¶‘e
) {

2476 
äameLßdCom¶‘ed
();

2477 
	g¡ÜedTimeOfLa¡Com¶‘edLßd
 = 
cu¼’tTime
();

2478 ià(
	gm_docum’tLßd”
)

2479 
	gm_docum’tLßd”
->
¡İRecÜdšgRe¥Ú£s
();

2483 
	gF¿meLßd”
::
ş—rProvisiÚ®Lßd
()

2485 
£tProvisiÚ®Docum’tLßd”
(0);

2486 ià(
Page
* 
	g·ge
 = 
m_äame
->
·ge
())

2487 
·ge
->
´og»ss
()->
´og»ssCom¶‘ed
(
m_äame
);

2488 
£tS‹
(
F¿meS‹Com¶‘e
);

2491 
	gF¿meLßd”
::
m¬kLßdCom¶‘e
()

2493 
£tS‹
(
F¿meS‹Com¶‘e
);

2496 
	gF¿meLßd”
::
comm™ProvisiÚ®Lßd
(
PassRefPŒ
<
CachedPage
> 
´pCachedPage
)

2498 
RefPŒ
<
CachedPage
> 
ÿchedPage
 = 
´pCachedPage
;

2499 
	gRefPŒ
<
	gDocum’tLßd”
> 
	gpdl
 = 
m_´ovisiÚ®Docum’tLßd”
;

2501 
LOG
(
PageCache
, "WebCÜeLßdšg %s: AbouˆtØcomm™…rovisiÚ®†ßd from…»viou URL '%s'ØÃw URL '%s'", 
m_äame
->
Œ“
()->
Çme
().
¡ršg
().
utf8
().
d©a
(), 
m_URL
.string().utf8().data(),

2502 
pdl
 ?…dl->
u¾
().
¡ršg
().
utf8
().
d©a
() : "<no…rovisional DocumentLoader>");

2506 
ÿchePageFÜHi¡ÜyI‹m
(
hi¡Üy
()->
cu¼’tI‹m
());

2508 ià(
	gm_lßdTy³
 !ğ
F¿meLßdTy³R•Ïû
)

2509 
şo£OldD©aSourûs
();

2511 ià(!
	gÿchedPage
 && !
	gm_ü—tšgIn™ŸlEm±yDocum’t
)

2512 
	gm_ş›Á
->
makeR•»£Á©iÚ
(
pdl
.
g‘
());

2514 
Œªs™iÚToComm™‹d
(
ÿchedPage
);

2520 ià(
	gm_£ÁRedœeùNÙifiÿtiÚ
)

2521 
ş›ÁRedœeùCªûÎedOrFšished
(
çl£
);

2523 ià(
	gÿchedPage
 && cachedPage->
docum’t
())

2524 
İ’
(*
ÿchedPage
);

2526 
KURL
 
	gu¾
 = 
pdl
->
sub¡™u‹D©a
().
»¥Ú£URL
();

2527 ià(
	gu¾
.
isEm±y
())

2528 
	gu¾
 = 
pdl
->
u¾
();

2529 ià(
	gu¾
.
isEm±y
())

2530 
	gu¾
 = 
pdl
->
»¥Ú£URL
();

2531 ià(
	gu¾
.
isEm±y
())

2532 
	gu¾
 = 
bÏnkURL
();

2534 
didO³nURL
(
u¾
);

2537 
LOG
(
Lßdšg
, "WebCÜeLßdšg %s: Fšished comm™tšg…rovisiÚ®†ßdØURL %s", 
m_äame
->
Œ“
()->
Çme
().
¡ršg
().
utf8
().
d©a
(), 
m_URL
.string().utf8().data());

2539 ià(
	gm_lßdTy³
 =ğ
F¿meLßdTy³Snd¬d
 && 
m_docum’tLßd”
->
isCl›ÁRedœeù
())

2540 
hi¡Üy
()->
upd©eFÜCl›ÁRedœeù
();

2542 ià(
	gm_lßdšgFromCachedPage
) {

2543 
	gm_äame
->
docum’t
()->
docum’tDidBecomeAùive
();

2546 
	gm_äame
->
v›w
()->
fÜûLayout
();

2548 cÚ¡ 
	gRe¥Ú£VeùÜ
& 
	g»¥Ú£s
 = 
m_docum’tLßd”
->
»¥Ú£s
();

2549 
size_t
 
	gcouÁ
 = 
»¥Ú£s
.
size
();

2550 
size_t
 
	gi
 = 0; i < 
	gcouÁ
; i++) {

2551 cÚ¡ 
	gResourûRe¥Ú£
& 
	g»¥Ú£
 = 
»¥Ú£s
[
i
];

2553 
ResourûE¼Ü
 
	g”rÜ
;

2554 
	gid’tif›r
;

2555 
ResourûReque¡
 
»que¡
(
»¥Ú£
.
u¾
());

2556 
»que¡FromD–eg©e
(
»que¡
, 
id’tif›r
, 
”rÜ
);

2560 
nÙif›r
()->
£ndRemaššgD–eg©eMes§ges
(
m_docum’tLßd”
.
g‘
(), 
id’tif›r
, 
»¥Ú£
, 
¡©ic_ÿ¡
<>Ôe¥Ú£.
ex³ùedCÚ‹ÁL’gth
()), 
”rÜ
);

2563 
·geCache
()->
»move
(
hi¡Üy
()->
cu¼’tI‹m
());

2565 
	gm_docum’tLßd”
->
£tPrim¬yLßdCom¶‘e
(
Œue
);

2568 
checkLßdCom¶‘eFÜThisF¿me
();

2572 
	gF¿meLßd”
::
Œªs™iÚToComm™‹d
(
PassRefPŒ
<
CachedPage
> 
ÿchedPage
)

2574 
ASSERT
(
m_ş›Á
->
hasWebV›w
());

2575 
ASSERT
(
m_¡©e
 =ğ
F¿meS‹ProvisiÚ®
);

2577 ià(
	gm_¡©e
 !ğ
F¿meS‹ProvisiÚ®
)

2580 
	gm_ş›Á
->
£tCİ›sOnSüŞl
();

2581 
hi¡Üy
()->
upd©eFÜComm™
();

2586 
Docum’tLßd”
* 
	gpdl
 = 
m_´ovisiÚ®Docum’tLßd”
.
g‘
();

2587 ià(
	gm_docum’tLßd”
)

2588 
şo£URL
();

2589 ià(
	gpdl
 !ğ
m_´ovisiÚ®Docum’tLßd”
)

2593 ià(
	gm_docum’tLßd”
)

2594 
	gm_docum’tLßd”
->
¡İLßdšgSub»sourûs
();

2595 ià(
	gm_docum’tLßd”
)

2596 
	gm_docum’tLßd”
->
¡İLßdšgPlugIns
();

2598 
£tDocum’tLßd”
(
m_´ovisiÚ®Docum’tLßd”
.
g‘
());

2599 
£tProvisiÚ®Docum’tLßd”
(0);

2600 
£tS‹
(
F¿meS‹Comm™‹dPage
);

2603 
Docum’tLßd”
* 
	gdl
 = 
m_docum’tLßd”
.
g‘
();

2604 
SŒšg
 
	g±™Ë
 = 
dl
->
t™Ë
();

2606 
	gm_lßdTy³
) {

2607 
	gF¿meLßdTy³FÜw¬d
:

2608 
F¿meLßdTy³Back
:

2609 
F¿meLßdTy³BackWMLDeckNÙAcûssibË
:

2610 
F¿meLßdTy³IndexedBackFÜw¬d
:

2611 ià(
Page
* 
·ge
 = 
m_äame
->page()) {

2612 ià(
·ge
->
backFÜw¬dLi¡
()) {

2613 
hi¡Üy
()->
upd©eFÜBackFÜw¬dNavig©iÚ
();

2615 ià(
hi¡Üy
()->
cu¼’tI‹m
())

2616 
	gm_³ndšgS‹Objeù
 = 
hi¡Üy
()->
cu¼’tI‹m
()->
¡©eObjeù
();

2619 ià(
	gÿchedPage
) {

2620 
Docum’tLßd”
* 
	gÿchedDocum’tLßd”
 = 
ÿchedPage
->
docum’tLßd”
();

2621 
ASSERT
(
ÿchedDocum’tLßd”
);

2622 
	gÿchedDocum’tLßd”
->
£tF¿me
(
m_äame
);

2623 
	gm_ş›Á
->
Œªs™iÚToComm™‹dFromCachedF¿me
(
ÿchedPage
->
ÿchedMašF¿me
());

2626 
	gm_ş›Á
->
Œªs™iÚToComm™‹dFÜNewPage
();

2631 
	gF¿meLßdTy³R–ßd
:

2632 
F¿meLßdTy³R–ßdFromOrigš
:

2633 
F¿meLßdTy³Same
:

2634 
F¿meLßdTy³R•Ïû
:

2635 
hi¡Üy
()->
upd©eFÜR–ßd
();

2636 
	gm_ş›Á
->
Œªs™iÚToComm™‹dFÜNewPage
();

2639 
	gF¿meLßdTy³Snd¬d
:

2640 
hi¡Üy
()->
upd©eFÜSnd¬dLßd
();

2641 #iâdeà
BUILDING_ON_TIGER


2644 ià(
	gm_äame
->
v›w
())

2645 
	gm_äame
->
v›w
()->
£tSüŞlb¬sSuµ»s£d
(
Œue
);

2647 
	gm_ş›Á
->
Œªs™iÚToComm™‹dFÜNewPage
();

2650 
	gF¿meLßdTy³RedœeùW™hLockedBackFÜw¬dLi¡
:

2651 
hi¡Üy
()->
upd©eFÜRedœeùW™hLockedBackFÜw¬dLi¡
();

2652 
	gm_ş›Á
->
Œªs™iÚToComm™‹dFÜNewPage
();

2658 
ASSERT_NOT_REACHED
();

2661 
	gm_»¥Ú£MIMETy³
 = 
dl
->
»¥Ú£MIMETy³
();

2664 
ASSERT
(
m_äame
->
v›w
());

2666 ià(
	gm_ü—tšgIn™ŸlEm±yDocum’t
)

2669 
	gm_comm™‹dFœ¡R—lDocum’tLßd
 = 
Œue
;

2671 ià(!
	gm_ş›Á
->
hasHTMLV›w
())

2672 
»ûivedFœ¡D©a
();

2673 ià(
	gÿchedPage
) {

2675 
di¥©chDidComm™Lßd
();

2678 ià(!
	g±™Ë
.
isNuÎ
())

2679 
	gm_ş›Á
->
di¥©chDidReûiveT™Ë
(
±™Ë
);

2683 
	gF¿meLßd”
::
ş›ÁRedœeùCªûÎedOrFšished
(
boŞ
 
ÿnûlW™hLßdInProg»ss
)

2688 
m_ş›Á
->
di¥©chDidCªûlCl›ÁRedœeù
();

2690 ià(!
	gÿnûlW™hLßdInProg»ss
)

2691 
	gm_quickRedœeùComšg
 = 
çl£
;

2693 
	gm_£ÁRedœeùNÙifiÿtiÚ
 = 
çl£
;

2696 
	gF¿meLßd”
::
ş›ÁRedœeùed
(cÚ¡ 
KURL
& 
u¾
, 
£cÚds
, 
fœeD©e
, 
boŞ
 
lockBackFÜw¬dLi¡
)

2698 
	gm_ş›Á
->
di¥©chWlP”fÜmCl›ÁRedœeù
(
u¾
, 
£cÚds
, 
fœeD©e
);

2702 
	gm_£ÁRedœeùNÙifiÿtiÚ
 = 
Œue
;

2708 
	gm_quickRedœeùComšg
 = 
lockBackFÜw¬dLi¡
 && 
m_docum’tLßd”
 && !
m_isExecutšgJavaSütFÜmAùiÚ
;

2711 
boŞ
 
	gF¿meLßd”
::
shouldR–ßd
(cÚ¡ 
KURL
& 
cu¼’tURL
, cÚ¡ KURL& 
de¡š©iÚURL
)

2713 #ià
ENABLE
(
WML
)

2715 ià(
äameCÚšsWMLCÚ‹Á
(
m_äame
))

2716  
	gŒue
;

2722 ià(!
	gde¡š©iÚURL
.
hasF¿gm’tId’tif›r
())

2723  
	gŒue
;

2724  !
equ®IgnÜšgF¿gm’tId’tif›r
(
cu¼’tURL
, 
de¡š©iÚURL
);

2727 
	gF¿meLßd”
::
şo£OldD©aSourûs
()

2732 
F¿me
* 
chd
 = 
m_äame
->
Œ“
()->
fœ¡Chd
(); 
	gchd
; chd = chd->Œ“()->
ÃxtSiblšg
())

2733 
chd
->
lßd”
()->
şo£OldD©aSourûs
();

2735 ià(
	gm_docum’tLßd”
)

2736 
	gm_ş›Á
->
di¥©chWlClo£
();

2738 
	gm_ş›Á
->
£tMašF¿meDocum’tR—dy
(
çl£
);

2741 
	gF¿meLßd”
::
İ’
(
CachedPage
& 
ÿchedPage
)

2743 
ASSERT
(!
m_äame
->
Œ“
()->
·»Á
());

2744 
ASSERT
(
m_äame
->
·ge
());

2745 
ASSERT
(
m_äame
->
·ge
()->
mašF¿me
() == m_frame);

2747 
	gm_äame
->
»dœeùScheduËr
()->
ÿnûl
();

2750 
şo£URL
();

2753 ià(
	gm_äame
->
süt
()->
ÿnExecu‹Süts
(
NÙAboutToExecu‹Süt
)) {

2754 
	gm_äame
->
£tJSStusB¬Text
(
SŒšg
());

2755 
	gm_äame
->
£tJSDeçuÉStusB¬Text
(
SŒšg
());

2758 
	gÿchedPage
.
»¡Üe
(
m_äame
->
·ge
());

2760 
checkCom¶‘ed
();

2763 
	gF¿meLßd”
::
İ’
(
CachedF¿meBa£
& 
ÿchedF¿me
)

2765 
m_isCom¶‘e
 = 
çl£
;

2768 
	gm_didC®lIm¶ic™Clo£
 = 
Œue
;

2770 
KURL
 
	gu¾
 = 
ÿchedF¿me
.
u¾
();

2772 ià(
	gu¾
.
´ÙocŞInHTTPFamy
(è&& !u¾.
ho¡
().
isEm±y
(è&& u¾.
·th
().isEmpty())

2773 
	gu¾
.
£tP©h
("/");

2775 
	gm_URL
 = 
u¾
;

2776 
	gm_wÜkšgURL
 = 
u¾
;

2778 
¡¬‹d
();

2779 
ş—r
(
Œue
,rue, 
ÿchedF¿me
.
isMašF¿me
());

2781 
Docum’t
* 
	gdocum’t
 = 
ÿchedF¿me
.
docum’t
();

2782 
ASSERT
(
docum’t
);

2783 
	gdocum’t
->
£tInPageCache
(
çl£
);

2785 
	gm_ÃedsCË¬
 = 
Œue
;

2786 
	gm_isCom¶‘e
 = 
çl£
;

2787 
	gm_didC®lIm¶ic™Clo£
 = 
çl£
;

2788 
	gm_outgošgReã¼”
 = 
u¾
.
¡ršg
();

2790 
F¿meV›w
* 
	gv›w
 = 
ÿchedF¿me
.
v›w
();

2793 
ASSERT
(
v›w
);

2794 
	gv›w
->
£tWasSüŞËdByU£r
(
çl£
);

2797 ià(
	gm_äame
->
v›w
())

2798 
	gv›w
->
£tF¿meReù
(
m_äame
->
v›w
()->
äameReù
());

2799 
	gm_äame
->
£tV›w
(
v›w
);

2801 
	gm_äame
->
£tDocum’t
(
docum’t
);

2802 
	gm_äame
->
£tDOMWšdow
(
ÿchedF¿me
.
domWšdow
());

2803 
	gm_äame
->
domWšdow
()->
£tURL
(
docum’t
->
u¾
());

2804 
	gm_äame
->
domWšdow
()->
£tSecur™yOrigš
(
docum’t
->
£cur™yOrigš
());

2806 
	gm_decod”
 = 
docum’t
->
decod”
();

2808 
upd©eFœ¡P¬tyFÜCook›s
();

2810 
	gÿchedF¿me
.
»¡Üe
();

2813 
boŞ
 
	gF¿meLßd”
::
isStİpšg
() const

2815  
aùiveDocum’tLßd”
()->
isStİpšg
();

2818 
	gF¿meLßd”
::
fšishedLßdšg
()

2821 
RefPŒ
<
F¿me
> 
´Ùeù
(
m_äame
);

2823 
	gRefPŒ
<
	gDocum’tLßd”
> 
	gdl
 = 
aùiveDocum’tLßd”
();

2824 
	gdl
->
fšishedLßdšg
();

2825 ià(!
	gdl
->
mašDocum’tE¼Ü
().
isNuÎ
(è|| !dl->
äameLßd”
())

2827 
	gdl
->
£tPrim¬yLßdCom¶‘e
(
Œue
);

2828 
	gm_ş›Á
->
di¥©chDidLßdMašResourû
(
dl
.
g‘
());

2829 
checkLßdCom¶‘e
();

2832 
boŞ
 
	gF¿meLßd”
::
isHo¡edByObjeùEËm’t
() const

2834 
HTMLF¿meOwÃrEËm’t
* 
owÃr
 = 
m_äame
->
owÃrEËm’t
();

2835  
	gowÃr
 && owÃr->
hasTagName
(
objeùTag
);

2838 
boŞ
 
	gF¿meLßd”
::
isLßdšgMašF¿me
() const

2840 
Page
* 
·ge
 = 
m_äame
->page();

2841  
	g·ge
 && 
	gm_äame
 =ğ
·ge
->
mašF¿me
();

2844 
boŞ
 
	gF¿meLßd”
::
ÿnShowMIMETy³
(cÚ¡ 
SŒšg
& 
MIMETy³
) const

2846  
m_ş›Á
->
ÿnShowMIMETy³
(
MIMETy³
);

2849 
boŞ
 
	gF¿meLßd”
::
»´e£Á©iÚExi¡sFÜURLScheme
(cÚ¡ 
SŒšg
& 
URLScheme
)

2851  
m_ş›Á
->
»´e£Á©iÚExi¡sFÜURLScheme
(
URLScheme
);

2854 
SŒšg
 
	gF¿meLßd”
::
g’”©edMIMETy³FÜURLScheme
(cÚ¡ SŒšg& 
URLScheme
)

2856  
m_ş›Á
->
g’”©edMIMETy³FÜURLScheme
(
URLScheme
);

2859 
	gF¿meLßd”
::
didReûiveS”v”RedœeùFÜProvisiÚ®LßdFÜF¿me
()

2861 
m_ş›Á
->
di¥©chDidReûiveS”v”RedœeùFÜProvisiÚ®Lßd
();

2864 
	gF¿meLßd”
::
fšishedLßdšgDocum’t
(
Docum’tLßd”
* 
lßd”
)

2867 #ià
PLATFORM
(
WIN
è|| PLATFORM(
CHROMIUM
)

2868 ià(
m_ü—tšgIn™ŸlEm±yDocum’t
)

2873 cÚ¡ 
	gSŒšg
& 
	g»¥Ú£MIMETy³
 = 
lßd”
->
»¥Ú£MIMETy³
();

2878 #ià
PLATFORM
(
MAC
)

2879 
	gm_ş›Á
->
fšishedLßdšg
(
lßd”
);

2880 ià(!
	gArchiveFaùÜy
::
isArchiveMimeTy³
(
»¥Ú£MIMETy³
))

2883 ià(!
	gArchiveFaùÜy
::
isArchiveMimeTy³
(
»¥Ú£MIMETy³
)) {

2884 
m_ş›Á
->
fšishedLßdšg
(
lßd”
);

2889 
	gRefPŒ
<
	gArchive
> 
¬chive
(
ArchiveFaùÜy
::
ü—‹
(
lßd”
->
mašResourûD©a
().
g‘
(), 
»¥Ú£MIMETy³
));

2890 ià(!
	g¬chive
)

2893 
	glßd”
->
addAÎArchiveResourûs
(
¬chive
.
g‘
());

2895 
ArchiveResourû
* 
	gmašResourû
 = 
¬chive
->
mašResourû
();

2896 
	glßd”
->
£tP¬£dArchiveD©a
(
mašResourû
->
d©a
());

2898 
	gm_»¥Ú£MIMETy³
 = 
mašResourû
->
mimeTy³
();

2900 
şo£URL
();

2901 
didO³nURL
(
mašResourû
->
u¾
());

2903 
SŒšg
 
	gu£rCho£nEncodšg
 = 
docum’tLßd”
()->
ov”rideEncodšg
();

2904 
boŞ
 
	g’codšgIsU£rCho£n
 = !
u£rCho£nEncodšg
.
isNuÎ
();

2905 
£tEncodšg
(
’codšgIsU£rCho£n
 ? 
u£rCho£nEncodšg
 : 
mašResourû
->
‹xtEncodšg
(),ƒncodingIsUserChosen);

2907 
ASSERT
(
m_äame
->
docum’t
());

2909 
addD©a
(
mašResourû
->
d©a
()->d©a(), mašResourû->d©a()->
size
());

2912 
boŞ
 
	gF¿meLßd”
::
isR•Ïcšg
() const

2914  
m_lßdTy³
 =ğ
F¿meLßdTy³R•Ïû
;

2917 
	gF¿meLßd”
::
£tR•Ïcšg
()

2919 
m_lßdTy³
 = 
F¿meLßdTy³R•Ïû
;

2922 
	gF¿meLßd”
::
»v”tToProvisiÚ®
(
Docum’tLßd”
* 
lßd”
)

2924 
m_ş›Á
->
»v”tToProvisiÚ®S‹
(
lßd”
);

2927 
boŞ
 
	gF¿meLßd”
::
subäameIsLßdšg
() const

2930 
F¿me
* 
chd
 = 
m_äame
->
Œ“
()->
Ï¡Chd
(); 
	gchd
; chd = chd->Œ“()->
´eviousSiblšg
()) {

2931 
F¿meLßd”
* 
chdLßd”
 = 
chd
->
lßd”
();

2932 
Docum’tLßd”
* 
	gdocum’tLßd”
 = 
chdLßd”
->
docum’tLßd”
();

2933 ià(
	gdocum’tLßd”
 && docum’tLßd”->
isLßdšgInAPIS’£
())

2934  
	gŒue
;

2935 
	gdocum’tLßd”
 = 
chdLßd”
->
´ovisiÚ®Docum’tLßd”
();

2936 ià(
	gdocum’tLßd”
 && docum’tLßd”->
isLßdšgInAPIS’£
())

2937  
	gŒue
;

2939  
	gçl£
;

2942 
	gF¿meLßd”
::
wlChªgeT™Ë
(
Docum’tLßd”
* 
lßd”
)

2944 
m_ş›Á
->
wlChªgeT™Ë
(
lßd”
);

2947 
F¿meLßdTy³
 
	gF¿meLßd”
::
lßdTy³
() const

2949  
m_lßdTy³
;

2952 
CachePŞicy
 
	gF¿meLßd”
::
sub»sourûCachePŞicy
() const

2954 ià(
m_isCom¶‘e
)

2955  
CachePŞicyV”ify
;

2957 ià(
	gm_lßdTy³
 =ğ
F¿meLßdTy³R–ßdFromOrigš
)

2958  
CachePŞicyR–ßd
;

2960 ià(
F¿me
* 
	g·»ÁF¿me
 = 
m_äame
->
Œ“
()->
·»Á
()) {

2961 
CachePŞicy
 
·»ÁCachePŞicy
 = 
·»ÁF¿me
->
lßd”
()->
sub»sourûCachePŞicy
();

2962 ià(
	g·»ÁCachePŞicy
 !ğ
CachePŞicyV”ify
)

2963  
·»ÁCachePŞicy
;

2970 cÚ¡ 
	gResourûReque¡
& 
»que¡
(
docum’tLßd”
()->request());

2971 ià(
	g»que¡
.
ÿchePŞicy
(è=ğ
R–ßdIgnÜšgCacheD©a
 && !
equ®IgnÜšgCa£
(
»que¡
.
h‰pM‘hod
(), "post"))

2972  
	gCachePŞicyRev®id©e
;

2974 ià(
	gm_lßdTy³
 =ğ
F¿meLßdTy³R–ßd
)

2975  
CachePŞicyRev®id©e
;

2977 ià(
	g»que¡
.
ÿchePŞicy
(è=ğ
R‘uºCacheD©aEl£Lßd
)

2978  
CachePŞicyAÎowSË
;

2980  
	gCachePŞicyV”ify
;

2983 
	gF¿meLßd”
::
checkLßdCom¶‘eFÜThisF¿me
()

2985 
ASSERT
(
m_ş›Á
->
hasWebV›w
());

2987 
	gm_¡©e
) {

2988 
	gF¿meS‹ProvisiÚ®
: {

2989 ià(
m_d–eg©eIsHªdlšgProvisiÚ®LßdE¼Ü
)

2992 
	gRefPŒ
<
	gDocum’tLßd”
> 
	gpdl
 = 
m_´ovisiÚ®Docum’tLßd”
;

2993 ià(!
	gpdl
)

2997 cÚ¡ 
	gResourûE¼Ü
& 
	g”rÜ
 = 
pdl
->
mašDocum’tE¼Ü
();

2998 ià(
	g”rÜ
.
isNuÎ
())

3002 
	gRefPŒ
<
	gHi¡ÜyI‹m
> 
	g™em
;

3003 ià(
Page
* 
	g·ge
 = 
m_äame
->
·ge
())

3004 ià(
isBackFÜw¬dLßdTy³
(
lßdTy³
()è&& 
m_äame
 =ğ
·ge
->
mašF¿me
())

3005 
™em
 = 
hi¡Üy
()->
cu¼’tI‹m
();

3007 
boŞ
 
	gshouldRe£t
 = 
Œue
;

3008 ià(!(
	gpdl
->
isLßdšgInAPIS’£
(è&& !pdl->
isStİpšg
())) {

3009 
	gm_d–eg©eIsHªdlšgProvisiÚ®LßdE¼Ü
 = 
Œue
;

3010 
	gm_ş›Á
->
di¥©chDidFaProvisiÚ®Lßd
(
”rÜ
);

3011 
	gm_d–eg©eIsHªdlšgProvisiÚ®LßdE¼Ü
 = 
çl£
;

3016 
¡İLßdšgSubäames
();

3017 
	gpdl
->
¡İLßdšg
();

3020 ià(
isR•Ïcšg
(è&& !
	gm_docum’tLßd”
.
g‘
())

3021 
£tDocum’tLßd”
(
m_´ovisiÚ®Docum’tLßd”
.
g‘
());

3025 ià(
	gpdl
 =ğ
m_´ovisiÚ®Docum’tLßd”
)

3026 
ş—rProvisiÚ®Lßd
();

3027 ià(
aùiveDocum’tLßd”
()) {

3028 
KURL
 
	guÄ—chabËURL
 = 
aùiveDocum’tLßd”
()->
uÄ—chabËURL
();

3029 ià(!
	guÄ—chabËURL
.
isEm±y
(è&& uÄ—chabËURL =ğ
pdl
->
»que¡
().
u¾
())

3030 
shouldRe£t
 = 
çl£
;

3033 ià(
	gshouldRe£t
 && 
	g™em
)

3034 ià(
Page
* 
	g·ge
 = 
m_äame
->
·ge
()) {

3035 
·ge
->
backFÜw¬dLi¡
()->
goToI‹m
(
™em
.
g‘
());

3036 
S‘tšgs
* 
	g£‰šgs
 = 
m_äame
->
£‰šgs
();

3037 
	g·ge
->
£tGlob®Hi¡ÜyI‹m
((!
£‰šgs
 || s‘tšgs->
´iv©eBrowsšgEÇbËd
()è? 0 : 
™em
.
g‘
());

3042 
	gF¿meS‹Comm™‹dPage
: {

3043 
Docum’tLßd”
* 
dl
 = 
m_docum’tLßd”
.
g‘
();

3044 ià(!
	gdl
 || (dl->
isLßdšgInAPIS’£
(è&& !dl->
isStİpšg
()))

3047 
m¬kLßdCom¶‘e
();

3053 
	gm_ş›Á
->
fÜûLayoutFÜNÚHTML
();

3056 ià(
Page
* 
	g·ge
 = 
m_äame
->
·ge
())

3057 ià((
isBackFÜw¬dLßdTy³
(
m_lßdTy³
è|| m_lßdTy³ =ğ
F¿meLßdTy³R–ßd
 || m_lßdTy³ =ğ
F¿meLßdTy³R–ßdFromOrigš
è&& 
·ge
->
backFÜw¬dLi¡
())

3058 
hi¡Üy
()->
»¡ÜeSüŞlPos™iÚAndV›wS‹
();

3060 ià(
	gm_ü—tšgIn™ŸlEm±yDocum’t
 || !
	gm_comm™‹dFœ¡R—lDocum’tLßd
)

3063 cÚ¡ 
	gResourûE¼Ü
& 
	g”rÜ
 = 
dl
->
mašDocum’tE¼Ü
();

3064 #iâdeà
NDEBUG


3065 
	gm_didDi¥©chDidComm™Lßd
 = 
çl£
;

3067 ià(!
	g”rÜ
.
isNuÎ
())

3068 
	gm_ş›Á
->
di¥©chDidFaLßd
(
”rÜ
);

3070 
	gm_ş›Á
->
di¥©chDidFšishLßd
();

3072 ià(
Page
* 
	g·ge
 = 
m_äame
->
·ge
())

3073 
·ge
->
´og»ss
()->
´og»ssCom¶‘ed
(
m_äame
);

3077 
	gF¿meS‹Com¶‘e
:

3078 
äameLßdCom¶‘ed
();

3082 
ASSERT_NOT_REACHED
();

3085 
	gF¿meLßd”
::
cÚtšueLßdAá”WlSubm™FÜm
()

3087 ià(!
m_´ovisiÚ®Docum’tLßd”
)

3091 
	gm_´ovisiÚ®Docum’tLßd”
->
´•¬eFÜLßdS¹
();

3095 ià(!
	gm_´ovisiÚ®Docum’tLßd”
)

3098 
Docum’tLßd”
* 
	gaùiveDocLßd”
 = 
aùiveDocum’tLßd”
();

3099 ià(
	gaùiveDocLßd”
 &&‡ùiveDocLßd”->
isLßdšgMašResourû
())

3102 
	gm_lßdšgFromCachedPage
 = 
çl£
;

3104 
	gid’tif›r
 = 0;

3106 ià(
Page
* 
	g·ge
 = 
m_äame
->
·ge
()) {

3107 
id’tif›r
 = 
·ge
->
´og»ss
()->
ü—‹UniqueId’tif›r
();

3108 
nÙif›r
()->
assignId’tif›rToIn™ŸlReque¡
(
id’tif›r
, 
m_´ovisiÚ®Docum’tLßd”
.
g‘
(), m_´ovisiÚ®Docum’tLßd”->
Üigš®Reque¡
());

3111 ià(!
	gm_´ovisiÚ®Docum’tLßd”
->
¡¬tLßdšgMašResourû
(
id’tif›r
))

3112 
	gm_´ovisiÚ®Docum’tLßd”
->
upd©eLßdšg
();

3115 
	gF¿meLßd”
::
didFœ¡Layout
()

3117 ià(
Page
* 
·ge
 = 
m_äame
->page())

3118 ià(
isBackFÜw¬dLßdTy³
(
m_lßdTy³
è&& 
·ge
->
backFÜw¬dLi¡
())

3119 
hi¡Üy
()->
»¡ÜeSüŞlPos™iÚAndV›wS‹
();

3121 
	gm_fœ¡LayoutDÚe
 = 
Œue
;

3122 
	gm_ş›Á
->
di¥©chDidFœ¡Layout
();

3125 
	gF¿meLßd”
::
didFœ¡Visu®lyNÚEm±yLayout
()

3127 
m_ş›Á
->
di¥©chDidFœ¡Visu®lyNÚEm±yLayout
();

3130 
	gF¿meLßd”
::
äameLßdCom¶‘ed
()

3134 
m_ş›Á
->
äameLßdCom¶‘ed
();

3136 
hi¡Üy
()->
upd©eFÜF¿meLßdCom¶‘ed
();

3140 ià(
	gm_docum’tLßd”
)

3141 
	gm_fœ¡LayoutDÚe
 = 
Œue
;

3144 
boŞ
 
	gF¿meLßd”
::
fœ¡LayoutDÚe
() const

3146  
m_fœ¡LayoutDÚe
;

3149 
	gF¿meLßd”
::
d‘achChd»n
()

3152 
F¿me
* 
´evious
;

3153 
F¿me
* 
	gchd
 = 
m_äame
->
Œ“
()->
Ï¡Chd
(); chd; chd = 
´evious
) {

3154 
´evious
 = 
chd
->
Œ“
()->
´eviousSiblšg
();

3155 
	gchd
->
lßd”
()->
d‘achFromP¬’t
();

3159 
	gF¿meLßd”
::
şo£AndRemoveChd
(
F¿me
* 
chd
)

3161 
chd
->
Œ“
()->
d‘achFromP¬’t
();

3163 
	gchd
->
£tV›w
(0);

3164 ià(
	gchd
->
owÃrEËm’t
(è&& chd->
·ge
())

3165 
	gchd
->
·ge
()->
deüem’tF¿meCouÁ
();

3166 
	gchd
->
·geDe¡royed
();

3168 
	gm_äame
->
Œ“
()->
»moveChd
(
chd
);

3171 
	gF¿meLßd”
::
»cursiveCheckLßdCom¶‘e
()

3173 
VeùÜ
<
RefPŒ
<
F¿me
>, 10> 
	gäames
;

3175 
	gRefPŒ
<
	gF¿me
> 
	gäame
 = 
m_äame
->
Œ“
()->
fœ¡Chd
(); f¿me; f¿mğ
äame
->Œ“()->
ÃxtSiblšg
())

3176 
äames
.
­³nd
(
äame
);

3178 
	gsize
 = 
äames
.
size
();

3179 
	gi
 = 0; i < 
	gsize
; i++)

3180 
	gäames
[
i
]->
lßd”
()->
»cursiveCheckLßdCom¶‘e
();

3182 
checkLßdCom¶‘eFÜThisF¿me
();

3186 
	gF¿meLßd”
::
checkLßdCom¶‘e
()

3188 
ASSERT
(
m_ş›Á
->
hasWebV›w
());

3190 
	gm_shouldC®lCheckLßdCom¶‘e
 = 
çl£
;

3194 ià(
Page
* 
	g·ge
 = 
m_äame
->
·ge
())

3195 
·ge
->
mašF¿me
()->
lßd”
()->
»cursiveCheckLßdCom¶‘e
();

3198 
	gF¿meLßd”
::
numP’dšgOrLßdšgReque¡s
(
boŞ
 
»cur£
) const

3200 ià(!
»cur£
)

3201  
numReque¡s
(
m_äame
->
docum’t
());

3203 
	gcouÁ
 = 0;

3204 
F¿me
* 
	gäame
 = 
m_äame
; f¿me; f¿mğ
äame
->
Œ“
()->
Œav”£Next
(m_frame))

3205 
couÁ
 +ğ
numReque¡s
(
äame
->
docum’t
());

3206  
	gcouÁ
;

3209 
SŒšg
 
	gF¿meLßd”
::
u£rAg’t
(cÚ¡ 
KURL
& 
u¾
) const

3211  
m_ş›Á
->
u£rAg’t
(
u¾
);

3214 
	gF¿meLßd”
::
tok’iz”Proûs£dD©a
()

3216 
checkCom¶‘ed
();

3219 
	gF¿meLßd”
::
hªdËdOÆßdEv’ts
()

3221 
m_ş›Á
->
di¥©chDidHªdËOÆßdEv’ts
();

3222 #ià
ENABLE
(
OFFLINE_WEB_APPLICATIONS
)

3223 ià(
docum’tLßd”
())

3224 
docum’tLßd”
()->
­¶iÿtiÚCacheHo¡
()->
¡İDeã¼šgEv’ts
();

3228 
	gF¿meLßd”
::
äameD‘ached
()

3230 
¡İAÎLßd”s
();

3231 
	gm_äame
->
docum’t
()->
¡İAùiveDOMObjeùs
();

3232 
d‘achFromP¬’t
();

3235 
	gF¿meLßd”
::
d‘achFromP¬’t
()

3237 
RefPŒ
<
F¿me
> 
´Ùeù
(
m_äame
);

3239 
şo£URL
();

3240 
¡İAÎLßd”s
();

3241 
hi¡Üy
()->
§veSüŞlPos™iÚAndV›wS‹ToI‹m
(hi¡Üy()->
cu¼’tI‹m
());

3242 
d‘achChd»n
();

3244 #ià
ENABLE
(
INSPECTOR
)

3245 ià(
Page
* 
	g·ge
 = 
m_äame
->
·ge
())

3246 
·ge
->
š¥eùÜCÚŒŞËr
()->
äameD‘achedFromP¬’t
(
m_äame
);

3249 
d‘achV›wsAndDocum’tLßd”
();

3251 ià(
F¿me
* 
	g·»Á
 = 
m_äame
->
Œ“
()->
·»Á
()) {

3252 
·»Á
->
lßd”
()->
şo£AndRemoveChd
(
m_äame
);

3253 
	g·»Á
->
lßd”
()->
scheduËCheckCom¶‘ed
();

3255 
	gm_äame
->
£tV›w
(0);

3256 
	gm_äame
->
·geDe¡royed
();

3260 
	gF¿meLßd”
::
d‘achV›wsAndDocum’tLßd”
()

3262 
m_ş›Á
->
d‘achedFromP¬’t2
();

3263 
£tDocum’tLßd”
(0);

3264 
	gm_ş›Á
->
d‘achedFromP¬’t3
();

3267 
	gF¿meLßd”
::
addExŒaF›ldsToSub»sourûReque¡
(
ResourûReque¡
& 
»que¡
)

3269 
addExŒaF›ldsToReque¡
(
»que¡
, 
m_lßdTy³
, 
çl£
, false);

3272 
	gF¿meLßd”
::
addExŒaF›ldsToMašResourûReque¡
(
ResourûReque¡
& 
»que¡
)

3274 
addExŒaF›ldsToReque¡
(
»que¡
, 
m_lßdTy³
, 
Œue
, 
çl£
);

3277 
	gF¿meLßd”
::
addExŒaF›ldsToReque¡
(
ResourûReque¡
& 
»que¡
, 
F¿meLßdTy³
 
lßdTy³
, 
boŞ
 
mašResourû
, boŞ 
cook›PŞicyURLFromReque¡
)

3281 ià(
	g»que¡
.
fœ¡P¬tyFÜCook›s
().
isEm±y
()) {

3282 ià(
	gmašResourû
 && (
isLßdšgMašF¿me
(è|| 
	gcook›PŞicyURLFromReque¡
))

3283 
	g»que¡
.
£tFœ¡P¬tyFÜCook›s
(
»que¡
.
u¾
());

3284 ià(
Docum’t
* 
	gdocum’t
 = 
m_äame
->
docum’t
())

3285 
»que¡
.
£tFœ¡P¬tyFÜCook›s
(
docum’t
->
fœ¡P¬tyFÜCook›s
());

3289 ià(!
	g»que¡
.
u¾
().
isEm±y
(è&& !»que¡.u¾().
´ÙocŞInHTTPFamy
())

3292 
­¶yU£rAg’t
(
»que¡
);

3294 ià(
	glßdTy³
 =ğ
F¿meLßdTy³R–ßd
) {

3295 
»que¡
.
£tCachePŞicy
(
R–ßdIgnÜšgCacheD©a
);

3296 
	g»que¡
.
£tHTTPH—d”F›ld
("Cache-Control", "max-age=0");

3297 } ià(
	glßdTy³
 =ğ
F¿meLßdTy³R–ßdFromOrigš
) {

3298 
»que¡
.
£tCachePŞicy
(
R–ßdIgnÜšgCacheD©a
);

3299 
	g»que¡
.
£tHTTPH—d”F›ld
("Cache-Control", "no-cache");

3300 
	g»que¡
.
£tHTTPH—d”F›ld
("Pragma", "no-cache");

3301 } ià(
isBackFÜw¬dLßdTy³
(
lßdTy³
è&& !
	g»que¡
.
u¾
().
´ÙocŞIs
("https"))

3302 
	g»que¡
.
£tCachePŞicy
(
R‘uºCacheD©aEl£Lßd
);

3304 ià(
	gmašResourû
)

3305 
	g»que¡
.
£tHTTPAcû±
(
deçuÉAcû±H—d”
);

3308 
addHTTPOrigšIfN“ded
(
»que¡
, 
SŒšg
());

3312 
S‘tšgs
* 
	g£‰šgs
 = 
m_äame
->
£‰šgs
();

3313 
	g»que¡
.
£tRe¥Ú£CÚ‹ÁDi¥os™iÚEncodšgF®lbackA¼ay
("UTF-8", 
m_URL
.
isEm±y
(è? 
m_’codšg
 : 
’codšg
(), 
£‰šgs
 ? s‘tšgs->
deçuÉTextEncodšgName
(è: 
SŒšg
());

3316 
	gF¿meLßd”
::
addHTTPOrigšIfN“ded
(
ResourûReque¡
& 
»que¡
, 
SŒšg
 
Üigš
)

3318 ià(!
	g»que¡
.
h‰pOrigš
().
isEm±y
())

3327 ià(
	g»que¡
.
h‰pM‘hod
(è=ğ"GET" || 
»que¡
.httpMethod() == "HEAD")

3333 ià(
	gÜigš
.
isEm±y
()) {

3336 
	gÜigš
 = 
Secur™yOrigš
::
ü—‹Em±y
()->
toSŒšg
();

3339 
	g»que¡
.
£tHTTPOrigš
(
Üigš
);

3342 
	gF¿meLßd”
::
comm™‹dLßd
(
Docum’tLßd”
* 
lßd”
, cÚ¡ * 
d©a
, 
Ëngth
)

3344 ià(
	gArchiveFaùÜy
::
isArchiveMimeTy³
(
lßd”
->
»¥Ú£
().
mimeTy³
()))

3346 
	gm_ş›Á
->
comm™‹dLßd
(
lßd”
, 
d©a
, 
Ëngth
);

3349 
	gF¿meLßd”
::
lßdPo¡Reque¡
(cÚ¡ 
ResourûReque¡
& 
šReque¡
, cÚ¡ 
SŒšg
& 
»ã¼”
, cÚ¡ SŒšg& 
äameName
, 
boŞ
 
lockHi¡Üy
, 
F¿meLßdTy³
 
lßdTy³
, 
PassRefPŒ
<
Ev’t
> 
ev’t
, PassRefPŒ<
FÜmS‹
> 
´pFÜmS‹
)

3351 
	gRefPŒ
<
	gFÜmS‹
> 
	gfÜmS‹
 = 
´pFÜmS‹
;

3363 cÚ¡ 
	gKURL
& 
	gu¾
 = 
šReque¡
.
u¾
();

3364 
	gRefPŒ
<
	gFÜmD©a
> 
	gfÜmD©a
 = 
šReque¡
.
h‰pBody
();

3365 cÚ¡ 
	gSŒšg
& 
	gcÚ‹ÁTy³
 = 
šReque¡
.
h‰pCÚ‹ÁTy³
();

3366 
SŒšg
 
	gÜigš
 = 
šReque¡
.
h‰pOrigš
();

3368 
ResourûReque¡
 
wÜkšgResourûReque¡
(
u¾
);

3370 ià(!
	g»ã¼”
.
isEm±y
())

3371 
	gwÜkšgResourûReque¡
.
£tHTTPReã¼”
(
»ã¼”
);

3372 
	gwÜkšgResourûReque¡
.
£tHTTPOrigš
(
Üigš
);

3373 
	gwÜkšgResourûReque¡
.
£tHTTPM‘hod
("POST");

3374 
	gwÜkšgResourûReque¡
.
£tHTTPBody
(
fÜmD©a
);

3375 
	gwÜkšgResourûReque¡
.
£tHTTPCÚ‹ÁTy³
(
cÚ‹ÁTy³
);

3376 
addExŒaF›ldsToReque¡
(
wÜkšgResourûReque¡
, 
lßdTy³
, 
Œue
,rue);

3378 
Navig©iÚAùiÚ
 
aùiÚ
(
u¾
, 
lßdTy³
, 
Œue
, 
ev’t
);

3380 ià(!
	gäameName
.
isEm±y
()) {

3382 ià(
F¿me
* 
	grg‘F¿me
 = 
fÜmS‹
 ? 0 : 
fšdF¿meFÜNavig©iÚ
(
äameName
))

3383 
rg‘F¿me
->
lßd”
()->
lßdW™hNavig©iÚAùiÚ
(
wÜkšgResourûReque¡
, 
aùiÚ
, 
lockHi¡Üy
, 
lßdTy³
, 
fÜmS‹
.
»Ëa£
());

3385 
pŞicyCheck”
()->
checkNewWšdowPŞicy
(
aùiÚ
, 
F¿meLßd”
::
ÿÎCÚtšueLßdAá”NewWšdowPŞicy
, 
wÜkšgResourûReque¡
, 
fÜmS‹
.
»Ëa£
(), 
äameName
, 
this
);

3387 
lßdW™hNavig©iÚAùiÚ
(
wÜkšgResourûReque¡
, 
aùiÚ
, 
lockHi¡Üy
, 
lßdTy³
, 
fÜmS‹
.
»Ëa£
());

3390 
	gF¿meLßd”
::
lßdResourûSynchrÚou¦y
(cÚ¡ 
ResourûReque¡
& 
»que¡
, 
StÜedC»d’tŸls
 
¡ÜedC»d’tŸls
, 
ResourûE¼Ü
& 
”rÜ
, 
ResourûRe¥Ú£
& 
»¥Ú£
, 
VeùÜ
<>& 
d©a
)

3392 
SŒšg
 
	g»ã¼”
 = 
m_outgošgReã¼”
;

3393 ià(
	gSecur™yOrigš
::
shouldHideReã¼”
(
»que¡
.
u¾
(), 
»ã¼”
))

3394 
	g»ã¼”
 = 
SŒšg
();

3396 
ResourûReque¡
 
	gš™ŸlReque¡
 = 
»que¡
;

3397 
	gš™ŸlReque¡
.
£tTimeoutIÁ”v®
(10);

3405 ià(
	gš™ŸlReque¡
.
isCÚd™iÚ®
())

3406 
	gš™ŸlReque¡
.
£tCachePŞicy
(
R–ßdIgnÜšgCacheD©a
);

3408 
	gš™ŸlReque¡
.
£tCachePŞicy
(
Üigš®Reque¡
().
ÿchePŞicy
());

3410 ià(!
	g»ã¼”
.
isEm±y
())

3411 
	gš™ŸlReque¡
.
£tHTTPReã¼”
(
»ã¼”
);

3412 
addHTTPOrigšIfN“ded
(
š™ŸlReque¡
, 
outgošgOrigš
());

3414 ià(
Page
* 
	g·ge
 = 
m_äame
->
·ge
())

3415 
š™ŸlReque¡
.
£tFœ¡P¬tyFÜCook›s
(
·ge
->
mašF¿me
()->
lßd”
()->
docum’tLßd”
()->
»que¡
().
u¾
());

3416 
	gš™ŸlReque¡
.
£tHTTPU£rAg’t
(
ş›Á
()->
u£rAg’t
(
»que¡
.
u¾
()));

3418 
	gid’tif›r
 = 0;

3419 
ResourûReque¡
 
ÃwReque¡
(
š™ŸlReque¡
);

3420 
»que¡FromD–eg©e
(
ÃwReque¡
, 
id’tif›r
, 
”rÜ
);

3422 ià(
	g”rÜ
.
isNuÎ
()) {

3423 
ASSERT
(!
ÃwReque¡
.
isNuÎ
());

3425 #ià
ENABLE
(
OFFLINE_WEB_APPLICATIONS
)

3426 ià(!
docum’tLßd”
()->
­¶iÿtiÚCacheHo¡
()->
maybeLßdSynchrÚou¦y
(
ÃwReque¡
, 
”rÜ
, 
»¥Ú£
, 
d©a
)) {

3428 
	gResourûHªdË
::
lßdResourûSynchrÚou¦y
(
ÃwReque¡
, 
¡ÜedC»d’tŸls
, 
”rÜ
, 
»¥Ú£
, 
d©a
, 
m_äame
);

3429 #ià
ENABLE
(
OFFLINE_WEB_APPLICATIONS
)

3430 
docum’tLßd”
()->
­¶iÿtiÚCacheHo¡
()->
maybeLßdF®lbackSynchrÚou¦y
(
ÃwReque¡
, 
”rÜ
, 
»¥Ú£
, 
d©a
);

3435 
nÙif›r
()->
£ndRemaššgD–eg©eMes§ges
(
m_docum’tLßd”
.
g‘
(), 
id’tif›r
, 
»¥Ú£
, 
d©a
.
size
(), 
”rÜ
);

3436  
	gid’tif›r
;

3439 cÚ¡ 
	gResourûReque¡
& 
	gF¿meLßd”
::
Üigš®Reque¡
() const

3441  
aùiveDocum’tLßd”
()->
Üigš®Reque¡Cİy
();

3444 
	gF¿meLßd”
::
»ûivedMašResourûE¼Ü
(cÚ¡ 
ResourûE¼Ü
& 
”rÜ
, 
boŞ
 
isCom¶‘e
)

3447 
	gRefPŒ
<
	gF¿me
> 
´Ùeù
(
m_äame
);

3449 
	gRefPŒ
<
	gDocum’tLßd”
> 
	glßd”
 = 
aùiveDocum’tLßd”
();

3451 ià(
	gisCom¶‘e
) {

3454 
¡İ
();

3455 ià(
	gm_ş›Á
->
shouldF®lBack
(
”rÜ
))

3456 
hªdËF®lbackCÚ‹Á
();

3459 ià(
	gm_¡©e
 =ğ
F¿meS‹ProvisiÚ®
 && 
m_´ovisiÚ®Docum’tLßd”
) {

3460 ià(
m_subm™‹dFÜmURL
 =ğ
m_´ovisiÚ®Docum’tLßd”
->
Üigš®Reque¡Cİy
().
u¾
())

3461 
m_subm™‹dFÜmURL
 = 
KURL
();

3466 
hi¡Üy
()->
šv®id©eCu¼’tI‹mCachedPage
();

3473 ià(
	gm_£ÁRedœeùNÙifiÿtiÚ
)

3474 
ş›ÁRedœeùCªûÎedOrFšished
(
çl£
);

3477 
	glßd”
->
mašReûivedE¼Ü
(
”rÜ
, 
isCom¶‘e
);

3480 
	gF¿meLßd”
::
ÿÎCÚtšueF¿gm’tSüŞlAá”Navig©iÚPŞicy
(* 
¬gum’t
,

3481 cÚ¡ 
ResourûReque¡
& 
»que¡
, 
PassRefPŒ
<
FÜmS‹
>, 
boŞ
 
shouldCÚtšue
)

3483 
F¿meLßd”
* 
	glßd”
 = 
¡©ic_ÿ¡
<F¿meLßd”*>(
¬gum’t
);

3484 
	glßd”
->
cÚtšueF¿gm’tSüŞlAá”Navig©iÚPŞicy
(
»que¡
, 
shouldCÚtšue
);

3487 
	gF¿meLßd”
::
cÚtšueF¿gm’tSüŞlAá”Navig©iÚPŞicy
(cÚ¡ 
ResourûReque¡
& 
»que¡
, 
boŞ
 
shouldCÚtšue
)

3489 
	gm_quickRedœeùComšg
 = 
çl£
;

3491 ià(!
	gshouldCÚtšue
)

3494 
boŞ
 
	gisRedœeù
 = 
m_quickRedœeùComšg
 || 
pŞicyCheck”
()->
lßdTy³
(è=ğ
F¿meLßdTy³RedœeùW™hLockedBackFÜw¬dLi¡
;

3495 
lßdInSameDocum’t
(
»que¡
.
u¾
(), 0, !
isRedœeù
);

3498 
boŞ
 
	gF¿meLßd”
::
shouldSüŞlToAnchÜ
(boŞ 
isFÜmSubmissiÚ
, 
F¿meLßdTy³
 
lßdTy³
, cÚ¡ 
KURL
& 
u¾
)

3508  !
	gisFÜmSubmissiÚ


3509 && 
	glßdTy³
 !ğ
F¿meLßdTy³R–ßd


3510 && 
lßdTy³
 !ğ
F¿meLßdTy³R–ßdFromOrigš


3511 && 
lßdTy³
 !ğ
F¿meLßdTy³Same


3512 && !
shouldR–ßd
(
this
->
u¾
(), url)

3515 && !
	gm_äame
->
docum’t
()->
isF¿meS‘
();

3518 
	gF¿meLßd”
::
ÿÎCÚtšueLßdAá”Navig©iÚPŞicy
(* 
¬gum’t
,

3519 cÚ¡ 
ResourûReque¡
& 
»que¡
, 
PassRefPŒ
<
FÜmS‹
> 
fÜmS‹
, 
boŞ
 
shouldCÚtšue
)

3521 
F¿meLßd”
* 
	glßd”
 = 
¡©ic_ÿ¡
<F¿meLßd”*>(
¬gum’t
);

3522 
	glßd”
->
cÚtšueLßdAá”Navig©iÚPŞicy
(
»que¡
, 
fÜmS‹
, 
shouldCÚtšue
);

3525 
	gF¿meLßd”
::
cÚtšueLßdAá”Navig©iÚPŞicy
(cÚ¡ 
ResourûReque¡
&, 
PassRefPŒ
<
FÜmS‹
> 
fÜmS‹
, 
boŞ
 
shouldCÚtšue
)

3530 
ASSERT
(
m_pŞicyDocum’tLßd”
 || !
m_´ovisiÚ®Docum’tLßd”
->
uÄ—chabËURL
().
isEm±y
());

3532 
boŞ
 
	gisT¬g‘I‹m
 = 
hi¡Üy
()->
´ovisiÚ®I‹m
(è? hi¡Üy()->´ovisiÚ®I‹m()->
isT¬g‘I‹m
(è: 
çl£
;

3539 
boŞ
 
	gÿnCÚtšue
 = 
shouldCÚtšue
 && (!
isLßdšgMašF¿me
(è|| 
m_äame
->
shouldClo£
());

3541 ià(!
	gÿnCÚtšue
) {

3544 ià(
	gm_quickRedœeùComšg
)

3545 
ş›ÁRedœeùCªûÎedOrFšished
(
çl£
);

3547 
£tPŞicyDocum’tLßd”
(0);

3552 ià((
	gisT¬g‘I‹m
 || 
isLßdšgMašF¿me
()è&& 
isBackFÜw¬dLßdTy³
(
pŞicyCheck”
()->
lßdTy³
()))

3553 ià(
Page
* 
	g·ge
 = 
m_äame
->
·ge
()) {

3554 
F¿me
* 
mašF¿me
 = 
·ge
->mainFrame();

3555 ià(
Hi¡ÜyI‹m
* 
	g»£tI‹m
 = 
mašF¿me
->
lßd”
()->
hi¡Üy
()->
cu¼’tI‹m
()) {

3556 
·ge
->
backFÜw¬dLi¡
()->
goToI‹m
(
»£tI‹m
);

3557 
S‘tšgs
* 
	g£‰šgs
 = 
m_äame
->
£‰šgs
();

3558 
	g·ge
->
£tGlob®Hi¡ÜyI‹m
((!
£‰šgs
 || s‘tšgs->
´iv©eBrowsšgEÇbËd
()è? 0 : 
»£tI‹m
);

3564 
F¿meLßdTy³
 
	gty³
 = 
pŞicyCheck”
()->
lßdTy³
();

3565 
¡İAÎLßd”s
();

3569 ià(!
	gm_äame
->
·ge
())

3572 #ià
ENABLE
(
JAVASCRIPT_DEBUGGER
è&& ENABLE(
INSPECTOR
è&& 
USE
(
JSC
)

3573 ià(
Page
* 
	g·ge
 = 
m_äame
->
·ge
()) {

3574 ià(
·ge
->
mašF¿me
(è=ğ
m_äame
)

3575 
·ge
->
š¥eùÜCÚŒŞËr
()->
»sumeDebugg”
();

3579 
£tProvisiÚ®Docum’tLßd”
(
m_pŞicyDocum’tLßd”
.
g‘
());

3580 
	gm_lßdTy³
 = 
ty³
;

3581 
£tS‹
(
F¿meS‹ProvisiÚ®
);

3583 
£tPŞicyDocum’tLßd”
(0);

3585 ià(
isBackFÜw¬dLßdTy³
(
ty³
è&& 
lßdProvisiÚ®I‹mFromCachedPage
())

3588 ià(
	gfÜmS‹
)

3589 
	gm_ş›Á
->
di¥©chWlSubm™FÜm
(&
PŞicyCheck”
::
cÚtšueLßdAá”WlSubm™FÜm
, 
fÜmS‹
);

3591 
cÚtšueLßdAá”WlSubm™FÜm
();

3594 
	gF¿meLßd”
::
ÿÎCÚtšueLßdAá”NewWšdowPŞicy
(* 
¬gum’t
,

3595 cÚ¡ 
ResourûReque¡
& 
»que¡
, 
PassRefPŒ
<
FÜmS‹
> 
fÜmS‹
, cÚ¡ 
SŒšg
& 
äameName
, 
boŞ
 
shouldCÚtšue
)

3597 
F¿meLßd”
* 
	glßd”
 = 
¡©ic_ÿ¡
<F¿meLßd”*>(
¬gum’t
);

3598 
	glßd”
->
cÚtšueLßdAá”NewWšdowPŞicy
(
»que¡
, 
fÜmS‹
, 
äameName
, 
shouldCÚtšue
);

3601 
	gF¿meLßd”
::
cÚtšueLßdAá”NewWšdowPŞicy
(cÚ¡ 
ResourûReque¡
& 
»que¡
,

3602 
PassRefPŒ
<
FÜmS‹
> 
fÜmS‹
, cÚ¡ 
SŒšg
& 
äameName
, 
boŞ
 
shouldCÚtšue
)

3604 ià(!
	gshouldCÚtšue
)

3607 
	gRefPŒ
<
	gF¿me
> 
	gäame
 = 
m_äame
;

3608 
	gRefPŒ
<
	gF¿me
> 
	gmašF¿me
 = 
m_ş›Á
->
di¥©chC»©ePage
();

3609 ià(!
	gmašF¿me
)

3612 ià(
	gäameName
 != "_blank")

3613 
mašF¿me
->
Œ“
()->
£tName
(
äameName
);

3615 
	gmašF¿me
->
·ge
()->
£tO³ÃdByDOM
();

3616 
	gmašF¿me
->
lßd”
()->
	gm_ş›Á
->
di¥©chShow
();

3617 ià(!
	gm_suµ»ssO³ÃrInNewF¿me
)

3618 
	gmašF¿me
->
lßd”
()->
£tO³Ãr
(
äame
.
g‘
());

3619 
	gmašF¿me
->
lßd”
()->
lßdW™hNavig©iÚAùiÚ
(
»que¡
, 
Navig©iÚAùiÚ
(), 
çl£
, 
F¿meLßdTy³Snd¬d
, 
fÜmS‹
);

3622 
	gF¿meLßd”
::
»que¡FromD–eg©e
(
ResourûReque¡
& 
»que¡
, & 
id’tif›r
, 
ResourûE¼Ü
& 
”rÜ
)

3624 
ASSERT
(!
»que¡
.
isNuÎ
());

3626 
	gid’tif›r
 = 0;

3627 ià(
Page
* 
	g·ge
 = 
m_äame
->
·ge
()) {

3628 
id’tif›r
 = 
·ge
->
´og»ss
()->
ü—‹UniqueId’tif›r
();

3629 
nÙif›r
()->
assignId’tif›rToIn™ŸlReque¡
(
id’tif›r
, 
m_docum’tLßd”
.
g‘
(), 
»que¡
);

3632 
ResourûReque¡
 
ÃwReque¡
(
»que¡
);

3633 
nÙif›r
()->
di¥©chWlS’dReque¡
(
m_docum’tLßd”
.
g‘
(), 
id’tif›r
, 
ÃwReque¡
, 
ResourûRe¥Ú£
());

3635 ià(
	gÃwReque¡
.
isNuÎ
())

3636 
	g”rÜ
 = 
ÿnûÎedE¼Ü
(
»que¡
);

3638 
	g”rÜ
 = 
ResourûE¼Ü
();

3640 
	g»que¡
 = 
ÃwReque¡
;

3643 
	gF¿meLßd”
::
lßdedResourûFromMemÜyCache
(cÚ¡ 
CachedResourû
* 
»sourû
)

3645 
Page
* 
·ge
 = 
m_äame
->page();

3646 ià(!
	g·ge
)

3649 #ià
ENABLE
(
INSPECTOR
)

3650 
	g·ge
->
š¥eùÜCÚŒŞËr
()->
didLßdResourûFromMemÜyCache
(
m_docum’tLßd”
.
g‘
(), 
»sourû
);

3653 ià(!
	g»sourû
->
£ndResourûLßdC®lbacks
(è|| 
	gm_docum’tLßd”
->
haveTŞdCl›ÁAboutLßd
(
»sourû
->
u¾
()))

3656 ià(!
	g·ge
->
¬eMemÜyCacheCl›ÁC®lsEÇbËd
()) {

3657 
	gm_docum’tLßd”
->
»cÜdMemÜyCacheLßdFÜFutu»Cl›ÁNÙifiÿtiÚ
(
»sourû
->
u¾
());

3658 
	gm_docum’tLßd”
->
didT–lCl›ÁAboutLßd
(
»sourû
->
u¾
());

3662 
ResourûReque¡
 
»que¡
(
»sourû
->
u¾
());

3663 ià(
	gm_ş›Á
->
di¥©chDidLßdResourûFromMemÜyCache
(
m_docum’tLßd”
.
g‘
(), 
»que¡
, 
»sourû
->
»¥Ú£
(),„esourû->
’codedSize
())) {

3664 
	gm_docum’tLßd”
->
didT–lCl›ÁAboutLßd
(
»sourû
->
u¾
());

3668 
	gid’tif›r
;

3669 
ResourûE¼Ü
 
	g”rÜ
;

3670 
»que¡FromD–eg©e
(
»que¡
, 
id’tif›r
, 
”rÜ
);

3671 
nÙif›r
()->
£ndRemaššgD–eg©eMes§ges
(
m_docum’tLßd”
.
g‘
(), 
id’tif›r
, 
»sourû
->
»¥Ú£
(),„esourû->
’codedSize
(), 
”rÜ
);

3674 
	gF¿meLßd”
::
­¶yU£rAg’t
(
ResourûReque¡
& 
»que¡
)

3676 
SŒšg
 
u£rAg’t
 = 
ş›Á
()->u£rAg’t(
»que¡
.
u¾
());

3677 
ASSERT
(!
u£rAg’t
.
isNuÎ
());

3678 
	g»que¡
.
£tHTTPU£rAg’t
(
u£rAg’t
);

3681 
boŞ
 
	gF¿meLßd”
::
shouldIÁ”ru±LßdFÜXF¿meO±iÚs
(cÚ¡ 
SŒšg
& 
cÚ‹Á
, cÚ¡ 
KURL
& 
u¾
)

3683 
F¿me
* 
	gtİF¿me
 = 
m_äame
->
Œ“
()->
tİ
();

3684 ià(
	gm_äame
 =ğ
tİF¿me
)

3685  
çl£
;

3687 ià(
equ®IgnÜšgCa£
(
cÚ‹Á
, "deny"))

3688  
	gŒue
;

3690 ià(
equ®IgnÜšgCa£
(
cÚ‹Á
, "sameorigin")) {

3691 
	gRefPŒ
<
	gSecur™yOrigš
> 
	gÜigš
 = 
Secur™yOrigš
::
ü—‹
(
u¾
);

3692 ià(!
	gÜigš
->
isSameSchemeHo¡PÜt
(
tİF¿me
->
docum’t
()->
£cur™yOrigš
()))

3693  
	gŒue
;

3696  
	gçl£
;

3699 
boŞ
 
	gF¿meLßd”
::
lßdProvisiÚ®I‹mFromCachedPage
()

3701 
RefPŒ
<
CachedPage
> 
ÿchedPage
 = 
·geCache
()->
g‘
(
hi¡Üy
()->
´ovisiÚ®I‹m
());

3702 ià(!
	gÿchedPage
 || !ÿchedPage->
docum’t
())

3703  
	gçl£
;

3705 
Docum’tLßd”
 *
	g´ovisiÚ®Lßd”
 = 
´ovisiÚ®Docum’tLßd”
();

3706 
LOG
(
PageCache
, "WebCÜePageCache: F¿meLßd” %°lßdšg…rovisiÚ® Docum’tLßd” %°w™h URL '%s' from CachedPag%p", 
this
, 
´ovisiÚ®Lßd”
,…rovisiÚ®Lßd”->
u¾
().
¡ršg
().
utf8
().
d©a
(), 
ÿchedPage
.
g‘
());

3708 
	g´ovisiÚ®Lßd”
->
´•¬eFÜLßdS¹
();

3710 
	gm_lßdšgFromCachedPage
 = 
Œue
;

3712 
	g´ovisiÚ®Lßd”
->
£tComm™‹d
(
Œue
);

3713 
comm™ProvisiÚ®Lßd
(
ÿchedPage
);

3715  
	gŒue
;

3718 
	gF¿meLßd”
::
ÿchePageFÜHi¡ÜyI‹m
(
Hi¡ÜyI‹m
* 
™em
)

3720 ià(!
ÿnCachePage
(è|| 
™em
->
isInPageCache
())

3723 
·geHidd’
();

3725 ià(
Page
* 
	g·ge
 = 
m_äame
->
·ge
()) {

3726 
RefPŒ
<
CachedPage
> 
ÿchedPage
 = CachedPage::
ü—‹
(
·ge
);

3727 
·geCache
()->
add
(
™em
, 
ÿchedPage
.
»Ëa£
());

3731 
	gF¿meLßd”
::
·geHidd’
()

3733 
m_uÆßdEv’tBešgDi¥©ched
 = 
Œue
;

3734 ià(
	gm_äame
->
domWšdow
())

3735 
	gm_äame
->
domWšdow
()->
di¥©chEv’t
(
PageT¿ns™iÚEv’t
::
ü—‹
(
ev’tNames
().
·gehideEv’t
, 
Œue
), 
m_äame
->
docum’t
());

3736 
	gm_uÆßdEv’tBešgDi¥©ched
 = 
çl£
;

3739 
F¿me
* 
	gchd
 = 
m_äame
->
Œ“
()->
fœ¡Chd
(); chd; chd = 
chd
->Œ“()->
ÃxtSiblšg
())

3740 
chd
->
lßd”
()->
·geHidd’
();

3743 
boŞ
 
	gF¿meLßd”
::
shouldT»©URLAsSameAsCu¼’t
(cÚ¡ 
KURL
& 
u¾
) const

3745 ià(!
hi¡Üy
()->
cu¼’tI‹m
())

3746  
çl£
;

3747  
	gu¾
 =ğ
hi¡Üy
()->
cu¼’tI‹m
()->
u¾
(è|| u¾ =ğhi¡Üy()->cu¼’tI‹m()->
Üigš®URL
();

3750 
	gF¿meLßd”
::
checkDidP”fÜmFœ¡Navig©iÚ
()

3752 
Page
* 
·ge
 = 
m_äame
->page();

3753 ià(!
	g·ge
)

3756 ià(!
	gm_didP”fÜmFœ¡Navig©iÚ
 && 
	g·ge
->
backFÜw¬dLi¡
()->
’Œ›s
().
size
() == 1) {

3757 
m_didP”fÜmFœ¡Navig©iÚ
 = 
Œue
;

3758 
	gm_ş›Á
->
didP”fÜmFœ¡Navig©iÚ
();

3762 
F¿me
* 
	gF¿meLßd”
::
fšdF¿meFÜNavig©iÚ
(cÚ¡ 
AtomicSŒšg
& 
Çme
)

3764 
F¿me
* 
äame
 = 
m_äame
->
Œ“
()->
fšd
(
Çme
);

3765 ià(!
shouldAÎowNavig©iÚ
(
äame
))

3767  
	gäame
;

3770 
	gF¿meLßd”
::
Çvig©eW™hšDocum’t
(
Hi¡ÜyI‹m
* 
™em
)

3772 
ASSERT
(
™em
->
docum’tSequ’ûNumb”
(è=ğ
hi¡Üy
()->
cu¼’tI‹m
()->documentSequenceNumber());

3776 
hi¡Üy
()->
§veSüŞlPos™iÚAndV›wS‹ToI‹m
(hi¡Üy()->
cu¼’tI‹m
());

3777 ià(
F¿meV›w
* 
	gv›w
 = 
m_äame
->
v›w
())

3778 
v›w
->
£tWasSüŞËdByU£r
(
çl£
);

3780 
hi¡Üy
()->
£tCu¼’tI‹m
(
™em
);

3783 
lßdInSameDocum’t
(
™em
->
u¾
(), i‹m->
¡©eObjeù
(), 
çl£
);

3786 
hi¡Üy
()->
»¡ÜeSüŞlPos™iÚAndV›wS‹
();

3792 
	gF¿meLßd”
::
Çvig©eToDifã»ÁDocum’t
(
Hi¡ÜyI‹m
* 
™em
, 
F¿meLßdTy³
 
lßdTy³
)

3795 
hi¡Üy
()->
£tProvisiÚ®I‹m
(
™em
);

3800 ià(
	gRefPŒ
<
	gCachedPage
> 
	gÿchedPage
 = 
·geCache
()->
g‘
(
™em
)) {

3804 ià(
cu¼’tTime
(è- 
ÿchedPage
->
timeSmp
() <= 1800) {

3805 
lßdW™hDocum’tLßd”
(
ÿchedPage
->
docum’tLßd”
(), 
lßdTy³
, 0);

3809 
LOG
(
PageCache
, "NÙ„e¡Üšg…agfÜ % äom back/fÜw¬d cachbeÿu£ cach’Œy ha expœed", 
hi¡Üy
()->
´ovisiÚ®I‹m
()->
u¾
().
¡ršg
().
ascii
().
d©a
());

3810 
·geCache
()->
»move
(
™em
);

3813 
KURL
 
	g™emURL
 = 
™em
->
u¾
();

3814 
KURL
 
	g™emOrigš®URL
 = 
™em
->
Üigš®URL
();

3815 
KURL
 
	gcu¼’tURL
;

3816 ià(
docum’tLßd”
())

3817 
	gcu¼’tURL
 = 
docum’tLßd”
()->
u¾
();

3818 
	gRefPŒ
<
	gFÜmD©a
> 
	gfÜmD©a
 = 
™em
->
fÜmD©a
();

3820 
boŞ
 
	gaddedExŒaF›lds
 = 
çl£
;

3821 
ResourûReque¡
 
»que¡
(
™emURL
);

3823 ià(!
	g™em
->
»ã¼”
().
isNuÎ
())

3824 
	g»que¡
.
£tHTTPReã¼”
(
™em
->
»ã¼”
());

3827 
Navig©iÚAùiÚ
 
	gaùiÚ
;

3828 ià(
	gfÜmD©a
) {

3829 
	gfÜmD©a
->
g’”©eFes
(
m_äame
->
·ge
()->
chrome
()->
ş›Á
());

3831 
	g»que¡
.
£tHTTPM‘hod
("POST");

3832 
	g»que¡
.
£tHTTPBody
(
fÜmD©a
);

3833 
	g»que¡
.
£tHTTPCÚ‹ÁTy³
(
™em
->
fÜmCÚ‹ÁTy³
());

3834 
	gRefPŒ
<
	gSecur™yOrigš
> 
	g£cur™yOrigš
 = 
Secur™yOrigš
::
ü—‹FromSŒšg
(
™em
->
»ã¼”
());

3835 
addHTTPOrigšIfN“ded
(
»que¡
, 
£cur™yOrigš
->
toSŒšg
());

3839 
addExŒaF›ldsToReque¡
(
»que¡
, 
m_lßdTy³
, 
Œue
, 
fÜmD©a
);

3840 
	gaddedExŒaF›lds
 = 
Œue
;

3850 ià(
	gResourûHªdË
::
wlLßdFromCache
(
»que¡
, 
m_äame
))

3851 
	gaùiÚ
 = 
Navig©iÚAùiÚ
(
™emURL
, 
lßdTy³
, 
çl£
);

3853 
	g»que¡
.
£tCachePŞicy
(
R–ßdIgnÜšgCacheD©a
);

3854 
	gaùiÚ
 = 
Navig©iÚAùiÚ
(
™emURL
, 
Navig©iÚTy³FÜmResubm™‹d
);

3857 
	glßdTy³
) {

3858 
	gF¿meLßdTy³R–ßd
:

3859 
F¿meLßdTy³R–ßdFromOrigš
:

3860 
»que¡
.
£tCachePŞicy
(
R–ßdIgnÜšgCacheD©a
);

3862 
	gF¿meLßdTy³Back
:

3863 
F¿meLßdTy³BackWMLDeckNÙAcûssibË
:

3864 
F¿meLßdTy³FÜw¬d
:

3865 
F¿meLßdTy³IndexedBackFÜw¬d
:

3866 ià(!
™emURL
.
´ÙocŞIs
("https"))

3867 
»que¡
.
£tCachePŞicy
(
R‘uºCacheD©aEl£Lßd
);

3869 
	gF¿meLßdTy³Snd¬d
:

3870 
F¿meLßdTy³RedœeùW™hLockedBackFÜw¬dLi¡
:

3872 
	gF¿meLßdTy³Same
:

3874 
ASSERT_NOT_REACHED
();

3877 
	gaùiÚ
 = 
Navig©iÚAùiÚ
(
™emOrigš®URL
, 
lßdTy³
, 
çl£
);

3880 ià(!
	gaddedExŒaF›lds
)

3881 
addExŒaF›ldsToReque¡
(
»que¡
, 
m_lßdTy³
, 
Œue
, 
fÜmD©a
);

3883 
lßdW™hNavig©iÚAùiÚ
(
»que¡
, 
aùiÚ
, 
çl£
, 
lßdTy³
, 0);

3887 
	gF¿meLßd”
::
lßdI‹m
(
Hi¡ÜyI‹m
* 
™em
, 
F¿meLßdTy³
 
lßdTy³
)

3894 
Hi¡ÜyI‹m
* 
	gcu¼’tI‹m
 = 
hi¡Üy
()->
cu¼’tI‹m
();

3895 
boŞ
 
	g§meDocum’tNavig©iÚ
 = ((!
™em
->
fÜmD©a
(è&& !(
cu¼’tI‹m
 && cu¼’tI‹m->fÜmD©a()è&& 
hi¡Üy
()->
u¾sM©chI‹m
(item))

3896 || (
cu¼’tI‹m
 && 
™em
->
docum’tSequ’ûNumb”
() == currentItem->documentSequenceNumber()))

3897 && 
™em
 !ğ
cu¼’tI‹m
;

3899 #ià
ENABLE
(
WML
)

3906 ià(
äameCÚšsWMLCÚ‹Á
(
m_äame
))

3907 
	g§meDocum’tNavig©iÚ
 = 
çl£
;

3910 ià(
	g§meDocum’tNavig©iÚ
)

3911 
Çvig©eW™hšDocum’t
(
™em
);

3913 
Çvig©eToDifã»ÁDocum’t
(
™em
, 
lßdTy³
);

3916 
	gF¿meLßd”
::
£tMašDocum’tE¼Ü
(
Docum’tLßd”
* 
lßd”
, cÚ¡ 
ResourûE¼Ü
& 
”rÜ
)

3918 
	gm_ş›Á
->
£tMašDocum’tE¼Ü
(
lßd”
, 
”rÜ
);

3921 
	gF¿meLßd”
::
mašReûivedCom¶‘eE¼Ü
(
Docum’tLßd”
* 
lßd”
, cÚ¡ 
ResourûE¼Ü
&)

3923 
	glßd”
->
£tPrim¬yLßdCom¶‘e
(
Œue
);

3924 
	gm_ş›Á
->
di¥©chDidLßdMašResourû
(
aùiveDocum’tLßd”
());

3925 
checkCom¶‘ed
();

3926 ià(
	gm_äame
->
·ge
())

3927 
checkLßdCom¶‘e
();

3930 
	gF¿meLßd”
::
mašReûivedE¼Ü
(cÚ¡ 
ResourûE¼Ü
& 
”rÜ
, 
boŞ
 
isCom¶‘e
)

3932 
aùiveDocum’tLßd”
()->
mašReûivedE¼Ü
(
”rÜ
, 
isCom¶‘e
);

3935 
ResourûE¼Ü
 
	gF¿meLßd”
::
ÿnûÎedE¼Ü
(cÚ¡ 
ResourûReque¡
& 
»que¡
) const

3937 
ResourûE¼Ü
 
”rÜ
 = 
m_ş›Á
->
ÿnûÎedE¼Ü
(
»que¡
);

3938 
	g”rÜ
.
£tIsCªûÎ©iÚ
(
Œue
);

3939  
	g”rÜ
;

3942 
ResourûE¼Ü
 
	gF¿meLßd”
::
blockedE¼Ü
(cÚ¡ 
ResourûReque¡
& 
»que¡
) const

3944  
m_ş›Á
->
blockedE¼Ü
(
»que¡
);

3947 
ResourûE¼Ü
 
	gF¿meLßd”
::
ÿÂÙShowURLE¼Ü
(cÚ¡ 
ResourûReque¡
& 
»que¡
) const

3949  
m_ş›Á
->
ÿÂÙShowURLE¼Ü
(
»que¡
);

3952 
ResourûE¼Ü
 
	gF¿meLßd”
::
feDÛsNÙExi¡E¼Ü
(cÚ¡ 
ResourûRe¥Ú£
& 
»¥Ú£
) const

3954  
m_ş›Á
->
feDÛsNÙExi¡E¼Ü
(
»¥Ú£
);

3957 
boŞ
 
	gF¿meLßd”
::
shouldU£C»d’tŸlStÜage
(
ResourûLßd”
* 
lßd”
)

3959  
m_ş›Á
->
shouldU£C»d’tŸlStÜage
(
lßd”
->
docum’tLßd”
(),†ßd”->
id’tif›r
());

3962 
	gF¿meLßd”
::
£tT™Ë
(cÚ¡ 
SŒšg
& 
t™Ë
)

3964 
docum’tLßd”
()->
£tT™Ë
(
t™Ë
);

3967 
KURL
 
	gF¿meLßd”
::
Üigš®Reque¡URL
() const

3969  
aùiveDocum’tLßd”
()->
Üigš®Reque¡
().
u¾
();

3972 
SŒšg
 
	gF¿meLßd”
::
»ã¼”
() const

3974  
docum’tLßd”
()->
»que¡
().
h‰pReã¼”
();

3977 
	gF¿meLßd”
::
di¥©chDocum’tEËm’tAvaabË
()

3979 
m_äame
->
šjeùU£rSüts
(
InjeùAtDocum’tS¹
);

3980 
	gm_ş›Á
->
docum’tEËm’tAvaabË
();

3983 
	gF¿meLßd”
::
di¥©chDidCË¬WšdowObjeùsInAÎWÜlds
()

3985 ià(!
m_äame
->
süt
()->
ÿnExecu‹Süts
(
NÙAboutToExecu‹Süt
))

3988 
	gVeùÜ
<
	gDOMW¿µ”WÜld
*> 
	gwÜlds
;

3989 
	gSütCÚŒŞËr
::
g‘AÎWÜlds
(
wÜlds
);

3990 
size_t
 
	gi
 = 0; i < 
	gwÜlds
.
size
(); ++i)

3991 
di¥©chDidCË¬WšdowObjeùInWÜld
(
wÜlds
[
i
]);

3994 
	gF¿meLßd”
::
di¥©chDidCË¬WšdowObjeùInWÜld
(
DOMW¿µ”WÜld
* 
wÜld
)

3996 ià(!
m_äame
->
süt
()->
ÿnExecu‹Süts
(
NÙAboutToExecu‹Süt
è|| !m_äame->süt()->
exi¡šgWšdowSh–l
(
wÜld
))

3999 
	gm_ş›Á
->
di¥©chDidCË¬WšdowObjeùInWÜld
(
wÜld
);

4001 #ià
ENABLE
(
INSPECTOR
)

4002 ià(
	gwÜld
 !ğ
mašTh»adNÜm®WÜld
())

4005 ià(
Page
* 
	g·ge
 = 
m_äame
->
·ge
()) {

4006 ià(
In¥eùÜCÚŒŞËr
* 
š¥eùÜ
 = 
·ge
->
š¥eùÜCÚŒŞËr
())

4007 
š¥eùÜ
->
š¥eùedWšdowSütObjeùCË¬ed
(
m_äame
);

4012 
	gF¿meLßd”
::
upd©eSªdboxFÏgs
()

4014 
SªdboxFÏgs
 
æags
 = 
m_fÜûdSªdboxFÏgs
;

4015 ià(
F¿me
* 
	g·»ÁF¿me
 = 
m_äame
->
Œ“
()->
·»Á
())

4016 
æags
 |ğ
·»ÁF¿me
->
lßd”
()->
§ndboxFÏgs
();

4017 ià(
HTMLF¿meOwÃrEËm’t
* 
	gowÃrEËm’t
 = 
m_äame
->
owÃrEËm’t
())

4018 
æags
 |ğ
owÃrEËm’t
->
§ndboxFÏgs
();

4020 ià(
	gm_§ndboxFÏgs
 =ğ
æags
)

4023 
	gm_§ndboxFÏgs
 = 
æags
;

4025 
F¿me
* 
	gchd
 = 
m_äame
->
Œ“
()->
fœ¡Chd
(); chd; chd = 
chd
->Œ“()->
ÃxtSiblšg
())

4026 
chd
->
lßd”
()->
upd©eSªdboxFÏgs
();

4029 
boŞ
 
	gF¿meLßd”
::
isDocum’tSªdboxed
(
SªdboxFÏgs
 
mask
) const

4031  
m_äame
->
docum’t
(è&& m_äame->docum’t()->
£cur™yOrigš
()->
isSªdboxed
(
mask
);

4034 
	gPassRefPŒ
<
	gWidg‘
> 
	gF¿meLßd”
::
ü—‹JavaAµËtWidg‘
(cÚ¡ 
IÁSize
& 
size
, 
HTMLAµËtEËm’t
* 
–em’t
, cÚ¡ 
HashM­
<
SŒšg
, SŒšg>& 
¬gs
)

4036 
SŒšg
 
	gba£URLSŒšg
;

4037 
SŒšg
 
	gcodeBa£URLSŒšg
;

4038 
	gVeùÜ
<
	gSŒšg
> 
	g·¿mNames
;

4039 
	gVeùÜ
<
	gSŒšg
> 
	g·¿mV®ues
;

4040 
	gHashM­
<
	gSŒšg
, SŒšg>::
cÚ¡_™”©Ü
 
’d
 = 
¬gs
.end();

4041 
	gHashM­
<
	gSŒšg
, SŒšg>::
cÚ¡_™”©Ü
 
™
 = 
¬gs
.
begš
(); 
	g™
 !ğ
’d
; ++it) {

4042 ià(
equ®IgnÜšgCa£
(
™
->
fœ¡
, "baseurl"))

4043 
	gba£URLSŒšg
 = 
™
->
£cÚd
;

4044 ià(
equ®IgnÜšgCa£
(
™
->
fœ¡
, "codebase"))

4045 
	gcodeBa£URLSŒšg
 = 
™
->
£cÚd
;

4046 
	g·¿mNames
.
­³nd
(
™
->
fœ¡
);

4047 
	g·¿mV®ues
.
­³nd
(
™
->
£cÚd
);

4050 ià(!
	gcodeBa£URLSŒšg
.
isEm±y
()) {

4051 
KURL
 
	gcodeBa£URL
 = 
com¶‘eURL
(
codeBa£URLSŒšg
);

4052 ià(!
	gSecur™yOrigš
::
ÿnLßd
(
codeBa£URL
, 
SŒšg
(), 
–em’t
->
docum’t
())) {

4053 
	gF¿meLßd”
::
»pÜtLoÿlLßdFaed
(
m_äame
, 
codeBa£URL
.
¡ršg
());

4058 ià(
	gba£URLSŒšg
.
isEm±y
())

4059 
	gba£URLSŒšg
 = 
m_äame
->
docum’t
()->
ba£URL
().
¡ršg
();

4060 
KURL
 
	gba£URL
 = 
com¶‘eURL
(
ba£URLSŒšg
);

4062 
	gRefPŒ
<
	gWidg‘
> 
	gwidg‘
 = 
m_ş›Á
->
ü—‹JavaAµËtWidg‘
(
size
, 
–em’t
, 
ba£URL
, 
·¿mNames
, 
·¿mV®ues
);

4063 ià(!
	gwidg‘
)

4066 
	gm_cÚšsPlugIns
 = 
Œue
;

4067  
	gwidg‘
;

4070 
	gF¿meLßd”
::
didChªgeT™Ë
(
Docum’tLßd”
* 
lßd”
)

4072 
m_ş›Á
->
didChªgeT™Ë
(
lßd”
);

4074 ià(
	glßd”
 =ğ
m_docum’tLßd”
) {

4076 
hi¡Üy
()->
£tCu¼’tI‹mT™Ë
(
lßd”
->
t™Ë
());

4078 
	gm_ş›Á
->
£tT™Ë
(
lßd”
->
t™Ë
(),†ßd”->
u¾FÜHi¡Üy
());

4079 
	gm_ş›Á
->
£tMašF¿meDocum’tR—dy
(
Œue
);

4080 
	gm_ş›Á
->
di¥©chDidReûiveT™Ë
(
lßd”
->
t™Ë
());

4084 
	gF¿meLßd”
::
di¥©chDidComm™Lßd
()

4086 ià(
m_ü—tšgIn™ŸlEm±yDocum’t
)

4089 #iâdeà
NDEBUG


4090 
	gm_didDi¥©chDidComm™Lßd
 = 
Œue
;

4093 
	gm_ş›Á
->
di¥©chDidComm™Lßd
();

4095 #ià
ENABLE
(
INSPECTOR
)

4096 ià(
Page
* 
	g·ge
 = 
m_äame
->
·ge
())

4097 
·ge
->
š¥eùÜCÚŒŞËr
()->
didComm™Lßd
(
m_docum’tLßd”
.
g‘
());

4101 
	gF¿meLßd”
::
‹ÎCl›ÁAboutPa¡MemÜyCacheLßds
()

4103 
ASSERT
(
m_äame
->
·ge
());

4104 
ASSERT
(
m_äame
->
·ge
()->
¬eMemÜyCacheCl›ÁC®lsEÇbËd
());

4106 ià(!
	gm_docum’tLßd”
)

4109 
	gVeùÜ
<
	gSŒšg
> 
	g·¡Lßds
;

4110 
	gm_docum’tLßd”
->
keMemÜyCacheLßdsFÜCl›ÁNÙifiÿtiÚ
(
·¡Lßds
);

4112 
size_t
 
	gsize
 = 
·¡Lßds
.
size
();

4113 
size_t
 
	gi
 = 0; i < 
	gsize
; ++i) {

4114 
CachedResourû
* 
	g»sourû
 = 
ÿche
()->
»sourûFÜURL
(
·¡Lßds
[
i
]);

4120 ià(!
	g»sourû
)

4123 
ResourûReque¡
 
»que¡
(
»sourû
->
u¾
());

4124 
	gm_ş›Á
->
di¥©chDidLßdResourûFromMemÜyCache
(
m_docum’tLßd”
.
g‘
(), 
»que¡
, 
»sourû
->
»¥Ú£
(),„esourû->
’codedSize
());

4128 
boŞ
 
	gF¿meLßd”Cl›Á
::
hasHTMLV›w
() const

4130  
Œue
;

	@FrameLoader.h

31 #iâdeà
F¿meLßd”_h


32 
	#F¿meLßd”_h


	)

34 
	~"CachePŞicy.h
"

35 
	~"F¿meLßd”Ty³s.h
"

36 
	~"Hi¡ÜyCÚŒŞËr.h
"

37 
	~"PŞicyC®lback.h
"

38 
	~"PŞicyCheck”.h
"

39 
	~"RedœeùScheduËr.h
"

40 
	~"ResourûLßdNÙif›r.h
"

41 
	~"ResourûReque¡.h
"

42 
	~"Th»adabËLßd”.h
"

43 
	~"Tim”.h
"

44 
	~<wtf/FÜw¬d.h
>

46 
Çme¥aû
 
	gWebCÜe
 {

48 
şass
 
	gArchive
;

49 
şass
 
	gAuth’tiÿtiÚCh®Ënge
;

50 
şass
 
	gCachedF¿meBa£
;

51 
şass
 
	gCachedPage
;

52 
şass
 
	gCachedResourû
;

53 
şass
 
	gDOMW¿µ”WÜld
;

54 
şass
 
	gDocum’t
;

55 
şass
 
	gDocum’tLßd”
;

56 
şass
 
	gEv’t
;

57 
şass
 
	gFÜmD©a
;

58 
şass
 
	gFÜmS‹
;

59 
şass
 
	gF¿me
;

60 
şass
 
	gF¿meLßd”Cl›Á
;

61 
şass
 
	gHi¡ÜyI‹m
;

62 
şass
 
	gHTMLAµËtEËm’t
;

63 
şass
 
	gHTMLFÜmEËm’t
;

64 
şass
 
	gHTMLF¿meOwÃrEËm’t
;

65 
şass
 
	gIcÚLßd”
;

66 
şass
 
	gIÁSize
;

67 
şass
 
	gNavig©iÚAùiÚ
;

68 #ià
ENABLE
(
PLUGIN_PROXY_FOR_VIDEO
)

69 
şass
 
	gNode
;

71 
şass
 
	gR’d”EmbeddedObjeù
;

72 
şass
 
	gResourûE¼Ü
;

73 
şass
 
	gResourûLßd”
;

74 
şass
 
	gResourûRe¥Ú£
;

75 
şass
 
	gSütSourûCode
;

76 
şass
 
	gSütSŒšg
;

77 
şass
 
	gSütV®ue
;

78 
şass
 
	gSecur™yOrigš
;

79 
şass
 
	gS”ŸlizedSütV®ue
;

80 
şass
 
	gSh¬edBufãr
;

81 
şass
 
	gSub¡™u‹D©a
;

82 
şass
 
	gTextResourûDecod”
;

83 
şass
 
	gWidg‘
;

85 
	gF¿meLßdReque¡
;

86 
	gWšdowF—tu»s
;

88 
boŞ
 
isBackFÜw¬dLßdTy³
(
F¿meLßdTy³
);

90 şas 
	cF¿meLßd”
 : 
public
 
NÚcİyabË
 {

91 
public
:

92 
F¿meLßd”
(
F¿me
*, 
F¿meLßd”Cl›Á
*);

93 ~
F¿meLßd”
();

95 
š™
();

97 
F¿me
* 
äame
(ècÚ¡ {  
	gm_äame
; }

99 
PŞicyCheck”
* 
pŞicyCheck”
(ècÚ¡ {  &
	gm_pŞicyCheck”
; }

100 
Hi¡ÜyCÚŒŞËr
* 
hi¡Üy
(ècÚ¡ {  &
	gm_hi¡Üy
; }

101 
ResourûLßdNÙif›r
* 
nÙif›r
(ècÚ¡ {  &
	gm_nÙiãr
; }

107 
´•¬eFÜLßdS¹
();

108 
£tupFÜR•Ïû
();

109 
£tupFÜR•ÏûByMIMETy³
(cÚ¡ 
SŒšg
& 
ÃwMIMETy³
);

111 
lßdURLIÁoChdF¿me
(cÚ¡ 
KURL
&, cÚ¡ 
SŒšg
& 
»ã»r
, 
F¿me
*);

113 
lßdF¿meReque¡
(cÚ¡ 
F¿meLßdReque¡
&, 
boŞ
 
lockHi¡Üy
, boŞ 
lockBackFÜw¬dLi¡
,

114 
PassRefPŒ
<
Ev’t
>, PassRefPŒ<
FÜmS‹
>, 
Reã¼”PŞicy
);

116 
lßd
(cÚ¡ 
ResourûReque¡
&, 
boŞ
 
lockHi¡Üy
);

117 
lßd
(cÚ¡ 
ResourûReque¡
&, cÚ¡ 
Sub¡™u‹D©a
&, 
boŞ
 
lockHi¡Üy
);

118 
lßd
(cÚ¡ 
ResourûReque¡
&, cÚ¡ 
SŒšg
& 
äameName
, 
boŞ
 
lockHi¡Üy
);

120 
lßdArchive
(
PassRefPŒ
<
Archive
>);

122 
»pÜtLoÿlLßdFaed
(
F¿me
*, cÚ¡ 
SŒšg
& 
u¾
);

125 
F¿me
* 
ü—‹Wšdow
(
F¿meLßd”
* 
äameLßd”FÜF¿meLookup
, cÚ¡ 
F¿meLßdReque¡
&, cÚ¡ 
WšdowF—tu»s
&, 
boŞ
& 
ü—‹d
);

127 
lßdResourûSynchrÚou¦y
(cÚ¡ 
ResourûReque¡
&, 
StÜedC»d’tŸls
, 
ResourûE¼Ü
&, 
ResourûRe¥Ú£
&, 
VeùÜ
<>& 
d©a
);

129 
boŞ
 
ÿnHªdËReque¡
(cÚ¡ 
ResourûReque¡
&);

132 
¡İAÎLßd”s
(
D©aba£PŞicy
 = 
D©aba£PŞicyStİ
);

133 
¡İFÜU£rCªûl
(
boŞ
 
deãrCheckLßdCom¶‘e
 = 
çl£
);

135 
boŞ
 
isLßdšgMašResourû
(ècÚ¡ {  
	gm_isLßdšgMašResourû
; }

136 
boŞ
 
isLßdšg
() const;

137 
boŞ
 
äameHasLßded
() const;

139 
numP’dšgOrLßdšgReque¡s
(
boŞ
 
»cur£
) const;

140 
SŒšg
 
»ã¼”
() const;

141 
SŒšg
 
outgošgReã¼”
() const;

142 
SŒšg
 
outgošgOrigš
() const;

144 
Docum’tLßd”
* 
aùiveDocum’tLßd”
() const;

145 
Docum’tLßd”
* 
docum’tLßd”
(ècÚ¡ {  
	gm_docum’tLßd”
.
g‘
(); }

146 
Docum’tLßd”
* 
pŞicyDocum’tLßd”
(ècÚ¡ {  
	gm_pŞicyDocum’tLßd”
.
g‘
(); }

147 
Docum’tLßd”
* 
´ovisiÚ®Docum’tLßd”
(ècÚ¡ {  
	gm_´ovisiÚ®Docum’tLßd”
.
g‘
(); }

148 
F¿meS‹
 
¡©e
(ècÚ¡ {  
	gm_¡©e
; }

149 
timeOfLa¡Com¶‘edLßd
();

151 
boŞ
 
shouldU£C»d’tŸlStÜage
(
ResourûLßd”
*);

152 cÚ¡ 
	gResourûReque¡
& 
Üigš®Reque¡
() const;

153 cÚ¡ 
	gResourûReque¡
& 
š™ŸlReque¡
() const;

154 
»ûivedMašResourûE¼Ü
(cÚ¡ 
ResourûE¼Ü
&, 
boŞ
 
isCom¶‘e
);

155 
»ûivedD©a
(const *, );

157 
boŞ
 
wlLßdMedŸEËm’tURL
(
KURL
&);

159 
hªdËF®lbackCÚ‹Á
();

160 
boŞ
 
isStİpšg
() const;

162 
fšishedLßdšg
();

164 
ResourûE¼Ü
 
ÿnûÎedE¼Ü
(cÚ¡ 
ResourûReque¡
&) const;

165 
ResourûE¼Ü
 
feDÛsNÙExi¡E¼Ü
(cÚ¡ 
ResourûRe¥Ú£
&) const;

166 
ResourûE¼Ü
 
blockedE¼Ü
(cÚ¡ 
ResourûReque¡
&) const;

167 
ResourûE¼Ü
 
ÿÂÙShowURLE¼Ü
(cÚ¡ 
ResourûReque¡
&) const;

168 
ResourûE¼Ü
 
š‹¼u±iÚFÜPŞicyChªgeE¼Ü
(cÚ¡ 
ResourûReque¡
&);

170 
boŞ
 
isHo¡edByObjeùEËm’t
() const;

171 
boŞ
 
isLßdšgMašF¿me
() const;

172 
boŞ
 
ÿnShowMIMETy³
(cÚ¡ 
SŒšg
& 
MIMETy³
) const;

173 
boŞ
 
»´e£Á©iÚExi¡sFÜURLScheme
(cÚ¡ 
SŒšg
& 
URLScheme
);

174 
SŒšg
 
g’”©edMIMETy³FÜURLScheme
(cÚ¡ SŒšg& 
URLScheme
);

176 
»lßd
(
boŞ
 
’dToEndR–ßd
 = 
çl£
);

177 
»lßdW™hOv”rideEncodšg
(cÚ¡ 
SŒšg
& 
ov”rideEncodšg
);

179 
didReûiveS”v”RedœeùFÜProvisiÚ®LßdFÜF¿me
();

180 
fšishedLßdšgDocum’t
(
Docum’tLßd”
*);

181 
comm™‹dLßd
(
Docum’tLßd”
*, const *, );

182 
boŞ
 
isR•Ïcšg
() const;

183 
£tR•Ïcšg
();

184 
»v”tToProvisiÚ®
(
Docum’tLßd”
*);

185 
£tMašDocum’tE¼Ü
(
Docum’tLßd”
*, cÚ¡ 
ResourûE¼Ü
&);

186 
mašReûivedCom¶‘eE¼Ü
(
Docum’tLßd”
*, cÚ¡ 
ResourûE¼Ü
&);

187 
boŞ
 
subäameIsLßdšg
() const;

188 
wlChªgeT™Ë
(
Docum’tLßd”
*);

189 
didChªgeT™Ë
(
Docum’tLßd”
*);

191 
F¿meLßdTy³
 
lßdTy³
() const;

192 
CachePŞicy
 
sub»sourûCachePŞicy
() const;

194 
didFœ¡Layout
();

195 
boŞ
 
fœ¡LayoutDÚe
() const;

197 
didFœ¡Visu®lyNÚEm±yLayout
();

199 
lßdedResourûFromMemÜyCache
(cÚ¡ 
CachedResourû
*);

200 
‹ÎCl›ÁAboutPa¡MemÜyCacheLßds
();

202 
checkLßdCom¶‘e
();

203 
d‘achFromP¬’t
();

204 
d‘achV›wsAndDocum’tLßd”
();

206 
addExŒaF›ldsToSub»sourûReque¡
(
ResourûReque¡
&);

207 
addExŒaF›ldsToMašResourûReque¡
(
ResourûReque¡
&);

209 
addHTTPOrigšIfN“ded
(
ResourûReque¡
&, 
SŒšg
 
Üigš
);

211 
F¿meLßd”Cl›Á
* 
ş›Á
(ècÚ¡ {  
	gm_ş›Á
; }

213 
£tDeãrsLßdšg
(
boŞ
);

215 
chªgeLoÿtiÚ
(cÚ¡ 
KURL
&, cÚ¡ 
SŒšg
& 
»ã¼”
, 
boŞ
 
lockHi¡Üy
 = 
Œue
, boŞ 
lockBackFÜw¬dLi¡
 =rue, boŞ 
u£rGe¡u»
 = 
çl£
, boŞ 
»äesh
 = false);

216 
u¾S–eùed
(cÚ¡ 
ResourûReque¡
&, cÚ¡ 
SŒšg
& 
rg‘
, 
PassRefPŒ
<
Ev’t
>, 
boŞ
 
lockHi¡Üy
, boŞ 
lockBackFÜw¬dLi¡
, boŞ 
u£rGe¡u»
, 
Reã¼”PŞicy
);

217 
boŞ
 
»que¡F¿me
(
HTMLF¿meOwÃrEËm’t
*, cÚ¡ 
SŒšg
& 
u¾
, cÚ¡ 
AtomicSŒšg
& 
äameName
, boŞ 
lockHi¡Üy
 = 
Œue
, boŞ 
lockBackFÜw¬dLi¡
 =rue);

219 
subm™FÜm
(cÚ¡ * 
aùiÚ
, cÚ¡ 
SŒšg
& 
u¾
,

220 
PassRefPŒ
<
FÜmD©a
>, cÚ¡ 
SŒšg
& 
rg‘
, cÚ¡ SŒšg& 
cÚ‹ÁTy³
, cÚ¡ SŒšg& 
bound¬y
,

221 
boŞ
 
lockHi¡Üy
, 
PassRefPŒ
<
Ev’t
>, PassRefPŒ<
FÜmS‹
>);

223 
¡İ
();

224 
¡İLßdšg
(
UÆßdEv’tPŞicy
, 
D©aba£PŞicy
 = 
D©aba£PŞicyStİ
);

225 
boŞ
 
şo£URL
();

227 
didEx¶ic™O³n
();

229 
KURL
 
icÚURL
();

230 
comm™IcÚURLToIcÚD©aba£
(cÚ¡ 
KURL
&);

232 
KURL
 
ba£URL
() const;

234 
»¶aûDocum’t
(cÚ¡ 
SŒšg
&);

236 
begš
();

237 
begš
(cÚ¡ 
KURL
&, 
boŞ
 
di¥©chWšdowObjeùAvaabË
 = 
Œue
, 
Secur™yOrigš
* 
fÜûdSecur™yOrigš
 = 0);

239 
wr™e
(cÚ¡ * 
¡ršg
, 
Ëngth
 = -1, 
boŞ
 
æush
 = 
çl£
);

240 
wr™e
(cÚ¡ 
SŒšg
&);

241 
’d
();

242 
’dIfNÙLßdšgMašResourû
();

244 
£tEncodšg
(cÚ¡ 
SŒšg
& 
’codšg
, 
boŞ
 
u£rCho£n
);

245 
SŒšg
 
’codšg
() const;

247 
tok’iz”Proûs£dD©a
();

249 
hªdËdOÆßdEv’ts
();

250 
SŒšg
 
u£rAg’t
(cÚ¡ 
KURL
&) const;

252 
	gPassRefPŒ
<
	gWidg‘
> 
ü—‹JavaAµËtWidg‘
(cÚ¡ 
IÁSize
&, 
HTMLAµËtEËm’t
*, cÚ¡ 
HashM­
<
SŒšg
, SŒšg>& 
¬gs
);

254 
di¥©chDidCË¬WšdowObjeùInWÜld
(
DOMW¿µ”WÜld
*);

255 
di¥©chDidCË¬WšdowObjeùsInAÎWÜlds
();

256 
di¥©chDocum’tEËm’tAvaabË
();

258 
owÃrEËm’tSªdboxFÏgsChªged
(è{ 
upd©eSªdboxFÏgs
(); }

260 
boŞ
 
isSªdboxed
(
SªdboxFÏgs
 
mask
ècÚ¡ {  
	gm_§ndboxFÏgs
 & 
	gmask
; }

261 
SªdboxFÏgs
 
§ndboxFÏgs
(ècÚ¡ {  
	gm_§ndboxFÏgs
; }

264 
£tFÜûdSªdboxFÏgs
(
SªdboxFÏgs
 
æags
è{ 
	gm_fÜûdSªdboxFÏgs
 = fÏgs; 
	gm_§ndboxFÏgs
 |= flags; }

267 
boŞ
 
isMixedCÚ‹Á
(
Secur™yOrigš
* 
cÚ‹xt
, cÚ¡ 
KURL
&);

268 
checkIfDi¥ÏyIn£cu»CÚ‹Á
(
Secur™yOrigš
* 
cÚ‹xt
, cÚ¡ 
KURL
&);

269 
checkIfRunIn£cu»CÚ‹Á
(
Secur™yOrigš
* 
cÚ‹xt
, cÚ¡ 
KURL
&);

271 
F¿me
* 
İ’”
();

272 
£tO³Ãr
(
F¿me
*);

274 
boŞ
 
isProûssšgU£rGe¡u»
();

276 
»£tMuÉËFÜmSubmissiÚPrÙeùiÚ
();

278 
addD©a
(cÚ¡ * 
by‹s
, 
Ëngth
);

280 
checkC®lIm¶ic™Clo£
();

282 
äameD‘ached
();

284 cÚ¡ 
	gKURL
& 
u¾
(ècÚ¡ {  
	gm_URL
; }

286 
£tRe¥Ú£MIMETy³
(cÚ¡ 
SŒšg
&);

287 cÚ¡ 
	gSŒšg
& 
»¥Ú£MIMETy³
() const;

289 
boŞ
 
®lowPlugšs
(
R—sÚFÜC®lšgAÎowPlugšs
);

290 
boŞ
 
cÚšsPlugšs
() const;

292 
lßdDÚe
();

293 
fšishedP¬sšg
();

294 
checkCom¶‘ed
();

296 
checkDidP”fÜmFœ¡Navig©iÚ
();

298 
boŞ
 
isCom¶‘e
() const;

300 
boŞ
 
»que¡Objeù
(
R’d”EmbeddedObjeù
*, cÚ¡ 
SŒšg
& 
u¾
, cÚ¡ 
AtomicSŒšg
& 
äameName
,

301 cÚ¡ 
SŒšg
& 
£rviûTy³
, cÚ¡ 
VeùÜ
<SŒšg>& 
·¿mNames
, cÚ¡ VeùÜ<SŒšg>& 
·¿mV®ues
);

303 
KURL
 
com¶‘eURL
(cÚ¡ 
SŒšg
& 
u¾
);

305 
ÿnûlAndCË¬
();

307 
£tT™Ë
(cÚ¡ 
SŒšg
&);

309 
comm™ProvisiÚ®Lßd
(
PassRefPŒ
<
CachedPage
>);

310 
boŞ
 
isLßdšgFromCachedPage
(ècÚ¡ {  
	gm_lßdšgFromCachedPage
; }

312 
boŞ
 
comm™tšgFœ¡R—lLßd
(ècÚ¡ {  !
	gm_ü—tšgIn™ŸlEm±yDocum’t
 && !
	gm_comm™‹dFœ¡R—lDocum’tLßd
; }

313 
boŞ
 
comm™‹dFœ¡R—lDocum’tLßd
(ècÚ¡ {  
	gm_comm™‹dFœ¡R—lDocum’tLßd
; }

314 
boŞ
 
ü—tšgIn™ŸlEm±yDocum’t
(ècÚ¡ {  
	gm_ü—tšgIn™ŸlEm±yDocum’t
; }

316 
icÚLßdDecisiÚAvaabË
();

318 
boŞ
 
shouldAÎowNavig©iÚ
(
F¿me
* 
rg‘F¿me
) const;

319 
F¿me
* 
fšdF¿meFÜNavig©iÚ
(cÚ¡ 
AtomicSŒšg
& 
Çme
);

321 
¡¬tIcÚLßd”
();

323 
­¶yU£rAg’t
(
ResourûReque¡
& 
»que¡
);

325 
boŞ
 
shouldIÁ”ru±LßdFÜXF¿meO±iÚs
(cÚ¡ 
SŒšg
&, cÚ¡ 
KURL
&);

327 
İ’
(
CachedF¿meBa£
&);

329 #ià
ENABLE
(
PLUGIN_PROXY_FOR_VIDEO
)

330 
	gPassRefPŒ
<
	gWidg‘
> 
lßdMedŸPÏy”ProxyPlugš
(
Node
*, cÚ¡ 
KURL
&, cÚ¡ 
VeùÜ
<
SŒšg
>& 
·¿mNames
, cÚ¡ VeùÜ<SŒšg>& 
·¿mV®ues
);

334 
com¶‘ed
();

335 
boŞ
 
®lAnû¡ÜsA»Com¶‘e
() const;

336 
boŞ
 
®lChd»nA»Com¶‘e
() const;

337 
ş›ÁRedœeùed
(cÚ¡ 
KURL
&, 
d–ay
, 
fœeD©e
, 
boŞ
 
lockBackFÜw¬dLi¡
);

338 
ş›ÁRedœeùCªûÎedOrFšished
(
boŞ
 
ÿnûlW™hLßdInProg»ss
);

339 
lßdI‹m
(
Hi¡ÜyI‹m
*, 
F¿meLßdTy³
);

344 
cÚtšueLßdAá”WlSubm™FÜm
();

346 
boŞ
 
suµ»ssO³ÃrInNewF¿me
(ècÚ¡ {  
	gm_suµ»ssO³ÃrInNewF¿me
; }

348 
ObjeùCÚ‹ÁTy³
 
deçuÉObjeùCÚ‹ÁTy³
(cÚ¡ 
KURL
& 
u¾
, cÚ¡ 
SŒšg
& 
mimeTy³
);

350 
	g´iv©e
:

351 
boŞ
 
ÿnCachePageCÚššgThisF¿me
();

352 #iâdeà
NDEBUG


353 
logCªCachePageDecisiÚ
();

354 
boŞ
 
logCªCacheF¿meDecisiÚ
(
šd’tLev–
);

357 
checkTim”Fœed
(
Tim”
<
F¿meLßd”
>*);

359 
¡¬‹d
();

361 
boŞ
 
shouldU£Plugš
(cÚ¡ 
KURL
&, cÚ¡ 
SŒšg
& 
mimeTy³
, boŞ 
hasF®lback
, boŞ& 
u£F®lback
);

362 
boŞ
 
lßdPlugš
(
R’d”EmbeddedObjeù
*, cÚ¡ 
KURL
&, cÚ¡ 
SŒšg
& 
mimeTy³
,

363 cÚ¡ 
VeùÜ
<
SŒšg
>& 
·¿mNames
, cÚ¡ VeùÜ<SŒšg>& 
·¿mV®ues
, 
boŞ
 
u£F®lback
);

365 
Çvig©eW™hšDocum’t
(
Hi¡ÜyI‹m
*);

366 
Çvig©eToDifã»ÁDocum’t
(
Hi¡ÜyI‹m
*, 
F¿meLßdTy³
);

368 
boŞ
 
lßdProvisiÚ®I‹mFromCachedPage
();

369 
ÿchePageFÜHi¡ÜyI‹m
(
Hi¡ÜyI‹m
*);

370 
·geHidd’
();

372 
»ûivedFœ¡D©a
();

374 
upd©eFœ¡P¬tyFÜCook›s
();

375 
£tFœ¡P¬tyFÜCook›s
(cÚ¡ 
KURL
&);

377 
addExŒaF›ldsToReque¡
(
ResourûReque¡
&, 
F¿meLßdTy³
 
lßdTy³
, 
boŞ
 
isMašResourû
, boŞ 
cook›PŞicyURLFromReque¡
);

380 
¡İLßdšgSubäames
();

382 
ş—rProvisiÚ®Lßd
();

383 
m¬kLßdCom¶‘e
();

384 
Œªs™iÚToComm™‹d
(
PassRefPŒ
<
CachedPage
>);

385 
äameLßdCom¶‘ed
();

387 
mašReûivedE¼Ü
(cÚ¡ 
ResourûE¼Ü
&, 
boŞ
 
isCom¶‘e
);

389 
£tLßdTy³
(
F¿meLßdTy³
);

391 
ÿÎCÚtšueLßdAá”Navig©iÚPŞicy
(*, cÚ¡ 
ResourûReque¡
&, 
PassRefPŒ
<
FÜmS‹
>, 
boŞ
 
shouldCÚtšue
);

392 
ÿÎCÚtšueLßdAá”NewWšdowPŞicy
(*, cÚ¡ 
ResourûReque¡
&, 
PassRefPŒ
<
FÜmS‹
>, cÚ¡ 
SŒšg
& 
äameName
, 
boŞ
 
shouldCÚtšue
);

393 
ÿÎCÚtšueF¿gm’tSüŞlAá”Navig©iÚPŞicy
(*, cÚ¡ 
ResourûReque¡
&, 
PassRefPŒ
<
FÜmS‹
>, 
boŞ
 
shouldCÚtšue
);

395 
cÚtšueLßdAá”Navig©iÚPŞicy
(cÚ¡ 
ResourûReque¡
&, 
PassRefPŒ
<
FÜmS‹
>, 
boŞ
 
shouldCÚtšue
);

396 
cÚtšueLßdAá”NewWšdowPŞicy
(cÚ¡ 
ResourûReque¡
&, 
PassRefPŒ
<
FÜmS‹
>, cÚ¡ 
SŒšg
& 
äameName
, 
boŞ
 
shouldCÚtšue
);

397 
cÚtšueF¿gm’tSüŞlAá”Navig©iÚPŞicy
(cÚ¡ 
ResourûReque¡
&, 
boŞ
 
shouldCÚtšue
);

399 
boŞ
 
shouldSüŞlToAnchÜ
(boŞ 
isFÜmSubmissiÚ
, 
F¿meLßdTy³
, cÚ¡ 
KURL
&);

401 
checkLßdCom¶‘eFÜThisF¿me
();

403 
£tDocum’tLßd”
(
Docum’tLßd”
*);

404 
£tPŞicyDocum’tLßd”
(
Docum’tLßd”
*);

405 
£tProvisiÚ®Docum’tLßd”
(
Docum’tLßd”
*);

407 
£tS‹
(
F¿meS‹
);

409 
şo£OldD©aSourûs
();

410 
İ’
(
CachedPage
&);

412 
upd©eHi¡ÜyAá”Cl›ÁRedœeù
();

414 
ş—r
(
boŞ
 
ş—rWšdowPrİ”t›s
 = 
Œue
, boŞ 
ş—rSütObjeùs
 =rue, boŞ 
ş—rF¿meV›w
 =rue);

416 
boŞ
 
shouldR–ßdToHªdËUÄ—chabËURL
(
Docum’tLßd”
*);

418 
di¥©chDidComm™Lßd
();

420 
lßdW™hDocum’tLßd”
(
Docum’tLßd”
*, 
F¿meLßdTy³
, 
PassRefPŒ
<
FÜmS‹
>);

421 
lßd
(
Docum’tLßd”
*);

423 
lßdW™hNavig©iÚAùiÚ
(cÚ¡ 
ResourûReque¡
&, cÚ¡ 
Navig©iÚAùiÚ
&,

424 
boŞ
 
lockHi¡Üy
, 
F¿meLßdTy³
, 
PassRefPŒ
<
FÜmS‹
>);

426 
lßdPo¡Reque¡
(cÚ¡ 
ResourûReque¡
&, cÚ¡ 
SŒšg
& 
»ã¼”
,

427 cÚ¡ 
SŒšg
& 
äameName
, 
boŞ
 
lockHi¡Üy
, 
F¿meLßdTy³
, 
PassRefPŒ
<
Ev’t
>, PassRefPŒ<
FÜmS‹
>);

428 
lßdURL
(cÚ¡ 
KURL
&, cÚ¡ 
SŒšg
& 
»ã¼”
, cÚ¡ SŒšg& 
äameName
,

429 
boŞ
 
lockHi¡Üy
, 
F¿meLßdTy³
, 
PassRefPŒ
<
Ev’t
>, PassRefPŒ<
FÜmS‹
>);

431 
boŞ
 
shouldR–ßd
(cÚ¡ 
KURL
& 
cu¼’tURL
, cÚ¡ KURL& 
de¡š©iÚURL
);

433 
»que¡FromD–eg©e
(
ResourûReque¡
&, & 
id’tif›r
, 
ResourûE¼Ü
&);

435 
»cursiveCheckLßdCom¶‘e
();

437 
d‘achChd»n
();

438 
şo£AndRemoveChd
(
F¿me
*);

440 
F¿me
* 
lßdSubäame
(
HTMLF¿meOwÃrEËm’t
*, cÚ¡ 
KURL
&, cÚ¡ 
SŒšg
& 
Çme
, cÚ¡ SŒšg& 
»ã¼”
);

442 
lßdInSameDocum’t
(cÚ¡ 
KURL
&, 
S”ŸlizedSütV®ue
* 
¡©eObjeù
, 
boŞ
 
isNewNavig©iÚ
);

444 
´ovisiÚ®LßdS¹ed
();

446 
boŞ
 
ÿnCachePage
();

448 
boŞ
 
didO³nURL
(cÚ¡ 
KURL
&);

450 
scheduËCheckCom¶‘ed
();

451 
scheduËCheckLßdCom¶‘e
();

452 
¡¬tCheckCom¶‘eTim”
();

454 
KURL
 
Üigš®Reque¡URL
() const;

456 
boŞ
 
shouldT»©URLAsSameAsCu¼’t
(cÚ¡ 
KURL
&) const;

458 
upd©eSªdboxFÏgs
();

460 
boŞ
 
isDocum’tSªdboxed
(
SªdboxFÏgs
) const;

462 
F¿me
* 
	gm_äame
;

463 
F¿meLßd”Cl›Á
* 
	gm_ş›Á
;

465 
mubË
 
PŞicyCheck”
 
	gm_pŞicyCheck”
;

466 
mubË
 
Hi¡ÜyCÚŒŞËr
 
	gm_hi¡Üy
;

467 
mubË
 
ResourûLßdNÙif›r
 
	gm_nÙiãr
;

469 
F¿meS‹
 
	gm_¡©e
;

470 
F¿meLßdTy³
 
	gm_lßdTy³
;

476 
	gRefPŒ
<
	gDocum’tLßd”
> 
	gm_docum’tLßd”
;

477 
	gRefPŒ
<
	gDocum’tLßd”
> 
	gm_´ovisiÚ®Docum’tLßd”
;

478 
	gRefPŒ
<
	gDocum’tLßd”
> 
	gm_pŞicyDocum’tLßd”
;

480 
boŞ
 
	gm_d–eg©eIsHªdlšgProvisiÚ®LßdE¼Ü
;

482 
boŞ
 
	gm_fœ¡LayoutDÚe
;

483 
boŞ
 
	gm_quickRedœeùComšg
;

484 
boŞ
 
	gm_£ÁRedœeùNÙifiÿtiÚ
;

485 
boŞ
 
	gm_šStİAÎLßd”s
;

487 
SŒšg
 
	gm_outgošgReã¼”
;

489 
boŞ
 
	gm_isExecutšgJavaSütFÜmAùiÚ
;

491 
SŒšg
 
	gm_»¥Ú£MIMETy³
;

493 
boŞ
 
	gm_didC®lIm¶ic™Clo£
;

494 
boŞ
 
	gm_wasUÆßdEv’tEm™‹d
;

495 
boŞ
 
	gm_uÆßdEv’tBešgDi¥©ched
;

496 
boŞ
 
	gm_isCom¶‘e
;

497 
boŞ
 
	gm_isLßdšgMašResourû
;

499 
	gRefPŒ
<
	gS”ŸlizedSütV®ue
> 
	gm_³ndšgS‹Objeù
;

501 
KURL
 
	gm_URL
;

502 
KURL
 
	gm_wÜkšgURL
;

504 
	gOwnPŒ
<
	gIcÚLßd”
> 
	gm_icÚLßd”
;

505 
boŞ
 
	gm_mayLßdIcÚL©”
;

507 
boŞ
 
	gm_ÿnûÎšgW™hLßdInProg»ss
;

509 
boŞ
 
	gm_ÃedsCË¬
;

510 
boŞ
 
	gm_»ûivedD©a
;

512 
boŞ
 
	gm_’codšgWasCho£nByU£r
;

513 
SŒšg
 
	gm_’codšg
;

514 
	gRefPŒ
<
	gTextResourûDecod”
> 
	gm_decod”
;

516 
boŞ
 
	gm_cÚšsPlugIns
;

518 
KURL
 
	gm_subm™‹dFÜmURL
;

520 
	gTim”
<
	gF¿meLßd”
> 
	gm_checkTim”
;

521 
boŞ
 
	gm_shouldC®lCheckCom¶‘ed
;

522 
boŞ
 
	gm_shouldC®lCheckLßdCom¶‘e
;

524 
F¿me
* 
	gm_İ’”
;

525 
	gHashS‘
<
	gF¿me
*> 
	gm_İ’edF¿mes
;

527 
boŞ
 
	gm_ü—tšgIn™ŸlEm±yDocum’t
;

528 
boŞ
 
	gm_isDi¥ÏyšgIn™ŸlEm±yDocum’t
;

529 
boŞ
 
	gm_comm™‹dFœ¡R—lDocum’tLßd
;

531 
boŞ
 
	gm_didP”fÜmFœ¡Navig©iÚ
;

532 
boŞ
 
	gm_lßdšgFromCachedPage
;

533 
boŞ
 
	gm_suµ»ssO³ÃrInNewF¿me
;

535 
SªdboxFÏgs
 
	gm_§ndboxFÏgs
;

536 
SªdboxFÏgs
 
	gm_fÜûdSªdboxFÏgs
;

538 #iâdeà
NDEBUG


539 
boŞ
 
	gm_didDi¥©chDidComm™Lßd
;

	@FrameLoaderClient.h

29 #iâdeà
F¿meLßd”Cl›Á_h


30 
	#F¿meLßd”Cl›Á_h


	)

32 
	~"F¿meLßd”Ty³s.h
"

33 
	~"SüŞlTy³s.h
"

34 
	~<wtf/FÜw¬d.h
>

35 
	~<wtf/VeùÜ.h
>

37 
şass
 
	t_jobjeù
* 
	tjobjeù
;

39 #ià
PLATFORM
(
MAC
è&& !
defšed
(
__OBJC__
)

40 
şass
 
	gNSCachedURLRe¥Ú£
;

41 
şass
 
	gNSV›w
;

44 
Çme¥aû
 
	gWebCÜe
 {

46 
şass
 
	gAuth’tiÿtiÚCh®Ënge
;

47 
şass
 
	gCachedF¿me
;

48 
şass
 
	gCŞÜ
;

49 
şass
 
	gDOMW¿µ”WÜld
;

50 
şass
 
	gDocum’tLßd”
;

51 
şass
 
	gEËm’t
;

52 
şass
 
	gFÜmS‹
;

53 
şass
 
	gF¿me
;

54 
şass
 
	gF¿meLßd”
;

55 
şass
 
	gHi¡ÜyI‹m
;

56 
şass
 
	gHTMLAµËtEËm’t
;

57 
şass
 
	gHTMLF¿meOwÃrEËm’t
;

58 #ià
ENABLE
(
PLUGIN_PROXY_FOR_VIDEO
)

59 
şass
 
	gHTMLMedŸEËm’t
;

61 
şass
 
	gHTMLPlugInEËm’t
;

62 
şass
 
	gIÁSize
;

63 
şass
 
	gKURL
;

64 
şass
 
	gNavig©iÚAùiÚ
;

65 
şass
 
	gPlugšV›w
;

66 
şass
 
	gPŞicyCheck”
;

67 
şass
 
	gResourûE¼Ü
;

68 
şass
 
	gResourûHªdË
;

69 
şass
 
	gResourûLßd”
;

70 
şass
 
	gResourûReque¡
;

71 
şass
 
	gResourûRe¥Ú£
;

72 
şass
 
	gSütSŒšg
;

73 
şass
 
	gSecur™yOrigš
;

74 
şass
 
	gSh¬edBufãr
;

75 
şass
 
	gSub¡™u‹D©a
;

76 
şass
 
	gSŒšg
;

77 
şass
 
	gWidg‘
;

79 (
	gPŞicyCheck”
::*
	tF¿mePŞicyFunùiÚ
)(
	tPŞicyAùiÚ
);

81 şas 
	cF¿meLßd”Cl›Á
 {

82 
	gpublic
:

87 
vœtu®
 
boŞ
 
hasHTMLV›w
() const;

89 
	gvœtu®
 ~
F¿meLßd”Cl›Á
() { }

91 
vœtu®
 
äameLßd”De¡royed
() = 0;

93 
vœtu®
 
boŞ
 
hasWebV›w
() const = 0;

95 
vœtu®
 
makeR•»£Á©iÚ
(
Docum’tLßd”
*) = 0;

96 
vœtu®
 
fÜûLayout
() = 0;

97 
vœtu®
 
fÜûLayoutFÜNÚHTML
() = 0;

99 
vœtu®
 
£tCİ›sOnSüŞl
() = 0;

101 
vœtu®
 
d‘achedFromP¬’t2
() = 0;

102 
vœtu®
 
d‘achedFromP¬’t3
() = 0;

104 
vœtu®
 
assignId’tif›rToIn™ŸlReque¡
(
id’tif›r
, 
Docum’tLßd”
*, cÚ¡ 
ResourûReque¡
&) = 0;

106 
vœtu®
 
di¥©chWlS’dReque¡
(
Docum’tLßd”
*, 
id’tif›r
, 
ResourûReque¡
&, cÚ¡ 
ResourûRe¥Ú£
& 
»dœeùRe¥Ú£
) = 0;

107 
vœtu®
 
boŞ
 
shouldU£C»d’tŸlStÜage
(
Docum’tLßd”
*, 
id’tif›r
) = 0;

108 
vœtu®
 
di¥©chDidReûiveAuth’tiÿtiÚCh®Ënge
(
Docum’tLßd”
*, 
id’tif›r
, cÚ¡ 
Auth’tiÿtiÚCh®Ënge
&) = 0;

109 
vœtu®
 
di¥©chDidCªûlAuth’tiÿtiÚCh®Ënge
(
Docum’tLßd”
*, 
id’tif›r
, cÚ¡ 
Auth’tiÿtiÚCh®Ënge
&) = 0;

110 
vœtu®
 
di¥©chDidReûiveRe¥Ú£
(
Docum’tLßd”
*, 
id’tif›r
, cÚ¡ 
ResourûRe¥Ú£
&) = 0;

111 
vœtu®
 
di¥©chDidReûiveCÚ‹ÁL’gth
(
Docum’tLßd”
*, 
id’tif›r
, 
ËngthReûived
) = 0;

112 
vœtu®
 
di¥©chDidFšishLßdšg
(
Docum’tLßd”
*, 
id’tif›r
) = 0;

113 
vœtu®
 
di¥©chDidFaLßdšg
(
Docum’tLßd”
*, 
id’tif›r
, cÚ¡ 
ResourûE¼Ü
&) = 0;

114 
vœtu®
 
boŞ
 
di¥©chDidLßdResourûFromMemÜyCache
(
Docum’tLßd”
*, cÚ¡ 
ResourûReque¡
&, cÚ¡ 
ResourûRe¥Ú£
&, 
Ëngth
) = 0;

116 
vœtu®
 
di¥©chDidHªdËOÆßdEv’ts
() = 0;

117 
vœtu®
 
di¥©chDidReûiveS”v”RedœeùFÜProvisiÚ®Lßd
() = 0;

118 
vœtu®
 
di¥©chDidCªûlCl›ÁRedœeù
() = 0;

119 
vœtu®
 
di¥©chWlP”fÜmCl›ÁRedœeù
(cÚ¡ 
KURL
&, 
š‹rv®
, 
fœeD©e
) = 0;

120 
vœtu®
 
di¥©chDidNavig©eW™hšPage
() { }

121 
vœtu®
 
di¥©chDidChªgeLoÿtiÚW™hšPage
() = 0;

122 
vœtu®
 
di¥©chDidPushS‹W™hšPage
() = 0;

123 
vœtu®
 
di¥©chDidR•ÏûS‹W™hšPage
() = 0;

124 
vœtu®
 
di¥©chDidPİS‹W™hšPage
() = 0;

125 
vœtu®
 
di¥©chWlClo£
() = 0;

126 
vœtu®
 
di¥©chDidReûiveIcÚ
() = 0;

127 
vœtu®
 
di¥©chDidS¹ProvisiÚ®Lßd
() = 0;

128 
vœtu®
 
di¥©chDidReûiveT™Ë
(cÚ¡ 
SŒšg
& 
t™Ë
) = 0;

129 
vœtu®
 
di¥©chDidComm™Lßd
() = 0;

130 
vœtu®
 
di¥©chDidFaProvisiÚ®Lßd
(cÚ¡ 
ResourûE¼Ü
&) = 0;

131 
vœtu®
 
di¥©chDidFaLßd
(cÚ¡ 
ResourûE¼Ü
&) = 0;

132 
vœtu®
 
di¥©chDidFšishDocum’tLßd
() = 0;

133 
vœtu®
 
di¥©chDidFšishLßd
() = 0;

134 
vœtu®
 
di¥©chDidFœ¡Layout
() = 0;

135 
vœtu®
 
di¥©chDidFœ¡Visu®lyNÚEm±yLayout
() = 0;

137 
vœtu®
 
F¿me
* 
di¥©chC»©ePage
() = 0;

138 
vœtu®
 
di¥©chShow
() = 0;

140 
vœtu®
 
di¥©chDecidePŞicyFÜMIMETy³
(
F¿mePŞicyFunùiÚ
, cÚ¡ 
SŒšg
& 
MIMETy³
, cÚ¡ 
ResourûReque¡
&) = 0;

141 
vœtu®
 
di¥©chDecidePŞicyFÜNewWšdowAùiÚ
(
F¿mePŞicyFunùiÚ
, cÚ¡ 
Navig©iÚAùiÚ
&, cÚ¡ 
ResourûReque¡
&, 
PassRefPŒ
<
FÜmS‹
>, cÚ¡ 
SŒšg
& 
äameName
) = 0;

142 
vœtu®
 
di¥©chDecidePŞicyFÜNavig©iÚAùiÚ
(
F¿mePŞicyFunùiÚ
, cÚ¡ 
Navig©iÚAùiÚ
&, cÚ¡ 
ResourûReque¡
&, 
PassRefPŒ
<
FÜmS‹
>) = 0;

143 
vœtu®
 
ÿnûlPŞicyCheck
() = 0;

145 
vœtu®
 
di¥©chUÇbËToIm¶em’tPŞicy
(cÚ¡ 
ResourûE¼Ü
&) = 0;

147 
vœtu®
 
di¥©chWlSubm™FÜm
(
F¿mePŞicyFunùiÚ
, 
PassRefPŒ
<
FÜmS‹
>) = 0;

149 
vœtu®
 
di¥©chDidLßdMašResourû
(
Docum’tLßd”
*) = 0;

150 
vœtu®
 
»v”tToProvisiÚ®S‹
(
Docum’tLßd”
*) = 0;

151 
vœtu®
 
£tMašDocum’tE¼Ü
(
Docum’tLßd”
*, cÚ¡ 
ResourûE¼Ü
&) = 0;

154 
vœtu®
 
wlChªgeE¡im©edProg»ss
() { }

155 
vœtu®
 
didChªgeE¡im©edProg»ss
() { }

156 
vœtu®
 
po¡Prog»ssS¹edNÙifiÿtiÚ
() = 0;

157 
vœtu®
 
po¡Prog»ssE¡im©eChªgedNÙifiÿtiÚ
() = 0;

158 
vœtu®
 
po¡Prog»ssFšishedNÙifiÿtiÚ
() = 0;

160 
vœtu®
 
£tMašF¿meDocum’tR—dy
(
boŞ
) = 0;

162 
vœtu®
 
¡¬tDowÆßd
(cÚ¡ 
ResourûReque¡
&) = 0;

164 
vœtu®
 
wlChªgeT™Ë
(
Docum’tLßd”
*) = 0;

165 
vœtu®
 
didChªgeT™Ë
(
Docum’tLßd”
*) = 0;

167 
vœtu®
 
comm™‹dLßd
(
Docum’tLßd”
*, const *, ) = 0;

168 
vœtu®
 
fšishedLßdšg
(
Docum’tLßd”
*) = 0;

170 
vœtu®
 
upd©eGlob®Hi¡Üy
() = 0;

171 
vœtu®
 
upd©eGlob®Hi¡ÜyRedœeùLšks
() = 0;

173 
vœtu®
 
boŞ
 
shouldGoToHi¡ÜyI‹m
(
Hi¡ÜyI‹m
*) const = 0;

174 
vœtu®
 
di¥©chDidAddBackFÜw¬dI‹m
(
Hi¡ÜyI‹m
*) const = 0;

175 
vœtu®
 
di¥©chDidRemoveBackFÜw¬dI‹m
(
Hi¡ÜyI‹m
*) const = 0;

176 
vœtu®
 
di¥©chDidChªgeBackFÜw¬dIndex
() const = 0;

180 
vœtu®
 
didDi¥ÏyIn£cu»CÚ‹Á
() = 0;

185 
vœtu®
 
didRunIn£cu»CÚ‹Á
(
Secur™yOrigš
*) = 0;

187 
vœtu®
 
ResourûE¼Ü
 
ÿnûÎedE¼Ü
(cÚ¡ 
ResourûReque¡
&) = 0;

188 
vœtu®
 
ResourûE¼Ü
 
blockedE¼Ü
(cÚ¡ 
ResourûReque¡
&) = 0;

189 
vœtu®
 
ResourûE¼Ü
 
ÿÂÙShowURLE¼Ü
(cÚ¡ 
ResourûReque¡
&) = 0;

190 
vœtu®
 
ResourûE¼Ü
 
š‹¼u±FÜPŞicyChªgeE¼Ü
(cÚ¡ 
ResourûReque¡
&) = 0;

192 
vœtu®
 
ResourûE¼Ü
 
ÿÂÙShowMIMETy³E¼Ü
(cÚ¡ 
ResourûRe¥Ú£
&) = 0;

193 
vœtu®
 
ResourûE¼Ü
 
feDÛsNÙExi¡E¼Ü
(cÚ¡ 
ResourûRe¥Ú£
&) = 0;

194 
vœtu®
 
ResourûE¼Ü
 
¶ugšWlHªdËLßdE¼Ü
(cÚ¡ 
ResourûRe¥Ú£
&) = 0;

196 
vœtu®
 
boŞ
 
shouldF®lBack
(cÚ¡ 
ResourûE¼Ü
&) = 0;

198 
vœtu®
 
boŞ
 
ÿnHªdËReque¡
(cÚ¡ 
ResourûReque¡
&) const = 0;

199 
vœtu®
 
boŞ
 
ÿnShowMIMETy³
(cÚ¡ 
SŒšg
& 
MIMETy³
) const = 0;

200 
vœtu®
 
boŞ
 
»´e£Á©iÚExi¡sFÜURLScheme
(cÚ¡ 
SŒšg
& 
URLScheme
) const = 0;

201 
vœtu®
 
SŒšg
 
g’”©edMIMETy³FÜURLScheme
(cÚ¡ SŒšg& 
URLScheme
) const = 0;

203 
vœtu®
 
äameLßdCom¶‘ed
() = 0;

204 
vœtu®
 
§veV›wS‹ToI‹m
(
Hi¡ÜyI‹m
*) = 0;

205 
vœtu®
 
»¡ÜeV›wS‹
() = 0;

206 
vœtu®
 
´ovisiÚ®LßdS¹ed
() = 0;

207 
vœtu®
 
didFšishLßd
() = 0;

208 
vœtu®
 
´•¬eFÜD©aSourûR•Ïûm’t
() = 0;

210 
vœtu®
 
	gPassRefPŒ
<
	gDocum’tLßd”
> 
ü—‹Docum’tLßd”
(cÚ¡ 
ResourûReque¡
&, cÚ¡ 
Sub¡™u‹D©a
&) = 0;

211 
vœtu®
 
£tT™Ë
(cÚ¡ 
SŒšg
& 
t™Ë
, cÚ¡ 
KURL
&) = 0;

213 
vœtu®
 
SŒšg
 
u£rAg’t
(cÚ¡ 
KURL
&) = 0;

215 
vœtu®
 
§vePÏtfÜmD©aToCachedF¿me
(
CachedF¿me
*) = 0;

216 
vœtu®
 
Œªs™iÚToComm™‹dFromCachedF¿me
(
CachedF¿me
*) = 0;

217 
vœtu®
 
Œªs™iÚToComm™‹dFÜNewPage
() = 0;

219 
vœtu®
 
boŞ
 
ÿnCachePage
() const = 0;

220 
vœtu®
 
dowÆßd
(
ResourûHªdË
*, cÚ¡ 
ResourûReque¡
&, cÚ¡ ResourûReque¡&, cÚ¡ 
ResourûRe¥Ú£
&) = 0;

222 
vœtu®
 
	gPassRefPŒ
<
	gF¿me
> 
ü—‹F¿me
(cÚ¡ 
KURL
& 
u¾
, cÚ¡ 
SŒšg
& 
Çme
, 
HTMLF¿meOwÃrEËm’t
* 
owÃrEËm’t
,

223 cÚ¡ 
SŒšg
& 
»ã¼”
, 
boŞ
 
®lowsSüŞlšg
, 
m¬gšWidth
, 
m¬gšHeight
) = 0;

224 
vœtu®
 
didT¿nsãrChdF¿meToNewDocum’t
() = 0;

225 
vœtu®
 
	gPassRefPŒ
<
	gWidg‘
> 
ü—‹Plugš
(cÚ¡ 
IÁSize
&, 
HTMLPlugInEËm’t
*, cÚ¡ 
KURL
&, cÚ¡ 
VeùÜ
<
SŒšg
>&, cÚ¡ VeùÜ<SŒšg>&, cÚ¡ SŒšg&, 
boŞ
 
lßdMªu®ly
) = 0;

226 
vœtu®
 
»dœeùD©aToPlugš
(
Widg‘
* 
¶ugšWidg‘
) = 0;

228 
vœtu®
 
	gPassRefPŒ
<
	gWidg‘
> 
ü—‹JavaAµËtWidg‘
(cÚ¡ 
IÁSize
&, 
HTMLAµËtEËm’t
*, cÚ¡ 
KURL
& 
ba£URL
, cÚ¡ 
VeùÜ
<
SŒšg
>& 
·¿mNames
, cÚ¡ VeùÜ<SŒšg>& 
·¿mV®ues
) = 0;

230 
vœtu®
 
di¥©chDidFaToS¹Plugš
(cÚ¡ 
PlugšV›w
*) const { }

231 #ià
ENABLE
(
PLUGIN_PROXY_FOR_VIDEO
)

232 
vœtu®
 
	gPassRefPŒ
<
	gWidg‘
> 
ü—‹MedŸPÏy”ProxyPlugš
(cÚ¡ 
IÁSize
&, 
HTMLMedŸEËm’t
*, cÚ¡ 
KURL
&, cÚ¡ 
VeùÜ
<
SŒšg
>&, const Vector<String>&, const String&) = 0;

235 
vœtu®
 
ObjeùCÚ‹ÁTy³
 
objeùCÚ‹ÁTy³
(cÚ¡ 
KURL
& 
u¾
, cÚ¡ 
SŒšg
& 
mimeTy³
) = 0;

236 
vœtu®
 
SŒšg
 
ov”rideMedŸTy³
() const = 0;

238 
vœtu®
 
di¥©chDidCË¬WšdowObjeùInWÜld
(
DOMW¿µ”WÜld
*) = 0;

239 
vœtu®
 
docum’tEËm’tAvaabË
() = 0;

240 
vœtu®
 
didP”fÜmFœ¡Navig©iÚ
() const = 0;

242 #ià
USE
(
V8
)

243 
vœtu®
 
didC»©eSütCÚ‹xtFÜF¿me
() = 0;

244 
vœtu®
 
didDe¡roySütCÚ‹xtFÜF¿me
() = 0;

245 
vœtu®
 
didC»©eIsŞ©edSütCÚ‹xt
() = 0;

248 
vœtu®
 
»gi¡”FÜIcÚNÙifiÿtiÚ
(
boŞ
 
li¡’
 = 
Œue
) = 0;

250 #ià
PLATFORM
(
MAC
)

251 #ià
ENABLE
(
MAC_JAVA_BRIDGE
)

252 
vœtu®
 
jobjeù
 
javaAµËt
(
NSV›w
*) {  0; }

254 
vœtu®
 
NSCachedURLRe¥Ú£
* 
wlCacheRe¥Ú£
(
Docum’tLßd”
*, 
id’tif›r
, NSCachedURLResponse*) const = 0;

256 #ià
USE
(
CFNETWORK
)

257 
vœtu®
 
boŞ
 
shouldCacheRe¥Ú£
(
Docum’tLßd”
*, 
id’tif›r
, cÚ¡ 
ResourûRe¥Ú£
&, cÚ¡ * 
d©a
, 
Ëngth
) = 0;

260 
vœtu®
 
boŞ
 
shouldU£PlugšDocum’t
(cÚ¡ 
SŒšg
& ) cÚ¡ {  
	gçl£
; }

261 
vœtu®
 
boŞ
 
shouldLßdMedŸEËm’tURL
(cÚ¡ 
KURL
&ècÚ¡ {  
	gŒue
; }

263 
vœtu®
 
didChªgeSüŞlOff£t
() { }

265 
vœtu®
 
boŞ
 
®lowJavaSüt
(boŞ 
’abËdP”S‘tšgs
è{  
	g’abËdP”S‘tšgs
; }

266 
vœtu®
 
boŞ
 
®lowPlugšs
(boŞ 
’abËdP”S‘tšgs
è{  
	g’abËdP”S‘tšgs
; }

267 
vœtu®
 
boŞ
 
®lowImages
(boŞ 
’abËdP”S‘tšgs
è{  
	g’abËdP”S‘tšgs
; }

274 
vœtu®
 
didNÙAÎowSüt
() { }

276 
vœtu®
 
didNÙAÎowPlugšs
() { }

	@FrameLoaderTypes.h

29 #iâdeà
F¿meLßd”Ty³s_h


30 
	#F¿meLßd”Ty³s_h


	)

32 
Çme¥aû
 
	gWebCÜe
 {

34 
	eF¿meS‹
 {

35 
	gF¿meS‹ProvisiÚ®
,

38 
	gF¿meS‹Comm™‹dPage
,

39 
	gF¿meS‹Com¶‘e


42 
	ePŞicyAùiÚ
 {

43 
	gPŞicyU£
,

44 
	gPŞicyDowÆßd
,

45 
	gPŞicyIgnÜe
,

49 
	eF¿meLßdTy³
 {

50 
	gF¿meLßdTy³Snd¬d
,

51 
	gF¿meLßdTy³Back
,

52 
	gF¿meLßdTy³FÜw¬d
,

53 
	gF¿meLßdTy³IndexedBackFÜw¬d
,

54 
	gF¿meLßdTy³R–ßd
,

56 
	gF¿meLßdTy³Same
 = 
F¿meLßdTy³R–ßd
 + 2,

57 
	gF¿meLßdTy³RedœeùW™hLockedBackFÜw¬dLi¡
,

58 
	gF¿meLßdTy³R•Ïû
,

59 
	gF¿meLßdTy³R–ßdFromOrigš
,

60 
	gF¿meLßdTy³BackWMLDeckNÙAcûssibË


63 
	eNavig©iÚTy³
 {

64 
	gNavig©iÚTy³LškClicked
,

65 
	gNavig©iÚTy³FÜmSubm™‹d
,

66 
	gNavig©iÚTy³BackFÜw¬d
,

67 
	gNavig©iÚTy³R–ßd
,

68 
	gNavig©iÚTy³FÜmResubm™‹d
,

69 
	gNavig©iÚTy³Oth”


72 
	eD©aba£PŞicy
 {

73 
	gD©aba£PŞicyStİ
,

74 
	gD©aba£PŞicyCÚtšue


77 
	eObjeùCÚ‹ÁTy³
 {

78 
	gObjeùCÚ‹ÁNÚe
,

79 
	gObjeùCÚ‹ÁImage
,

80 
	gObjeùCÚ‹ÁF¿me
,

81 
	gObjeùCÚ‹ÁN‘sÿ³Plugš
,

82 
	gObjeùCÚ‹ÁOth”Plugš


85 
	eUÆßdEv’tPŞicy
 {

86 
	gUÆßdEv’tPŞicyNÚe
,

87 
	gUÆßdEv’tPŞicyUÆßdOÆy
,

88 
	gUÆßdEv’tPŞicyUÆßdAndPageHide


91 
	eReã¼”PŞicy
 {

92 
	gS’dReã¼”
,

93 
	gNoReã¼”


96 
	eSªdboxFÏg
 {

97 
	gSªdboxNÚe
 = 0,

98 
	gSªdboxNavig©iÚ
 = 1,

99 
	gSªdboxPlugšs
 = 1 << 1,

100 
	gSªdboxOrigš
 = 1 << 2,

101 
	gSªdboxFÜms
 = 1 << 3,

102 
	gSªdboxSüts
 = 1 << 4,

103 
	gSªdboxTİNavig©iÚ
 = 1 << 5,

104 
	gSªdboxAÎ
 = -1

107 
	eSecur™yCheckPŞicy
 {

108 
	gSkSecur™yCheck
,

109 
	gDoSecur™yCheck


112 
	eR—sÚFÜC®lšgAÎowPlugšs
 {

113 
	gAboutToIn¡ªtŸ‹Plugš
,

114 
	gNÙAboutToIn¡ªtŸ‹Plugš


117 
	tSªdboxFÏgs
;

	@HistoryController.cpp

31 
	~"cÚfig.h
"

32 
	~"Hi¡ÜyCÚŒŞËr.h
"

34 
	~"BackFÜw¬dLi¡.h
"

35 
	~"CachedPage.h
"

36 
	~"Docum’tLßd”.h
"

37 
	~"F¿me.h
"

38 
	~"F¿meLßd”.h
"

39 
	~"F¿meLßd”Cl›Á.h
"

40 
	~"F¿meT»e.h
"

41 
	~"F¿meV›w.h
"

42 
	~"Hi¡ÜyI‹m.h
"

43 
	~"Loggšg.h
"

44 
	~"Page.h
"

45 
	~"PageCache.h
"

46 
	~"PageGroup.h
"

47 
	~"S‘tšgs.h
"

48 
	~<wtf/‹xt/CSŒšg.h
>

50 
Çme¥aû
 
	gWebCÜe
 {

52 
	gHi¡ÜyCÚŒŞËr
::
Hi¡ÜyCÚŒŞËr
(
F¿me
* 
äame
)

53 : 
m_äame
(
äame
)

57 
Hi¡ÜyCÚŒŞËr
::~HistoryController()

61 
Hi¡ÜyCÚŒŞËr
::
§veSüŞlPos™iÚAndV›wS‹ToI‹m
(
Hi¡ÜyI‹m
* 
™em
)

63 ià(!
™em
 || !
m_äame
->
v›w
())

66 
	g™em
->
£tSüŞlPošt
(
m_äame
->
v›w
()->
süŞlPos™iÚ
());

68 
	gm_äame
->
lßd”
()->
ş›Á
()->
§veV›wS‹ToI‹m
(
™em
);

82 
	gHi¡ÜyCÚŒŞËr
::
»¡ÜeSüŞlPos™iÚAndV›wS‹
()

84 ià(!
m_äame
->
lßd”
()->
comm™‹dFœ¡R—lDocum’tLßd
())

87 
ASSERT
(
m_cu¼’tI‹m
);

94 ià(!
	gm_cu¼’tI‹m
)

99 
	gm_äame
->
lßd”
()->
ş›Á
()->
»¡ÜeV›wS‹
();

101 ià(
F¿meV›w
* 
	gv›w
 = 
m_äame
->
v›w
())

102 ià(!
v›w
->
wasSüŞËdByU£r
())

103 
v›w
->
£tSüŞlPos™iÚ
(
m_cu¼’tI‹m
->
süŞlPošt
());

106 
	gHi¡ÜyCÚŒŞËr
::
upd©eBackFÜw¬dLi¡FÜF¿gm’tSüŞl
()

108 
upd©eBackFÜw¬dLi¡Cl³dAtT¬g‘
(
çl£
);

112 ià(!
	gm_´eviousI‹m
)

115 
ASSERT
(
m_cu¼’tI‹m
);

116 
	gm_cu¼’tI‹m
->
£tDocum’tSequ’ûNumb”
(
m_´eviousI‹m
->
docum’tSequ’ûNumb”
());

119 
	gHi¡ÜyCÚŒŞËr
::
§veDocum’tS‹
()

123 ià(
m_äame
->
lßd”
()->
ü—tšgIn™ŸlEm±yDocum’t
())

137 
Hi¡ÜyI‹m
* 
	g™em
 = 
m_´eviousI‹m
 ? m_´eviousI‹m.
g‘
(è: 
m_cu¼’tI‹m
.get();

138 ià(!
	g™em
)

141 
Docum’t
* 
	gdocum’t
 = 
m_äame
->
docum’t
();

142 
ASSERT
(
docum’t
);

144 ià(
	g™em
->
isCu¼’tDocum’t
(
docum’t
)) {

145 
LOG
(
Lßdšg
, "WebCÜeLßdšg %s: savšg fÜm s‹Ø%p", 
m_äame
->
Œ“
()->
Çme
().
¡ršg
().
utf8
().
d©a
(), 
™em
);

146 
	g™em
->
£tDocum’tS‹
(
docum’t
->
fÜmEËm’tsS‹
());

152 
	gHi¡ÜyCÚŒŞËr
::
§veDocum’tAndSüŞlS‹
()

154 
F¿me
* 
äame
 = 
m_äame
; 
	gäame
; f¿mğäame->
Œ“
()->
Œav”£Next
(m_frame)) {

155 
äame
->
lßd”
()->
hi¡Üy
()->
§veDocum’tS‹
();

156 
	gäame
->
lßd”
()->
hi¡Üy
()->
§veSüŞlPos™iÚAndV›wS‹ToI‹m
(
äame
->lßd”()->hi¡Üy()->
cu¼’tI‹m
());

160 
	gHi¡ÜyCÚŒŞËr
::
»¡ÜeDocum’tS‹
()

162 
Docum’t
* 
doc
 = 
m_äame
->
docum’t
();

164 
Hi¡ÜyI‹m
* 
	g™emToRe¡Üe
 = 0;

166 
	gm_äame
->
lßd”
()->
lßdTy³
()) {

167 
	gF¿meLßdTy³R–ßd
:

168 
F¿meLßdTy³R–ßdFromOrigš
:

169 
F¿meLßdTy³Same
:

170 
F¿meLßdTy³R•Ïû
:

172 
	gF¿meLßdTy³Back
:

173 
F¿meLßdTy³BackWMLDeckNÙAcûssibË
:

174 
F¿meLßdTy³FÜw¬d
:

175 
F¿meLßdTy³IndexedBackFÜw¬d
:

176 
F¿meLßdTy³RedœeùW™hLockedBackFÜw¬dLi¡
:

177 
F¿meLßdTy³Snd¬d
:

178 
™emToRe¡Üe
 = 
m_cu¼’tI‹m
.
g‘
();

181 ià(!
	g™emToRe¡Üe
)

184 
LOG
(
Lßdšg
, "WebCÜeLßdšg %s:„e¡Üšg fÜm s‹ from %p", 
m_äame
->
Œ“
()->
Çme
().
¡ršg
().
utf8
().
d©a
(), 
™emToRe¡Üe
);

185 
	gdoc
->
£tS‹FÜNewFÜmEËm’ts
(
™emToRe¡Üe
->
docum’tS‹
());

188 
	gHi¡ÜyCÚŒŞËr
::
šv®id©eCu¼’tI‹mCachedPage
()

191 
CachedPage
* 
ÿchedPage
 = 
·geCache
()->
g‘
(
cu¼’tI‹m
());

197 
ASSERT
(!
ÿchedPage
 || cachedPage->
docum’t
(è=ğ
m_äame
->document());

198 ià(
	gÿchedPage
 && cachedPage->
docum’t
(è=ğ
m_äame
->document()) {

199 
ÿchedPage
->
docum’t
()->
£tInPageCache
(
çl£
);

200 
	gÿchedPage
->
ş—r
();

203 ià(
	gÿchedPage
)

204 
·geCache
()->
»move
(
cu¼’tI‹m
());

209 
	gHi¡ÜyCÚŒŞËr
::
goToI‹m
(
Hi¡ÜyI‹m
* 
rg‘I‹m
, 
F¿meLßdTy³
 
ty³
)

211 
ASSERT
(!
m_äame
->
Œ“
()->
·»Á
());

217 
Page
* 
	g·ge
 = 
m_äame
->
·ge
();

218 ià(!
	g·ge
)

220 ià(!
	gm_äame
->
lßd”
()->
ş›Á
()->
shouldGoToHi¡ÜyI‹m
(
rg‘I‹m
))

226 
BackFÜw¬dLi¡
* 
	gbfLi¡
 = 
·ge
->
backFÜw¬dLi¡
();

227 
Hi¡ÜyI‹m
* 
	gcu¼’tI‹m
 = 
bfLi¡
->
cu¼’tI‹m
();

228 
	gbfLi¡
->
goToI‹m
(
rg‘I‹m
);

229 
S‘tšgs
* 
	g£‰šgs
 = 
m_äame
->
£‰šgs
();

230 
	g·ge
->
£tGlob®Hi¡ÜyI‹m
((!
£‰šgs
 || s‘tšgs->
´iv©eBrowsšgEÇbËd
()è? 0 : 
rg‘I‹m
);

231 
»cursiveGoToI‹m
(
rg‘I‹m
, 
cu¼’tI‹m
, 
ty³
);

235 
boŞ
 
	gHi¡ÜyCÚŒŞËr
::
u¾sM©chI‹m
(
Hi¡ÜyI‹m
* 
™em
) const

237 cÚ¡ 
KURL
& 
cu¼’tURL
 = 
m_äame
->
lßd”
()->
docum’tLßd”
()->
u¾
();

238 ià(!
equ®IgnÜšgF¿gm’tId’tif›r
(
cu¼’tURL
, 
™em
->
u¾
()))

239  
	gçl£
;

241 cÚ¡ 
	gHi¡ÜyI‹mVeùÜ
& 
	gchdI‹ms
 = 
™em
->
chd»n
();

243 
	gsize
 = 
chdI‹ms
.
size
();

244 
	gi
 = 0; i < 
	gsize
; ++i) {

245 
F¿me
* 
	gchdF¿me
 = 
m_äame
->
Œ“
()->
chd
(
chdI‹ms
[
i
]->
rg‘
());

246 ià(
	gchdF¿me
 && !chdF¿me->
lßd”
()->
hi¡Üy
()->
u¾sM©chI‹m
(
chdI‹ms
[
i
].
g‘
()))

247  
	gçl£
;

250  
	gŒue
;

253 
	gHi¡ÜyCÚŒŞËr
::
upd©eFÜBackFÜw¬dNavig©iÚ
()

255 #ià!
LOG_DISABLED


256 ià(
m_äame
->
lßd”
()->
docum’tLßd”
())

257 
LOG
(
Hi¡Üy
, "WebCÜeHi¡Üy: Upd©šg Hi¡Üy fÜ back/fÜw¬d‚avig©iÚ iÀäam%s", 
m_äame
->
lßd”
()->
docum’tLßd”
()->
t™Ë
().
utf8
().
d©a
());

261 
§veSüŞlPos™iÚAndV›wS‹ToI‹m
(
m_´eviousI‹m
.
g‘
());

264 
	gHi¡ÜyCÚŒŞËr
::
upd©eFÜR–ßd
()

266 #ià!
LOG_DISABLED


267 ià(
m_äame
->
lßd”
()->
docum’tLßd”
())

268 
LOG
(
Hi¡Üy
, "WebCÜeHi¡Üy: Upd©šg Hi¡Üy fÜ„–ßd iÀäam%s", 
m_äame
->
lßd”
()->
docum’tLßd”
()->
t™Ë
().
utf8
().
d©a
());

271 ià(
	gm_cu¼’tI‹m
) {

272 
·geCache
()->
»move
(
m_cu¼’tI‹m
.
g‘
());

274 ià(
	gm_äame
->
lßd”
()->
lßdTy³
(è=ğ
F¿meLßdTy³R–ßd
 || 
m_äame
->lßd”()->lßdTy³(è=ğ
F¿meLßdTy³R–ßdFromOrigš
)

275 
§veSüŞlPos™iÚAndV›wS‹ToI‹m
(
m_cu¼’tI‹m
.
g‘
());

278 ià(
	gm_äame
->
lßd”
()->
docum’tLßd”
()->
uÄ—chabËURL
().
isEm±y
())

279 
	gm_cu¼’tI‹m
->
£tURL
(
m_äame
->
lßd”
()->
docum’tLßd”
()->
»que¡URL
());

289 
	gHi¡ÜyCÚŒŞËr
::
upd©eFÜSnd¬dLßd
()

291 
LOG
(
Hi¡Üy
, "WebCÜeHi¡Üy: Upd©šg Hi¡Üy fÜ Snd¬d Lßd iÀäam%s", 
m_äame
->
lßd”
()->
docum’tLßd”
()->
u¾
().
¡ršg
().
ascii
().
d©a
());

293 
F¿meLßd”
* 
	gäameLßd”
 = 
m_äame
->
lßd”
();

295 
S‘tšgs
* 
	g£‰šgs
 = 
m_äame
->
£‰šgs
();

296 
boŞ
 
	gÃedPrivacy
 = !
£‰šgs
 || s‘tšgs->
´iv©eBrowsšgEÇbËd
();

297 cÚ¡ 
	gKURL
& 
	ghi¡ÜyURL
 = 
äameLßd”
->
docum’tLßd”
()->
u¾FÜHi¡Üy
();

299 ià(!
	gäameLßd”
->
docum’tLßd”
()->
isCl›ÁRedœeù
()) {

300 ià(!
	ghi¡ÜyURL
.
isEm±y
()) {

301 
upd©eBackFÜw¬dLi¡Cl³dAtT¬g‘
(
Œue
);

302 ià(!
	gÃedPrivacy
) {

303 
	gäameLßd”
->
ş›Á
()->
upd©eGlob®Hi¡Üy
();

304 
	gäameLßd”
->
docum’tLßd”
()->
£tDidC»©eGlob®Hi¡ÜyEÁry
(
Œue
);

305 ià(
	gäameLßd”
->
docum’tLßd”
()->
uÄ—chabËURL
().
isEm±y
())

306 
	gäameLßd”
->
ş›Á
()->
upd©eGlob®Hi¡ÜyRedœeùLšks
();

308 ià(
Page
* 
	g·ge
 = 
m_äame
->
·ge
())

309 
·ge
->
£tGlob®Hi¡ÜyI‹m
(
ÃedPrivacy
 ? 0 :…age->
backFÜw¬dLi¡
()->
cu¼’tI‹m
());

311 } ià(
	gäameLßd”
->
docum’tLßd”
()->
uÄ—chabËURL
().
isEm±y
(è&& 
	gm_cu¼’tI‹m
) {

312 
	gm_cu¼’tI‹m
->
£tURL
(
äameLßd”
->
docum’tLßd”
()->
u¾
());

313 
	gm_cu¼’tI‹m
->
£tFÜmInfoFromReque¡
(
äameLßd”
->
docum’tLßd”
()->
»que¡
());

316 ià(!
	ghi¡ÜyURL
.
isEm±y
(è&& !
	gÃedPrivacy
) {

317 ià(
Page
* 
	g·ge
 = 
m_äame
->
·ge
())

318 
·ge
->
group
().
addVis™edLšk
(
hi¡ÜyURL
);

320 ià(!
	gäameLßd”
->
docum’tLßd”
()->
didC»©eGlob®Hi¡ÜyEÁry
(è&& f¿meLßd”->docum’tLßd”()->
uÄ—chabËURL
().
isEm±y
(è&& !äameLßd”->
u¾
().isEmpty())

321 
	gäameLßd”
->
ş›Á
()->
upd©eGlob®Hi¡ÜyRedœeùLšks
();

325 
	gHi¡ÜyCÚŒŞËr
::
upd©eFÜRedœeùW™hLockedBackFÜw¬dLi¡
()

327 #ià!
LOG_DISABLED


328 ià(
m_äame
->
lßd”
()->
docum’tLßd”
())

329 
LOG
(
Hi¡Üy
, "WebCÜeHi¡Üy: Upd©šg Hi¡Üy fÜ„edœeù†ßd iÀäam%s", 
m_äame
->
lßd”
()->
docum’tLßd”
()->
t™Ë
().
utf8
().
d©a
());

332 
S‘tšgs
* 
	g£‰šgs
 = 
m_äame
->
£‰šgs
();

333 
boŞ
 
	gÃedPrivacy
 = !
£‰šgs
 || s‘tšgs->
´iv©eBrowsšgEÇbËd
();

334 cÚ¡ 
	gKURL
& 
	ghi¡ÜyURL
 = 
m_äame
->
lßd”
()->
docum’tLßd”
()->
u¾FÜHi¡Üy
();

336 ià(
	gm_äame
->
lßd”
()->
docum’tLßd”
()->
isCl›ÁRedœeù
()) {

337 ià(!
	gm_cu¼’tI‹m
 && !
	gm_äame
->
Œ“
()->
·»Á
()) {

338 ià(!
	ghi¡ÜyURL
.
isEm±y
()) {

339 
upd©eBackFÜw¬dLi¡Cl³dAtT¬g‘
(
Œue
);

340 ià(!
	gÃedPrivacy
) {

341 
	gm_äame
->
lßd”
()->
ş›Á
()->
upd©eGlob®Hi¡Üy
();

342 
	gm_äame
->
lßd”
()->
docum’tLßd”
()->
£tDidC»©eGlob®Hi¡ÜyEÁry
(
Œue
);

343 ià(
	gm_äame
->
lßd”
()->
docum’tLßd”
()->
uÄ—chabËURL
().
isEm±y
())

344 
	gm_äame
->
lßd”
()->
ş›Á
()->
upd©eGlob®Hi¡ÜyRedœeùLšks
();

346 ià(
Page
* 
	g·ge
 = 
m_äame
->
·ge
())

347 
·ge
->
£tGlob®Hi¡ÜyI‹m
(
ÃedPrivacy
 ? 0 :…age->
backFÜw¬dLi¡
()->
cu¼’tI‹m
());

350 ià(
	gm_cu¼’tI‹m
) {

351 
	gm_cu¼’tI‹m
->
£tURL
(
m_äame
->
lßd”
()->
docum’tLßd”
()->
u¾
());

352 
	gm_cu¼’tI‹m
->
£tFÜmInfoFromReque¡
(
m_äame
->
lßd”
()->
docum’tLßd”
()->
»que¡
());

355 
F¿me
* 
	g·»ÁF¿me
 = 
m_äame
->
Œ“
()->
·»Á
();

356 ià(
	g·»ÁF¿me
 &&…¬’tF¿me->
lßd”
()->
hi¡Üy
()->
	gm_cu¼’tI‹m
)

357 
	g·»ÁF¿me
->
lßd”
()->
hi¡Üy
()->
	gm_cu¼’tI‹m
->
£tChdI‹m
(
ü—‹I‹m
(
Œue
));

360 ià(!
	ghi¡ÜyURL
.
isEm±y
(è&& !
	gÃedPrivacy
) {

361 ià(
Page
* 
	g·ge
 = 
m_äame
->
·ge
())

362 
·ge
->
group
().
addVis™edLšk
(
hi¡ÜyURL
);

364 ià(!
	gm_äame
->
lßd”
()->
docum’tLßd”
()->
didC»©eGlob®Hi¡ÜyEÁry
(è&& m_äame->lßd”()->docum’tLßd”()->
uÄ—chabËURL
().
isEm±y
(è&& !m_äame->lßd”()->
u¾
().isEmpty())

365 
	gm_äame
->
lßd”
()->
ş›Á
()->
upd©eGlob®Hi¡ÜyRedœeùLšks
();

369 
	gHi¡ÜyCÚŒŞËr
::
upd©eFÜCl›ÁRedœeù
()

371 #ià!
LOG_DISABLED


372 ià(
m_äame
->
lßd”
()->
docum’tLßd”
())

373 
LOG
(
Hi¡Üy
, "WebCÜeHi¡Üy: Upd©šg Hi¡Üy fÜ cl›Á„edœeù iÀäam%s", 
m_äame
->
lßd”
()->
docum’tLßd”
()->
t™Ë
().
utf8
().
d©a
());

378 ià(
	gm_cu¼’tI‹m
) {

379 
	gm_cu¼’tI‹m
->
ş—rDocum’tS‹
();

380 
	gm_cu¼’tI‹m
->
ş—rSüŞlPošt
();

383 
S‘tšgs
* 
	g£‰šgs
 = 
m_äame
->
£‰šgs
();

384 
boŞ
 
	gÃedPrivacy
 = !
£‰šgs
 || s‘tšgs->
´iv©eBrowsšgEÇbËd
();

385 cÚ¡ 
	gKURL
& 
	ghi¡ÜyURL
 = 
m_äame
->
lßd”
()->
docum’tLßd”
()->
u¾FÜHi¡Üy
();

387 ià(!
	ghi¡ÜyURL
.
isEm±y
(è&& !
	gÃedPrivacy
) {

388 ià(
Page
* 
	g·ge
 = 
m_äame
->
·ge
())

389 
·ge
->
group
().
addVis™edLšk
(
hi¡ÜyURL
);

393 
	gHi¡ÜyCÚŒŞËr
::
upd©eFÜComm™
()

395 
F¿meLßd”
* 
äameLßd”
 = 
m_äame
->
lßd”
();

396 #ià!
LOG_DISABLED


397 ià(
	gäameLßd”
->
docum’tLßd”
())

398 
LOG
(
Hi¡Üy
, "WebCÜeHi¡Üy: Upd©šg Hi¡Üy fÜ comm™ iÀäam%s", 
äameLßd”
->
docum’tLßd”
()->
t™Ë
().
utf8
().
d©a
());

400 
F¿meLßdTy³
 
	gty³
 = 
äameLßd”
->
lßdTy³
();

401 ià(
isBackFÜw¬dLßdTy³
(
ty³
) ||

402 ((
	gty³
 =ğ
F¿meLßdTy³R–ßd
 || 
ty³
 =ğ
F¿meLßdTy³R–ßdFromOrigš
è&& !
äameLßd”
->
´ovisiÚ®Docum’tLßd”
()->
uÄ—chabËURL
().
isEm±y
())) {

407 
m_´eviousI‹m
 = 
m_cu¼’tI‹m
;

408 
ASSERT
(
m_´ovisiÚ®I‹m
);

409 
	gm_cu¼’tI‹m
 = 
m_´ovisiÚ®I‹m
;

410 
	gm_´ovisiÚ®I‹m
 = 0;

414 
	gHi¡ÜyCÚŒŞËr
::
upd©eFÜSameDocum’tNavig©iÚ
()

416 ià(
m_äame
->
lßd”
()->
u¾
().
isEm±y
())

419 
S‘tšgs
* 
	g£‰šgs
 = 
m_äame
->
£‰šgs
();

420 ià(!
	g£‰šgs
 || s‘tšgs->
´iv©eBrowsšgEÇbËd
())

423 
Page
* 
	g·ge
 = 
m_äame
->
·ge
();

424 ià(!
	g·ge
)

427 
	g·ge
->
group
().
addVis™edLšk
(
m_äame
->
lßd”
()->
u¾
());

430 
	gHi¡ÜyCÚŒŞËr
::
upd©eFÜF¿meLßdCom¶‘ed
()

434 
m_´eviousI‹m
 = 0;

437 
	gHi¡ÜyCÚŒŞËr
::
£tCu¼’tI‹m
(
Hi¡ÜyI‹m
* 
™em
)

439 
m_cu¼’tI‹m
 = 
™em
;

442 
	gHi¡ÜyCÚŒŞËr
::
£tCu¼’tI‹mT™Ë
(cÚ¡ 
SŒšg
& 
t™Ë
)

444 ià(
m_cu¼’tI‹m
)

445 
m_cu¼’tI‹m
->
£tT™Ë
(
t™Ë
);

448 
	gHi¡ÜyCÚŒŞËr
::
£tProvisiÚ®I‹m
(
Hi¡ÜyI‹m
* 
™em
)

450 
m_´ovisiÚ®I‹m
 = 
™em
;

453 
	gPassRefPŒ
<
	gHi¡ÜyI‹m
> 
	gHi¡ÜyCÚŒŞËr
::
ü—‹I‹m
(
boŞ
 
u£Origš®
)

455 
Docum’tLßd”
* 
docLßd”
 = 
m_äame
->
lßd”
()->
docum’tLßd”
();

457 
KURL
 
	guÄ—chabËURL
 = 
docLßd”
 ? docLßd”->
uÄ—chabËURL
() : KURL();

459 
KURL
 
	gu¾
;

460 
KURL
 
	gÜigš®URL
;

462 ià(!
	guÄ—chabËURL
.
isEm±y
()) {

463 
	gu¾
 = 
uÄ—chabËURL
;

464 
	gÜigš®URL
 = 
uÄ—chabËURL
;

466 
	gÜigš®URL
 = 
docLßd”
 ? docLßd”->
Üigš®URL
(è: 
KURL
();

467 ià(
	gu£Origš®
)

468 
	gu¾
 = 
Üigš®URL
;

469 ià(
	gdocLßd”
)

470 
	gu¾
 = 
docLßd”
->
»que¡URL
();

473 
LOG
(
Hi¡Üy
, "WebCÜeHi¡Üy: C»©šg i‹m fÜ %s", 
u¾
.
¡ršg
().
ascii
().
d©a
());

480 ià(
	gu¾
.
isEm±y
())

481 
	gu¾
 = 
bÏnkURL
();

482 ià(
	gÜigš®URL
.
isEm±y
())

483 
	gÜigš®URL
 = 
bÏnkURL
();

485 
F¿me
* 
	g·»ÁF¿me
 = 
m_äame
->
Œ“
()->
·»Á
();

486 
SŒšg
 
	g·»Á
 = 
·»ÁF¿me
 ?…¬’tF¿me->
Œ“
()->
Çme
() : "";

487 
SŒšg
 
	gt™Ë
 = 
docLßd”
 ? docLßd”->
t™Ë
() : "";

489 
	gRefPŒ
<
	gHi¡ÜyI‹m
> 
	g™em
 = 
Hi¡ÜyI‹m
::
ü—‹
(
u¾
, 
m_äame
->
Œ“
()->
Çme
(), 
·»Á
, 
t™Ë
);

490 
	g™em
->
£tOrigš®URLSŒšg
(
Üigš®URL
.
¡ršg
());

492 ià(!
	guÄ—chabËURL
.
isEm±y
(è|| !
	gdocLßd”
 || docLßd”->
»¥Ú£
().
h‰pStusCode
() >= 400)

493 
™em
->
£tLa¡Vis™WasFau»
(
Œue
);

496 ià(
	gdocLßd”
) {

497 ià(
	gu£Origš®
)

498 
	g™em
->
£tFÜmInfoFromReque¡
(
docLßd”
->
Üigš®Reque¡
());

500 
	g™em
->
£tFÜmInfoFromReque¡
(
docLßd”
->
»que¡
());

504 
	gm_´eviousI‹m
 = 
m_cu¼’tI‹m
;

505 
	gm_cu¼’tI‹m
 = 
™em
;

507  
	g™em
.
»Ëa£
();

510 
	gPassRefPŒ
<
	gHi¡ÜyI‹m
> 
	gHi¡ÜyCÚŒŞËr
::
ü—‹I‹mT»e
(
F¿me
* 
rg‘F¿me
, 
boŞ
 
şAtT¬g‘
)

512 
	gRefPŒ
<
	gHi¡ÜyI‹m
> 
	gbfI‹m
 = 
ü—‹I‹m
(
m_äame
->
Œ“
()->
·»Á
(è? 
Œue
 : 
çl£
);

513 ià(
	gm_´eviousI‹m
)

514 
§veSüŞlPos™iÚAndV›wS‹ToI‹m
(
m_´eviousI‹m
.
g‘
());

515 ià(!(
	gşAtT¬g‘
 && 
	gm_äame
 =ğ
rg‘F¿me
)) {

517 
§veDocum’tS‹
();

518 
F¿me
* 
	gchd
 = 
m_äame
->
Œ“
()->
fœ¡Chd
(); chd; chd = 
chd
->Œ“()->
ÃxtSiblšg
()) {

519 
F¿meLßd”
* 
chdLßd”
 = 
chd
->
lßd”
();

520 
boŞ
 
	ghasChdLßded
 = 
chdLßd”
->
äameHasLßded
();

526 ià(!(!
	ghasChdLßded
 && 
	gchdLßd”
->
isHo¡edByObjeùEËm’t
()))

527 
	gbfI‹m
->
addChdI‹m
(
chdLßd”
->
hi¡Üy
()->
ü—‹I‹mT»e
(
rg‘F¿me
, 
şAtT¬g‘
));

530 ià(
	gm_äame
 =ğ
rg‘F¿me
)

531 
bfI‹m
->
£tIsT¬g‘I‹m
(
Œue
);

532  
	gbfI‹m
;

539 
	gHi¡ÜyCÚŒŞËr
::
»cursiveGoToI‹m
(
Hi¡ÜyI‹m
* 
™em
, Hi¡ÜyI‹m* 
äomI‹m
, 
F¿meLßdTy³
 
ty³
)

541 
ASSERT
(
™em
);

542 
ASSERT
(
äomI‹m
);

544 
KURL
 
	g™emURL
 = 
™em
->
u¾
();

545 
KURL
 
	gcu¼’tURL
;

546 ià(
	gm_äame
->
lßd”
()->
docum’tLßd”
())

547 
	gcu¼’tURL
 = 
m_äame
->
lßd”
()->
docum’tLßd”
()->
u¾
();

555 ià(!
	g™em
->
isT¬g‘I‹m
() &&

556 
	g™emURL
 =ğ
cu¼’tURL
 &&

557 ((
m_äame
->
Œ“
()->
Çme
().
isEm±y
(è&& 
™em
->
rg‘
().isEmpty()) || m_frame->tree()->name() == item->target()) &&

558 
chdF¿mesM©chI‹m
(
™em
))

562 
ASSERT
(!
m_´eviousI‹m
);

563 
§veDocum’tS‹
();

564 
§veSüŞlPos™iÚAndV›wS‹ToI‹m
(
m_cu¼’tI‹m
.
g‘
());

566 ià(
F¿meV›w
* 
	gv›w
 = 
m_äame
->
v›w
())

567 
v›w
->
£tWasSüŞËdByU£r
(
çl£
);

569 
	gm_cu¼’tI‹m
 = 
™em
;

572 
»¡ÜeDocum’tS‹
();

575 
»¡ÜeSüŞlPos™iÚAndV›wS‹
();

577 cÚ¡ 
	gHi¡ÜyI‹mVeùÜ
& 
	gchdI‹ms
 = 
™em
->
chd»n
();

579 
	gsize
 = 
chdI‹ms
.
size
();

580 
	gi
 = 0; i < 
	gsize
; ++i) {

581 
SŒšg
 
	gchdF¿meName
 = 
chdI‹ms
[
i
]->
rg‘
();

582 
Hi¡ÜyI‹m
* 
	gäomChdI‹m
 = 
äomI‹m
->
chdI‹mW™hT¬g‘
(
chdF¿meName
);

583 
ASSERT
(
äomChdI‹m
 || 
äomI‹m
->
isT¬g‘I‹m
());

584 
F¿me
* 
	gchdF¿me
 = 
m_äame
->
Œ“
()->
chd
(
chdF¿meName
);

585 
ASSERT
(
chdF¿me
);

586 
	gchdF¿me
->
lßd”
()->
hi¡Üy
()->
»cursiveGoToI‹m
(
chdI‹ms
[
i
].
g‘
(), 
äomChdI‹m
, 
ty³
);

589 
	gm_äame
->
lßd”
()->
lßdI‹m
(
™em
, 
ty³
);

595 
boŞ
 
	gHi¡ÜyCÚŒŞËr
::
chdF¿mesM©chI‹m
(
Hi¡ÜyI‹m
* 
™em
) const

597 cÚ¡ 
Hi¡ÜyI‹mVeùÜ
& 
chdI‹ms
 = 
™em
->
chd»n
();

598 ià(
	gchdI‹ms
.
size
(è!ğ
m_äame
->
Œ“
()->
chdCouÁ
())

599  
çl£
;

601 
	gsize
 = 
chdI‹ms
.
size
();

602 
	gi
 = 0; i < 
	gsize
; ++i) {

603 ià(!
	gm_äame
->
Œ“
()->
chd
(
chdI‹ms
[
i
]->
rg‘
()))

604  
	gçl£
;

608  
	gŒue
;

611 
	gHi¡ÜyCÚŒŞËr
::
upd©eBackFÜw¬dLi¡Cl³dAtT¬g‘
(
boŞ
 
doCl
)

618 
Page
* 
·ge
 = 
m_äame
->page();

619 ià(!
	g·ge
)

622 ià(
	gm_äame
->
lßd”
()->
docum’tLßd”
()->
u¾FÜHi¡Üy
().
isEm±y
())

625 
F¿me
* 
	gmašF¿me
 = 
·ge
->
mašF¿me
();

626 
ASSERT
(
mašF¿me
);

627 
F¿meLßd”
* 
	gäameLßd”
 = 
mašF¿me
->
lßd”
();

629 
	gäameLßd”
->
checkDidP”fÜmFœ¡Navig©iÚ
();

631 
	gRefPŒ
<
	gHi¡ÜyI‹m
> 
	g™em
 = 
äameLßd”
->
hi¡Üy
()->
ü—‹I‹mT»e
(
m_äame
, 
doCl
);

632 
LOG
(
BackFÜw¬d
, "WebCÜeBackFÜw¬d - Addšg backfÜw¬d i‹m %°fÜ f¿m%s", 
™em
.
g‘
(), 
m_äame
->
lßd”
()->
docum’tLßd”
()->
u¾
().
¡ršg
().
ascii
().
d©a
());

633 
	g·ge
->
backFÜw¬dLi¡
()->
addI‹m
(
™em
);

636 
	gHi¡ÜyCÚŒŞËr
::
pushS‹
(
PassRefPŒ
<
S”ŸlizedSütV®ue
> 
¡©eObjeù
, cÚ¡ 
SŒšg
& 
t™Ë
, cÚ¡ SŒšg& 
u¾SŒšg
)

638 
Page
* 
	g·ge
 = 
m_äame
->
·ge
();

639 
ASSERT
(
·ge
);

642 
	gRefPŒ
<
	gHi¡ÜyI‹m
> 
	g™em
 = 
ü—‹I‹mT»e
(
m_äame
, 
çl£
);

643 
ASSERT
(
™em
->
isT¬g‘I‹m
());

646 
	g™em
->
£tT™Ë
(
t™Ë
);

647 
	g™em
->
£tS‹Objeù
(
¡©eObjeù
);

648 
	g™em
->
£tURLSŒšg
(
u¾SŒšg
);

652 
	g™em
->
£tDocum’tSequ’ûNumb”
(
m_´eviousI‹m
->
docum’tSequ’ûNumb”
());

654 
	g·ge
->
backFÜw¬dLi¡
()->
pushS‹I‹m
(
™em
.
»Ëa£
());

657 
	gHi¡ÜyCÚŒŞËr
::
»¶aûS‹
(
PassRefPŒ
<
S”ŸlizedSütV®ue
> 
¡©eObjeù
, cÚ¡ 
SŒšg
& 
t™Ë
, cÚ¡ SŒšg& 
u¾SŒšg
)

661 ià(!
	gm_cu¼’tI‹m
) {

662 
ASSERT_NOT_REACHED
();

666 ià(!
	gu¾SŒšg
.
isEm±y
())

667 
	gm_cu¼’tI‹m
->
£tURLSŒšg
(
u¾SŒšg
);

668 
	gm_cu¼’tI‹m
->
£tT™Ë
(
t™Ë
);

669 
	gm_cu¼’tI‹m
->
£tS‹Objeù
(
¡©eObjeù
);

	@HistoryController.h

30 #iâdeà
Hi¡ÜyCÚŒŞËr_h


31 
	#Hi¡ÜyCÚŒŞËr_h


	)

33 
	~"F¿meLßd”Ty³s.h
"

34 
	~"PÏtfÜmSŒšg.h
"

35 
	~<wtf/NÚcİyabË.h
>

36 
	~<wtf/RefPŒ.h
>

38 
Çme¥aû
 
	gWebCÜe
 {

40 
şass
 
	gF¿me
;

41 
şass
 
	gHi¡ÜyI‹m
;

42 
şass
 
	gS”ŸlizedSütV®ue
;

44 şas 
	cHi¡ÜyCÚŒŞËr
 : 
public
 
NÚcİyabË
 {

45 
public
:

46 
Hi¡ÜyCÚŒŞËr
(
F¿me
*);

47 ~
Hi¡ÜyCÚŒŞËr
();

49 
§veSüŞlPos™iÚAndV›wS‹ToI‹m
(
Hi¡ÜyI‹m
*);

50 
»¡ÜeSüŞlPos™iÚAndV›wS‹
();

52 
upd©eBackFÜw¬dLi¡FÜF¿gm’tSüŞl
();

54 
§veDocum’tS‹
();

55 
§veDocum’tAndSüŞlS‹
();

56 
»¡ÜeDocum’tS‹
();

58 
šv®id©eCu¼’tI‹mCachedPage
();

60 
goToI‹m
(
Hi¡ÜyI‹m
*, 
F¿meLßdTy³
);

61 
boŞ
 
u¾sM©chI‹m
(
Hi¡ÜyI‹m
*) const;

63 
upd©eFÜBackFÜw¬dNavig©iÚ
();

64 
upd©eFÜR–ßd
();

65 
upd©eFÜSnd¬dLßd
();

66 
upd©eFÜRedœeùW™hLockedBackFÜw¬dLi¡
();

67 
upd©eFÜCl›ÁRedœeù
();

68 
upd©eFÜComm™
();

69 
upd©eFÜSameDocum’tNavig©iÚ
();

70 
upd©eFÜF¿meLßdCom¶‘ed
();

72 
Hi¡ÜyI‹m
* 
cu¼’tI‹m
(ècÚ¡ {  
	gm_cu¼’tI‹m
.
g‘
(); }

73 
£tCu¼’tI‹m
(
Hi¡ÜyI‹m
*);

74 
£tCu¼’tI‹mT™Ë
(cÚ¡ 
SŒšg
&);

76 
Hi¡ÜyI‹m
* 
´ovisiÚ®I‹m
(ècÚ¡ {  
	gm_´ovisiÚ®I‹m
.
g‘
(); }

77 
£tProvisiÚ®I‹m
(
Hi¡ÜyI‹m
*);

79 
pushS‹
(
PassRefPŒ
<
S”ŸlizedSütV®ue
>, cÚ¡ 
SŒšg
& 
t™Ë
, cÚ¡ SŒšg& 
u¾
);

80 
»¶aûS‹
(
PassRefPŒ
<
S”ŸlizedSütV®ue
>, cÚ¡ 
SŒšg
& 
t™Ë
, cÚ¡ SŒšg& 
u¾
);

82 
	g´iv©e
:

83 
PassRefPŒ
<
Hi¡ÜyI‹m
> 
ü—‹I‹m
(
boŞ
 
u£Origš®
);

84 
	gPassRefPŒ
<
	gHi¡ÜyI‹m
> 
ü—‹I‹mT»e
(
F¿me
* 
rg‘F¿me
, 
boŞ
 
şAtT¬g‘
);

86 
»cursiveGoToI‹m
(
Hi¡ÜyI‹m
*, Hi¡ÜyI‹m*, 
F¿meLßdTy³
);

87 
boŞ
 
chdF¿mesM©chI‹m
(
Hi¡ÜyI‹m
*) const;

88 
upd©eBackFÜw¬dLi¡Cl³dAtT¬g‘
(
boŞ
 
doCl
);

90 
F¿me
* 
	gm_äame
;

92 
	gRefPŒ
<
	gHi¡ÜyI‹m
> 
	gm_cu¼’tI‹m
;

93 
	gRefPŒ
<
	gHi¡ÜyI‹m
> 
	gm_´eviousI‹m
;

94 
	gRefPŒ
<
	gHi¡ÜyI‹m
> 
	gm_´ovisiÚ®I‹m
;

	@ImageDocument.cpp

25 
	~"cÚfig.h
"

26 
	~"ImageDocum’t.h
"

28 
	~"CSSStyËDeş¬©iÚ.h
"

29 
	~"CachedImage.h
"

30 
	~"Docum’tLßd”.h
"

31 
	~"EËm’t.h
"

32 
	~"Ev’tLi¡’”.h
"

33 
	~"Ev’tNames.h
"

34 
	~"F¿me.h
"

35 
	~"F¿meLßd”.h
"

36 
	~"F¿meLßd”Cl›Á.h
"

37 
	~"F¿meV›w.h
"

38 
	~"HTMLImageEËm’t.h
"

39 
	~"HTMLNames.h
"

40 
	~"LoÿlizedSŒšgs.h
"

41 
	~"Mou£Ev’t.h
"

42 
	~"NÙIm¶em’‹d.h
"

43 
	~"Page.h
"

44 
	~"Segm’‹dSŒšg.h
"

45 
	~"S‘tšgs.h
"

46 
	~"Text.h
"

47 
	~"XMLTok’iz”.h
"

49 
usšg
 
	g¡d
::
mš
;

51 
Çme¥aû
 
	gWebCÜe
 {

53 
usšg
 
Çme¥aû
 
	gHTMLNames
;

55 şas 
	cImageEv’tLi¡’”
 : 
public
 
Ev’tLi¡’”
 {

56 
public
:

57 
PassRefPŒ
<
ImageEv’tLi¡’”
> 
ü—‹
(
ImageDocum’t
* 
docum’t
è{  
adİtRef
(
Ãw
 ImageEventListener(document)); }

58 cÚ¡ 
ImageEv’tLi¡’”
* 
ÿ¡
(cÚ¡ 
Ev’tLi¡’”
* 
li¡’”
)

60  
	gli¡’”
->
ty³
(è=ğ
ImageEv’tLi¡’”Ty³


61 ? 
¡©ic_ÿ¡
<cÚ¡ 
ImageEv’tLi¡’”
*>(
li¡’”
)

65 
vœtu®
 
boŞ
 
	gİ”©Ü
==(cÚ¡ 
Ev’tLi¡’”
& 
Ùh”
);

67 
	g´iv©e
:

68 
ImageEv’tLi¡’”
(
ImageDocum’t
* 
docum’t
)

69 : 
Ev’tLi¡’”
(
ImageEv’tLi¡’”Ty³
)

70 , 
m_doc
(
docum’t
)

74 
vœtu®
 
hªdËEv’t
(
SütExecutiÚCÚ‹xt
*, 
Ev’t
*);

76 
ImageDocum’t
* 
	gm_doc
;

79 şas 
	cImageTok’iz”
 : 
public
 
Tok’iz”
 {

80 
public
:

81 
ImageTok’iz”
(
ImageDocum’t
* 
doc
è: 
m_doc
(doc) {}

83 
vœtu®
 
wr™e
(cÚ¡ 
Segm’‹dSŒšg
&, 
boŞ
 
­³ndD©a
);

84 
vœtu®
 
fšish
();

85 
vœtu®
 
boŞ
 
isWa™šgFÜSüts
() const;

87 
vœtu®
 
boŞ
 
wªtsRawD©a
(ècÚ¡ {  
	gŒue
; }

88 
vœtu®
 
boŞ
 
wr™eRawD©a
(cÚ¡ * 
d©a
, 
Ën
);

90 
	g´iv©e
:

91 
ImageDocum’t
* 
m_doc
;

94 şas 
	cImageDocum’tEËm’t
 : 
public
 
HTMLImageEËm’t
 {

95 
public
:

96 
ImageDocum’tEËm’t
(
ImageDocum’t
* 
doc
)

97 : 
HTMLImageEËm’t
(
imgTag
, 
doc
)

98 , 
m_imageDocum’t
(
doc
)

102 
	gvœtu®
 ~
ImageDocum’tEËm’t
();

103 
vœtu®
 
wlMoveToNewOwÃrDocum’t
();

105 
	g´iv©e
:

106 
ImageDocum’t
* 
m_imageDocum’t
;

111 
	gImageTok’iz”
::
	$wr™e
(cÚ¡ 
Segm’‹dSŒšg
&, 
boŞ
)

114 
	`nÙIm¶em’‹d
();

115 
	}
}

117 
boŞ
 
	gImageTok’iz”
::
	$wr™eRawD©a
(const *, )

119 
F¿me
* 
äame
 = 
m_doc
->
	`äame
();

120 
S‘tšgs
* 
£‰šgs
 = 
äame
->
	`£‰šgs
();

121 ià(!
äame
->
	`lßd”
()->
	`ş›Á
()->
	`®lowImages
(!
£‰šgs
 || s‘tšgs->
	`¬eImagesEÇbËd
()))

122  
çl£
;

124 
CachedImage
* 
ÿchedImage
 = 
m_doc
->
	`ÿchedImage
();

125 
ÿchedImage
->
	`d©a
(
äame
->
	`lßd”
()->
	`docum’tLßd”
()->
	`mašResourûD©a
(), 
çl£
);

127 
m_doc
->
	`imageChªged
();

129  
çl£
;

130 
	}
}

132 
	gImageTok’iz”
::
	$fšish
()

134 ià(!
m_·r£rStİ³d
 && 
m_doc
->
	`imageEËm’t
()) {

135 
CachedImage
* 
ÿchedImage
 = 
m_doc
->
	`ÿchedImage
();

136 
RefPŒ
<
Sh¬edBufãr
> 
d©a
 = 
m_doc
->
	`äame
()->
	`lßd”
()->
	`docum’tLßd”
()->
	`mašResourûD©a
();

140 ià(
m_doc
->
	`äame
()->
	`lßd”
()->
	`docum’tLßd”
()->
	`isLßdšgMuÉ¬tCÚ‹Á
())

141 
d©a
 = d©a->
	`cİy
();

143 
ÿchedImage
->
	`d©a
(
d©a
.
	`»Ëa£
(), 
Œue
);

144 
ÿchedImage
->
	`fšish
();

146 
ÿchedImage
->
	`£tRe¥Ú£
(
m_doc
->
	`äame
()->
	`lßd”
()->
	`docum’tLßd”
()->
	`»¥Ú£
());

148 
IÁSize
 
size
 = 
ÿchedImage
->
	`imageSize
(
m_doc
->
	`äame
()->
	`·geZoomFaùÜ
());

149 ià(
size
.
	`width
()) {

152 
SŒšg
 
feName
 = 
	`decodeURLEsÿ³Sequ’ûs
(
m_doc
->
	`u¾
().
	`Ï¡P©hCompÚ’t
());

153 ià(
feName
.
	`isEm±y
())

154 
feName
 = 
m_doc
->
	`u¾
().
	`ho¡
();

155 
m_doc
->
	`£tT™Ë
(
	`imageT™Ë
(
feName
, 
size
));

158 
m_doc
->
	`imageChªged
();

161 
m_doc
->
	`fšishedP¬sšg
();

162 
	}
}

164 
boŞ
 
	gImageTok’iz”
::
	$isWa™šgFÜSüts
() const

167  
çl£
;

168 
	}
}

172 
	gImageDocum’t
::
	$ImageDocum’t
(
F¿me
* 
äame
)

173 : 
	`HTMLDocum’t
(
äame
)

174 , 
	`m_imageEËm’t
(0)

175 , 
	`m_imageSizeIsKnown
(
çl£
)

176 , 
	`m_didShrškImage
(
çl£
)

177 , 
	`m_shouldShrškImage
(
	$shouldShrškToF™
())

179 
	`£tP¬£Mode
(
Com·t
);

180 
	}
}

182 
Tok’iz”
* 
	gImageDocum’t
::
	$ü—‹Tok’iz”
()

184  
Ãw
 
	`ImageTok’iz”
(
this
);

185 
	}
}

187 
	gImageDocum’t
::
	$ü—‹Docum’tSŒuùu»
()

189 
Exû±iÚCode
 
ec
;

191 
RefPŒ
<
EËm’t
> 
roÙEËm’t
 = 
Docum’t
::
	`ü—‹EËm’t
(
htmlTag
, 
çl£
);

192 
	`­³ndChd
(
roÙEËm’t
, 
ec
);

194 
RefPŒ
<
EËm’t
> 
body
 = 
Docum’t
::
	`ü—‹EËm’t
(
bodyTag
, 
çl£
);

195 
body
->
	`£tA‰ribu‹
(
¡yËA‰r
, "margin: 0px;");

197 
roÙEËm’t
->
	`­³ndChd
(
body
, 
ec
);

199 
RefPŒ
<
ImageDocum’tEËm’t
> 
imageEËm’t
 = 
Ãw
 
	`ImageDocum’tEËm’t
(
this
);

201 
imageEËm’t
->
	`£tA‰ribu‹
(
¡yËA‰r
, "-webkit-user-select:‚one");

202 
imageEËm’t
->
	`£tLßdMªu®ly
(
Œue
);

203 
imageEËm’t
->
	`£tSrc
(
	`u¾
().
	`¡ršg
());

205 
body
->
	`­³ndChd
(
imageEËm’t
, 
ec
);

207 ià(
	`shouldShrškToF™
()) {

209 
RefPŒ
<
Ev’tLi¡’”
> 
li¡’”
 = 
ImageEv’tLi¡’”
::
	`ü—‹
(
this
);

210 ià(
DOMWšdow
* 
domWšdow
 = 
this
->
	`domWšdow
())

211 
domWšdow
->
	`addEv’tLi¡’”
("»size", 
li¡’”
, 
çl£
);

212 
imageEËm’t
->
	`addEv’tLi¡’”
("şick", 
li¡’”
.
	`»Ëa£
(), 
çl£
);

215 
m_imageEËm’t
 = 
imageEËm’t
.
	`g‘
();

216 
	}
}

218 
	gImageDocum’t
::
	$sÿË
() const

220 ià(!
m_imageEËm’t
)

223 
IÁSize
 
imageSize
 = 
m_imageEËm’t
->
	`ÿchedImage
()->
	`imageSize
(
	`äame
()->
	`·geZoomFaùÜ
());

224 
IÁSize
 
wšdowSize
 = 
	`IÁSize
(
	`äame
()->
	`v›w
()->
	`width
(), f¿me()->v›w()->
	`height
());

226 
widthSÿË
 = ()
wšdowSize
.
	`width
(è/ 
imageSize
.width();

227 
heightSÿË
 = ()
wšdowSize
.
	`height
(è/ 
imageSize
.height();

229  
	`mš
(
widthSÿË
, 
heightSÿË
);

230 
	}
}

232 
	gImageDocum’t
::
	$»sizeImageToF™
()

234 ià(!
m_imageEËm’t
)

237 
IÁSize
 
imageSize
 = 
m_imageEËm’t
->
	`ÿchedImage
()->
	`imageSize
(
	`äame
()->
	`·geZoomFaùÜ
());

239 
sÿË
 = 
this
->
	`sÿË
();

240 
m_imageEËm’t
->
	`£tWidth
(
¡©ic_ÿ¡
<>(
imageSize
.
	`width
(è* 
sÿË
));

241 
m_imageEËm’t
->
	`£tHeight
(
¡©ic_ÿ¡
<>(
imageSize
.
	`height
(è* 
sÿË
));

243 
Exû±iÚCode
 
ec
;

244 
m_imageEËm’t
->
	`¡yË
()->
	`£tPrİ”ty
("cursÜ", "-webk™-zoom-š", 
ec
);

245 
	}
}

247 
	gImageDocum’t
::
	$imageClicked
(
x
, 
y
)

249 ià(!
m_imageSizeIsKnown
 || 
	`imageF™sInWšdow
())

252 
m_shouldShrškImage
 = !m_shouldShrinkImage;

254 ià(
m_shouldShrškImage
)

255 
	`wšdowSizeChªged
();

257 
	`»¡ÜeImageSize
();

259 
	`upd©eLayout
();

261 
sÿË
 = 
this
->
	`sÿË
();

263 
süŞlX
 = 
¡©ic_ÿ¡
<>(
x
 / 
sÿË
 - ()
	`äame
()->
	`v›w
()->
	`width
() / 2);

264 
süŞlY
 = 
¡©ic_ÿ¡
<>(
y
 / 
sÿË
 - ()
	`äame
()->
	`v›w
()->
	`height
() / 2);

266 
	`äame
()->
	`v›w
()->
	`£tSüŞlPos™iÚ
(
	`IÁPošt
(
süŞlX
, 
süŞlY
));

268 
	}
}

270 
	gImageDocum’t
::
	$imageChªged
()

272 
	`ASSERT
(
m_imageEËm’t
);

274 ià(
m_imageSizeIsKnown
)

277 ià(
m_imageEËm’t
->
	`ÿchedImage
()->
	`imageSize
(
	`äame
()->
	`·geZoomFaùÜ
()).
	`isEm±y
())

280 
m_imageSizeIsKnown
 = 
Œue
;

282 ià(
	`shouldShrškToF™
()) {

284 
	`wšdowSizeChªged
();

286 
	}
}

288 
	gImageDocum’t
::
	$»¡ÜeImageSize
()

290 ià(!
m_imageEËm’t
 || !
m_imageSizeIsKnown
)

293 
m_imageEËm’t
->
	`£tWidth
(m_imageEËm’t->
	`ÿchedImage
()->
	`imageSize
(
	`äame
()->
	`·geZoomFaùÜ
()).
	`width
());

294 
m_imageEËm’t
->
	`£tHeight
(m_imageEËm’t->
	`ÿchedImage
()->
	`imageSize
(
	`äame
()->
	`·geZoomFaùÜ
()).
	`height
());

296 
Exû±iÚCode
 
ec
;

297 ià(
	`imageF™sInWšdow
())

298 
m_imageEËm’t
->
	`¡yË
()->
	`»movePrİ”ty
("cursÜ", 
ec
);

300 
m_imageEËm’t
->
	`¡yË
()->
	`£tPrİ”ty
("cursÜ", "-webk™-zoom-out", 
ec
);

302 
m_didShrškImage
 = 
çl£
;

303 
	}
}

305 
boŞ
 
	gImageDocum’t
::
	$imageF™sInWšdow
() const

307 ià(!
m_imageEËm’t
)

308  
Œue
;

310 
IÁSize
 
imageSize
 = 
m_imageEËm’t
->
	`ÿchedImage
()->
	`imageSize
(
	`äame
()->
	`·geZoomFaùÜ
());

311 
IÁSize
 
wšdowSize
 = 
	`IÁSize
(
	`äame
()->
	`v›w
()->
	`width
(), f¿me()->v›w()->
	`height
());

313  
imageSize
.
	`width
(è<ğ
wšdowSize
.width(è&& imageSize.
	`height
() <= windowSize.height();

314 
	}
}

316 
	gImageDocum’t
::
	$wšdowSizeChªged
()

318 ià(!
m_imageEËm’t
 || !
m_imageSizeIsKnown
)

321 
boŞ
 
f™sInWšdow
 = 
	`imageF™sInWšdow
();

325 ià(!
m_shouldShrškImage
) {

326 
Exû±iÚCode
 
ec
;

328 ià(
f™sInWšdow
)

329 
m_imageEËm’t
->
	`¡yË
()->
	`»movePrİ”ty
("cursÜ", 
ec
);

331 
m_imageEËm’t
->
	`¡yË
()->
	`£tPrİ”ty
("cursÜ", "-webk™-zoom-out", 
ec
);

335 ià(
m_didShrškImage
) {

338 ià(
f™sInWšdow
)

339 
	`»¡ÜeImageSize
();

341 
	`»sizeImageToF™
();

344 ià(!
f™sInWšdow
) {

345 
	`»sizeImageToF™
();

346 
m_didShrškImage
 = 
Œue
;

349 
	}
}

351 
CachedImage
* 
	gImageDocum’t
::
	$ÿchedImage
()

353 ià(!
m_imageEËm’t
)

354 
	`ü—‹Docum’tSŒuùu»
();

356  
m_imageEËm’t
->
	`ÿchedImage
();

357 
	}
}

359 
boŞ
 
	gImageDocum’t
::
	$shouldShrškToF™
() const

361  
	`äame
()->
	`·ge
()->
	`£‰šgs
()->
	`shršksSnd®ÚeImagesToF™
() &&

362 
	`äame
()->
	`·ge
()->
	`mašF¿me
() == frame();

363 
	}
}

367 
	gImageEv’tLi¡’”
::
	$hªdËEv’t
(
SütExecutiÚCÚ‹xt
*, 
Ev’t
* 
ev’t
)

369 ià(
ev’t
->
	`ty³
(è=ğ
	`ev’tNames
().
»sizeEv’t
)

370 
m_doc
->
	`wšdowSizeChªged
();

371 ià(
ev’t
->
	`ty³
(è=ğ
	`ev’tNames
().
şickEv’t
) {

372 
Mou£Ev’t
* 
mou£Ev’t
 = 
¡©ic_ÿ¡
<Mou£Ev’t*>(
ev’t
);

373 
m_doc
->
	`imageClicked
(
mou£Ev’t
->
	`x
(), mou£Ev’t->
	`y
());

375 
	}
}

377 
boŞ
 
	gImageEv’tLi¡’”
::
İ”©Ü
==(cÚ¡ 
Ev’tLi¡’”
& 
li¡’”
)

379 ià(cÚ¡ 
ImageEv’tLi¡’”
* 
imageEv’tLi¡’”
 = ImageEv’tLi¡’”::
ÿ¡
(&
li¡’”
))

380  
m_doc
 =ğ
imageEv’tLi¡’”
->m_doc;

381  
	gçl£
;

386 
	gImageDocum’tEËm’t
::~
	$ImageDocum’tEËm’t
()

388 ià(
m_imageDocum’t
)

389 
m_imageDocum’t
->
	`discÚÃùImageEËm’t
();

390 
	}
}

392 
	gImageDocum’tEËm’t
::
	$wlMoveToNewOwÃrDocum’t
()

394 ià(
m_imageDocum’t
) {

395 
m_imageDocum’t
->
	`discÚÃùImageEËm’t
();

396 
m_imageDocum’t
 = 0;

398 
HTMLImageEËm’t
::
	`wlMoveToNewOwÃrDocum’t
();

399 
	}
}

	@ImageDocument.h

25 #iâdeà
ImageDocum’t_h


26 
	#ImageDocum’t_h


	)

28 
	~"HTMLDocum’t.h
"

30 
Çme¥aû
 
	gWebCÜe
 {

32 
şass
 
	gImageDocum’tEËm’t
;

34 şas 
	cImageDocum’t
 : 
public
 
HTMLDocum’t
 {

35 
public
:

36 
PassRefPŒ
<
ImageDocum’t
> 
ü—‹
(
F¿me
* 
äame
)

38  
adİtRef
(
Ãw
 
ImageDocum’t
(
äame
));

41 
CachedImage
* 
ÿchedImage
();

42 
ImageDocum’tEËm’t
* 
imageEËm’t
(ècÚ¡ {  
	gm_imageEËm’t
; }

43 
discÚÃùImageEËm’t
(è{ 
	gm_imageEËm’t
 = 0; }

45 
wšdowSizeChªged
();

46 
imageChªged
();

47 
imageClicked
(
x
, 
y
);

49 
	g´iv©e
:

50 
ImageDocum’t
(
F¿me
*);

52 
vœtu®
 
Tok’iz”
* 
ü—‹Tok’iz”
();

53 
vœtu®
 
boŞ
 
isImageDocum’t
(ècÚ¡ {  
	gŒue
; }

55 
ü—‹Docum’tSŒuùu»
();

56 
»sizeImageToF™
();

57 
»¡ÜeImageSize
();

58 
boŞ
 
imageF™sInWšdow
() const;

59 
boŞ
 
shouldShrškToF™
() const;

60 
sÿË
() const;

62 
ImageDocum’tEËm’t
* 
	gm_imageEËm’t
;

65 
boŞ
 
	gm_imageSizeIsKnown
;

68 
boŞ
 
	gm_didShrškImage
;

71 
boŞ
 
	gm_shouldShrškImage
;

	@ImageLoader.cpp

22 
	~"cÚfig.h
"

23 
	~"ImageLßd”.h
"

25 
	~"CSSH–³r.h
"

26 
	~"CachedImage.h
"

27 
	~"DocLßd”.h
"

28 
	~"Docum’t.h
"

29 
	~"EËm’t.h
"

30 
	~"R’d”Image.h
"

32 #ià!
ASSERT_DISABLED


34 
Çme¥aû
 
	gWTF
 {

36 
	g‹m¶©e
<> 
	gV®ueCheck
<
	gWebCÜe
::
ImageLßd”
*> {

37 
WebCÜe
::
	tImageLßd”
* 
	tT¿™Ty³
;

38 
checkCÚsi¡’cy
(cÚ¡ 
WebCÜe
::
ImageLßd”
* 
p
)

40 ià(!
p
)

42 
ASSERT
(
p
->
–em’t
());

43 
	gV®ueCheck
<
	gWebCÜe
::
EËm’t
*>::
checkCÚsi¡’cy
(
p
->
–em’t
());

50 
Çme¥aû
 
	gWebCÜe
 {

52 şas 
	cImageEv’tS’d”
 : 
public
 
NÚcİyabË
 {

53 
public
:

54 
ImageEv’tS’d”
(cÚ¡ 
AtomicSŒšg
& 
ev’tTy³
);

56 
di¥©chEv’tSoÚ
(
ImageLßd”
*);

57 
ÿnûlEv’t
(
ImageLßd”
*);

59 
di¥©chP’dšgEv’ts
();

61 #ià!
ASSERT_DISABLED


62 
boŞ
 
hasP’dšgEv’ts
(
ImageLßd”
* 
lßd”
è{  
	gm_di¥©chSoÚLi¡
.
fšd
Ößd”è!ğ
nÙFound
; }

65 
	g´iv©e
:

66 
tim”Fœed
(
Tim”
<
ImageEv’tS’d”
>*);

68 
AtomicSŒšg
 
	gm_ev’tTy³
;

69 
	gTim”
<
	gImageEv’tS’d”
> 
	gm_tim”
;

70 
	gVeùÜ
<
	gImageLßd”
*> 
	gm_di¥©chSoÚLi¡
;

71 
	gVeùÜ
<
	gImageLßd”
*> 
	gm_di¥©chšgLi¡
;

74 
	gImageEv’tS’d”
& 
	$befÜeLßdEv’tS’d”
()

76 
	`DEFINE_STATIC_LOCAL
(
ImageEv’tS’d”
, 
£nd”
, (
	`ev’tNames
().
befÜ–ßdEv’t
));

77  
£nd”
;

78 
	}
}

80 
	gImageEv’tS’d”
& 
	$lßdEv’tS’d”
()

82 
	`DEFINE_STATIC_LOCAL
(
ImageEv’tS’d”
, 
£nd”
, (
	`ev’tNames
().
lßdEv’t
));

83  
£nd”
;

84 
	}
}

86 
	gImageLßd”
::
	$ImageLßd”
(
EËm’t
* 
–em’t
)

87 : 
	`m_–em’t
(
–em’t
)

88 , 
	`m_image
(0)

89 , 
	`m_fœedBefÜeLßd
(
Œue
)

90 , 
	`m_fœedLßd
(
Œue
)

91 , 
	`m_imageCom¶‘e
(
Œue
)

92 , 
	$m_lßdMªu®ly
(
çl£
)

94 
	}
}

96 
	gImageLßd”
::~
	$ImageLßd”
()

98 ià(
m_image
)

99 
m_image
->
	`»moveCl›Á
(
this
);

101 
	`ASSERT
(!
m_fœedBefÜeLßd
 || !
	`befÜeLßdEv’tS’d”
().
	`hasP’dšgEv’ts
(
this
));

102 ià(!
m_fœedBefÜeLßd
)

103 
	`befÜeLßdEv’tS’d”
().
	`ÿnûlEv’t
(
this
);

105 
	`ASSERT
(!
m_fœedLßd
 || !
	`lßdEv’tS’d”
().
	`hasP’dšgEv’ts
(
this
));

106 ià(!
m_fœedLßd
)

107 
	`lßdEv’tS’d”
().
	`ÿnûlEv’t
(
this
);

108 
	}
}

110 
	gImageLßd”
::
	$£tImage
(
CachedImage
* 
ÃwImage
)

112 
	`ASSERT
(
m_çedLßdURL
.
	`isEm±y
());

113 
CachedImage
* 
ŞdImage
 = 
m_image
.
	`g‘
();

114 ià(
ÃwImage
 !ğ
ŞdImage
) {

115 
m_image
 = 
ÃwImage
;

116 ià(!
m_fœedBefÜeLßd
) {

117 
	`befÜeLßdEv’tS’d”
().
	`ÿnûlEv’t
(
this
);

118 
m_fœedBefÜeLßd
 = 
Œue
;

120 ià(!
m_fœedLßd
) {

121 
	`lßdEv’tS’d”
().
	`ÿnûlEv’t
(
this
);

122 
m_fœedLßd
 = 
Œue
;

124 
m_imageCom¶‘e
 = 
Œue
;

125 ià(
ÃwImage
)

126 
ÃwImage
->
	`addCl›Á
(
this
);

127 ià(
ŞdImage
)

128 
ŞdImage
->
	`»moveCl›Á
(
this
);

131 ià(
R’d”Objeù
* 
»nd””
 = 
m_–em’t
->
	`»nd””
()) {

132 ià(!
»nd””
->
	`isImage
())

134 
	`toR’d”Image
(
»nd””
)->
	`»£tAnim©iÚ
();

136 
	}
}

138 
	gImageLßd”
::
	$upd©eFromEËm’t
()

142 
Docum’t
* 
docum’t
 = 
m_–em’t
->
	`docum’t
();

143 ià(!
docum’t
->
	`»nd””
())

146 
AtomicSŒšg
 
©Œ
 = 
m_–em’t
->
	`g‘A‰ribu‹
(m_–em’t->
	`imageSourûA‰ribu‹Name
());

148 ià(
©Œ
 =ğ
m_çedLßdURL
)

155 
CachedImage
* 
ÃwImage
 = 0;

156 ià(!(
©Œ
.
	`isNuÎ
(è|| (©Œ.
	`isEm±y
(è&& 
docum’t
->
	`ba£URI
().
	`isLoÿlFe
()))) {

157 ià(
m_lßdMªu®ly
) {

158 
docum’t
->
	`docLßd”
()->
	`£tAutoLßdImages
(
çl£
);

159 
ÃwImage
 = 
Ãw
 
	`CachedImage
(
	`sourûURI
(
©Œ
));

160 
ÃwImage
->
	`£tLßdšg
(
Œue
);

161 
ÃwImage
->
	`£tDocLßd”
(
docum’t
->
	`docLßd”
());

162 
docum’t
->
	`docLßd”
()->
m_docum’tResourûs
.
	`£t
(
ÃwImage
->
	`u¾
(),‚ewImage);

164 
ÃwImage
 = 
docum’t
->
	`docLßd”
()->
	`»que¡Image
(
	`sourûURI
(
©Œ
));

168 
m_çedLßdURL
 = !
ÃwImage
 ? 
©Œ
 : 
	`AtomicSŒšg
();

171 
CachedImage
* 
ŞdImage
 = 
m_image
.
	`g‘
();

172 ià(
ÃwImage
 !ğ
ŞdImage
) {

173 ià(!
m_fœedBefÜeLßd
)

174 
	`befÜeLßdEv’tS’d”
().
	`ÿnûlEv’t
(
this
);

175 ià(!
m_fœedLßd
)

176 
	`lßdEv’tS’d”
().
	`ÿnûlEv’t
(
this
);

178 
m_image
 = 
ÃwImage
;

179 
m_fœedBefÜeLßd
 = !
ÃwImage
;

180 
m_fœedLßd
 = !
ÃwImage
;

181 
m_imageCom¶‘e
 = !
ÃwImage
;

183 ià(
ÃwImage
) {

184 
ÃwImage
->
	`addCl›Á
(
this
);

185 ià(!
m_–em’t
->
	`docum’t
()->
	`hasLi¡’”Ty³
(
Docum’t
::
BEFORELOAD_LISTENER
))

186 
	`di¥©chP’dšgBefÜeLßdEv’t
();

188 
	`befÜeLßdEv’tS’d”
().
	`di¥©chEv’tSoÚ
(
this
);

190 ià(
ŞdImage
)

191 
ŞdImage
->
	`»moveCl›Á
(
this
);

194 ià(
R’d”Objeù
* 
»nd””
 = 
m_–em’t
->
	`»nd””
()) {

195 ià(!
»nd””
->
	`isImage
())

197 
	`toR’d”Image
(
»nd””
)->
	`»£tAnim©iÚ
();

199 
	}
}

201 
	gImageLßd”
::
	$upd©eFromEËm’tIgnÜšgP»viousE¼Ü
()

204 
m_çedLßdURL
 = 
	`AtomicSŒšg
();

205 
	`upd©eFromEËm’t
();

206 
	}
}

208 
	gImageLßd”
::
	$nÙifyFšished
(
CachedResourû
*)

210 
	`ASSERT
(
m_çedLßdURL
.
	`isEm±y
());

212 
m_imageCom¶‘e
 = 
Œue
;

213 ià(
	`haveFœedBefÜeLßdEv’t
())

214 
	`upd©eR’d””
();

216 ià(
m_fœedLßd
)

219 
	`lßdEv’tS’d”
().
	`di¥©chEv’tSoÚ
(
this
);

220 
	}
}

222 
	gImageLßd”
::
	$upd©eR’d””
()

224 ià(
R’d”Objeù
* 
»nd””
 = 
m_–em’t
->
	`»nd””
()) {

225 ià(!
»nd””
->
	`isImage
(è&& !»nd””->
	`isVideo
())

227 
R’d”Image
* 
imageR’d””
 = 
	`toR’d”Image
(
»nd””
);

232 
CachedImage
* 
ÿchedImage
 = 
imageR’d””
->
	`ÿchedImage
();

233 ià(
m_image
 !ğ
ÿchedImage
 && (
m_imageCom¶‘e
 || !cachedImage))

234 
imageR’d””
->
	`£tCachedImage
(
m_image
.
	`g‘
());

236 
	}
}

238 
	gImageLßd”
::
	$di¥©chP’dšgBefÜeLßdEv’t
()

240 ià(
m_fœedBefÜeLßd
)

242 ià(!
m_image
)

244 ià(!
m_–em’t
->
	`docum’t
()->
	`©ched
())

246 
m_fœedBefÜeLßd
 = 
Œue
;

247 ià(
m_–em’t
->
	`di¥©chBefÜeLßdEv’t
(
m_image
->
	`u¾
())) {

248 
	`upd©eR’d””
();

251 ià(
m_image
) {

252 
m_image
->
	`»moveCl›Á
(
this
);

253 
m_image
 = 0;

255 
	`lßdEv’tS’d”
().
	`ÿnûlEv’t
(
this
);

256 
	}
}

258 
	gImageLßd”
::
	$di¥©chP’dšgLßdEv’t
()

260 ià(
m_fœedLßd
)

262 ià(!
m_image
)

264 ià(!
m_–em’t
->
	`docum’t
()->
	`©ched
())

266 
m_fœedLßd
 = 
Œue
;

267 
	`di¥©chLßdEv’t
();

268 
	}
}

270 
	gImageLßd”
::
	$di¥©chP’dšgBefÜeLßdEv’ts
()

272 
	`befÜeLßdEv’tS’d”
().
	`di¥©chP’dšgEv’ts
();

273 
	}
}

275 
	gImageLßd”
::
	$di¥©chP’dšgLßdEv’ts
()

277 
	`lßdEv’tS’d”
().
	`di¥©chP’dšgEv’ts
();

278 
	}
}

280 
	gImageLßd”
::
	$–em’tWlMoveToNewOwÃrDocum’t
()

282 
	`£tImage
(0);

283 
	}
}

285 
	gImageEv’tS’d”
::
	$ImageEv’tS’d”
(cÚ¡ 
AtomicSŒšg
& 
ev’tTy³
)

286 : 
	`m_ev’tTy³
(
ev’tTy³
)

287 , 
	`m_tim”
(
this
, &
ImageEv’tS’d”
::
tim”Fœed
)

289 
	}
}

291 
ImageEv’tS’d”
::
	$di¥©chEv’tSoÚ
(
ImageLßd”
* 
lßd”
)

293 
m_di¥©chSoÚLi¡
.
	`­³nd
(
lßd”
);

294 ià(!
m_tim”
.
	`isAùive
())

295 
m_tim”
.
	`¡¬tOÃShÙ
(0);

296 
	}
}

298 
	gImageEv’tS’d”
::
	$ÿnûlEv’t
(
ImageLßd”
* 
lßd”
)

302 
size_t
 
size
 = 
m_di¥©chSoÚLi¡
.
	`size
();

303 
size_t
 
i
 = 0; i < 
size
; ++i) {

304 ià(
m_di¥©chSoÚLi¡
[
i
] =ğ
lßd”
)

305 
m_di¥©chSoÚLi¡
[
i
] = 0;

307 
size
 = 
m_di¥©chšgLi¡
.
	`size
();

308 
size_t
 
i
 = 0; i < 
size
; ++i) {

309 ià(
m_di¥©chšgLi¡
[
i
] =ğ
lßd”
)

310 
m_di¥©chšgLi¡
[
i
] = 0;

312 ià(
m_di¥©chSoÚLi¡
.
	`isEm±y
())

313 
m_tim”
.
	`¡İ
();

314 
	}
}

316 
	gImageEv’tS’d”
::
	$di¥©chP’dšgEv’ts
()

321 ià(!
m_di¥©chšgLi¡
.
	`isEm±y
())

324 
m_tim”
.
	`¡İ
();

326 
m_di¥©chSoÚLi¡
.
	`checkCÚsi¡’cy
();

328 
m_di¥©chšgLi¡
.
	`sw­
(
m_di¥©chSoÚLi¡
);

329 
size_t
 
size
 = 
m_di¥©chšgLi¡
.
	`size
();

330 
size_t
 
i
 = 0; i < 
size
; ++i) {

331 ià(
ImageLßd”
* 
lßd”
 = 
m_di¥©chšgLi¡
[
i
]) {

332 ià(
m_ev’tTy³
 =ğ
	`ev’tNames
().
befÜ–ßdEv’t
)

333 
lßd”
->
	`di¥©chP’dšgBefÜeLßdEv’t
();

335 
lßd”
->
	`di¥©chP’dšgLßdEv’t
();

338 
m_di¥©chšgLi¡
.
	`ş—r
();

339 
	}
}

341 
	gImageEv’tS’d”
::
tim”Fœed
(
Tim”
<
ImageEv’tS’d”
>*)

343 
di¥©chP’dšgEv’ts
();

	@ImageLoader.h

23 #iâdeà
ImageLßd”_h


24 
	#ImageLßd”_h


	)

26 
	~"AtomicSŒšg.h
"

27 
	~"CachedResourûCl›Á.h
"

28 
	~"CachedResourûHªdË.h
"

30 
Çme¥aû
 
	gWebCÜe
 {

32 
şass
 
	gEËm’t
;

33 
şass
 
	gImageLßdEv’tS’d”
;

35 şas 
	cImageLßd”
 : 
public
 
CachedResourûCl›Á
 {

36 
public
:

37 
ImageLßd”
(
EËm’t
*);

38 
	gvœtu®
 ~
ImageLßd”
();

42 
upd©eFromEËm’t
();

46 
upd©eFromEËm’tIgnÜšgP»viousE¼Ü
();

48 
–em’tWlMoveToNewOwÃrDocum’t
();

50 
EËm’t
* 
–em’t
(ècÚ¡ {  
	gm_–em’t
; }

51 
boŞ
 
imageCom¶‘e
(ècÚ¡ {  
	gm_imageCom¶‘e
; }

53 
CachedImage
* 
image
(ècÚ¡ {  
	gm_image
.
g‘
(); }

54 
£tImage
(
CachedImage
*);

56 
£tLßdMªu®ly
(
boŞ
 
lßdMªu®ly
è{ 
	gm_lßdMªu®ly
 =†oadManually; }

58 
boŞ
 
haveFœedBefÜeLßdEv’t
(ècÚ¡ {  
	gm_fœedBefÜeLßd
; }

59 
boŞ
 
haveFœedLßdEv’t
(ècÚ¡ {  
	gm_fœedLßd
; }

61 
di¥©chP’dšgBefÜeLßdEv’ts
();

62 
di¥©chP’dšgLßdEv’ts
();

64 
	g´Ùeùed
:

65 
vœtu®
 
nÙifyFšished
(
CachedResourû
*);

67 
	g´iv©e
:

68 
vœtu®
 
di¥©chLßdEv’t
() = 0;

69 
vœtu®
 
SŒšg
 
sourûURI
(cÚ¡ 
AtomicSŒšg
&) const = 0;

71 
ä›nd
 
şass
 
	gImageEv’tS’d”
;

72 
di¥©chP’dšgBefÜeLßdEv’t
();

73 
di¥©chP’dšgLßdEv’t
();

75 
upd©eR’d””
();

77 
EËm’t
* 
	gm_–em’t
;

78 
	gCachedResourûHªdË
<
	gCachedImage
> 
	gm_image
;

79 
AtomicSŒšg
 
	gm_çedLßdURL
;

80 
boŞ
 
	gm_fœedBefÜeLßd
 : 1;

81 
boŞ
 
	gm_fœedLßd
 : 1;

82 
boŞ
 
	gm_imageCom¶‘e
 : 1;

83 
boŞ
 
	gm_lßdMªu®ly
 : 1;

	@MainResourceLoader.cpp

30 
	~"cÚfig.h
"

31 
	~"MašResourûLßd”.h
"

33 
	~"AµliÿtiÚCacheHo¡.h
"

34 
	~"Docum’tLßd”.h
"

35 
	~"FÜmS‹.h
"

36 
	~"F¿me.h
"

37 
	~"F¿meLßd”.h
"

38 
	~"F¿meLßd”Cl›Á.h
"

39 
	~"HTMLFÜmEËm’t.h
"

40 
	~"Page.h
"

41 #ià
PLATFORM
(
QT
)

42 
	~"PlugšD©aba£.h
"

44 
	~"ResourûE¼Ü.h
"

45 
	~"ResourûHªdË.h
"

46 
	~"S‘tšgs.h
"

50 
Çme¥aû
 
	gWebCÜe
 {

52 
	gMašResourûLßd”
::
MašResourûLßd”
(
F¿me
* 
äame
)

53 : 
ResourûLßd”
(
äame
, 
Œue
,rue)

54 , 
m_d©aLßdTim”
(
this
, &
MašResourûLßd”
::
hªdËD©aLßdNow
)

55 , 
m_lßdšgMuÉ¬tCÚ‹Á
(
çl£
)

56 , 
m_wa™šgFÜCÚ‹ÁPŞicy
(
çl£
)

60 
	gMašResourûLßd”
::~
MašResourûLßd”
()

64 
PassRefPŒ
<
MašResourûLßd”
> MašResourûLßd”::
ü—‹
(
F¿me
* 
äame
)

66  
adİtRef
(
Ãw
 
MašResourûLßd”
(
äame
));

69 
	gMašResourûLßd”
::
»ûivedE¼Ü
(cÚ¡ 
ResourûE¼Ü
& 
”rÜ
)

72 
RefPŒ
<
MašResourûLßd”
> 
´Ùeù
(
this
);

73 
	gRefPŒ
<
	gF¿me
> 
´ÙeùF¿me
(
m_äame
);

79 
äameLßd”
()->
»ûivedMašResourûE¼Ü
(
”rÜ
, 
Œue
);

81 ià(!
ÿnûÎed
()) {

82 
ASSERT
(!
»achedT”mš®S‹
());

83 
äameLßd”
()->
nÙif›r
()->
didFaToLßd
(
this
, 
”rÜ
);

85 
»Ëa£Resourûs
();

88 
ASSERT
(
»achedT”mš®S‹
());

91 
	gMašResourûLßd”
::
didCªûl
(cÚ¡ 
ResourûE¼Ü
& 
”rÜ
)

93 
m_d©aLßdTim”
.
¡İ
();

96 
	gRefPŒ
<
	gMašResourûLßd”
> 
´Ùeù
(
this
);

98 ià(
	gm_wa™šgFÜCÚ‹ÁPŞicy
) {

99 
äameLßd”
()->
pŞicyCheck”
()->
ÿnûlCheck
();

100 
ASSERT
(
m_wa™šgFÜCÚ‹ÁPŞicy
);

101 
	gm_wa™šgFÜCÚ‹ÁPŞicy
 = 
çl£
;

102 
d”ef
();

104 
äameLßd”
()->
»ûivedMašResourûE¼Ü
(
”rÜ
, 
Œue
);

105 
	gResourûLßd”
::
didCªûl
(
”rÜ
);

108 
ResourûE¼Ü
 
	gMašResourûLßd”
::
š‹¼u±iÚFÜPŞicyChªgeE¼Ü
() const

110  
äameLßd”
()->
š‹¼u±iÚFÜPŞicyChªgeE¼Ü
(
»que¡
());

113 
	gMašResourûLßd”
::
¡İLßdšgFÜPŞicyChªge
()

115 
ÿnûl
(
š‹¼u±iÚFÜPŞicyChªgeE¼Ü
());

118 
	gMašResourûLßd”
::
ÿÎCÚtšueAá”Navig©iÚPŞicy
(* 
¬gum’t
, cÚ¡ 
ResourûReque¡
& 
»que¡
, 
PassRefPŒ
<
FÜmS‹
>, 
boŞ
 
shouldCÚtšue
)

120 
	g¡©ic_ÿ¡
<
	gMašResourûLßd”
*>(
	g¬gum’t
)->
cÚtšueAá”Navig©iÚPŞicy
(
»que¡
, 
shouldCÚtšue
);

123 
	gMašResourûLßd”
::
cÚtšueAá”Navig©iÚPŞicy
(cÚ¡ 
ResourûReque¡
&, 
boŞ
 
shouldCÚtšue
)

125 ià(!
	gshouldCÚtšue
)

126 
¡İLßdšgFÜPŞicyChªge
();

127 
d”ef
();

130 
boŞ
 
	gMašResourûLßd”
::
isPo¡OrRedœeùAá”Po¡
(cÚ¡ 
ResourûReque¡
& 
ÃwReque¡
, cÚ¡ 
ResourûRe¥Ú£
& 
»dœeùRe¥Ú£
)

132 ià(
	gÃwReque¡
.
h‰pM‘hod
() == "POST")

133  
Œue
;

135 
	g¡©us
 = 
»dœeùRe¥Ú£
.
h‰pStusCode
();

136 ià(((
	g¡©us
 >ğ301 && 
¡©us
 <= 303) || status == 307)

137 && 
äameLßd”
()->
š™ŸlReque¡
().
h‰pM‘hod
() == "POST")

138  
Œue
;

140  
	gçl£
;

143 
	gMašResourûLßd”
::
addD©a
(cÚ¡ * 
d©a
, 
Ëngth
, 
boŞ
 
®lAtOnû
)

145 
	gResourûLßd”
::
addD©a
(
d©a
, 
Ëngth
, 
®lAtOnû
);

146 
äameLßd”
()->
»ûivedD©a
(
d©a
, 
Ëngth
);

149 
	gMašResourûLßd”
::
wlS’dReque¡
(
ResourûReque¡
& 
ÃwReque¡
, cÚ¡ 
ResourûRe¥Ú£
& 
»dœeùRe¥Ú£
)

155 
ASSERT
(!
ÃwReque¡
.
isNuÎ
());

159 
	gRefPŒ
<
	gMašResourûLßd”
> 
´Ùeù
(
this
);

163 ià(
äameLßd”
()->
isLßdšgMašF¿me
())

164 
	gÃwReque¡
.
£tFœ¡P¬tyFÜCook›s
(
ÃwReque¡
.
u¾
());

170 ià(
	gÃwReque¡
.
ÿchePŞicy
(è=ğ
U£PrÙocŞCachePŞicy
 && 
isPo¡OrRedœeùAá”Po¡
(
ÃwReque¡
, 
»dœeùRe¥Ú£
))

171 
	gÃwReque¡
.
£tCachePŞicy
(
R–ßdIgnÜšgCacheD©a
);

173 
	gResourûLßd”
::
wlS’dReque¡
(
ÃwReque¡
, 
»dœeùRe¥Ú£
);

176 
	gm_docum’tLßd”
->
£tReque¡
(
ÃwReque¡
);

178 
F¿me
* 
	gtİ
 = 
m_äame
->
Œ“
()->
tİ
();

179 ià(
	gtİ
 !ğ
m_äame
)

180 
äameLßd”
()->
checkIfDi¥ÏyIn£cu»CÚ‹Á
(
tİ
->
docum’t
()->
£cur™yOrigš
(), 
ÃwReque¡
.
u¾
());

186 ià(!
	g»dœeùRe¥Ú£
.
isNuÎ
()) {

187 
»f
();

188 
äameLßd”
()->
pŞicyCheck”
()->
checkNavig©iÚPŞicy
(
ÃwReque¡
, 
ÿÎCÚtšueAá”Navig©iÚPŞicy
, 
this
);

192 
boŞ
 
shouldLßdAsEm±yDocum’t
(cÚ¡ 
KURL
& 
u¾
)

194 #ià
PLATFORM
(
TORCHMOBILE
)

195  
	gu¾
.
isEm±y
(è|| (u¾.
´ÙocŞIs
("about"è&& 
equ®IgnÜšgRef
(
u¾
, 
bÏnkURL
()));

197  
	gu¾
.
isEm±y
(è|| u¾.
´ÙocŞIs
("about");

201 
	gMašResourûLßd”
::
cÚtšueAá”CÚ‹ÁPŞicy
(
PŞicyAùiÚ
 
cÚ‹ÁPŞicy
, cÚ¡ 
ResourûRe¥Ú£
& 
r
)

203 
KURL
 
	gu¾
 = 
»que¡
().
u¾
();

204 cÚ¡ 
	gSŒšg
& 
	gmimeTy³
 = 
r
.
mimeTy³
();

206 
	gcÚ‹ÁPŞicy
) {

207 
	gPŞicyU£
: {

209 
boŞ
 
isRemÙeWebArchive
 = 
equ®IgnÜšgCa£
("­¶iÿtiÚ/x-web¬chive", 
mimeTy³
è&& !
	gm_sub¡™u‹D©a
.
isV®id
(è&& !
	gu¾
.
isLoÿlFe
();

210 ià(!
äameLßd”
()->
ÿnShowMIMETy³
(
mimeTy³
è|| 
	gisRemÙeWebArchive
) {

211 
äameLßd”
()->
pŞicyCheck”
()->
ÿÂÙShowMIMETy³
(
r
);

213 ià(!
»achedT”mš®S‹
())

214 
¡İLßdšgFÜPŞicyChªge
();

220 
	gPŞicyDowÆßd
:

222 ià(!
m_hªdË
) {

223 
»ûivedE¼Ü
(
ÿÂÙShowURLE¼Ü
());

226 
äameLßd”
()->
ş›Á
()->
dowÆßd
(
m_hªdË
.
g‘
(), 
»que¡
(), m_hªdË.g‘()->»que¡(), 
r
);

228 ià(
äameLßd”
())

229 
»ûivedE¼Ü
(
š‹¼u±iÚFÜPŞicyChªgeE¼Ü
());

232 
	gPŞicyIgnÜe
:

233 
¡İLßdšgFÜPŞicyChªge
();

237 
ASSERT_NOT_REACHED
();

240 
	gRefPŒ
<
	gMašResourûLßd”
> 
´Ùeù
(
this
);

242 ià(
	gr
.
isHTTP
()) {

243 
	g¡©us
 = 
r
.
h‰pStusCode
();

244 ià(
	g¡©us
 < 200 || status >= 300) {

245 
boŞ
 
ho¡edByObjeù
 = 
äameLßd”
()->
isHo¡edByObjeùEËm’t
();

247 
äameLßd”
()->
hªdËF®lbackCÚ‹Á
();

251 ià(
	gho¡edByObjeù
)

252 
ÿnûl
();

257 ià(!
»achedT”mš®S‹
())

258 
	gResourûLßd”
::
didReûiveRe¥Ú£
(
r
);

260 ià(
äameLßd”
(è&& !äameLßd”()->
isStİpšg
()) {

261 ià(
	gm_sub¡™u‹D©a
.
isV®id
()) {

262 ià(
	gm_sub¡™u‹D©a
.
cÚ‹Á
()->
size
())

263 
didReûiveD©a
(
m_sub¡™u‹D©a
.
cÚ‹Á
()->
d©a
(), m_sub¡™u‹D©a.cÚ‹Á()->
size
(), m_sub¡™u‹D©a.cÚ‹Á()->size(), 
Œue
);

264 ià(
äameLßd”
(è&& !äameLßd”()->
isStİpšg
())

265 
didFšishLßdšg
();

266 } ià(
shouldLßdAsEm±yDocum’t
(
u¾
è|| 
äameLßd”
()->
»´e£Á©iÚExi¡sFÜURLScheme
(u¾.
´ÙocŞ
()))

267 
didFšishLßdšg
();

271 
	gMašResourûLßd”
::
ÿÎCÚtšueAá”CÚ‹ÁPŞicy
(* 
¬gum’t
, 
PŞicyAùiÚ
 
pŞicy
)

273 
	g¡©ic_ÿ¡
<
	gMašResourûLßd”
*>(
	g¬gum’t
)->
cÚtšueAá”CÚ‹ÁPŞicy
(
pŞicy
);

276 
	gMašResourûLßd”
::
cÚtšueAá”CÚ‹ÁPŞicy
(
PŞicyAùiÚ
 
pŞicy
)

278 
ASSERT
(
m_wa™šgFÜCÚ‹ÁPŞicy
);

279 
	gm_wa™šgFÜCÚ‹ÁPŞicy
 = 
çl£
;

280 ià(
äameLßd”
(è&& !äameLßd”()->
isStİpšg
())

281 
cÚtšueAá”CÚ‹ÁPŞicy
(
pŞicy
, 
m_»¥Ú£
);

282 
d”ef
();

285 #ià
PLATFORM
(
QT
)

286 
	gMašResourûLßd”
::
sub¡™u‹MIMETy³FromPlugšD©aba£
(cÚ¡ 
ResourûRe¥Ú£
& 
r
)

288 ià(!
m_äame
->
lßd”
()->
®lowPlugšs
(
NÙAboutToIn¡ªtŸ‹Plugš
))

291 
SŒšg
 
	gf’ame
 = 
r
.
u¾
().
Ï¡P©hCompÚ’t
();

292 ià(
	gf’ame
.
’dsW™h
("/"))

295 
	gex‹nsiÚPos
 = 
f’ame
.
»v”£Fšd
('.');

296 ià(
	gex‹nsiÚPos
 == -1)

299 
SŒšg
 
	gex‹nsiÚ
 = 
f’ame
.
sub¡ršg
(
ex‹nsiÚPos
 + 1);

300 
SŒšg
 
	gmimeTy³
 = 
PlugšD©aba£
::
š¡®ËdPlugšs
()->
MIMETy³FÜEx‹nsiÚ
(
ex‹nsiÚ
);

301 ià(!
	gmimeTy³
.
isEm±y
()) {

302 
ResourûRe¥Ú£
* 
	g»¥Ú£
 = 
cÚ¡_ÿ¡
<ResourûRe¥Ú£*>(&
r
);

303 
	g»¥Ú£
->
£tMimeTy³
(
mimeTy³
);

308 
	gMašResourûLßd”
::
didReûiveRe¥Ú£
(cÚ¡ 
ResourûRe¥Ú£
& 
r
)

310 #ià
ENABLE
(
OFFLINE_WEB_APPLICATIONS
)

311 ià(
docum’tLßd”
()->
­¶iÿtiÚCacheHo¡
()->
maybeLßdF®lbackFÜMašRe¥Ú£
(
»que¡
(), 
r
))

315 
	gHTTPH—d”M­
::
cÚ¡_™”©Ü
 
™
 = 
r
.
h‰pH—d”F›lds
().
fšd
(
AtomicSŒšg
("x-frame-options"));

316 ià(
	g™
 !ğ
r
.
h‰pH—d”F›lds
().
’d
()) {

317 
SŒšg
 
cÚ‹Á
 = 
™
->
£cÚd
;

318 ià(
	gm_äame
->
lßd”
()->
shouldIÁ”ru±LßdFÜXF¿meO±iÚs
(
cÚ‹Á
, 
r
.
u¾
())) {

319 
ÿnûl
();

326 #ià!
PLATFORM
(
CF
)

327 
ASSERT
(
shouldLßdAsEm±yDocum’t
(
r
.
u¾
()è|| !
deãrsLßdšg
());

330 #ià
PLATFORM
(
QT
)

331 ià(
	gr
.
mimeTy³
() == "application/octet-stream")

332 
sub¡™u‹MIMETy³FromPlugšD©aba£
(
r
);

335 ià(
	gm_lßdšgMuÉ¬tCÚ‹Á
) {

336 
äameLßd”
()->
£tupFÜR•ÏûByMIMETy³
(
r
.
mimeTy³
());

337 
ş—rResourûD©a
();

340 ià(
	gr
.
isMuÉ¬t
())

341 
	gm_lßdšgMuÉ¬tCÚ‹Á
 = 
Œue
;

345 
	gRefPŒ
<
	gMašResourûLßd”
> 
´Ùeù
(
this
);

347 
	gm_docum’tLßd”
->
£tRe¥Ú£
(
r
);

349 
	gm_»¥Ú£
 = 
r
;

351 
ASSERT
(!
m_wa™šgFÜCÚ‹ÁPŞicy
);

352 
	gm_wa™šgFÜCÚ‹ÁPŞicy
 = 
Œue
;

353 
»f
();

355 
ASSERT
(
äameLßd”
()->
aùiveDocum’tLßd”
());

358 ià(
äameLßd”
()->
aùiveDocum’tLßd”
()->
sub¡™u‹D©a
().
isV®id
()) {

359 
ÿÎCÚtšueAá”CÚ‹ÁPŞicy
(
this
, 
PŞicyU£
);

363 #ià
ENABLE
(
FTPDIR
)

365 
S‘tšgs
* 
	g£‰šgs
 = 
m_äame
->
£‰šgs
();

366 ià(
	g£‰šgs
 && s‘tšgs->
fÜûFTPDœeùÜyLi¡šgs
(è&& 
	gm_»¥Ú£
.
mimeTy³
() == "application/x-ftp-directory") {

367 
ÿÎCÚtšueAá”CÚ‹ÁPŞicy
(
this
, 
PŞicyU£
);

372 
äameLßd”
()->
pŞicyCheck”
()->
checkCÚ‹ÁPŞicy
(
m_»¥Ú£
.
mimeTy³
(), 
ÿÎCÚtšueAá”CÚ‹ÁPŞicy
, 
this
);

375 
	gMašResourûLßd”
::
didReûiveD©a
(cÚ¡ * 
d©a
, 
Ëngth
, 
ËngthReûived
, 
boŞ
 
®lAtOnû
)

377 
ASSERT
(
d©a
);

378 
ASSERT
(
Ëngth
 != 0);

380 
ASSERT
(!
m_»¥Ú£
.
isNuÎ
());

382 #ià
USE
(
CFNETWORK
è|| (
PLATFORM
(
MAC
è&& !
defšed
(
BUILDING_ON_TIGER
))

384 ià(
	gm_»¥Ú£
.
isNuÎ
()) {

385 
	gm_»¥Ú£
 = 
ResourûRe¥Ú£
(
KURL
(), "‹xt/html", 0, 
SŒšg
(), String());

386 ià(
Docum’tLßd”
* 
	gdocum’tLßd”
 = 
äameLßd”
()->
aùiveDocum’tLßd”
())

387 
docum’tLßd”
->
£tRe¥Ú£
(
m_»¥Ú£
);

393 #ià!
PLATFORM
(
CF
)

394 
ASSERT
(!
deãrsLßdšg
());

397 #ià
ENABLE
(
OFFLINE_WEB_APPLICATIONS
)

398 
docum’tLßd”
()->
­¶iÿtiÚCacheHo¡
()->
mašResourûD©aReûived
(
d©a
, 
Ëngth
, 
ËngthReûived
, 
®lAtOnû
);

403 
	gRefPŒ
<
	gMašResourûLßd”
> 
´Ùeù
(
this
);

405 
	gResourûLßd”
::
didReûiveD©a
(
d©a
, 
Ëngth
, 
ËngthReûived
, 
®lAtOnû
);

408 
	gMašResourûLßd”
::
didFšishLßdšg
()

412 #ià!
PLATFORM
(
CF
)

413 
ASSERT
(
shouldLßdAsEm±yDocum’t
(
äameLßd”
()->
aùiveDocum’tLßd”
()->
u¾
()è|| !
deãrsLßdšg
());

418 
	gRefPŒ
<
	gMašResourûLßd”
> 
´Ùeù
(
this
);

420 #ià
ENABLE
(
OFFLINE_WEB_APPLICATIONS
)

421 
	gRefPŒ
<
	gDocum’tLßd”
> 
	gdl
 = 
docum’tLßd”
();

424 
äameLßd”
()->
fšishedLßdšg
();

425 
	gResourûLßd”
::
didFšishLßdšg
();

427 #ià
ENABLE
(
OFFLINE_WEB_APPLICATIONS
)

428 
	gdl
->
­¶iÿtiÚCacheHo¡
()->
fšishedLßdšgMašResourû
();

432 
	gMašResourûLßd”
::
didFa
(cÚ¡ 
ResourûE¼Ü
& 
”rÜ
)

434 #ià
ENABLE
(
OFFLINE_WEB_APPLICATIONS
)

435 ià(
docum’tLßd”
()->
­¶iÿtiÚCacheHo¡
()->
maybeLßdF®lbackFÜMašE¼Ü
(
»que¡
(), 
”rÜ
))

441 #ià!
PLATFORM
(
CF
)

442 
ASSERT
(!
deãrsLßdšg
());

445 
»ûivedE¼Ü
(
”rÜ
);

448 
	gMašResourûLßd”
::
hªdËEm±yLßd
(cÚ¡ 
KURL
& 
u¾
, 
boŞ
 
fÜURLScheme
)

450 
SŒšg
 
	gmimeTy³
;

451 ià(
	gfÜURLScheme
)

452 
	gmimeTy³
 = 
äameLßd”
()->
g’”©edMIMETy³FÜURLScheme
(
u¾
.
´ÙocŞ
());

454 
	gmimeTy³
 = "text/html";

456 
ResourûRe¥Ú£
 
»¥Ú£
(
u¾
, 
mimeTy³
, 0, 
SŒšg
(), String());

457 
didReûiveRe¥Ú£
(
»¥Ú£
);

460 
	gMašResourûLßd”
::
hªdËD©aLßdNow
(
MašResourûLßd”Tim”
*)

462 
RefPŒ
<
MašResourûLßd”
> 
´Ùeù
(
this
);

464 
KURL
 
	gu¾
 = 
m_sub¡™u‹D©a
.
»¥Ú£URL
();

465 ià(
	gu¾
.
isEm±y
())

466 
	gu¾
 = 
m_š™ŸlReque¡
.
u¾
();

468 
ResourûRe¥Ú£
 
»¥Ú£
(
u¾
, 
m_sub¡™u‹D©a
.
mimeTy³
(), m_sub¡™u‹D©a.
cÚ‹Á
()->
size
(), m_sub¡™u‹D©a.
‹xtEncodšg
(), "");

469 
didReûiveRe¥Ú£
(
»¥Ú£
);

472 
	gMašResourûLßd”
::
¡¬tD©aLßdTim”
()

474 
m_d©aLßdTim”
.
¡¬tOÃShÙ
(0);

476 #ià
HAVE
(
RUNLOOP_TIMER
)

477 ià(
ScheduËPaœHashS‘
* 
	gscheduËdPaœs
 = 
m_äame
->
·ge
()->
scheduËdRunLoİPaœs
())

478 
m_d©aLßdTim”
.
scheduË
(*
scheduËdPaœs
);

482 
	gMašResourûLßd”
::
hªdËD©aLßdSoÚ
(
ResourûReque¡
& 
r
)

484 
m_š™ŸlReque¡
 = 
r
;

486 ià(
	gm_docum’tLßd”
->
deãrMašResourûD©aLßd
())

487 
¡¬tD©aLßdTim”
();

489 
hªdËD©aLßdNow
(0);

492 
boŞ
 
	gMašResourûLßd”
::
lßdNow
(
ResourûReque¡
& 
r
)

494 
boŞ
 
shouldLßdEm±yBefÜeRedœeù
 = 
shouldLßdAsEm±yDocum’t
(
r
.
u¾
());

496 
ASSERT
(!
m_hªdË
);

497 
ASSERT
(
shouldLßdEm±yBefÜeRedœeù
 || !
deãrsLßdšg
());

502 
wlS’dReque¡
(
r
, 
ResourûRe¥Ú£
());

506 ià(!
äameLßd”
())

507  
	gçl£
;

509 cÚ¡ 
	gKURL
& 
	gu¾
 = 
r
.
u¾
();

510 
boŞ
 
	gshouldLßdEm±y
 = 
shouldLßdAsEm±yDocum’t
(
u¾
è&& !
m_sub¡™u‹D©a
.
isV®id
();

512 ià(
	gshouldLßdEm±yBefÜeRedœeù
 && !
	gshouldLßdEm±y
 && 
deãrsLßdšg
())

513  
	gŒue
;

515 ià(
	gm_sub¡™u‹D©a
.
isV®id
())

516 
hªdËD©aLßdSoÚ
(
r
);

517 ià(
	gshouldLßdEm±y
 || 
äameLßd”
()->
»´e£Á©iÚExi¡sFÜURLScheme
(
u¾
.
´ÙocŞ
()))

518 
hªdËEm±yLßd
(
u¾
, !
shouldLßdEm±y
);

520 
	gm_hªdË
 = 
ResourûHªdË
::
ü—‹
(
r
, 
this
, 
m_äame
.
g‘
(), 
çl£
, 
Œue
);

522  
	gçl£
;

525 
boŞ
 
	gMašResourûLßd”
::
lßd
(cÚ¡ 
ResourûReque¡
& 
r
, cÚ¡ 
Sub¡™u‹D©a
& 
sub¡™u‹D©a
)

527 
ASSERT
(!
m_hªdË
);

529 
	gm_sub¡™u‹D©a
 = 
sub¡™u‹D©a
;

531 
ResourûReque¡
 
»que¡
(
r
);

533 #ià
ENABLE
(
OFFLINE_WEB_APPLICATIONS
)

534 
docum’tLßd”
()->
­¶iÿtiÚCacheHo¡
()->
maybeLßdMašResourû
(
»que¡
, 
m_sub¡™u‹D©a
);

537 
boŞ
 
	gdeãr
 = 
deãrsLßdšg
();

538 ià(
	gdeãr
) {

539 
boŞ
 
	gshouldLßdEm±y
 = 
shouldLßdAsEm±yDocum’t
(
»que¡
.
u¾
());

540 ià(
	gshouldLßdEm±y
)

541 
	gdeãr
 = 
çl£
;

543 ià(!
	gdeãr
) {

544 ià(
lßdNow
(
»que¡
)) {

546 
ASSERT
(
deãrsLßdšg
());

547 
	gdeãr
 = 
Œue
;

550 ià(
	gdeãr
)

551 
	gm_š™ŸlReque¡
 = 
»que¡
;

553  
	gŒue
;

556 
	gMašResourûLßd”
::
£tDeãrsLßdšg
(
boŞ
 
deãrs
)

558 
ResourûLßd”
::
£tDeãrsLßdšg
(
deãrs
);

560 ià(
	gdeãrs
) {

561 ià(
	gm_d©aLßdTim”
.
isAùive
())

562 
	gm_d©aLßdTim”
.
¡İ
();

564 ià(
	gm_š™ŸlReque¡
.
isNuÎ
())

567 ià(
	gm_sub¡™u‹D©a
.
isV®id
(è&& 
	gm_docum’tLßd”
->
deãrMašResourûD©aLßd
())

568 
¡¬tD©aLßdTim”
();

570 
ResourûReque¡
 
r
(
m_š™ŸlReque¡
);

571 
	gm_š™ŸlReque¡
 = 
ResourûReque¡
();

572 
lßdNow
(
r
);

	@MainResourceLoader.h

29 #iâdeà
MašResourûLßd”_h


30 
	#MašResourûLßd”_h


	)

32 
	~"F¿meLßd”Ty³s.h
"

33 
	~"ResourûLßd”.h
"

34 
	~"Sub¡™u‹D©a.h
"

35 
	~<wtf/FÜw¬d.h
>

37 #ià
HAVE
(
RUNLOOP_TIMER
)

38 
	~"RunLoİTim”.h
"

40 
	~"Tim”.h
"

43 
Çme¥aû
 
	gWebCÜe
 {

45 
şass
 
	gFÜmS‹
;

46 
şass
 
	gResourûReque¡
;

48 şas 
	cMašResourûLßd”
 : 
public
 
ResourûLßd”
 {

49 
public
:

50 
PassRefPŒ
<
MašResourûLßd”
> 
ü—‹
(
F¿me
*);

51 
	gvœtu®
 ~
MašResourûLßd”
();

53 
vœtu®
 
boŞ
 
lßd
(cÚ¡ 
ResourûReque¡
&, cÚ¡ 
Sub¡™u‹D©a
&);

54 
vœtu®
 
addD©a
(cÚ¡ *, , 
boŞ
 
®lAtOnû
);

56 
vœtu®
 
£tDeãrsLßdšg
(
boŞ
);

58 
vœtu®
 
wlS’dReque¡
(
ResourûReque¡
&, cÚ¡ 
ResourûRe¥Ú£
& 
»dœeùRe¥Ú£
);

59 
vœtu®
 
didReûiveRe¥Ú£
(cÚ¡ 
ResourûRe¥Ú£
&);

60 
vœtu®
 
didReûiveD©a
(cÚ¡ *, , 
ËngthReûived
, 
boŞ
 
®lAtOnû
);

61 
vœtu®
 
didFšishLßdšg
();

62 
vœtu®
 
didFa
(cÚ¡ 
ResourûE¼Ü
&);

64 #ià
HAVE
(
RUNLOOP_TIMER
)

65 
	gRunLoİTim”
<
	tMašResourûLßd”
> 
	tMašResourûLßd”Tim”
;

67 
	gTim”
<
	tMašResourûLßd”
> 
	tMašResourûLßd”Tim”
;

70 
hªdËD©aLßdNow
(
MašResourûLßd”Tim”
*);

72 
boŞ
 
isLßdšgMuÉ¬tCÚ‹Á
(ècÚ¡ {  
	gm_lßdšgMuÉ¬tCÚ‹Á
; }

74 
	g´iv©e
:

75 
MašResourûLßd”
(
F¿me
*);

77 
vœtu®
 
didCªûl
(cÚ¡ 
ResourûE¼Ü
&);

79 
boŞ
 
lßdNow
(
ResourûReque¡
&);

81 
hªdËEm±yLßd
(cÚ¡ 
KURL
&, 
boŞ
 
fÜURLScheme
);

82 
hªdËD©aLßdSoÚ
(
ResourûReque¡
& 
r
);

84 
¡¬tD©aLßdTim”
();

85 
hªdËD©aLßd
(
ResourûReque¡
&);

87 
»ûivedE¼Ü
(cÚ¡ 
ResourûE¼Ü
&);

88 
ResourûE¼Ü
 
š‹¼u±iÚFÜPŞicyChªgeE¼Ü
() const;

89 
¡İLßdšgFÜPŞicyChªge
();

90 
boŞ
 
isPo¡OrRedœeùAá”Po¡
(cÚ¡ 
ResourûReque¡
& 
ÃwReque¡
, cÚ¡ 
ResourûRe¥Ú£
& 
»dœeùRe¥Ú£
);

92 
ÿÎCÚtšueAá”Navig©iÚPŞicy
(*, cÚ¡ 
ResourûReque¡
&, 
PassRefPŒ
<
FÜmS‹
>, 
boŞ
 
shouldCÚtšue
);

93 
cÚtšueAá”Navig©iÚPŞicy
(cÚ¡ 
ResourûReque¡
&, 
boŞ
 
shouldCÚtšue
);

95 
ÿÎCÚtšueAá”CÚ‹ÁPŞicy
(*, 
PŞicyAùiÚ
);

96 
cÚtšueAá”CÚ‹ÁPŞicy
(
PŞicyAùiÚ
);

97 
cÚtšueAá”CÚ‹ÁPŞicy
(
PŞicyAùiÚ
, cÚ¡ 
ResourûRe¥Ú£
&);

99 #ià
PLATFORM
(
QT
)

100 
sub¡™u‹MIMETy³FromPlugšD©aba£
(cÚ¡ 
ResourûRe¥Ú£
&);

103 
ResourûReque¡
 
	gm_š™ŸlReque¡
;

104 
Sub¡™u‹D©a
 
	gm_sub¡™u‹D©a
;

106 
MašResourûLßd”Tim”
 
	gm_d©aLßdTim”
;

108 
boŞ
 
	gm_lßdšgMuÉ¬tCÚ‹Á
;

109 
boŞ
 
	gm_wa™šgFÜCÚ‹ÁPŞicy
;

	@MediaDocument.cpp

26 
	~"cÚfig.h
"

28 #ià
ENABLE
(
VIDEO
)

29 
	~"MedŸDocum’t.h
"

31 
	~"Docum’tLßd”.h
"

32 
	~"EËm’t.h
"

33 
	~"Ev’t.h
"

34 
	~"Ev’tNames.h
"

35 
	~"F¿me.h
"

36 
	~"F¿meLßd”.h
"

37 
	~"F¿meLßd”Cl›Á.h
"

38 
	~"HTMLEmbedEËm’t.h
"

39 
	~"HTMLNames.h
"

40 
	~"HTMLVideoEËm’t.h
"

41 
	~"KeybßrdEv’t.h
"

42 
	~"MašResourûLßd”.h
"

43 
	~"NodeLi¡.h
"

44 
	~"Page.h
"

45 
	~"Segm’‹dSŒšg.h
"

46 
	~"S‘tšgs.h
"

47 
	~"Text.h
"

48 
	~"XMLTok’iz”.h
"

50 
Çme¥aû
 
	gWebCÜe
 {

52 
usšg
 
Çme¥aû
 
	gHTMLNames
;

54 şas 
	cMedŸTok’iz”
 : 
public
 
Tok’iz”
 {

55 
public
:

56 
MedŸTok’iz”
(
Docum’t
* 
doc
è: 
m_doc
(doc), 
m_medŸEËm’t
(0) {}

58 
	g´iv©e
:

59 
vœtu®
 
wr™e
(cÚ¡ 
Segm’‹dSŒšg
&, 
boŞ
 
­³ndD©a
);

60 
vœtu®
 
¡İP¬sšg
();

61 
vœtu®
 
fšish
();

62 
vœtu®
 
boŞ
 
isWa™šgFÜSüts
() const;

64 
vœtu®
 
boŞ
 
wªtsRawD©a
(ècÚ¡ {  
	gŒue
; }

65 
vœtu®
 
boŞ
 
wr™eRawD©a
(cÚ¡ * 
d©a
, 
Ën
);

67 
ü—‹Docum’tSŒuùu»
();

69 
Docum’t
* 
	gm_doc
;

70 
HTMLMedŸEËm’t
* 
	gm_medŸEËm’t
;

73 
	gMedŸTok’iz”
::
	$wr™e
(cÚ¡ 
Segm’‹dSŒšg
&, 
boŞ
)

75 
	`ASSERT_NOT_REACHED
();

76 
	}
}

78 
	gMedŸTok’iz”
::
	$ü—‹Docum’tSŒuùu»
()

80 
Exû±iÚCode
 
ec
;

81 
RefPŒ
<
EËm’t
> 
roÙEËm’t
 = 
m_doc
->
	`ü—‹EËm’t
(
htmlTag
, 
çl£
);

82 
m_doc
->
	`­³ndChd
(
roÙEËm’t
, 
ec
);

84 
RefPŒ
<
EËm’t
> 
body
 = 
m_doc
->
	`ü—‹EËm’t
(
bodyTag
, 
çl£
);

85 
body
->
	`£tA‰ribu‹
(
¡yËA‰r
, "background-color:„gb(38,38,38);");

87 
roÙEËm’t
->
	`­³ndChd
(
body
, 
ec
);

89 
RefPŒ
<
EËm’t
> 
medŸEËm’t
 = 
m_doc
->
	`ü—‹EËm’t
(
videoTag
, 
çl£
);

91 
m_medŸEËm’t
 = 
¡©ic_ÿ¡
<
HTMLVideoEËm’t
*>(
medŸEËm’t
.
	`g‘
());

92 
m_medŸEËm’t
->
	`£tA‰ribu‹
(
cÚŒŞsA‰r
, "");

93 
m_medŸEËm’t
->
	`£tA‰ribu‹
(
autİÏyA‰r
, "");

94 
m_medŸEËm’t
->
	`£tA‰ribu‹
(
¡yËA‰r
, "margin:‡uto;…osition:‡bsolute;op: 0;„ight: 0; bottom: 0;†eft: 0;");

96 
m_medŸEËm’t
->
	`£tA‰ribu‹
(
ÇmeA‰r
, "media");

97 
m_medŸEËm’t
->
	`£tSrc
(
m_doc
->
	`u¾
());

99 
body
->
	`­³ndChd
(
medŸEËm’t
, 
ec
);

101 
F¿me
* 
äame
 = 
m_doc
->
	`äame
();

102 ià(!
äame
)

105 
äame
->
	`lßd”
()->
	`aùiveDocum’tLßd”
()->
	`mašResourûLßd”
()->
	`£tShouldBufãrD©a
(
çl£
);

106 
	}
}

108 
boŞ
 
	gMedŸTok’iz”
::
	$wr™eRawD©a
(const *, )

110 
	`ASSERT
(!
m_medŸEËm’t
);

111 ià(
m_medŸEËm’t
)

112  
çl£
;

114 
	`ü—‹Docum’tSŒuùu»
();

115 
	`fšish
();

116  
çl£
;

117 
	}
}

119 
	gMedŸTok’iz”
::
	$¡İP¬sšg
()

121 
Tok’iz”
::
	`¡İP¬sšg
();

122 
	}
}

124 
	gMedŸTok’iz”
::
	$fšish
()

126 ià(!
m_·r£rStİ³d
)

127 
m_doc
->
	`fšishedP¬sšg
();

128 
	}
}

130 
boŞ
 
	gMedŸTok’iz”
::
	$isWa™šgFÜSüts
() const

133  
çl£
;

134 
	}
}

136 
	gMedŸDocum’t
::
	$MedŸDocum’t
(
F¿me
* 
äame
)

137 : 
	`HTMLDocum’t
(
äame
)

138 , 
	`m_»¶aûMedŸEËm’tTim”
(
this
, &
MedŸDocum’t
::
»¶aûMedŸEËm’tTim”Fœed
)

140 
	`£tP¬£Mode
(
Com·t
);

141 
	}
}

143 
	gMedŸDocum’t
::~
	$MedŸDocum’t
()

145 
	`ASSERT
(!
m_»¶aûMedŸEËm’tTim”
.
	`isAùive
());

146 
	}
}

148 
Tok’iz”
* 
	gMedŸDocum’t
::
	$ü—‹Tok’iz”
()

150  
Ãw
 
	`MedŸTok’iz”
(
this
);

151 
	}
}

153 
	gMedŸDocum’t
::
	$deçuÉEv’tHªdËr
(
Ev’t
* 
ev’t
)

157 
Node
* 
rg‘Node
 = 
ev’t
->
	`rg‘
()->
	`toNode
();

158 ià(
rg‘Node
 &&¬g‘Node->
	`hasTagName
(
videoTag
)) {

159 
HTMLVideoEËm’t
* 
video
 = 
¡©ic_ÿ¡
<HTMLVideoEËm’t*>(
rg‘Node
);

160 ià(
ev’t
->
	`ty³
(è=ğ
	`ev’tNames
().
şickEv’t
) {

161 ià(!
video
->
	`ÿnPÏy
()) {

162 
video
->
	`·u£
(
ev’t
->
	`äomU£rGe¡u»
());

163 
ev’t
->
	`£tDeçuÉHªdËd
();

165 } ià(
ev’t
->
	`ty³
(è=ğ
	`ev’tNames
().
dblşickEv’t
) {

166 ià(
video
->
	`ÿnPÏy
()) {

167 
video
->
	`¶ay
(
ev’t
->
	`äomU£rGe¡u»
());

168 
ev’t
->
	`£tDeçuÉHªdËd
();

173 ià(
ev’t
->
	`ty³
(è=ğ
	`ev’tNames
().
keydownEv’t
 &&ƒv’t->
	`isKeybßrdEv’t
()) {

174 
HTMLVideoEËm’t
* 
video
 = 0;

175 ià(
rg‘Node
) {

176 ià(
rg‘Node
->
	`hasTagName
(
videoTag
))

177 
video
 = 
¡©ic_ÿ¡
<
HTMLVideoEËm’t
*>(
rg‘Node
);

179 
RefPŒ
<
NodeLi¡
> 
nodeLi¡
 = 
rg‘Node
->
	`g‘EËm’tsByTagName
("video");

180 ià(
nodeLi¡
.
	`g‘
()->
	`Ëngth
() > 0)

181 
video
 = 
¡©ic_ÿ¡
<
HTMLVideoEËm’t
*>(
nodeLi¡
.
	`g‘
()->
	`™em
(0));

184 ià(
video
) {

185 
KeybßrdEv’t
* 
keybßrdEv’t
 = 
¡©ic_ÿ¡
<KeybßrdEv’t*>(
ev’t
);

186 ià(
keybßrdEv’t
->
	`keyId’tif›r
() == "U+0020") {

187 ià(
video
->
	`·u£d
()) {

188 ià(
video
->
	`ÿnPÏy
())

189 
video
->
	`¶ay
(
ev’t
->
	`äomU£rGe¡u»
());

191 
video
->
	`·u£
(
ev’t
->
	`äomU£rGe¡u»
());

192 
ev’t
->
	`£tDeçuÉHªdËd
();

196 
	}
}

198 
	gMedŸDocum’t
::
	$medŸEËm’tSawUnsuµÜ‹dT¿cks
()

205 
m_»¶aûMedŸEËm’tTim”
.
	`¡¬tOÃShÙ
(0);

206 
	}
}

208 
	gMedŸDocum’t
::
»¶aûMedŸEËm’tTim”Fœed
(
Tim”
<
MedŸDocum’t
>*)

210 
HTMLEËm’t
* 
htmlBody
 = 
body
();

211 ià(!
	ghtmlBody
)

215 
	ghtmlBody
->
£tA‰ribu‹
(
m¬gšwidthA‰r
, "0");

216 
	ghtmlBody
->
£tA‰ribu‹
(
m¬gšheightA‰r
, "0");

218 
	gRefPŒ
<
	gNodeLi¡
> 
	gnodeLi¡
 = 
htmlBody
->
g‘EËm’tsByTagName
("video");

220 ià(
	gnodeLi¡
.
g‘
()->
Ëngth
() > 0) {

221 
HTMLVideoEËm’t
* 
	gvideoEËm’t
 = 
¡©ic_ÿ¡
<HTMLVideoEËm’t*>(
nodeLi¡
.
g‘
()->
™em
(0));

223 
	gRefPŒ
<
	gEËm’t
> 
	g–em’t
 = 
Docum’t
::
ü—‹EËm’t
(
embedTag
, 
çl£
);

224 
HTMLEmbedEËm’t
* 
	gembedEËm’t
 = 
¡©ic_ÿ¡
<HTMLEmbedEËm’t*>(
–em’t
.
g‘
());

226 
	gembedEËm’t
->
£tA‰ribu‹
(
widthA‰r
, "100%");

227 
	gembedEËm’t
->
£tA‰ribu‹
(
heightA‰r
, "100%");

228 
	gembedEËm’t
->
£tA‰ribu‹
(
ÇmeA‰r
, "plugin");

229 
	gembedEËm’t
->
£tA‰ribu‹
(
¤cA‰r
, 
u¾
().
¡ršg
());

230 
	gembedEËm’t
->
£tA‰ribu‹
(
ty³A‰r
, 
äame
()->
lßd”
()->
»¥Ú£MIMETy³
());

232 
Exû±iÚCode
 
	gec
;

233 
	gvideoEËm’t
->
·»Á
()->
»¶aûChd
(
embedEËm’t
, 
videoEËm’t
, 
ec
);

	@MediaDocument.h

26 #iâdeà
MedŸDocum’t_h


27 
	#MedŸDocum’t_h


	)

29 #ià
ENABLE
(
VIDEO
)

31 
	~"HTMLDocum’t.h
"

33 
Çme¥aû
 
	gWebCÜe
 {

35 şas 
	cMedŸDocum’t
 : 
public
 
HTMLDocum’t
 {

36 
public
:

37 
PassRefPŒ
<
MedŸDocum’t
> 
ü—‹
(
F¿me
* 
äame
)

39  
adİtRef
(
Ãw
 
MedŸDocum’t
(
äame
));

41 
	gvœtu®
 ~
MedŸDocum’t
();

43 
medŸEËm’tSawUnsuµÜ‹dT¿cks
();

45 
	g´iv©e
:

46 
MedŸDocum’t
(
F¿me
*);

48 
vœtu®
 
boŞ
 
isMedŸDocum’t
(ècÚ¡ {  
	gŒue
; }

49 
vœtu®
 
Tok’iz”
* 
ü—‹Tok’iz”
();

51 
vœtu®
 
deçuÉEv’tHªdËr
(
Ev’t
*);

53 
»¶aûMedŸEËm’tTim”Fœed
(
Tim”
<
MedŸDocum’t
>*);

55 
	gTim”
<
	gMedŸDocum’t
> 
	gm_»¶aûMedŸEËm’tTim”
;

	@NavigationAction.cpp

29 
	~"cÚfig.h
"

30 
	~"Navig©iÚAùiÚ.h
"

32 
	~"Ev’t.h
"

33 
	~"F¿meLßd”.h
"

35 
Çme¥aû
 
	gWebCÜe
 {

37 
Navig©iÚTy³
 
Çvig©iÚTy³
(
F¿meLßdTy³
 
äameLßdTy³
, 
boŞ
 
isFÜmSubmissiÚ
, boŞ 
haveEv’t
)

39 ià(
	gisFÜmSubmissiÚ
)

40  
	gNavig©iÚTy³FÜmSubm™‹d
;

41 ià(
	ghaveEv’t
)

42  
	gNavig©iÚTy³LškClicked
;

43 ià(
	gäameLßdTy³
 =ğ
F¿meLßdTy³R–ßd
 || 
äameLßdTy³
 =ğ
F¿meLßdTy³R–ßdFromOrigš
)

44  
Navig©iÚTy³R–ßd
;

45 ià(
isBackFÜw¬dLßdTy³
(
äameLßdTy³
))

46  
	gNavig©iÚTy³BackFÜw¬d
;

47  
	gNavig©iÚTy³Oth”
;

50 
	gNavig©iÚAùiÚ
::
Navig©iÚAùiÚ
()

51 : 
m_ty³
(
Navig©iÚTy³Oth”
)

55 
Navig©iÚAùiÚ
::Navig©iÚAùiÚ(cÚ¡ 
KURL
& 
u¾
, 
Navig©iÚTy³
 
ty³
)

56 : 
m_URL
(
u¾
)

57 , 
m_ty³
(
ty³
)

61 
	gNavig©iÚAùiÚ
::
Navig©iÚAùiÚ
(cÚ¡ 
KURL
& 
u¾
, 
F¿meLßdTy³
 
äameLßdTy³
,

62 
boŞ
 
isFÜmSubmissiÚ
)

63 : 
m_URL
(
u¾
)

64 , 
m_ty³
(
Çvig©iÚTy³
(
äameLßdTy³
, 
isFÜmSubmissiÚ
, 0))

68 
	gNavig©iÚAùiÚ
::
Navig©iÚAùiÚ
(cÚ¡ 
KURL
& 
u¾
, 
Navig©iÚTy³
 
ty³
, 
PassRefPŒ
<
Ev’t
> 
ev’t
)

69 : 
m_URL
(
u¾
)

70 , 
m_ty³
(
ty³
)

71 , 
m_ev’t
(
ev’t
)

75 
	gNavig©iÚAùiÚ
::
Navig©iÚAùiÚ
(cÚ¡ 
KURL
& 
u¾
, 
F¿meLßdTy³
 
äameLßdTy³
,

76 
boŞ
 
isFÜmSubmissiÚ
, 
PassRefPŒ
<
Ev’t
> 
ev’t
)

77 : 
m_URL
(
u¾
)

78 , 
m_ty³
(
Çvig©iÚTy³
(
äameLßdTy³
, 
isFÜmSubmissiÚ
, 
ev’t
))

79 , 
m_ev’t
(
ev’t
)

	@NavigationAction.h

29 #iâdeà
Navig©iÚAùiÚ_h


30 
	#Navig©iÚAùiÚ_h


	)

32 
	~"Ev’t.h
"

33 
	~"F¿meLßd”Ty³s.h
"

34 
	~"KURL.h
"

35 
	~<wtf/FÜw¬d.h
>

37 
Çme¥aû
 
	gWebCÜe
 {

39 şas 
	cNavig©iÚAùiÚ
 {

40 
	gpublic
:

41 
Navig©iÚAùiÚ
();

42 
Navig©iÚAùiÚ
(cÚ¡ 
KURL
&, 
Navig©iÚTy³
);

43 
Navig©iÚAùiÚ
(cÚ¡ 
KURL
&, 
F¿meLßdTy³
, 
boŞ
 
isFÜmSubmissiÚ
);

44 
Navig©iÚAùiÚ
(cÚ¡ 
KURL
&, 
Navig©iÚTy³
, 
PassRefPŒ
<
Ev’t
>);

45 
Navig©iÚAùiÚ
(cÚ¡ 
KURL
&, 
F¿meLßdTy³
, 
boŞ
 
isFÜmSubmissiÚ
, 
PassRefPŒ
<
Ev’t
>);

47 
boŞ
 
isEm±y
(ècÚ¡ {  
	gm_URL
.isEmpty(); }

49 
KURL
 
u¾
(ècÚ¡ {  
	gm_URL
; }

50 
Navig©iÚTy³
 
ty³
(ècÚ¡ {  
	gm_ty³
; }

51 cÚ¡ 
Ev’t
* 
ev’t
(ècÚ¡ {  
	gm_ev’t
.
g‘
(); }

53 
	g´iv©e
:

54 
KURL
 
m_URL
;

55 
Navig©iÚTy³
 
	gm_ty³
;

56 
	gRefPŒ
<
	gEv’t
> 
	gm_ev’t
;

	@NetscapePlugInStreamLoader.cpp

29 
	~"cÚfig.h
"

30 
	~"N‘sÿ³PlugInSŒ—mLßd”.h
"

32 
	~"F¿meLßd”.h
"

33 
	~"Docum’tLßd”.h
"

35 
Çme¥aû
 
	gWebCÜe
 {

37 
	gN‘sÿ³PlugInSŒ—mLßd”
::
N‘sÿ³PlugInSŒ—mLßd”
(
F¿me
* 
äame
, 
N‘sÿ³PlugInSŒ—mLßd”Cl›Á
* 
ş›Á
)

38 : 
ResourûLßd”
(
äame
, 
Œue
,rue)

39 , 
m_ş›Á
(
ş›Á
)

43 
	gN‘sÿ³PlugInSŒ—mLßd”
::~
N‘sÿ³PlugInSŒ—mLßd”
()

47 
PassRefPŒ
<
N‘sÿ³PlugInSŒ—mLßd”
> N‘sÿ³PlugInSŒ—mLßd”::
ü—‹
(
F¿me
* 
äame
, 
N‘sÿ³PlugInSŒ—mLßd”Cl›Á
* 
ş›Á
)

49  
adİtRef
(
Ãw
 
N‘sÿ³PlugInSŒ—mLßd”
(
äame
, 
ş›Á
));

52 
boŞ
 
	gN‘sÿ³PlugInSŒ—mLßd”
::
isDÚe
() const

54  !
m_ş›Á
;

57 
	gN‘sÿ³PlugInSŒ—mLßd”
::
»Ëa£Resourûs
()

59 
m_ş›Á
 = 0;

60 
	gResourûLßd”
::
»Ëa£Resourûs
();

63 
	gN‘sÿ³PlugInSŒ—mLßd”
::
didReûiveRe¥Ú£
(cÚ¡ 
ResourûRe¥Ú£
& 
»¥Ú£
)

65 
RefPŒ
<
N‘sÿ³PlugInSŒ—mLßd”
> 
´Ùeù
(
this
);

67 
	gm_ş›Á
->
didReûiveRe¥Ú£
(
this
, 
»¥Ú£
);

70 ià(!
	gm_ş›Á
)

73 
	gResourûLßd”
::
didReûiveRe¥Ú£
(
»¥Ú£
);

76 ià(!
	gm_ş›Á
)

79 ià(!
	g»¥Ú£
.
isHTTP
())

82 ià(
	gm_ş›Á
->
wªtsAÎSŒ—ms
())

85 ià(
	g»¥Ú£
.
h‰pStusCode
() < 100 ||„esponse.httpStatusCode() >= 400)

86 
didCªûl
(
äameLßd”
()->
feDÛsNÙExi¡E¼Ü
(
»¥Ú£
));

89 
	gN‘sÿ³PlugInSŒ—mLßd”
::
didReûiveD©a
(cÚ¡ * 
d©a
, 
Ëngth
, 
ËngthReûived
, 
boŞ
 
®lAtOnû
)

91 
	gRefPŒ
<
	gN‘sÿ³PlugInSŒ—mLßd”
> 
´Ùeù
(
this
);

93 
	gm_ş›Á
->
didReûiveD©a
(
this
, 
d©a
, 
Ëngth
);

95 
	gResourûLßd”
::
didReûiveD©a
(
d©a
, 
Ëngth
, 
ËngthReûived
, 
®lAtOnû
);

98 
	gN‘sÿ³PlugInSŒ—mLßd”
::
didFšishLßdšg
()

100 
RefPŒ
<
N‘sÿ³PlugInSŒ—mLßd”
> 
´Ùeù
(
this
);

102 
	gm_docum’tLßd”
->
»movePlugInSŒ—mLßd”
(
this
);

103 
	gm_ş›Á
->
didFšishLßdšg
(
this
);

104 
	gResourûLßd”
::
didFšishLßdšg
();

107 
	gN‘sÿ³PlugInSŒ—mLßd”
::
didFa
(cÚ¡ 
ResourûE¼Ü
& 
”rÜ
)

109 
RefPŒ
<
N‘sÿ³PlugInSŒ—mLßd”
> 
´Ùeù
(
this
);

111 
	gm_docum’tLßd”
->
»movePlugInSŒ—mLßd”
(
this
);

112 
	gm_ş›Á
->
didFa
(
this
, 
”rÜ
);

113 
	gResourûLßd”
::
didFa
(
”rÜ
);

116 
	gN‘sÿ³PlugInSŒ—mLßd”
::
didCªûl
(cÚ¡ 
ResourûE¼Ü
& 
”rÜ
)

118 
RefPŒ
<
N‘sÿ³PlugInSŒ—mLßd”
> 
´Ùeù
(
this
);

120 
	gm_ş›Á
->
didFa
(
this
, 
”rÜ
);

124 ià(
»achedT”mš®S‹
())

130 
	gm_docum’tLßd”
->
»movePlugInSŒ—mLßd”
(
this
);

132 
	gResourûLßd”
::
didCªûl
(
”rÜ
);

	@NetscapePlugInStreamLoader.h

29 
	~"ResourûLßd”.h
"

30 
	~<wtf/FÜw¬d.h
>

32 
Çme¥aû
 
	gWebCÜe
 {

34 
şass
 
	gN‘sÿ³PlugInSŒ—mLßd”
;

36 şas 
	cN‘sÿ³PlugInSŒ—mLßd”Cl›Á
 {

37 
	gpublic
:

38 
vœtu®
 
didReûiveRe¥Ú£
(
N‘sÿ³PlugInSŒ—mLßd”
*, cÚ¡ 
ResourûRe¥Ú£
&) = 0;

39 
vœtu®
 
didReûiveD©a
(
N‘sÿ³PlugInSŒ—mLßd”
*, const *, ) = 0;

40 
vœtu®
 
didFa
(
N‘sÿ³PlugInSŒ—mLßd”
*, cÚ¡ 
ResourûE¼Ü
&) = 0;

41 
vœtu®
 
didFšishLßdšg
(
N‘sÿ³PlugInSŒ—mLßd”
*) { }

42 
vœtu®
 
boŞ
 
wªtsAÎSŒ—ms
(ècÚ¡ {  
	gçl£
; }

44 
	g´Ùeùed
:

45 
vœtu®
 ~
N‘sÿ³PlugInSŒ—mLßd”Cl›Á
() { }

48 şas 
	cN‘sÿ³PlugInSŒ—mLßd”
 : 
public
 
ResourûLßd”
 {

49 
public
:

50 
PassRefPŒ
<
N‘sÿ³PlugInSŒ—mLßd”
> 
ü—‹
(
F¿me
*, 
N‘sÿ³PlugInSŒ—mLßd”Cl›Á
*);

51 
	gvœtu®
 ~
N‘sÿ³PlugInSŒ—mLßd”
();

53 
boŞ
 
isDÚe
() const;

55 
	g´iv©e
:

56 
vœtu®
 
didReûiveRe¥Ú£
(cÚ¡ 
ResourûRe¥Ú£
&);

57 
vœtu®
 
didReûiveD©a
(cÚ¡ *, , 
ËngthReûived
, 
boŞ
 
®lAtOnû
);

58 
vœtu®
 
didFšishLßdšg
();

59 
vœtu®
 
didFa
(cÚ¡ 
ResourûE¼Ü
&);

61 
vœtu®
 
»Ëa£Resourûs
();

63 
N‘sÿ³PlugInSŒ—mLßd”
(
F¿me
*, 
N‘sÿ³PlugInSŒ—mLßd”Cl›Á
*);

65 
vœtu®
 
didCªûl
(cÚ¡ 
ResourûE¼Ü
& 
”rÜ
);

67 
N‘sÿ³PlugInSŒ—mLßd”Cl›Á
* 
	gm_ş›Á
;

	@PlaceholderDocument.cpp

26 
	~"cÚfig.h
"

27 
	~"PÏûhŞd”Docum’t.h
"

29 
	~"CSSStyËS–eùÜ.h
"

30 
	~"StyËSh“tLi¡.h
"

32 
Çme¥aû
 
	gWebCÜe
 {

34 
	gPÏûhŞd”Docum’t
::
©ch
()

36 
ASSERT
(!
©ched
());

39 
	gCÚš”Node
::
©ch
();

	@PlaceholderDocument.h

26 #iâdeà
PÏûhŞd”Docum’t_h


27 
	#PÏûhŞd”Docum’t_h


	)

29 
	~"Docum’t.h
"

31 
Çme¥aû
 
	gWebCÜe
 {

33 şas 
	cPÏûhŞd”Docum’t
 : 
public
 
Docum’t
 {

34 
public
:

35 
PassRefPŒ
<
PÏûhŞd”Docum’t
> 
ü—‹
(
F¿me
* 
äame
)

37  
adİtRef
(
Ãw
 
PÏûhŞd”Docum’t
(
äame
));

40 
vœtu®
 
©ch
();

42 
	g´iv©e
:

43 
PÏûhŞd”Docum’t
(
F¿me
* 
äame
è: 
Docum’t
(äame, 
çl£
, false) { }

	@PluginDocument.cpp

25 
	~"cÚfig.h
"

26 
	~"PlugšDocum’t.h
"

28 
	~"Docum’tLßd”.h
"

29 
	~"EËm’t.h
"

30 
	~"F¿me.h
"

31 
	~"F¿meLßd”.h
"

32 
	~"F¿meLßd”Cl›Á.h
"

33 
	~"HTMLEmbedEËm’t.h
"

34 
	~"HTMLNames.h
"

35 
	~"MašResourûLßd”.h
"

36 
	~"Page.h
"

37 
	~"R’d”EmbeddedObjeù.h
"

38 
	~"R’d”Widg‘.h
"

39 
	~"Segm’‹dSŒšg.h
"

40 
	~"S‘tšgs.h
"

41 
	~"Text.h
"

42 
	~"XMLTok’iz”.h
"

44 
Çme¥aû
 
	gWebCÜe
 {

46 
usšg
 
Çme¥aû
 
	gHTMLNames
;

48 şas 
	cPlugšTok’iz”
 : 
public
 
Tok’iz”
 {

49 
public
:

50 
PlugšTok’iz”
(
Docum’t
* 
doc
è: 
m_doc
(doc), 
m_embedEËm’t
(0) {}

51 
Widg‘
* 
¶ugšWidg‘FromDocum’t
(
Docum’t
* 
doc
);

53 
	g´iv©e
:

54 
vœtu®
 
wr™e
(cÚ¡ 
Segm’‹dSŒšg
&, 
boŞ
 
­³ndD©a
);

55 
vœtu®
 
¡İP¬sšg
();

56 
vœtu®
 
fšish
();

57 
vœtu®
 
boŞ
 
isWa™šgFÜSüts
() const;

59 
vœtu®
 
boŞ
 
wªtsRawD©a
(ècÚ¡ {  
	gŒue
; }

60 
vœtu®
 
boŞ
 
wr™eRawD©a
(cÚ¡ * 
d©a
, 
Ën
);

62 
ü—‹Docum’tSŒuùu»
();

64 
Docum’t
* 
	gm_doc
;

65 
HTMLEmbedEËm’t
* 
	gm_embedEËm’t
;

68 
Widg‘
* 
	gPlugšTok’iz”
::
	$¶ugšWidg‘FromDocum’t
(
Docum’t
* 
doc
)

70 
	`ASSERT
(
doc
);

71 
RefPŒ
<
EËm’t
> 
body
 = 
doc
->
	`body
();

72 ià(
body
) {

73 
RefPŒ
<
Node
> 
node
 = 
body
->
	`fœ¡Chd
();

74 ià(
node
 &&‚ode->
	`»nd””
()) {

75 
	`ASSERT
(
node
->
	`»nd””
()->
	`isEmbeddedObjeù
());

76  
	`toR’d”EmbeddedObjeù
(
node
->
	`»nd””
())->
	`widg‘
();

80 
	}
}

82 
	gPlugšTok’iz”
::
	$wr™e
(cÚ¡ 
Segm’‹dSŒšg
&, 
boŞ
)

84 
	`ASSERT_NOT_REACHED
();

85 
	}
}

87 
	gPlugšTok’iz”
::
	$ü—‹Docum’tSŒuùu»
()

89 
Exû±iÚCode
 
ec
;

90 
RefPŒ
<
EËm’t
> 
roÙEËm’t
 = 
m_doc
->
	`ü—‹EËm’t
(
htmlTag
, 
çl£
);

91 
m_doc
->
	`­³ndChd
(
roÙEËm’t
, 
ec
);

93 
RefPŒ
<
EËm’t
> 
body
 = 
m_doc
->
	`ü—‹EËm’t
(
bodyTag
, 
çl£
);

94 
body
->
	`£tA‰ribu‹
(
m¬gšwidthA‰r
, "0");

95 
body
->
	`£tA‰ribu‹
(
m¬gšheightA‰r
, "0");

96 
body
->
	`£tA‰ribu‹
(
bgcŞÜA‰r
, "rgb(38,38,38)");

98 
roÙEËm’t
->
	`­³ndChd
(
body
, 
ec
);

100 
RefPŒ
<
EËm’t
> 
embedEËm’t
 = 
m_doc
->
	`ü—‹EËm’t
(
embedTag
, 
çl£
);

102 
m_embedEËm’t
 = 
¡©ic_ÿ¡
<
HTMLEmbedEËm’t
*>(
embedEËm’t
.
	`g‘
());

103 
m_embedEËm’t
->
	`£tA‰ribu‹
(
widthA‰r
, "100%");

104 
m_embedEËm’t
->
	`£tA‰ribu‹
(
heightA‰r
, "100%");

106 
m_embedEËm’t
->
	`£tA‰ribu‹
(
ÇmeA‰r
, "plugin");

107 
m_embedEËm’t
->
	`£tA‰ribu‹
(
¤cA‰r
, 
m_doc
->
	`u¾
().
	`¡ršg
());

108 
m_embedEËm’t
->
	`£tA‰ribu‹
(
ty³A‰r
, 
m_doc
->
	`äame
()->
	`lßd”
()->
	`»¥Ú£MIMETy³
());

110 
body
->
	`­³ndChd
(
embedEËm’t
, 
ec
);

111 
	}
}

113 
boŞ
 
	gPlugšTok’iz”
::
	$wr™eRawD©a
(const *, )

115 
	`ASSERT
(!
m_embedEËm’t
);

116 ià(
m_embedEËm’t
)

117  
çl£
;

119 
	`ü—‹Docum’tSŒuùu»
();

121 ià(
F¿me
* 
äame
 = 
m_doc
->
	`äame
()) {

122 
S‘tšgs
* 
£‰šgs
 = 
äame
->
	`£‰šgs
();

123 ià(
£‰šgs
 && 
äame
->
	`lßd”
()->
	`®lowPlugšs
(
NÙAboutToIn¡ªtŸ‹Plugš
)) {

124 
m_doc
->
	`upd©eLayout
();

126 ià(
R’d”Widg‘
* 
»nd””
 = 
	`toR’d”Widg‘
(
m_embedEËm’t
->
	`»nd””
())) {

127 
äame
->
	`lßd”
()->
	`ş›Á
()->
	`»dœeùD©aToPlugš
(
»nd””
->
	`widg‘
());

128 
äame
->
	`lßd”
()->
	`aùiveDocum’tLßd”
()->
	`mašResourûLßd”
()->
	`£tShouldBufãrD©a
(
çl£
);

131 
	`fšish
();

135  
çl£
;

136 
	}
}

138 
	gPlugšTok’iz”
::
	$¡İP¬sšg
()

140 
Tok’iz”
::
	`¡İP¬sšg
();

141 
	}
}

143 
	gPlugšTok’iz”
::
	$fšish
()

145 ià(!
m_·r£rStİ³d
)

146 
m_doc
->
	`fšishedP¬sšg
();

147 
	}
}

149 
boŞ
 
	gPlugšTok’iz”
::
	$isWa™šgFÜSüts
() const

152  
çl£
;

153 
	}
}

155 
	gPlugšDocum’t
::
	$PlugšDocum’t
(
F¿me
* 
äame
)

156 : 
	$HTMLDocum’t
(
äame
)

158 
	`£tP¬£Mode
(
Com·t
);

159 
	}
}

161 
Tok’iz”
* 
	gPlugšDocum’t
::
	$ü—‹Tok’iz”
()

163  
Ãw
 
	`PlugšTok’iz”
(
this
);

164 
	}
}

166 
Widg‘
* 
	gPlugšDocum’t
::
	$¶ugšWidg‘
()

168  
PlugšTok’iz”
::
	`¶ugšWidg‘FromDocum’t
(
this
);

169 
	}
}

171 
Node
* 
	gPlugšDocum’t
::
	$¶ugšNode
()

173 
RefPŒ
<
EËm’t
> 
body_–em’t
 = 
	`body
();

174 ià(
body_–em’t
)

175  
body_–em’t
->
	`fœ¡Chd
();

178 
	}
}

	@PluginDocument.h

25 #iâdeà
PlugšDocum’t_h


26 
	#PlugšDocum’t_h


	)

28 
	~"HTMLDocum’t.h
"

30 
Çme¥aû
 
	gWebCÜe
 {

32 
şass
 
	gNode
;

33 
şass
 
	gWidg‘
;

34 şas 
	cPlugšDocum’t
 : 
public
 
HTMLDocum’t
 {

35 
public
:

36 
PassRefPŒ
<
PlugšDocum’t
> 
ü—‹
(
F¿me
* 
äame
)

38  
adİtRef
(
Ãw
 
PlugšDocum’t
(
äame
));

41 
Widg‘
* 
¶ugšWidg‘
();

42 
Node
* 
¶ugšNode
();

44 
	g´iv©e
:

45 
PlugšDocum’t
(
F¿me
*);

47 
vœtu®
 
boŞ
 
isPlugšDocum’t
(ècÚ¡ {  
	gŒue
; }

48 
vœtu®
 
Tok’iz”
* 
ü—‹Tok’iz”
();

	@PolicyCallback.cpp

31 
	~"cÚfig.h
"

32 
	~"PŞicyC®lback.h
"

34 
	~"FÜmS‹.h
"

35 
	~"F¿me.h
"

36 
	~"F¿meLßd”.h
"

37 
	~"HTMLFÜmEËm’t.h
"

39 
Çme¥aû
 
	gWebCÜe
 {

41 
	gPŞicyC®lback
::
PŞicyC®lback
()

42 : 
m_Çvig©iÚFunùiÚ
(0)

43 , 
m_ÃwWšdowFunùiÚ
(0)

44 , 
m_cÚ‹ÁFunùiÚ
(0)

48 
	gPŞicyC®lback
::~
PŞicyC®lback
()

52 
PŞicyC®lback
::
ş—r
()

54 
ş—rReque¡
();

55 
	gm_Çvig©iÚFunùiÚ
 = 0;

56 
	gm_ÃwWšdowFunùiÚ
 = 0;

57 
	gm_cÚ‹ÁFunùiÚ
 = 0;

60 
	gPŞicyC®lback
::
£t
(cÚ¡ 
ResourûReque¡
& 
»que¡
, 
PassRefPŒ
<
FÜmS‹
> 
fÜmS‹
,

61 
Navig©iÚPŞicyDecisiÚFunùiÚ
 
funùiÚ
, * 
¬gum’t
)

63 
	gm_»que¡
 = 
»que¡
;

64 
	gm_fÜmS‹
 = 
fÜmS‹
;

65 
	gm_äameName
 = 
SŒšg
();

67 
	gm_Çvig©iÚFunùiÚ
 = 
funùiÚ
;

68 
	gm_ÃwWšdowFunùiÚ
 = 0;

69 
	gm_cÚ‹ÁFunùiÚ
 = 0;

70 
	gm_¬gum’t
 = 
¬gum’t
;

73 
	gPŞicyC®lback
::
£t
(cÚ¡ 
ResourûReque¡
& 
»que¡
, 
PassRefPŒ
<
FÜmS‹
> 
fÜmS‹
,

74 cÚ¡ 
SŒšg
& 
äameName
, 
NewWšdowPŞicyDecisiÚFunùiÚ
 
funùiÚ
, * 
¬gum’t
)

76 
	gm_»que¡
 = 
»que¡
;

77 
	gm_fÜmS‹
 = 
fÜmS‹
;

78 
	gm_äameName
 = 
äameName
;

80 
	gm_Çvig©iÚFunùiÚ
 = 0;

81 
	gm_ÃwWšdowFunùiÚ
 = 
funùiÚ
;

82 
	gm_cÚ‹ÁFunùiÚ
 = 0;

83 
	gm_¬gum’t
 = 
¬gum’t
;

86 
	gPŞicyC®lback
::
£t
(
CÚ‹ÁPŞicyDecisiÚFunùiÚ
 
funùiÚ
, * 
¬gum’t
)

88 
	gm_»que¡
 = 
ResourûReque¡
();

89 
	gm_fÜmS‹
 = 0;

90 
	gm_äameName
 = 
SŒšg
();

92 
	gm_Çvig©iÚFunùiÚ
 = 0;

93 
	gm_ÃwWšdowFunùiÚ
 = 0;

94 
	gm_cÚ‹ÁFunùiÚ
 = 
funùiÚ
;

95 
	gm_¬gum’t
 = 
¬gum’t
;

98 
	gPŞicyC®lback
::
ÿÎ
(
boŞ
 
shouldCÚtšue
)

100 ià(
m_Çvig©iÚFunùiÚ
)

101 
m_Çvig©iÚFunùiÚ
(
m_¬gum’t
, 
m_»que¡
, 
m_fÜmS‹
.
g‘
(), 
shouldCÚtšue
);

102 ià(
	gm_ÃwWšdowFunùiÚ
)

103 
m_ÃwWšdowFunùiÚ
(
m_¬gum’t
, 
m_»que¡
, 
m_fÜmS‹
.
g‘
(), 
m_äameName
, 
shouldCÚtšue
);

104 
ASSERT
(!
m_cÚ‹ÁFunùiÚ
);

107 
	gPŞicyC®lback
::
ÿÎ
(
PŞicyAùiÚ
 
aùiÚ
)

109 
ASSERT
(!
m_Çvig©iÚFunùiÚ
);

110 
ASSERT
(!
m_ÃwWšdowFunùiÚ
);

111 
ASSERT
(
m_cÚ‹ÁFunùiÚ
);

112 
m_cÚ‹ÁFunùiÚ
(
m_¬gum’t
, 
aùiÚ
);

115 
	gPŞicyC®lback
::
ş—rReque¡
()

117 
m_»que¡
 = 
ResourûReque¡
();

118 
	gm_fÜmS‹
 = 0;

119 
	gm_äameName
 = 
SŒšg
();

122 
	gPŞicyC®lback
::
ÿnûl
()

124 
ş—rReque¡
();

125 ià(
	gm_Çvig©iÚFunùiÚ
)

126 
m_Çvig©iÚFunùiÚ
(
m_¬gum’t
, 
m_»que¡
, 
m_fÜmS‹
.
g‘
(), 
çl£
);

127 ià(
	gm_ÃwWšdowFunùiÚ
)

128 
m_ÃwWšdowFunùiÚ
(
m_¬gum’t
, 
m_»que¡
, 
m_fÜmS‹
.
g‘
(), 
m_äameName
, 
çl£
);

129 ià(
	gm_cÚ‹ÁFunùiÚ
)

130 
m_cÚ‹ÁFunùiÚ
(
m_¬gum’t
, 
PŞicyIgnÜe
);

	@PolicyCallback.h

30 #iâdeà
PŞicyC®lback_h


31 
	#PŞicyC®lback_h


	)

33 
	~"F¿meLßd”Ty³s.h
"

34 
	~"PÏtfÜmSŒšg.h
"

35 
	~"ResourûReque¡.h
"

36 
	~<wtf/RefPŒ.h
>

38 
Çme¥aû
 
	gWebCÜe
 {

40 
şass
 
	gFÜmS‹
;

42 (*
	gNavig©iÚPŞicyDecisiÚFunùiÚ
)(* 
	t¬gum’t
,

43 cÚ¡ 
	tResourûReque¡
&, 
	tPassRefPŒ
<
	tFÜmS‹
>, 
	tboŞ
 
	tshouldCÚtšue
);

44 (*
	gNewWšdowPŞicyDecisiÚFunùiÚ
)(* 
	t¬gum’t
,

45 cÚ¡ 
	tResourûReque¡
&, 
	tPassRefPŒ
<
	tFÜmS‹
>, cÚ¡ 
	tSŒšg
& 
	täameName
, 
	tboŞ
 
	tshouldCÚtšue
);

46 (*
	gCÚ‹ÁPŞicyDecisiÚFunùiÚ
)(* 
	t¬gum’t
, 
	tPŞicyAùiÚ
);

48 şas 
	cPŞicyC®lback
 {

49 
	gpublic
:

50 
PŞicyC®lback
();

51 ~
PŞicyC®lback
();

53 
ş—r
();

54 
£t
(cÚ¡ 
ResourûReque¡
&, 
PassRefPŒ
<
FÜmS‹
>,

55 
Navig©iÚPŞicyDecisiÚFunùiÚ
, * 
¬gum’t
);

56 
£t
(cÚ¡ 
ResourûReque¡
&, 
PassRefPŒ
<
FÜmS‹
>, cÚ¡ 
SŒšg
& 
äameName
,

57 
NewWšdowPŞicyDecisiÚFunùiÚ
, * 
¬gum’t
);

58 
£t
(
CÚ‹ÁPŞicyDecisiÚFunùiÚ
, * 
¬gum’t
);

60 cÚ¡ 
	gResourûReque¡
& 
»que¡
(ècÚ¡ {  
	gm_»que¡
; }

61 
ş—rReque¡
();

63 
ÿÎ
(
boŞ
 
shouldCÚtšue
);

64 
ÿÎ
(
PŞicyAùiÚ
);

65 
ÿnûl
();

67 
	g´iv©e
:

68 
ResourûReque¡
 
m_»que¡
;

69 
	gRefPŒ
<
	gFÜmS‹
> 
	gm_fÜmS‹
;

70 
SŒšg
 
	gm_äameName
;

72 
Navig©iÚPŞicyDecisiÚFunùiÚ
 
	gm_Çvig©iÚFunùiÚ
;

73 
NewWšdowPŞicyDecisiÚFunùiÚ
 
	gm_ÃwWšdowFunùiÚ
;

74 
CÚ‹ÁPŞicyDecisiÚFunùiÚ
 
	gm_cÚ‹ÁFunùiÚ
;

75 * 
	gm_¬gum’t
;

	@PolicyChecker.cpp

31 
	~"cÚfig.h
"

32 
	~"PŞicyCheck”.h
"

34 
	~"Docum’tLßd”.h
"

35 
	~"FÜmS‹.h
"

36 
	~"F¿me.h
"

37 
	~"F¿meLßd”.h
"

38 
	~"F¿meLßd”Cl›Á.h
"

39 
	~"HTMLFÜmEËm’t.h
"

41 
Çme¥aû
 
	gWebCÜe
 {

43 
	gPŞicyCheck”
::
PŞicyCheck”
(
F¿me
* 
äame
)

44 : 
m_äame
(
äame
)

45 , 
m_d–eg©eIsDecidšgNavig©iÚPŞicy
(
çl£
)

46 , 
m_d–eg©eIsHªdlšgUnim¶em’bËPŞicy
(
çl£
)

47 , 
m_lßdTy³
(
F¿meLßdTy³Snd¬d
)

51 
	gPŞicyCheck”
::
checkNavig©iÚPŞicy
(cÚ¡ 
ResourûReque¡
& 
ÃwReque¡
, 
Navig©iÚPŞicyDecisiÚFunùiÚ
 
funùiÚ
, * 
¬gum’t
)

53 
checkNavig©iÚPŞicy
(
ÃwReque¡
, 
m_äame
->
lßd”
()->
aùiveDocum’tLßd”
(), 0, 
funùiÚ
, 
¬gum’t
);

56 
	gPŞicyCheck”
::
checkNavig©iÚPŞicy
(cÚ¡ 
ResourûReque¡
& 
»que¡
, 
Docum’tLßd”
* 
lßd”
,

57 
PassRefPŒ
<
FÜmS‹
> 
fÜmS‹
, 
Navig©iÚPŞicyDecisiÚFunùiÚ
 
funùiÚ
, * 
¬gum’t
)

59 
Navig©iÚAùiÚ
 
	gaùiÚ
 = 
lßd”
->
Œigg”šgAùiÚ
();

60 ià(
	gaùiÚ
.
isEm±y
()) {

61 
	gaùiÚ
 = 
Navig©iÚAùiÚ
(
»que¡
.
u¾
(), 
Navig©iÚTy³Oth”
);

62 
	glßd”
->
£tTrigg”šgAùiÚ
(
aùiÚ
);

67 ià(
equ®IgnÜšgH—d”F›lds
(
»que¡
, 
lßd”
->
Ï¡CheckedReque¡
()è|| (!
	g»que¡
.
isNuÎ
(è&&„eque¡.
u¾
().
isEm±y
())) {

68 
funùiÚ
(
¬gum’t
, 
»que¡
, 0, 
Œue
);

69 
	glßd”
->
£tLa¡CheckedReque¡
(
»que¡
);

75 ià(
	glßd”
->
sub¡™u‹D©a
().
isV®id
(è&& !lßd”->sub¡™u‹D©a().
çšgURL
().
isEm±y
()) {

76 ià(
isBackFÜw¬dLßdTy³
(
m_lßdTy³
))

77 
	gm_lßdTy³
 = 
F¿meLßdTy³R–ßd
;

78 
funùiÚ
(
¬gum’t
, 
»que¡
, 0, 
Œue
);

82 
	glßd”
->
£tLa¡CheckedReque¡
(
»que¡
);

84 
	gm_ÿÎback
.
£t
(
»que¡
, 
fÜmS‹
.
g‘
(), 
funùiÚ
, 
¬gum’t
);

86 
	gm_d–eg©eIsDecidšgNavig©iÚPŞicy
 = 
Œue
;

87 
	gm_äame
->
lßd”
()->
ş›Á
()->
di¥©chDecidePŞicyFÜNavig©iÚAùiÚ
(&
PŞicyCheck”
::
cÚtšueAá”Navig©iÚPŞicy
,

88 
aùiÚ
, 
»que¡
, 
fÜmS‹
);

89 
	gm_d–eg©eIsDecidšgNavig©iÚPŞicy
 = 
çl£
;

92 
	gPŞicyCheck”
::
checkNewWšdowPŞicy
(cÚ¡ 
Navig©iÚAùiÚ
& 
aùiÚ
, 
NewWšdowPŞicyDecisiÚFunùiÚ
 
funùiÚ
,

93 cÚ¡ 
ResourûReque¡
& 
»que¡
, 
PassRefPŒ
<
FÜmS‹
> 
fÜmS‹
, cÚ¡ 
SŒšg
& 
äameName
, * 
¬gum’t
)

95 
	gm_ÿÎback
.
£t
(
»que¡
, 
fÜmS‹
, 
äameName
, 
funùiÚ
, 
¬gum’t
);

96 
	gm_äame
->
lßd”
()->
ş›Á
()->
di¥©chDecidePŞicyFÜNewWšdowAùiÚ
(&
PŞicyCheck”
::
cÚtšueAá”NewWšdowPŞicy
,

97 
aùiÚ
, 
»que¡
, 
fÜmS‹
, 
äameName
);

100 
	gPŞicyCheck”
::
checkCÚ‹ÁPŞicy
(cÚ¡ 
SŒšg
& 
MIMETy³
, 
CÚ‹ÁPŞicyDecisiÚFunùiÚ
 
funùiÚ
, * 
¬gum’t
)

102 
	gm_ÿÎback
.
£t
(
funùiÚ
, 
¬gum’t
);

103 
	gm_äame
->
lßd”
()->
ş›Á
()->
di¥©chDecidePŞicyFÜMIMETy³
(&
PŞicyCheck”
::
cÚtšueAá”CÚ‹ÁPŞicy
,

104 
MIMETy³
, 
m_äame
->
lßd”
()->
aùiveDocum’tLßd”
()->
»que¡
());

107 
	gPŞicyCheck”
::
ÿnûlCheck
()

109 
m_äame
->
lßd”
()->
ş›Á
()->
ÿnûlPŞicyCheck
();

110 
	gm_ÿÎback
.
ş—r
();

113 
	gPŞicyCheck”
::
¡İCheck
()

115 
m_äame
->
lßd”
()->
ş›Á
()->
ÿnûlPŞicyCheck
();

116 
PŞicyC®lback
 
	gÿÎback
 = 
m_ÿÎback
;

117 
	gm_ÿÎback
.
ş—r
();

118 
	gÿÎback
.
ÿnûl
();

121 
	gPŞicyCheck”
::
ÿÂÙShowMIMETy³
(cÚ¡ 
ResourûRe¥Ú£
& 
»¥Ú£
)

123 
hªdËUnim¶em’bËPŞicy
(
m_äame
->
lßd”
()->
ş›Á
()->
ÿÂÙShowMIMETy³E¼Ü
(
»¥Ú£
));

126 
	gPŞicyCheck”
::
cÚtšueLßdAá”WlSubm™FÜm
(
PŞicyAùiÚ
)

130 
m_äame
->
lßd”
()->
cÚtšueLßdAá”WlSubm™FÜm
();

133 
	gPŞicyCheck”
::
cÚtšueAá”Navig©iÚPŞicy
(
PŞicyAùiÚ
 
pŞicy
)

135 
PŞicyC®lback
 
ÿÎback
 = 
m_ÿÎback
;

136 
	gm_ÿÎback
.
ş—r
();

138 
boŞ
 
	gshouldCÚtšue
 = 
pŞicy
 =ğ
PŞicyU£
;

140 
	gpŞicy
) {

141 
	gPŞicyIgnÜe
:

142 
ÿÎback
.
ş—rReque¡
();

144 
	gPŞicyDowÆßd
:

145 
m_äame
->
lßd”
()->
ş›Á
()->
¡¬tDowÆßd
(
ÿÎback
.
»que¡
());

146 
	gÿÎback
.
ş—rReque¡
();

148 
	gPŞicyU£
: {

149 
ResourûReque¡
 
»que¡
(
ÿÎback
.request());

151 ià(!
	gm_äame
->
lßd”
()->
ş›Á
()->
ÿnHªdËReque¡
(
»que¡
)) {

152 
hªdËUnim¶em’bËPŞicy
(
m_äame
->
lßd”
()->
ÿÂÙShowURLE¼Ü
(
ÿÎback
.
»que¡
()));

153 
	gÿÎback
.
ş—rReque¡
();

154 
	gshouldCÚtšue
 = 
çl£
;

160 
	gÿÎback
.
ÿÎ
(
shouldCÚtšue
);

163 
	gPŞicyCheck”
::
cÚtšueAá”NewWšdowPŞicy
(
PŞicyAùiÚ
 
pŞicy
)

165 
PŞicyC®lback
 
ÿÎback
 = 
m_ÿÎback
;

166 
	gm_ÿÎback
.
ş—r
();

168 
	gpŞicy
) {

169 
	gPŞicyIgnÜe
:

170 
ÿÎback
.
ş—rReque¡
();

172 
	gPŞicyDowÆßd
:

173 
m_äame
->
lßd”
()->
ş›Á
()->
¡¬tDowÆßd
(
ÿÎback
.
»que¡
());

174 
	gÿÎback
.
ş—rReque¡
();

176 
	gPŞicyU£
:

180 
	gÿÎback
.
ÿÎ
(
pŞicy
 =ğ
PŞicyU£
);

183 
	gPŞicyCheck”
::
cÚtšueAá”CÚ‹ÁPŞicy
(
PŞicyAùiÚ
 
pŞicy
)

185 
PŞicyC®lback
 
ÿÎback
 = 
m_ÿÎback
;

186 
	gm_ÿÎback
.
ş—r
();

187 
	gÿÎback
.
ÿÎ
(
pŞicy
);

190 
	gPŞicyCheck”
::
hªdËUnim¶em’bËPŞicy
(cÚ¡ 
ResourûE¼Ü
& 
”rÜ
)

192 
m_d–eg©eIsHªdlšgUnim¶em’bËPŞicy
 = 
Œue
;

193 
	gm_äame
->
lßd”
()->
ş›Á
()->
di¥©chUÇbËToIm¶em’tPŞicy
(
”rÜ
);

194 
	gm_d–eg©eIsHªdlšgUnim¶em’bËPŞicy
 = 
çl£
;

	@PolicyChecker.h

30 #iâdeà
PŞicyCheck”_h


31 
	#PŞicyCheck”_h


	)

33 
	~"F¿meLßd”Ty³s.h
"

34 
	~"PÏtfÜmSŒšg.h
"

35 
	~"PŞicyC®lback.h
"

36 
	~"ResourûReque¡.h
"

37 
	~<wtf/PassRefPŒ.h
>

39 
Çme¥aû
 
	gWebCÜe
 {

41 
şass
 
	gDocum’tLßd”
;

42 
şass
 
	gFÜmS‹
;

43 
şass
 
	gF¿me
;

44 
şass
 
	gNavig©iÚAùiÚ
;

45 
şass
 
	gResourûE¼Ü
;

46 
şass
 
	gResourûRe¥Ú£
;

48 şas 
	cPŞicyCheck”
 : 
public
 
NÚcİyabË
 {

49 
public
:

50 
PŞicyCheck”
(
F¿me
*);

52 
checkNavig©iÚPŞicy
(cÚ¡ 
ResourûReque¡
&, 
Docum’tLßd”
*, 
PassRefPŒ
<
FÜmS‹
>, 
Navig©iÚPŞicyDecisiÚFunùiÚ
, * 
¬gum’t
);

53 
checkNavig©iÚPŞicy
(cÚ¡ 
ResourûReque¡
&, 
Navig©iÚPŞicyDecisiÚFunùiÚ
, * 
¬gum’t
);

54 
checkNewWšdowPŞicy
(cÚ¡ 
Navig©iÚAùiÚ
&, 
NewWšdowPŞicyDecisiÚFunùiÚ
, cÚ¡ 
ResourûReque¡
&, 
PassRefPŒ
<
FÜmS‹
>, cÚ¡ 
SŒšg
& 
äameName
, * 
¬gum’t
);

55 
checkCÚ‹ÁPŞicy
(cÚ¡ 
SŒšg
& 
MIMETy³
, 
CÚ‹ÁPŞicyDecisiÚFunùiÚ
, * 
¬gum’t
);

58 
ÿnûlCheck
();

59 
¡İCheck
();

61 
ÿÂÙShowMIMETy³
(cÚ¡ 
ResourûRe¥Ú£
&);

63 
F¿meLßdTy³
 
lßdTy³
(ècÚ¡ {  
	gm_lßdTy³
; }

64 
£tLßdTy³
(
F¿meLßdTy³
 
lßdTy³
è{ 
	gm_lßdTy³
 =†oadType; }

66 
boŞ
 
d–eg©eIsDecidšgNavig©iÚPŞicy
(ècÚ¡ {  
	gm_d–eg©eIsDecidšgNavig©iÚPŞicy
; }

67 
boŞ
 
d–eg©eIsHªdlšgUnim¶em’bËPŞicy
(ècÚ¡ {  
	gm_d–eg©eIsHªdlšgUnim¶em’bËPŞicy
; }

74 
cÚtšueLßdAá”WlSubm™FÜm
(
PŞicyAùiÚ
);

76 
	g´iv©e
:

77 
cÚtšueAá”Navig©iÚPŞicy
(
PŞicyAùiÚ
);

78 
cÚtšueAá”NewWšdowPŞicy
(
PŞicyAùiÚ
);

79 
cÚtšueAá”CÚ‹ÁPŞicy
(
PŞicyAùiÚ
);

81 
hªdËUnim¶em’bËPŞicy
(cÚ¡ 
ResourûE¼Ü
&);

83 
F¿me
* 
	gm_äame
;

85 
boŞ
 
	gm_d–eg©eIsDecidšgNavig©iÚPŞicy
;

86 
boŞ
 
	gm_d–eg©eIsHªdlšgUnim¶em’bËPŞicy
;

91 
F¿meLßdTy³
 
	gm_lßdTy³
;

92 
PŞicyC®lback
 
	gm_ÿÎback
;

	@ProgressTracker.cpp

26 
	~"cÚfig.h
"

27 
	~"Prog»ssT¿ck”.h
"

29 
	~"Docum’tLßd”.h
"

30 
	~"F¿me.h
"

31 
	~"F¿meLßd”.h
"

32 
	~"F¿meLßd”Cl›Á.h
"

33 
	~"Loggšg.h
"

34 
	~"ResourûRe¥Ú£.h
"

35 
	~<wtf/‹xt/CSŒšg.h
>

36 
	~<wtf/Cu¼’tTime.h
>

38 
usšg
 
	g¡d
::
mš
;

40 
Çme¥aû
 
	gWebCÜe
 {

44 cÚ¡ 
	gš™ŸlProg»ssV®ue
 = 0.1;

48 cÚ¡ 
	gfš®Prog»ssV®ue
 = 0.9;

50 cÚ¡ 
	g´og»ssI‹mDeçuÉE¡im©edL’gth
 = 1024 * 16;

52 
	gProg»ssI‹m
 : 
NÚcİyabË
 {

53 
Prog»ssI‹m
(
Ëngth
)

54 : 
by‹sReûived
(0)

55 , 
e¡im©edL’gth
(
Ëngth
) { }

57 
	gby‹sReûived
;

58 
	ge¡im©edL’gth
;

61 
	gProg»ssT¿ck”
::
Prog»ssT¿ck”
()

62 : 
m_uniqueId’tif›r
(0)

63 , 
m_tÙ®PageAndResourûBy‹sToLßd
(0)

64 , 
m_tÙ®By‹sReûived
(0)

65 , 
m_Ï¡NÙif›dProg»ssV®ue
(0)

66 , 
m_Ï¡NÙif›dProg»ssTime
(0)

67 , 
m_´og»ssNÙifiÿtiÚIÁ”v®
(0.02)

68 , 
m_´og»ssNÙifiÿtiÚTimeIÁ”v®
(0.1)

69 , 
m_fš®Prog»ssChªgedS’t
(
çl£
)

70 , 
m_´og»ssV®ue
(0)

71 , 
m_numProg»ssT¿ckedF¿mes
(0)

75 
	gProg»ssT¿ck”
::~
Prog»ssT¿ck”
()

77 
d–‘eAÎV®ues
(
m_´og»ssI‹ms
);

80 
	gProg»ssT¿ck”
::
e¡im©edProg»ss
() const

82  
m_´og»ssV®ue
;

85 
	gProg»ssT¿ck”
::
»£t
()

87 
d–‘eAÎV®ues
(
m_´og»ssI‹ms
);

88 
	gm_´og»ssI‹ms
.
ş—r
();

90 
	gm_tÙ®PageAndResourûBy‹sToLßd
 = 0;

91 
	gm_tÙ®By‹sReûived
 = 0;

92 
	gm_´og»ssV®ue
 = 0;

93 
	gm_Ï¡NÙif›dProg»ssV®ue
 = 0;

94 
	gm_Ï¡NÙif›dProg»ssTime
 = 0;

95 
	gm_fš®Prog»ssChªgedS’t
 = 
çl£
;

96 
	gm_numProg»ssT¿ckedF¿mes
 = 0;

97 
	gm_Üigš©šgProg»ssF¿me
 = 0;

100 
	gProg»ssT¿ck”
::
´og»ssS¹ed
(
F¿me
* 
äame
)

102 
LOG
(
Prog»ss
, "Prog»s ¡¬‹d (%pè- f¿m%p(\"%s\"), v®u%f,¿cked f¿me %d, origš©šg f¿m%p", 
this
, 
äame
, f¿me->
Œ“
()->
Çme
().
¡ršg
().
utf8
().
d©a
(), 
m_´og»ssV®ue
, 
m_numProg»ssT¿ckedF¿mes
, 
m_Üigš©šgProg»ssF¿me
.
g‘
());

104 
	gäame
->
lßd”
()->
ş›Á
()->
wlChªgeE¡im©edProg»ss
();

106 ià(
	gm_numProg»ssT¿ckedF¿mes
 =ğ0 || 
m_Üigš©šgProg»ssF¿me
 =ğ
äame
) {

107 
»£t
();

108 
	gm_´og»ssV®ue
 = 
š™ŸlProg»ssV®ue
;

109 
	gm_Üigš©šgProg»ssF¿me
 = 
äame
;

111 
	gm_Üigš©šgProg»ssF¿me
->
lßd”
()->
ş›Á
()->
po¡Prog»ssS¹edNÙifiÿtiÚ
();

113 
	gm_numProg»ssT¿ckedF¿mes
++;

115 
	gäame
->
lßd”
()->
ş›Á
()->
didChªgeE¡im©edProg»ss
();

118 
	gProg»ssT¿ck”
::
´og»ssCom¶‘ed
(
F¿me
* 
äame
)

120 
LOG
(
Prog»ss
, "Prog»s com¶‘ed (%pè- f¿m%p(\"%s\"), v®u%f,¿cked f¿me %d, origš©šg f¿m%p", 
this
, 
äame
, f¿me->
Œ“
()->
Çme
().
¡ršg
().
utf8
().
d©a
(), 
m_´og»ssV®ue
, 
m_numProg»ssT¿ckedF¿mes
, 
m_Üigš©šgProg»ssF¿me
.
g‘
());

122 ià(
	gm_numProg»ssT¿ckedF¿mes
 <= 0)

125 
	gäame
->
lßd”
()->
ş›Á
()->
wlChªgeE¡im©edProg»ss
();

127 
	gm_numProg»ssT¿ckedF¿mes
--;

128 ià(
	gm_numProg»ssT¿ckedF¿mes
 == 0 ||

129 (
äame
 =ğ
m_Üigš©šgProg»ssF¿me
 && 
m_numProg»ssT¿ckedF¿mes
 != 0))

130 
fš®Prog»ssCom¶‘e
();

132 
	gäame
->
lßd”
()->
ş›Á
()->
didChªgeE¡im©edProg»ss
();

135 
	gProg»ssT¿ck”
::
fš®Prog»ssCom¶‘e
()

137 
LOG
(
Prog»ss
, "Fš®…rog»s com¶‘(%p)", 
this
);

139 
	gRefPŒ
<
	gF¿me
> 
	gäame
 = 
m_Üigš©šgProg»ssF¿me
.
»Ëa£
();

143 ià(!
	gm_fš®Prog»ssChªgedS’t
) {

144 
	gm_´og»ssV®ue
 = 1;

145 
	gäame
->
lßd”
()->
ş›Á
()->
po¡Prog»ssE¡im©eChªgedNÙifiÿtiÚ
();

148 
»£t
();

150 
	gäame
->
lßd”
()->
ş›Á
()->
£tMašF¿meDocum’tR—dy
(
Œue
);

151 
	gäame
->
lßd”
()->
ş›Á
()->
po¡Prog»ssFšishedNÙifiÿtiÚ
();

154 
	gProg»ssT¿ck”
::
šüem’tProg»ss
(
id’tif›r
, cÚ¡ 
ResourûRe¥Ú£
& 
»¥Ú£
)

156 
LOG
(
Prog»ss
, "Prog»s šüem’‹d (%pè- v®u%f,¿cked f¿me %d, origš©šg f¿m%p", 
this
, 
m_´og»ssV®ue
, 
m_numProg»ssT¿ckedF¿mes
, 
m_Üigš©šgProg»ssF¿me
.
g‘
());

158 ià(
	gm_numProg»ssT¿ckedF¿mes
 <= 0)

161 
	ge¡im©edL’gth
 = 
»¥Ú£
.
ex³ùedCÚ‹ÁL’gth
();

162 ià(
	ge¡im©edL’gth
 < 0)

163 
	ge¡im©edL’gth
 = 
´og»ssI‹mDeçuÉE¡im©edL’gth
;

165 
	gm_tÙ®PageAndResourûBy‹sToLßd
 +ğ
e¡im©edL’gth
;

167 ià(
Prog»ssI‹m
* 
	g™em
 = 
m_´og»ssI‹ms
.
g‘
(
id’tif›r
)) {

168 
™em
->
by‹sReûived
 = 0;

169 
	g™em
->
	ge¡im©edL’gth
 = 
e¡im©edL’gth
;

171 
	gm_´og»ssI‹ms
.
£t
(
id’tif›r
, 
Ãw
 
Prog»ssI‹m
(
e¡im©edL’gth
));

174 
	gProg»ssT¿ck”
::
šüem’tProg»ss
(
id’tif›r
, cÚ¡ *, 
Ëngth
)

176 
Prog»ssI‹m
* 
	g™em
 = 
m_´og»ssI‹ms
.
g‘
(
id’tif›r
);

179 ià(!
	g™em
)

182 
	gRefPŒ
<
	gF¿me
> 
	gäame
 = 
m_Üigš©šgProg»ssF¿me
;

184 
	gäame
->
lßd”
()->
ş›Á
()->
wlChªgeE¡im©edProg»ss
();

186 
	gby‹sReûived
 = 
Ëngth
;

187 
	gšüem’t
, 
	g³rûÁOfRemaššgBy‹s
;

188 
	g»maššgBy‹s
, 
	ge¡im©edBy‹sFÜP’dšgReque¡s
;

190 
	g™em
->
	gby‹sReûived
 +ğ
by‹sReûived
;

191 ià(
	g™em
->
	gby‹sReûived
 > i‹m->
	ge¡im©edL’gth
) {

192 
	gm_tÙ®PageAndResourûBy‹sToLßd
 +ğ((
™em
->
by‹sReûived
 * 2è- i‹m->
e¡im©edL’gth
);

193 
	g™em
->
	ge¡im©edL’gth
 = 
™em
->
by‹sReûived
 * 2;

196 
	gnumP’dšgOrLßdšgReque¡s
 = 
äame
->
lßd”
()->
numP’dšgOrLßdšgReque¡s
(
Œue
);

197 
	ge¡im©edBy‹sFÜP’dšgReque¡s
 = 
´og»ssI‹mDeçuÉE¡im©edL’gth
 * 
numP’dšgOrLßdšgReque¡s
;

198 
	g»maššgBy‹s
 = ((
m_tÙ®PageAndResourûBy‹sToLßd
 + 
e¡im©edBy‹sFÜP’dšgReque¡s
è- 
m_tÙ®By‹sReûived
);

199 ià(
	g»maššgBy‹s
 > 0)

200 
	g³rûÁOfRemaššgBy‹s
 = ()
by‹sReûived
 / ()
»maššgBy‹s
;

202 
	g³rûÁOfRemaššgBy‹s
 = 1.0;

206 
boŞ
 
	gu£CÏm³dMaxProg»ss
 = 
äame
->
lßd”
()->
ş›Á
()->
hasHTMLV›w
()

207 && !
äame
->
lßd”
()->
fœ¡LayoutDÚe
();

208 
	gmaxProg»ssV®ue
 = 
u£CÏm³dMaxProg»ss
 ? 0.5 : 
fš®Prog»ssV®ue
;

209 
	gšüem’t
 = (
maxProg»ssV®ue
 - 
m_´og»ssV®ue
è* 
³rûÁOfRemaššgBy‹s
;

210 
	gm_´og»ssV®ue
 +ğ
šüem’t
;

211 
	gm_´og»ssV®ue
 = 
mš
(
m_´og»ssV®ue
, 
maxProg»ssV®ue
);

212 
ASSERT
(
m_´og»ssV®ue
 >ğ
š™ŸlProg»ssV®ue
);

214 
	gm_tÙ®By‹sReûived
 +ğ
by‹sReûived
;

216 
	gnow
 = 
cu¼’tTime
();

217 
	gnÙif›dProg»ssTimeD–
 = 
now
 - 
m_Ï¡NÙif›dProg»ssTime
;

219 
LOG
(
Prog»ss
, "Prog»s šüem’‹d (%pè- v®u%f,¿cked f¿me %d", 
this
, 
m_´og»ssV®ue
, 
m_numProg»ssT¿ckedF¿mes
);

220 
	gnÙifiÿtiÚProg»ssD–
 = 
m_´og»ssV®ue
 - 
m_Ï¡NÙif›dProg»ssV®ue
;

221 ià((
	gnÙifiÿtiÚProg»ssD–
 >ğ
m_´og»ssNÙifiÿtiÚIÁ”v®
 ||

222 
nÙif›dProg»ssTimeD–
 >ğ
m_´og»ssNÙifiÿtiÚTimeIÁ”v®
) &&

223 
m_numProg»ssT¿ckedF¿mes
 > 0) {

224 ià(!
m_fš®Prog»ssChªgedS’t
) {

225 ià(
m_´og»ssV®ue
 == 1)

226 
m_fš®Prog»ssChªgedS’t
 = 
Œue
;

228 
	gäame
->
lßd”
()->
ş›Á
()->
po¡Prog»ssE¡im©eChªgedNÙifiÿtiÚ
();

230 
	gm_Ï¡NÙif›dProg»ssV®ue
 = 
m_´og»ssV®ue
;

231 
	gm_Ï¡NÙif›dProg»ssTime
 = 
now
;

235 
	gäame
->
lßd”
()->
ş›Á
()->
didChªgeE¡im©edProg»ss
();

238 
	gProg»ssT¿ck”
::
com¶‘eProg»ss
(
id’tif›r
)

240 
Prog»ssI‹m
* 
™em
 = 
m_´og»ssI‹ms
.
g‘
(
id’tif›r
);

243 ià(!
	g™em
)

247 
	gd–
 = 
™em
->
by‹sReûived
 - i‹m->
e¡im©edL’gth
;

248 
	gm_tÙ®PageAndResourûBy‹sToLßd
 +ğ
d–
;

249 
	g™em
->
	ge¡im©edL’gth
 = 
™em
->
by‹sReûived
;

251 
	gm_´og»ssI‹ms
.
»move
(
id’tif›r
);

252 
d–‘e
 
	g™em
;

255 
	gProg»ssT¿ck”
::
ü—‹UniqueId’tif›r
()

257  ++
m_uniqueId’tif›r
;

	@ProgressTracker.h

26 #iâdeà
Prog»ssT¿ck”_h


27 
	#Prog»ssT¿ck”_h


	)

29 
	~<wtf/HashM­.h
>

30 
	~<wtf/NÚcİyabË.h
>

31 
	~<wtf/RefPŒ.h
>

33 
Çme¥aû
 
	gWebCÜe
 {

35 
şass
 
	gF¿me
;

36 
şass
 
	gResourûRe¥Ú£
;

37 
	gProg»ssI‹m
;

39 şas 
	cProg»ssT¿ck”
 : 
public
 
NÚcİyabË
 {

40 
public
:

41 
Prog»ssT¿ck”
();

42 ~
Prog»ssT¿ck”
();

44 
ü—‹UniqueId’tif›r
();

46 
e¡im©edProg»ss
() const;

48 
´og»ssS¹ed
(
F¿me
*);

49 
´og»ssCom¶‘ed
(
F¿me
*);

51 
šüem’tProg»ss
(
id’tif›r
, cÚ¡ 
ResourûRe¥Ú£
&);

52 
šüem’tProg»ss
(
id’tif›r
, const *, );

53 
com¶‘eProg»ss
(
id’tif›r
);

55 
tÙ®PageAndResourûBy‹sToLßd
(ècÚ¡ {  
	gm_tÙ®PageAndResourûBy‹sToLßd
; }

56 
tÙ®By‹sReûived
(ècÚ¡ {  
	gm_tÙ®By‹sReûived
; }

58 
	g´iv©e
:

59 
»£t
();

60 
fš®Prog»ssCom¶‘e
();

62 
	gm_uniqueId’tif›r
;

64 
	gm_tÙ®PageAndResourûBy‹sToLßd
;

65 
	gm_tÙ®By‹sReûived
;

66 
	gm_Ï¡NÙif›dProg»ssV®ue
;

67 
	gm_Ï¡NÙif›dProg»ssTime
;

68 
	gm_´og»ssNÙifiÿtiÚIÁ”v®
;

69 
	gm_´og»ssNÙifiÿtiÚTimeIÁ”v®
;

70 
boŞ
 
	gm_fš®Prog»ssChªgedS’t
;

71 
	gm_´og»ssV®ue
;

72 
	gRefPŒ
<
	gF¿me
> 
	gm_Üigš©šgProg»ssF¿me
;

74 
	gm_numProg»ssT¿ckedF¿mes
;

75 
	gHashM­
<, 
	gProg»ssI‹m
*> 
	gm_´og»ssI‹ms
;

	@RedirectScheduler.cpp

32 
	~"cÚfig.h
"

33 
	~"RedœeùScheduËr.h
"

35 
	~"BackFÜw¬dLi¡.h
"

36 
	~"Docum’tLßd”.h
"

37 
	~"Ev’t.h
"

38 
	~"FÜmS‹.h
"

39 
	~"F¿me.h
"

40 
	~"F¿meLßdReque¡.h
"

41 
	~"F¿meLßd”.h
"

42 
	~"Hi¡ÜyI‹m.h
"

43 
	~"HTMLFÜmEËm’t.h
"

44 
	~"HTMLF¿meOwÃrEËm’t.h
"

45 
	~"Page.h
"

46 
	~"U£rGe¡u»IndiÿtÜ.h
"

47 
	~<wtf/Cu¼’tTime.h
>

49 
Çme¥aû
 
	gWebCÜe
 {

51 şas 
	cScheduËdNavig©iÚ
 : 
public
 
NÚcİyabË
 {

52 
public
:

53 
ScheduËdNavig©iÚ
(
d–ay
, 
boŞ
 
lockHi¡Üy
, boŞ 
lockBackFÜw¬dLi¡
, boŞ 
wasDuršgLßd
)

54 : 
m_d–ay
(
d–ay
)

55 , 
m_lockHi¡Üy
(
lockHi¡Üy
)

56 , 
m_lockBackFÜw¬dLi¡
(
lockBackFÜw¬dLi¡
)

57 , 
m_wasDuršgLßd
(
wasDuršgLßd
)

60 
	gvœtu®
 ~
ScheduËdNavig©iÚ
() { }

62 
vœtu®
 
fœe
(
F¿me
*) = 0;

65 
vœtu®
 
boŞ
 
isLoÿtiÚChªge
(ècÚ¡ {  
	gŒue
; }

67 
vœtu®
 
boŞ
 
shouldS¹Tim”
(
F¿me
*è{  
	gŒue
; }

68 
vœtu®
 
didS¹Tim”
(
F¿me
*, 
Tim”
<
RedœeùScheduËr
>*) { }

69 
vœtu®
 
didStİTim”
(
F¿me
*, 
boŞ
 ) { }

71 
d–ay
(ècÚ¡ {  
	gm_d–ay
; }

72 
boŞ
 
lockHi¡Üy
(ècÚ¡ {  
	gm_lockHi¡Üy
; }

73 
boŞ
 
lockBackFÜw¬dLi¡
(ècÚ¡ {  
	gm_lockBackFÜw¬dLi¡
; }

74 
boŞ
 
wasDuršgLßd
(ècÚ¡ {  
	gm_wasDuršgLßd
; }

76 
	g´iv©e
:

77 
m_d–ay
;

78 
boŞ
 
	gm_lockHi¡Üy
;

79 
boŞ
 
	gm_lockBackFÜw¬dLi¡
;

80 
boŞ
 
	gm_wasDuršgLßd
;

83 şas 
	cScheduËdURLNavig©iÚ
 : 
public
 
ScheduËdNavig©iÚ
 {

84 
public
:

85 
ScheduËdURLNavig©iÚ
(
d–ay
, cÚ¡ 
SŒšg
& 
u¾
, cÚ¡ SŒšg& 
»ã¼”
, 
boŞ
 
lockHi¡Üy
, boŞ 
lockBackFÜw¬dLi¡
, boŞ 
wasU£rGe¡u»
, boŞ 
duršgLßd
)

86 : 
ScheduËdNavig©iÚ
(
d–ay
, 
lockHi¡Üy
, 
lockBackFÜw¬dLi¡
, 
duršgLßd
)

87 , 
m_u¾
(
u¾
)

88 , 
m_»ã¼”
(
»ã¼”
)

89 , 
m_wasU£rGe¡u»
(
wasU£rGe¡u»
)

90 , 
m_haveTŞdCl›Á
(
çl£
)

94 
vœtu®
 
fœe
(
F¿me
* 
äame
)

96 
	gäame
->
lßd”
()->
chªgeLoÿtiÚ
(
KURL
(
P¬£dURLSŒšg
, 
m_u¾
), 
m_»ã¼”
, 
lockHi¡Üy
(), 
lockBackFÜw¬dLi¡
(), 
m_wasU£rGe¡u»
, 
çl£
);

99 
vœtu®
 
didS¹Tim”
(
F¿me
* 
äame
, 
Tim”
<
RedœeùScheduËr
>* 
tim”
)

101 ià(
	gm_haveTŞdCl›Á
)

103 
	gm_haveTŞdCl›Á
 = 
Œue
;

104 
	gäame
->
lßd”
()->
ş›ÁRedœeùed
(
KURL
(
P¬£dURLSŒšg
, 
m_u¾
), 
d–ay
(), 
cu¼’tTime
(è+ 
tim”
->
ÃxtFœeIÁ”v®
(), 
lockBackFÜw¬dLi¡
());

107 
vœtu®
 
didStİTim”
(
F¿me
* 
äame
, 
boŞ
 
ÃwLßdInProg»ss
)

109 ià(!
	gm_haveTŞdCl›Á
)

111 
	gäame
->
lßd”
()->
ş›ÁRedœeùCªûÎedOrFšished
(
ÃwLßdInProg»ss
);

114 
SŒšg
 
u¾
(ècÚ¡ {  
	gm_u¾
; }

115 
SŒšg
 
»ã¼”
(ècÚ¡ {  
	gm_»ã¼”
; }

116 
boŞ
 
wasU£rGe¡u»
(ècÚ¡ {  
	gm_wasU£rGe¡u»
; }

118 
	g´iv©e
:

119 
SŒšg
 
m_u¾
;

120 
SŒšg
 
	gm_»ã¼”
;

121 
boŞ
 
	gm_wasU£rGe¡u»
;

122 
boŞ
 
	gm_haveTŞdCl›Á
;

125 şas 
	cScheduËdRedœeù
 : 
public
 
ScheduËdURLNavig©iÚ
 {

126 
public
:

127 
ScheduËdRedœeù
(
d–ay
, cÚ¡ 
SŒšg
& 
u¾
, 
boŞ
 
lockHi¡Üy
, boŞ 
lockBackFÜw¬dLi¡
, boŞ 
wasU£rGe¡u»
)

128 : 
ScheduËdURLNavig©iÚ
(
d–ay
, 
u¾
, 
SŒšg
(), 
lockHi¡Üy
, 
lockBackFÜw¬dLi¡
, 
wasU£rGe¡u»
, 
çl£
) { }

130 
vœtu®
 
boŞ
 
isLoÿtiÚChªge
(ècÚ¡ {  
	gçl£
; }

131 
vœtu®
 
boŞ
 
shouldS¹Tim”
(
F¿me
* 
äame
è{  
	gäame
->
lßd”
()->
®lAnû¡ÜsA»Com¶‘e
(); }

134 şas 
	cScheduËdLoÿtiÚChªge
 : 
public
 
ScheduËdURLNavig©iÚ
 {

135 
public
:

136 
ScheduËdLoÿtiÚChªge
(cÚ¡ 
SŒšg
& 
u¾
, cÚ¡ SŒšg& 
»ã¼”
, 
boŞ
 
lockHi¡Üy
, boŞ 
lockBackFÜw¬dLi¡
, boŞ 
wasU£rGe¡u»
, boŞ 
duršgLßd
)

137 : 
ScheduËdURLNavig©iÚ
(0.0, 
u¾
, 
»ã¼”
, 
lockHi¡Üy
, 
lockBackFÜw¬dLi¡
, 
wasU£rGe¡u»
, 
duršgLßd
) { }

140 şas 
	cScheduËdReäesh
 : 
public
 
ScheduËdURLNavig©iÚ
 {

141 
public
:

142 
ScheduËdReäesh
(cÚ¡ 
SŒšg
& 
u¾
, cÚ¡ SŒšg& 
»ã¼”
, 
boŞ
 
wasU£rGe¡u»
)

143 : 
ScheduËdURLNavig©iÚ
(0.0, 
u¾
, 
»ã¼”
, 
Œue
,rue, 
wasU£rGe¡u»
, 
çl£
) { }

145 
vœtu®
 
fœe
(
F¿me
* 
äame
)

147 
	gäame
->
lßd”
()->
chªgeLoÿtiÚ
(
KURL
(
P¬£dURLSŒšg
, 
u¾
()), 
»ã¼”
(), 
lockHi¡Üy
(), 
lockBackFÜw¬dLi¡
(), 
wasU£rGe¡u»
(), 
Œue
);

151 şas 
	cScheduËdHi¡ÜyNavig©iÚ
 : 
public
 
ScheduËdNavig©iÚ
 {

152 
public
:

153 
ex¶ic™
 
ScheduËdHi¡ÜyNavig©iÚ
(
hi¡ÜyS‹ps
è: 
ScheduËdNavig©iÚ
(0, 
çl£
, f®£, f®£), 
m_hi¡ÜyS‹ps
(historySteps) { }

155 
vœtu®
 
fœe
(
F¿me
* 
äame
)

157 
F¿meLßd”
* 
	glßd”
 = 
äame
->
lßd”
();

158 ià(!
	gm_hi¡ÜyS‹ps
) {

160 
	glßd”
->
u¾S–eùed
(
lßd”
->
u¾
(), "", 0, 
lockHi¡Üy
(), 
lockBackFÜw¬dLi¡
(), 
çl£
, 
S’dReã¼”
);

165 
	gäame
->
·ge
()->
goBackOrFÜw¬d
(
m_hi¡ÜyS‹ps
);

168 
	g´iv©e
:

169 
m_hi¡ÜyS‹ps
;

172 şas 
	cScheduËdFÜmSubmissiÚ
 : 
public
 
ScheduËdNavig©iÚ
 {

173 
public
:

174 
ScheduËdFÜmSubmissiÚ
(cÚ¡ 
F¿meLßdReque¡
& 
äameReque¡
, 
boŞ
 
lockHi¡Üy
, boŞ 
lockBackFÜw¬dLi¡
, 
PassRefPŒ
<
Ev’t
> 
ev’t
, PassRefPŒ<
FÜmS‹
> 
fÜmS‹
, boŞ 
duršgLßd
)

175 : 
ScheduËdNavig©iÚ
(0, 
lockHi¡Üy
, 
lockBackFÜw¬dLi¡
, 
duršgLßd
)

176 , 
m_äameReque¡
(
äameReque¡
)

177 , 
m_ev’t
(
ev’t
)

178 , 
m_fÜmS‹
(
fÜmS‹
)

179 , 
m_wasProûssšgU£rGe¡u»
(
U£rGe¡u»IndiÿtÜ
::
´oûssšgU£rGe¡u»
())

181 
ASSERT
(!
äameReque¡
.
isEm±y
());

182 
ASSERT
(
m_fÜmS‹
);

185 
vœtu®
 
fœe
(
F¿me
* 
äame
)

187 
U£rGe¡u»IndiÿtÜ
 
ge¡u»IndiÿtÜ
(
m_wasProûssšgU£rGe¡u»
 ? 
Defš™–yProûssšgU£rGe¡u»
 : 
PossiblyProûssšgU£rGe¡u»
);

193 ià(!
	gm_fÜmS‹
->
sourûF¿me
()->
lßd”
()->
shouldAÎowNavig©iÚ
(
äame
))

195 
	gäame
->
lßd”
()->
lßdF¿meReque¡
(
m_äameReque¡
, 
lockHi¡Üy
(), 
lockBackFÜw¬dLi¡
(), 
m_ev’t
, 
m_fÜmS‹
, 
S’dReã¼”
);

203 
	g´iv©e
:

204 cÚ¡ 
F¿meLßdReque¡
 
m_äameReque¡
;

205 cÚ¡ 
	gRefPŒ
<
	gEv’t
> 
	gm_ev’t
;

206 cÚ¡ 
	gRefPŒ
<
	gFÜmS‹
> 
	gm_fÜmS‹
;

207 
boŞ
 
	gm_wasProûssšgU£rGe¡u»
;

210 
	gRedœeùScheduËr
::
	$RedœeùScheduËr
(
F¿me
* 
äame
)

211 : 
	`m_äame
(
äame
)

212 , 
	`m_tim”
(
this
, &
RedœeùScheduËr
::
tim”Fœed
)

214 
	}
}

216 
RedœeùScheduËr
::~
	$RedœeùScheduËr
()

218 
	}
}

220 
boŞ
 
RedœeùScheduËr
::
	$»dœeùScheduËdDuršgLßd
()

222  
m_»dœeù
 && m_»dœeù->
	`wasDuršgLßd
();

223 
	}
}

225 
	gRedœeùScheduËr
::
	$ş—r
()

227 
m_tim”
.
	`¡İ
();

228 
m_»dœeù
.
	`ş—r
();

229 
	}
}

231 
	gRedœeùScheduËr
::
	$scheduËRedœeù
(
d–ay
, cÚ¡ 
SŒšg
& 
u¾
)

233 ià(!
m_äame
->
	`·ge
())

235 ià(
d–ay
 < 0 || d–ay > 
INT_MAX
 / 1000)

237 ià(
u¾
.
	`isEm±y
())

241 ià(!
m_»dœeù
 || 
d–ay
 <ğm_»dœeù->
	`d–ay
())

242 
	`scheduË
(
Ãw
 
	`ScheduËdRedœeù
(
d–ay
, 
u¾
, 
Œue
, d–ay <ğ1, 
çl£
));

243 
	}
}

245 
boŞ
 
	gRedœeùScheduËr
::
	$mu¡LockBackFÜw¬dLi¡
(
F¿me
* 
rg‘F¿me
)

251 
F¿me
* 
ªû¡Ü
 = 
rg‘F¿me
->
	`Œ“
()->
	`·»Á
();‡ncestor;‡ncestor =‡ncestor->tree()->parent()) {

252 
Docum’t
* 
docum’t
 = 
ªû¡Ü
->
	`docum’t
();

253 ià(!
ªû¡Ü
->
	`lßd”
()->
	`isCom¶‘e
(è|| (
docum’t
 && docum’t->
	`´oûssšgLßdEv’t
()))

254  
Œue
;

256  
çl£
;

257 
	}
}

259 
	gRedœeùScheduËr
::
	$scheduËLoÿtiÚChªge
(cÚ¡ 
SŒšg
& 
u¾
, cÚ¡ SŒšg& 
»ã¼”
, 
boŞ
 
lockHi¡Üy
, boŞ 
lockBackFÜw¬dLi¡
, boŞ 
wasU£rGe¡u»
)

261 ià(!
m_äame
->
	`·ge
())

263 ià(
u¾
.
	`isEm±y
())

266 
lockBackFÜw¬dLi¡
 =†ockBackFÜw¬dLi¡ || 
	`mu¡LockBackFÜw¬dLi¡
(
m_äame
);

268 
F¿meLßd”
* 
lßd”
 = 
m_äame
->
	`lßd”
();

272 
KURL
 
	`·r£dURL
(
P¬£dURLSŒšg
, 
u¾
);

273 ià(
·r£dURL
.
	`hasF¿gm’tId’tif›r
(è&& 
	`equ®IgnÜšgF¿gm’tId’tif›r
(
lßd”
->
	`u¾
(),…arsedURL)) {

274 
lßd”
->
	`chªgeLoÿtiÚ
Ößd”->
	`com¶‘eURL
(
u¾
), 
»ã¼”
, 
lockHi¡Üy
, 
lockBackFÜw¬dLi¡
, 
wasU£rGe¡u»
);

280 
boŞ
 
duršgLßd
 = !
lßd”
->
	`comm™‹dFœ¡R—lDocum’tLßd
();

282 
	`scheduË
(
Ãw
 
	`ScheduËdLoÿtiÚChªge
(
u¾
, 
»ã¼”
, 
lockHi¡Üy
, 
lockBackFÜw¬dLi¡
, 
wasU£rGe¡u»
, 
duršgLßd
));

283 
	}
}

285 
	gRedœeùScheduËr
::
scheduËFÜmSubmissiÚ
(cÚ¡ 
F¿meLßdReque¡
& 
äameReque¡
,

286 
boŞ
 
lockHi¡Üy
, 
PassRefPŒ
<
Ev’t
> 
ev’t
, PassRefPŒ<
FÜmS‹
> 
fÜmS‹
)

288 
ASSERT
(
m_äame
->
·ge
());

289 
ASSERT
(!
äameReque¡
.
isEm±y
());

296 
boŞ
 
	gduršgLßd
 = !
m_äame
->
lßd”
()->
comm™‹dFœ¡R—lDocum’tLßd
();

302 
boŞ
 
	glockBackFÜw¬dLi¡
 = 
mu¡LockBackFÜw¬dLi¡
(
m_äame
è|| (
fÜmS‹
->
fÜmSubmissiÚTrigg”
(è=ğ
Subm™‹dByJavaSüt
 && m_äame->
Œ“
()->
·»Á
());

304 
scheduË
(
Ãw
 
ScheduËdFÜmSubmissiÚ
(
äameReque¡
, 
lockHi¡Üy
, 
lockBackFÜw¬dLi¡
, 
ev’t
, 
fÜmS‹
, 
duršgLßd
));

307 
	gRedœeùScheduËr
::
	$scheduËReäesh
(
boŞ
 
wasU£rGe¡u»
)

309 ià(!
m_äame
->
	`·ge
())

311 cÚ¡ 
KURL
& 
u¾
 = 
m_äame
->
	`lßd”
()->
	`u¾
();

312 ià(
u¾
.
	`isEm±y
())

315 
	`scheduË
(
Ãw
 
	`ScheduËdReäesh
(
u¾
.
	`¡ršg
(), 
m_äame
->
	`lßd”
()->
	`outgošgReã¼”
(), 
wasU£rGe¡u»
));

316 
	}
}

318 
boŞ
 
	gRedœeùScheduËr
::
	$loÿtiÚChªgeP’dšg
()

320 ià(!
m_»dœeù
)

321  
çl£
;

322  
m_»dœeù
->
	`isLoÿtiÚChªge
();

323 
	}
}

325 
	gRedœeùScheduËr
::
	$scheduËHi¡ÜyNavig©iÚ
(
¡•s
)

327 ià(!
m_äame
->
	`·ge
())

332 
Hi¡ÜyI‹m
* 
¥ecif›dEÁry
 = 
m_äame
->
	`·ge
()->
	`backFÜw¬dLi¡
()->
	`™emAtIndex
(
¡•s
);

333 ià(!
¥ecif›dEÁry
) {

334 
	`ÿnûl
();

338 #ià!
	`ENABLE
(
HISTORY_ALWAYS_ASYNC
)

341 
Hi¡ÜyI‹m
* 
cu¼’tEÁry
 = 
m_äame
->
	`lßd”
()->
	`hi¡Üy
()->
	`cu¼’tI‹m
();

342 ià(
cu¼’tEÁry
 !ğ
¥ecif›dEÁry
 && cu¼’tEÁry->
	`docum’tSequ’ûNumb”
() == specifiedEntry->documentSequenceNumber()) {

343 
m_äame
->
	`lßd”
()->
	`hi¡Üy
()->
	`goToI‹m
(
¥ecif›dEÁry
, 
F¿meLßdTy³IndexedBackFÜw¬d
);

349 
	`scheduË
(
Ãw
 
	`ScheduËdHi¡ÜyNavig©iÚ
(
¡•s
));

350 
	}
}

352 
	gRedœeùScheduËr
::
tim”Fœed
(
Tim”
<
RedœeùScheduËr
>*)

354 ià(!
m_äame
->
·ge
())

356 ià(
	gm_äame
->
·ge
()->
deãrsLßdšg
())

359 
	gOwnPŒ
<
	gScheduËdNavig©iÚ
> 
»dœeù
(
m_»dœeù
.
»Ëa£
());

360 
	g»dœeù
->
fœe
(
m_äame
);

363 
	gRedœeùScheduËr
::
scheduË
(
PassOwnPŒ
<
ScheduËdNavig©iÚ
> 
»dœeù
)

365 
ASSERT
(
m_äame
->
·ge
());

370 ià(
	g»dœeù
->
wasDuršgLßd
()) {

371 ià(
Docum’tLßd”
* 
	g´ovisiÚ®Docum’tLßd”
 = 
m_äame
->
lßd”
()->
´ovisiÚ®Docum’tLßd”
())

372 
´ovisiÚ®Docum’tLßd”
->
¡İLßdšg
();

373 
	gm_äame
->
lßd”
()->
¡İLßdšg
(
UÆßdEv’tPŞicyUÆßdAndPageHide
);

376 
ÿnûl
();

377 
	gm_»dœeù
 = 
»dœeù
;

379 ià(!
	gm_äame
->
lßd”
()->
isCom¶‘e
(è&& 
	gm_»dœeù
->
isLoÿtiÚChªge
())

380 
	gm_äame
->
lßd”
()->
com¶‘ed
();

382 
¡¬tTim”
();

385 
	gRedœeùScheduËr
::
	$¡¬tTim”
()

387 ià(!
m_»dœeù
)

390 
	`ASSERT
(
m_äame
->
	`·ge
());

391 ià(
m_tim”
.
	`isAùive
())

393 ià(!
m_»dœeù
->
	`shouldS¹Tim”
(
m_äame
))

396 
m_tim”
.
	`¡¬tOÃShÙ
(
m_»dœeù
->
	`d–ay
());

397 
m_»dœeù
->
	`didS¹Tim”
(
m_äame
, &
m_tim”
);

398 
	}
}

400 
	gRedœeùScheduËr
::
	$ÿnûl
(
boŞ
 
ÃwLßdInProg»ss
)

402 
m_tim”
.
	`¡İ
();

404 
OwnPŒ
<
ScheduËdNavig©iÚ
> 
	`»dœeù
(
m_»dœeù
.
	`»Ëa£
());

405 ià(
»dœeù
)

406 
»dœeù
->
	`didStİTim”
(
m_äame
, 
ÃwLßdInProg»ss
);

407 
	}
}

	@RedirectScheduler.h

31 #iâdeà
RedœeùScheduËr_h


32 
	#RedœeùScheduËr_h


	)

34 
	~"Ev’t.h
"

35 
	~"Tim”.h
"

36 
	~<wtf/OwnPŒ.h
>

37 
	~<wtf/PassOwnPŒ.h
>

38 
	~<wtf/PassRefPŒ.h
>

40 
Çme¥aû
 
	gWebCÜe
 {

42 
şass
 
	gFÜmS‹
;

43 
şass
 
	gF¿me
;

44 
şass
 
	gSŒšg
;

46 
	gF¿meLßdReque¡
;

47 
şass
 
	gScheduËdNavig©iÚ
;

49 şas 
	cRedœeùScheduËr
 : 
public
 
NÚcİyabË
 {

50 
public
:

51 
RedœeùScheduËr
(
F¿me
*);

52 ~
RedœeùScheduËr
();

54 
boŞ
 
»dœeùScheduËdDuršgLßd
();

55 
boŞ
 
loÿtiÚChªgeP’dšg
();

57 
scheduËRedœeù
(
d–ay
, cÚ¡ 
SŒšg
& 
u¾
);

58 
scheduËLoÿtiÚChªge
(cÚ¡ 
SŒšg
& 
u¾
, cÚ¡ SŒšg& 
»ã¼”
, 
boŞ
 
lockHi¡Üy
 = 
Œue
, boŞ 
lockBackFÜw¬dLi¡
 =rue, boŞ 
u£rGe¡u»
 = 
çl£
);

59 
scheduËFÜmSubmissiÚ
(cÚ¡ 
F¿meLßdReque¡
&, 
boŞ
 
lockHi¡Üy
, 
PassRefPŒ
<
Ev’t
>, PassRefPŒ<
FÜmS‹
>);

60 
scheduËReäesh
(
boŞ
 
u£rGe¡u»
 = 
çl£
);

61 
scheduËHi¡ÜyNavig©iÚ
(
¡•s
);

63 
¡¬tTim”
();

65 
ÿnûl
(
boŞ
 
ÃwLßdInProg»ss
 = 
çl£
);

66 
ş—r
();

68 
	g´iv©e
:

69 
tim”Fœed
(
Tim”
<
RedœeùScheduËr
>*);

70 
scheduË
(
PassOwnPŒ
<
ScheduËdNavig©iÚ
>);

72 
boŞ
 
mu¡LockBackFÜw¬dLi¡
(
F¿me
* 
rg‘F¿me
);

74 
F¿me
* 
	gm_äame
;

75 
	gTim”
<
	gRedœeùScheduËr
> 
	gm_tim”
;

76 
	gOwnPŒ
<
	gScheduËdNavig©iÚ
> 
	gm_»dœeù
;

	@Request.cpp

24 
	~"cÚfig.h
"

25 
	~"Reque¡.h
"

27 
	~"CachedResourû.h
"

29 
Çme¥aû
 
	gWebCÜe
 {

31 
	gReque¡
::
Reque¡
(
DocLßd”
* 
docLßd”
, 
CachedResourû
* 
objeù
, 
boŞ
 
šüem’l
, 
Secur™yCheckPŞicy
 
shouldDoSecur™yCheck
, boŞ 
£ndResourûLßdC®lbacks
)

32 : 
m_objeù
(
objeù
)

33 , 
m_docLßd”
(
docLßd”
)

34 , 
m_šüem’l
(
šüem’l
)

35 , 
m_muÉ¬t
(
çl£
)

36 , 
m_shouldDoSecur™yCheck
(
shouldDoSecur™yCheck
)

37 , 
m_£ndResourûLßdC®lbacks
(
£ndResourûLßdC®lbacks
)

39 
	gm_objeù
->
£tReque¡
(
this
);

42 
	gReque¡
::~
Reque¡
()

44 
m_objeù
->
£tReque¡
(0);

	@Request.h

23 #iâdeà
Reque¡_h


24 
	#Reque¡_h


	)

26 
	~"F¿meLßd”Ty³s.h
"

27 
	~<wtf/VeùÜ.h
>

29 
Çme¥aû
 
	gWebCÜe
 {

31 
şass
 
	gCachedResourû
;

32 
şass
 
	gDocLßd”
;

34 şas 
	cReque¡
 : 
public
 
NÚcİyabË
 {

35 
public
:

36 
Reque¡
(
DocLßd”
*, 
CachedResourû
*, 
boŞ
 
šüem’l
, 
Secur™yCheckPŞicy
, boŞ 
£ndResourûLßdC®lbacks
);

37 ~
Reque¡
();

39 
	gVeùÜ
<>& 
bufãr
(è{  
	gm_bufãr
; }

40 
CachedResourû
* 
ÿchedResourû
(è{  
	gm_objeù
; }

41 
DocLßd”
* 
docLßd”
(è{  
	gm_docLßd”
; }

43 
boŞ
 
isInüem’l
(è{  
	gm_šüem’l
; }

44 
£tIsInüem’l
(
boŞ
 
b
 = 
Œue
è{ 
m_šüem’l
 = b; }

46 
boŞ
 
isMuÉ¬t
(è{  
	gm_muÉ¬t
; }

47 
£tIsMuÉ¬t
(
boŞ
 
b
 = 
Œue
è{ 
m_muÉ¬t
 = b; }

49 
Secur™yCheckPŞicy
 
shouldDoSecur™yCheck
(ècÚ¡ {  
	gm_shouldDoSecur™yCheck
; }

50 
boŞ
 
£ndResourûLßdC®lbacks
(ècÚ¡ {  
	gm_£ndResourûLßdC®lbacks
; }

52 
	g´iv©e
:

53 
VeùÜ
<> 
m_bufãr
;

54 
CachedResourû
* 
	gm_objeù
;

55 
DocLßd”
* 
	gm_docLßd”
;

56 
boŞ
 
	gm_šüem’l
;

57 
boŞ
 
	gm_muÉ¬t
;

58 
Secur™yCheckPŞicy
 
	gm_shouldDoSecur™yCheck
;

59 
boŞ
 
	gm_£ndResourûLßdC®lbacks
;

	@ResourceLoadNotifier.cpp

31 
	~"cÚfig.h
"

32 
	~"ResourûLßdNÙif›r.h
"

34 
	~"Docum’tLßd”.h
"

35 
	~"F¿me.h
"

36 
	~"F¿meLßd”.h
"

37 
	~"F¿meLßd”Cl›Á.h
"

38 
	~"In¥eùÜCÚŒŞËr.h
"

39 
	~"Page.h
"

40 
	~"Prog»ssT¿ck”.h
"

41 
	~"ResourûLßd”.h
"

43 
Çme¥aû
 
	gWebCÜe
 {

45 
	gResourûLßdNÙif›r
::
ResourûLßdNÙif›r
(
F¿me
* 
äame
)

46 : 
m_äame
(
äame
)

50 
ResourûLßdNÙif›r
::
didReûiveAuth’tiÿtiÚCh®Ënge
(
ResourûLßd”
* 
lßd”
, cÚ¡ 
Auth’tiÿtiÚCh®Ënge
& 
cu¼’tWebCh®Ënge
)

52 
	gm_äame
->
lßd”
()->
ş›Á
()->
di¥©chDidReûiveAuth’tiÿtiÚCh®Ënge
Ößd”->
docum’tLßd”
(),†ßd”->
id’tif›r
(), 
cu¼’tWebCh®Ënge
);

55 
	gResourûLßdNÙif›r
::
didCªûlAuth’tiÿtiÚCh®Ënge
(
ResourûLßd”
* 
lßd”
, cÚ¡ 
Auth’tiÿtiÚCh®Ënge
& 
cu¼’tWebCh®Ënge
)

57 
	gm_äame
->
lßd”
()->
ş›Á
()->
di¥©chDidCªûlAuth’tiÿtiÚCh®Ënge
Ößd”->
docum’tLßd”
(),†ßd”->
id’tif›r
(), 
cu¼’tWebCh®Ënge
);

60 
	gResourûLßdNÙif›r
::
wlS’dReque¡
(
ResourûLßd”
* 
lßd”
, 
ResourûReque¡
& 
ş›ÁReque¡
, cÚ¡ 
ResourûRe¥Ú£
& 
»dœeùRe¥Ú£
)

62 
	gm_äame
->
lßd”
()->
­¶yU£rAg’t
(
ş›ÁReque¡
);

64 
di¥©chWlS’dReque¡
(
lßd”
->
docum’tLßd”
(),†ßd”->
id’tif›r
(), 
ş›ÁReque¡
, 
»dœeùRe¥Ú£
);

67 
	gResourûLßdNÙif›r
::
didReûiveRe¥Ú£
(
ResourûLßd”
* 
lßd”
, cÚ¡ 
ResourûRe¥Ú£
& 
r
)

69 
	glßd”
->
docum’tLßd”
()->
addRe¥Ú£
(
r
);

71 ià(
Page
* 
	g·ge
 = 
m_äame
->
·ge
())

72 
·ge
->
´og»ss
()->
šüem’tProg»ss
(
lßd”
->
id’tif›r
(), 
r
);

74 
di¥©chDidReûiveRe¥Ú£
(
lßd”
->
docum’tLßd”
(),†ßd”->
id’tif›r
(), 
r
);

77 
	gResourûLßdNÙif›r
::
didReûiveD©a
(
ResourûLßd”
* 
lßd”
, cÚ¡ * 
d©a
, 
Ëngth
, 
ËngthReûived
)

79 ià(
Page
* 
	g·ge
 = 
m_äame
->
·ge
())

80 
·ge
->
´og»ss
()->
šüem’tProg»ss
(
lßd”
->
id’tif›r
(), 
d©a
, 
Ëngth
);

82 
di¥©chDidReûiveCÚ‹ÁL’gth
(
lßd”
->
docum’tLßd”
(),†ßd”->
id’tif›r
(), 
ËngthReûived
);

85 
	gResourûLßdNÙif›r
::
didFšishLßd
(
ResourûLßd”
* 
lßd”
)

87 ià(
Page
* 
·ge
 = 
m_äame
->page())

88 
·ge
->
´og»ss
()->
com¶‘eProg»ss
(
lßd”
->
id’tif›r
());

89 
di¥©chDidFšishLßdšg
(
lßd”
->
docum’tLßd”
(),†ßd”->
id’tif›r
());

92 
	gResourûLßdNÙif›r
::
didFaToLßd
(
ResourûLßd”
* 
lßd”
, cÚ¡ 
ResourûE¼Ü
& 
”rÜ
)

94 ià(
Page
* 
	g·ge
 = 
m_äame
->
·ge
())

95 
·ge
->
´og»ss
()->
com¶‘eProg»ss
(
lßd”
->
id’tif›r
());

97 ià(!
	g”rÜ
.
isNuÎ
())

98 
	gm_äame
->
lßd”
()->
ş›Á
()->
di¥©chDidFaLßdšg
Ößd”->
docum’tLßd”
(),†ßd”->
id’tif›r
(), 
”rÜ
);

100 #ià
ENABLE
(
INSPECTOR
)

101 ià(
Page
* 
	g·ge
 = 
m_äame
->
·ge
())

102 
·ge
->
š¥eùÜCÚŒŞËr
()->
didFaLßdšg
(
lßd”
->
id’tif›r
(), 
”rÜ
);

106 
	gResourûLßdNÙif›r
::
assignId’tif›rToIn™ŸlReque¡
(
id’tif›r
, 
Docum’tLßd”
* 
lßd”
, cÚ¡ 
ResourûReque¡
& 
»que¡
)

108 
	gm_äame
->
lßd”
()->
ş›Á
()->
assignId’tif›rToIn™ŸlReque¡
(
id’tif›r
,†ßd”, 
»que¡
);

110 #ià
ENABLE
(
INSPECTOR
)

111 ià(
Page
* 
	g·ge
 = 
m_äame
->
·ge
())

112 
·ge
->
š¥eùÜCÚŒŞËr
()->
id’tif›rFÜIn™ŸlReque¡
(
id’tif›r
, 
lßd”
, 
»que¡
);

116 
	gResourûLßdNÙif›r
::
di¥©chWlS’dReque¡
(
Docum’tLßd”
* 
lßd”
, 
id’tif›r
, 
ResourûReque¡
& 
»que¡
, cÚ¡ 
ResourûRe¥Ú£
& 
»dœeùRe¥Ú£
)

118 
SŒšgIm¶
* 
	gŞdReque¡URL
 = 
»que¡
.
u¾
().
¡ršg
().
im¶
();

119 
	gm_äame
->
lßd”
()->
docum’tLßd”
()->
didT–lCl›ÁAboutLßd
(
»que¡
.
u¾
());

121 
	gm_äame
->
lßd”
()->
ş›Á
()->
di¥©chWlS’dReque¡
Ößd”, 
id’tif›r
, 
»que¡
, 
»dœeùRe¥Ú£
);

124 ià(!
	g»que¡
.
isNuÎ
(è&& 
	gŞdReque¡URL
 !ğ
»que¡
.
u¾
().
¡ršg
().
im¶
())

125 
m_äame
->
lßd”
()->
docum’tLßd”
()->
didT–lCl›ÁAboutLßd
(
»que¡
.
u¾
());

127 #ià
ENABLE
(
INSPECTOR
)

128 ià(
Page
* 
	g·ge
 = 
m_äame
->
·ge
())

129 
·ge
->
š¥eùÜCÚŒŞËr
()->
wlS’dReque¡
(
id’tif›r
, 
»que¡
, 
»dœeùRe¥Ú£
);

133 
	gResourûLßdNÙif›r
::
di¥©chDidReûiveRe¥Ú£
(
Docum’tLßd”
* 
lßd”
, 
id’tif›r
, cÚ¡ 
ResourûRe¥Ú£
& 
r
)

135 
	gm_äame
->
lßd”
()->
ş›Á
()->
di¥©chDidReûiveRe¥Ú£
Ößd”, 
id’tif›r
, 
r
);

137 #ià
ENABLE
(
INSPECTOR
)

138 ià(
Page
* 
	g·ge
 = 
m_äame
->
·ge
())

139 
·ge
->
š¥eùÜCÚŒŞËr
()->
didReûiveRe¥Ú£
(
id’tif›r
, 
r
);

143 
	gResourûLßdNÙif›r
::
di¥©chDidReûiveCÚ‹ÁL’gth
(
Docum’tLßd”
* 
lßd”
, 
id’tif›r
, 
Ëngth
)

145 
	gm_äame
->
lßd”
()->
ş›Á
()->
di¥©chDidReûiveCÚ‹ÁL’gth
Ößd”, 
id’tif›r
, 
Ëngth
);

147 #ià
ENABLE
(
INSPECTOR
)

148 ià(
Page
* 
	g·ge
 = 
m_äame
->
·ge
())

149 
·ge
->
š¥eùÜCÚŒŞËr
()->
didReûiveCÚ‹ÁL’gth
(
id’tif›r
, 
Ëngth
);

153 
	gResourûLßdNÙif›r
::
di¥©chDidFšishLßdšg
(
Docum’tLßd”
* 
lßd”
, 
id’tif›r
)

155 
	gm_äame
->
lßd”
()->
ş›Á
()->
di¥©chDidFšishLßdšg
Ößd”, 
id’tif›r
);

157 #ià
ENABLE
(
INSPECTOR
)

158 ià(
Page
* 
	g·ge
 = 
m_äame
->
·ge
())

159 
·ge
->
š¥eùÜCÚŒŞËr
()->
didFšishLßdšg
(
id’tif›r
);

163 
	gResourûLßdNÙif›r
::
£ndRemaššgD–eg©eMes§ges
(
Docum’tLßd”
* 
lßd”
, 
id’tif›r
, cÚ¡ 
ResourûRe¥Ú£
& 
»¥Ú£
, 
Ëngth
, cÚ¡ 
ResourûE¼Ü
& 
”rÜ
)

165 ià(!
	g»¥Ú£
.
isNuÎ
())

166 
di¥©chDidReûiveRe¥Ú£
(
lßd”
, 
id’tif›r
, 
»¥Ú£
);

168 ià(
	gËngth
 > 0)

169 
di¥©chDidReûiveCÚ‹ÁL’gth
(
lßd”
, 
id’tif›r
, 
Ëngth
);

171 ià(
	g”rÜ
.
isNuÎ
())

172 
di¥©chDidFšishLßdšg
(
lßd”
, 
id’tif›r
);

174 
	gm_äame
->
lßd”
()->
ş›Á
()->
di¥©chDidFaLßdšg
Ößd”, 
id’tif›r
, 
”rÜ
);

	@ResourceLoadNotifier.h

30 #iâdeà
ResourûLßdNÙif›r_h


31 
	#ResourûLßdNÙif›r_h


	)

33 
	~<wtf/NÚcİyabË.h
>

35 
Çme¥aû
 
	gWebCÜe
 {

37 
şass
 
	gAuth’tiÿtiÚCh®Ënge
;

38 
şass
 
	gDocum’tLßd”
;

39 
şass
 
	gF¿me
;

40 
şass
 
	gResourûE¼Ü
;

41 
şass
 
	gResourûLßd”
;

42 
şass
 
	gResourûRe¥Ú£
;

43 
şass
 
	gSütSŒšg
;

44 
şass
 
	gResourûReque¡
;

46 şas 
	cResourûLßdNÙif›r
 : 
public
 
NÚcİyabË
 {

47 
public
:

48 
ResourûLßdNÙif›r
(
F¿me
*);

50 
didReûiveAuth’tiÿtiÚCh®Ënge
(
ResourûLßd”
*, cÚ¡ 
Auth’tiÿtiÚCh®Ënge
&);

51 
didCªûlAuth’tiÿtiÚCh®Ënge
(
ResourûLßd”
*, cÚ¡ 
Auth’tiÿtiÚCh®Ënge
&);

53 
wlS’dReque¡
(
ResourûLßd”
*, 
ResourûReque¡
&, cÚ¡ 
ResourûRe¥Ú£
& 
»dœeùRe¥Ú£
);

54 
didReûiveRe¥Ú£
(
ResourûLßd”
*, cÚ¡ 
ResourûRe¥Ú£
&);

55 
didReûiveD©a
(
ResourûLßd”
*, cÚ¡ *, , 
ËngthReûived
);

56 
didFšishLßd
(
ResourûLßd”
*);

57 
didFaToLßd
(
ResourûLßd”
*, cÚ¡ 
ResourûE¼Ü
&);

59 
assignId’tif›rToIn™ŸlReque¡
(
id’tif›r
, 
Docum’tLßd”
*, cÚ¡ 
ResourûReque¡
&);

60 
di¥©chWlS’dReque¡
(
Docum’tLßd”
*, 
id’tif›r
, 
ResourûReque¡
&, cÚ¡ 
ResourûRe¥Ú£
& 
»dœeùRe¥Ú£
);

61 
di¥©chDidReûiveRe¥Ú£
(
Docum’tLßd”
*, 
id’tif›r
, cÚ¡ 
ResourûRe¥Ú£
&);

62 
di¥©chDidReûiveCÚ‹ÁL’gth
(
Docum’tLßd”
*, 
id’tif›r
, 
Ëngth
);

63 
di¥©chDidFšishLßdšg
(
Docum’tLßd”
*, 
id’tif›r
);

65 
£ndRemaššgD–eg©eMes§ges
(
Docum’tLßd”
*, 
id’tif›r
, cÚ¡ 
ResourûRe¥Ú£
&, 
Ëngth
, cÚ¡ 
ResourûE¼Ü
&);

67 
	g´iv©e
:

68 
F¿me
* 
m_äame
;

	@ResourceLoader.cpp

30 
	~"cÚfig.h
"

31 
	~"ResourûLßd”.h
"

33 
	~"AµliÿtiÚCacheHo¡.h
"

34 
	~"Docum’tLßd”.h
"

35 
	~"F¿me.h
"

36 
	~"F¿meLßd”.h
"

37 
	~"In¥eùÜTim–šeAg’t.h
"

38 
	~"Page.h
"

39 
	~"Prog»ssT¿ck”.h
"

40 
	~"ResourûHªdË.h
"

41 
	~"ResourûE¼Ü.h
"

42 
	~"S‘tšgs.h
"

43 
	~"Sh¬edBufãr.h
"

45 
Çme¥aû
 
	gWebCÜe
 {

47 
	gPassRefPŒ
<
	gSh¬edBufãr
> 
	gResourûLßd”
::
»sourûD©a
()

49 ià(
m_»sourûD©a
)

50  
m_»sourûD©a
;

52 ià(
	gResourûHªdË
::
suµÜtsBufã»dD©a
(è&& 
m_hªdË
)

53  
m_hªdË
->
bufã»dD©a
();

58 
	gResourûLßd”
::
ResourûLßd”
(
F¿me
* 
äame
, 
boŞ
 
£ndResourûLßdC®lbacks
, boŞ 
shouldCÚ‹ÁSniff
)

59 : 
m_äame
(
äame
)

60 , 
m_docum’tLßd”
(
äame
->
lßd”
()->
aùiveDocum’tLßd”
())

61 , 
m_id’tif›r
(0)

62 , 
m_»achedT”mš®S‹
(
çl£
)

63 , 
m_ÿnûÎed
(
çl£
)

64 , 
m_ÿÎedDidFšishLßd
(
çl£
)

65 , 
m_£ndResourûLßdC®lbacks
(
£ndResourûLßdC®lbacks
)

66 , 
m_shouldCÚ‹ÁSniff
(
shouldCÚ‹ÁSniff
)

67 , 
m_shouldBufãrD©a
(
Œue
)

68 , 
m_deãrsLßdšg
(
äame
->
·ge
()->
deãrsLßdšg
())

72 
	gResourûLßd”
::~
ResourûLßd”
()

74 
ASSERT
(
m_»achedT”mš®S‹
);

77 
	gResourûLßd”
::
»Ëa£Resourûs
()

79 
ASSERT
(!
m_»achedT”mš®S‹
);

85 
	gRefPŒ
<
	gResourûLßd”
> 
´ÙeùÜ
(
this
);

87 
	gm_äame
 = 0;

88 
	gm_docum’tLßd”
 = 0;

92 
	gm_»achedT”mš®S‹
 = 
Œue
;

94 
	gm_id’tif›r
 = 0;

96 ià(
	gm_hªdË
) {

99 ià(
	gm_hªdË
->
ş›Á
(è=ğ
this
)

100 
m_hªdË
->
£tCl›Á
(0);

101 
	gm_hªdË
 = 0;

104 
	gm_»sourûD©a
 = 0;

105 
	gm_deã¼edReque¡
 = 
ResourûReque¡
();

108 
boŞ
 
	gResourûLßd”
::
lßd
(cÚ¡ 
ResourûReque¡
& 
r
)

110 
ASSERT
(!
m_hªdË
);

111 
ASSERT
(
m_deã¼edReque¡
.
isNuÎ
());

112 
ASSERT
(!
m_docum’tLßd”
->
isSub¡™u‹LßdP’dšg
(
this
));

114 
ResourûReque¡
 
ş›ÁReque¡
(
r
);

121 ià(
	gş›ÁReque¡
.
fœ¡P¬tyFÜCook›s
().
isNuÎ
()) {

122 ià(
Docum’t
* 
	gdocum’t
 = 
m_äame
->
docum’t
())

123 
ş›ÁReque¡
.
£tFœ¡P¬tyFÜCook›s
(
docum’t
->
fœ¡P¬tyFÜCook›s
());

126 
wlS’dReque¡
(
ş›ÁReque¡
, 
ResourûRe¥Ú£
());

127 ià(
	gş›ÁReque¡
.
isNuÎ
()) {

128 
didFa
(
äameLßd”
()->
ÿnûÎedE¼Ü
(
r
));

129  
	gçl£
;

132 ià(
	gm_docum’tLßd”
->
scheduËArchiveLßd
(
this
, 
ş›ÁReque¡
, 
r
.
u¾
()))

133  
	gŒue
;

135 #ià
ENABLE
(
OFFLINE_WEB_APPLICATIONS
)

136 ià(
	gm_docum’tLßd”
->
­¶iÿtiÚCacheHo¡
()->
maybeLßdResourû
(
this
, 
ş›ÁReque¡
, 
r
.
u¾
()))

137  
	gŒue
;

140 ià(
	gm_deãrsLßdšg
) {

141 
	gm_deã¼edReque¡
 = 
ş›ÁReque¡
;

142  
	gŒue
;

145 
	gm_hªdË
 = 
ResourûHªdË
::
ü—‹
(
ş›ÁReque¡
, 
this
, 
m_äame
.
g‘
(), 
m_deãrsLßdšg
, 
m_shouldCÚ‹ÁSniff
);

147  
	gŒue
;

150 
	gResourûLßd”
::
£tDeãrsLßdšg
(
boŞ
 
deãrs
)

152 
m_deãrsLßdšg
 = 
deãrs
;

153 ià(
	gm_hªdË
)

154 
	gm_hªdË
->
£tDeãrsLßdšg
(
deãrs
);

155 ià(!
	gdeãrs
 && !
	gm_deã¼edReque¡
.
isNuÎ
()) {

156 
ResourûReque¡
 
»que¡
(
m_deã¼edReque¡
);

157 
	gm_deã¼edReque¡
 = 
ResourûReque¡
();

158 
lßd
(
»que¡
);

162 
F¿meLßd”
* 
	gResourûLßd”
::
äameLßd”
() const

164 ià(!
m_äame
)

166  
	gm_äame
->
lßd”
();

169 
	gResourûLßd”
::
£tShouldBufãrD©a
(
boŞ
 
shouldBufãrD©a
)

171 
m_shouldBufãrD©a
 = 
shouldBufãrD©a
;

174 ià(!
	gm_shouldBufãrD©a
)

175 
	gm_»sourûD©a
 = 0;

179 
	gResourûLßd”
::
addD©a
(cÚ¡ * 
d©a
, 
Ëngth
, 
boŞ
 
®lAtOnû
)

181 ià(!
	gm_shouldBufãrD©a
)

184 ià(
	g®lAtOnû
) {

185 
	gm_»sourûD©a
 = 
Sh¬edBufãr
::
ü—‹
(
d©a
, 
Ëngth
);

189 ià(
	gResourûHªdË
::
suµÜtsBufã»dD©a
()) {

191 ià(
m_»sourûD©a
)

192 
m_»sourûD©a
->
­³nd
(
d©a
, 
Ëngth
);

194 ià(!
	gm_»sourûD©a
)

195 
	gm_»sourûD©a
 = 
Sh¬edBufãr
::
ü—‹
(
d©a
, 
Ëngth
);

197 
	gm_»sourûD©a
->
­³nd
(
d©a
, 
Ëngth
);

201 
	gResourûLßd”
::
ş—rResourûD©a
()

203 ià(
m_»sourûD©a
)

204 
m_»sourûD©a
->
ş—r
();

207 
	gResourûLßd”
::
wlS’dReque¡
(
ResourûReque¡
& 
»que¡
, cÚ¡ 
ResourûRe¥Ú£
& 
»dœeùRe¥Ú£
)

211 
	gRefPŒ
<
	gResourûLßd”
> 
´ÙeùÜ
(
this
);

213 
ASSERT
(!
m_»achedT”mš®S‹
);

215 ià(
	gm_£ndResourûLßdC®lbacks
) {

216 ià(!
	gm_id’tif›r
) {

217 
	gm_id’tif›r
 = 
m_äame
->
·ge
()->
´og»ss
()->
ü—‹UniqueId’tif›r
();

218 
äameLßd”
()->
nÙif›r
()->
assignId’tif›rToIn™ŸlReque¡
(
m_id’tif›r
, 
docum’tLßd”
(), 
»que¡
);

221 
äameLßd”
()->
nÙif›r
()->
wlS’dReque¡
(
this
, 
»que¡
, 
»dœeùRe¥Ú£
);

224 
	gm_»que¡
 = 
»que¡
;

227 
	gResourûLßd”
::
didS’dD©a
(, )

231 
	gResourûLßd”
::
didReûiveRe¥Ú£
(cÚ¡ 
ResourûRe¥Ú£
& 
r
)

233 
ASSERT
(!
m_»achedT”mš®S‹
);

237 
	gRefPŒ
<
	gResourûLßd”
> 
´ÙeùÜ
(
this
);

239 
	gm_»¥Ú£
 = 
r
;

241 ià(
FÜmD©a
* 
	gd©a
 = 
m_»que¡
.
h‰pBody
())

242 
d©a
->
»moveG’”©edFesIfN“ded
();

244 ià(
	gm_£ndResourûLßdC®lbacks
)

245 
äameLßd”
()->
nÙif›r
()->
didReûiveRe¥Ú£
(
this
, 
m_»¥Ú£
);

248 
	gResourûLßd”
::
didReûiveD©a
(cÚ¡ * 
d©a
, 
Ëngth
, 
ËngthReûived
, 
boŞ
 
®lAtOnû
)

258 
	gRefPŒ
<
	gResourûLßd”
> 
´ÙeùÜ
(
this
);

260 
addD©a
(
d©a
, 
Ëngth
, 
®lAtOnû
);

264 ià(
	gm_£ndResourûLßdC®lbacks
 && 
	gm_äame
)

265 
äameLßd”
()->
nÙif›r
()->
didReûiveD©a
(
this
, 
d©a
, 
Ëngth
, 
¡©ic_ÿ¡
<>(
ËngthReûived
));

268 
	gResourûLßd”
::
wlStİBufãršgD©a
(cÚ¡ * 
d©a
, 
Ëngth
)

270 ià(!
	gm_shouldBufãrD©a
)

273 
ASSERT
(!
m_»sourûD©a
);

274 
	gm_»sourûD©a
 = 
Sh¬edBufãr
::
ü—‹
(
d©a
, 
Ëngth
);

277 
	gResourûLßd”
::
didFšishLßdšg
()

281 ià(
m_ÿnûÎed
)

283 
ASSERT
(!
m_»achedT”mš®S‹
);

285 
didFšishLßdšgOÃP¬t
();

286 
»Ëa£Resourûs
();

289 
	gResourûLßd”
::
didFšishLßdšgOÃP¬t
()

291 ià(
m_ÿnûÎed
)

293 
ASSERT
(!
m_»achedT”mš®S‹
);

295 ià(
	gm_ÿÎedDidFšishLßd
)

297 
	gm_ÿÎedDidFšishLßd
 = 
Œue
;

298 ià(
	gm_£ndResourûLßdC®lbacks
)

299 
äameLßd”
()->
nÙif›r
()->
didFšishLßd
(
this
);

302 
	gResourûLßd”
::
didFa
(cÚ¡ 
ResourûE¼Ü
& 
”rÜ
)

304 ià(
m_ÿnûÎed
)

306 
ASSERT
(!
m_»achedT”mš®S‹
);

310 
	gRefPŒ
<
	gResourûLßd”
> 
´ÙeùÜ
(
this
);

312 ià(
FÜmD©a
* 
	gd©a
 = 
m_»que¡
.
h‰pBody
())

313 
d©a
->
»moveG’”©edFesIfN“ded
();

315 ià(
	gm_£ndResourûLßdC®lbacks
 && !
	gm_ÿÎedDidFšishLßd
)

316 
äameLßd”
()->
nÙif›r
()->
didFaToLßd
(
this
, 
”rÜ
);

318 
»Ëa£Resourûs
();

321 
	gResourûLßd”
::
didCªûl
(cÚ¡ 
ResourûE¼Ü
& 
”rÜ
)

323 
ASSERT
(!
m_ÿnûÎed
);

324 
ASSERT
(!
m_»achedT”mš®S‹
);

326 ià(
FÜmD©a
* 
	gd©a
 = 
m_»que¡
.
h‰pBody
())

327 
d©a
->
»moveG’”©edFesIfN“ded
();

334 
	gm_ÿnûÎed
 = 
Œue
;

336 ià(
	gm_hªdË
)

337 
	gm_hªdË
->
ş—rAuth’tiÿtiÚ
();

339 
	gm_docum’tLßd”
->
ÿnûlP’dšgSub¡™u‹Lßd
(
this
);

340 ià(
	gm_hªdË
) {

341 
	gm_hªdË
->
ÿnûl
();

342 
	gm_hªdË
 = 0;

344 ià(
	gm_£ndResourûLßdC®lbacks
 && !
	gm_ÿÎedDidFšishLßd
)

345 
äameLßd”
()->
nÙif›r
()->
didFaToLßd
(
this
, 
”rÜ
);

347 
»Ëa£Resourûs
();

350 
	gResourûLßd”
::
ÿnûl
()

352 
ÿnûl
(
ResourûE¼Ü
());

355 
	gResourûLßd”
::
ÿnûl
(cÚ¡ 
ResourûE¼Ü
& 
”rÜ
)

357 ià(
m_»achedT”mš®S‹
)

359 ià(!
	g”rÜ
.
isNuÎ
())

360 
didCªûl
(
”rÜ
);

362 
didCªûl
(
ÿnûÎedE¼Ü
());

365 cÚ¡ 
	gResourûRe¥Ú£
& 
	gResourûLßd”
::
»¥Ú£
() const

367  
m_»¥Ú£
;

370 
ResourûE¼Ü
 
	gResourûLßd”
::
ÿnûÎedE¼Ü
()

372  
äameLßd”
()->
ÿnûÎedE¼Ü
(
m_»que¡
);

375 
ResourûE¼Ü
 
	gResourûLßd”
::
blockedE¼Ü
()

377  
äameLßd”
()->
blockedE¼Ü
(
m_»que¡
);

380 
ResourûE¼Ü
 
	gResourûLßd”
::
ÿÂÙShowURLE¼Ü
()

382  
äameLßd”
()->
ÿÂÙShowURLE¼Ü
(
m_»que¡
);

385 
	gResourûLßd”
::
wlS’dReque¡
(
ResourûHªdË
*, 
ResourûReque¡
& 
»que¡
, cÚ¡ 
ResourûRe¥Ú£
& 
»dœeùRe¥Ú£
)

387 #ià
ENABLE
(
OFFLINE_WEB_APPLICATIONS
)

388 ià(
docum’tLßd”
()->
­¶iÿtiÚCacheHo¡
()->
maybeLßdF®lbackFÜRedœeù
(
this
, 
»que¡
, 
»dœeùRe¥Ú£
))

391 
wlS’dReque¡
(
»que¡
, 
»dœeùRe¥Ú£
);

394 
	gResourûLßd”
::
didS’dD©a
(
ResourûHªdË
*, 
by‹sS’t
, 
tÙ®By‹sToBeS’t
)

396 
didS’dD©a
(
by‹sS’t
, 
tÙ®By‹sToBeS’t
);

399 
	gResourûLßd”
::
didReûiveRe¥Ú£
(
ResourûHªdË
*, cÚ¡ 
ResourûRe¥Ú£
& 
»¥Ú£
)

401 #ià
ENABLE
(
INSPECTOR
)

402 ià(
	gIn¥eùÜTim–šeAg’t
::
š¡ªûCouÁ
()) {

403 
In¥eùÜTim–šeAg’t
* 
tim–šeAg’t
 = 
m_äame
->
·ge
(è? m_äame->·ge()->
š¥eùÜTim–šeAg’t
() : 0;

404 ià(
	gtim–šeAg’t
)

405 
	gtim–šeAg’t
->
wlReûiveResourûRe¥Ú£
(
id’tif›r
(), 
»¥Ú£
);

408 #ià
ENABLE
(
OFFLINE_WEB_APPLICATIONS
)

409 ià(
docum’tLßd”
()->
­¶iÿtiÚCacheHo¡
()->
maybeLßdF®lbackFÜRe¥Ú£
(
this
, 
»¥Ú£
))

412 
didReûiveRe¥Ú£
(
»¥Ú£
);

413 #ià
ENABLE
(
INSPECTOR
)

414 ià(
	gIn¥eùÜTim–šeAg’t
::
š¡ªûCouÁ
()) {

415 
In¥eùÜTim–šeAg’t
* 
tim–šeAg’t
 = 
m_äame
->
·ge
(è? m_äame->·ge()->
š¥eùÜTim–šeAg’t
() : 0;

416 ià(
	gtim–šeAg’t
)

417 
	gtim–šeAg’t
->
didReûiveResourûRe¥Ú£
();

422 
	gResourûLßd”
::
didReûiveD©a
(
ResourûHªdË
*, cÚ¡ * 
d©a
, 
Ëngth
, 
ËngthReûived
)

424 #ià
ENABLE
(
INSPECTOR
)

425 ià(
	gIn¥eùÜTim–šeAg’t
::
š¡ªûCouÁ
()) {

426 
In¥eùÜTim–šeAg’t
* 
tim–šeAg’t
 = 
m_äame
->
·ge
(è? m_äame->·ge()->
š¥eùÜTim–šeAg’t
() : 0;

427 ià(
	gtim–šeAg’t
)

428 
	gtim–šeAg’t
->
wlReûiveResourûD©a
(
id’tif›r
());

431 
didReûiveD©a
(
d©a
, 
Ëngth
, 
ËngthReûived
, 
çl£
);

432 #ià
ENABLE
(
INSPECTOR
)

433 ià(
	gIn¥eùÜTim–šeAg’t
::
š¡ªûCouÁ
()) {

434 
In¥eùÜTim–šeAg’t
* 
tim–šeAg’t
 = 
m_äame
->
·ge
(è? m_äame->·ge()->
š¥eùÜTim–šeAg’t
() : 0;

435 ià(
	gtim–šeAg’t
)

436 
	gtim–šeAg’t
->
didReûiveResourûD©a
();

441 
	gResourûLßd”
::
didFšishLßdšg
(
ResourûHªdË
*)

443 
didFšishLßdšg
();

446 
	gResourûLßd”
::
didFa
(
ResourûHªdË
*, cÚ¡ 
ResourûE¼Ü
& 
”rÜ
)

448 #ià
ENABLE
(
OFFLINE_WEB_APPLICATIONS
)

449 ià(
docum’tLßd”
()->
­¶iÿtiÚCacheHo¡
()->
maybeLßdF®lbackFÜE¼Ü
(
this
, 
”rÜ
))

452 
didFa
(
”rÜ
);

455 
	gResourûLßd”
::
wasBlocked
(
ResourûHªdË
*)

457 
didFa
(
blockedE¼Ü
());

460 
	gResourûLßd”
::
ÿÂÙShowURL
(
ResourûHªdË
*)

462 
didFa
(
ÿÂÙShowURLE¼Ü
());

465 
boŞ
 
	gResourûLßd”
::
shouldU£C»d’tŸlStÜage
()

467 
RefPŒ
<
ResourûLßd”
> 
´ÙeùÜ
(
this
);

468  
äameLßd”
()->
shouldU£C»d’tŸlStÜage
(
this
);

471 
	gResourûLßd”
::
didReûiveAuth’tiÿtiÚCh®Ënge
(cÚ¡ 
Auth’tiÿtiÚCh®Ënge
& 
ch®Ënge
)

475 
RefPŒ
<
ResourûLßd”
> 
´ÙeùÜ
(
this
);

476 
äameLßd”
()->
nÙif›r
()->
didReûiveAuth’tiÿtiÚCh®Ënge
(
this
, 
ch®Ënge
);

479 
	gResourûLßd”
::
didCªûlAuth’tiÿtiÚCh®Ënge
(cÚ¡ 
Auth’tiÿtiÚCh®Ënge
& 
ch®Ënge
)

483 
RefPŒ
<
ResourûLßd”
> 
´ÙeùÜ
(
this
);

484 
äameLßd”
()->
nÙif›r
()->
didCªûlAuth’tiÿtiÚCh®Ënge
(
this
, 
ch®Ënge
);

487 
	gResourûLßd”
::
»ûivedCªûÎ©iÚ
(cÚ¡ 
Auth’tiÿtiÚCh®Ënge
&)

489 
ÿnûl
();

492 
	gResourûLßd”
::
wlCacheRe¥Ú£
(
ResourûHªdË
*, 
CacheStÜagePŞicy
& 
pŞicy
)

495 ià(
	gpŞicy
 =ğ
StÜageAÎowed
 && 
m_äame
->
£‰šgs
()->
´iv©eBrowsšgEÇbËd
())

496 
pŞicy
 = 
StÜageAÎowedInMemÜyOÆy
;

	@ResourceLoader.h

29 #iâdeà
ResourûLßd”_h


30 
	#ResourûLßd”_h


	)

32 
	~"ResourûHªdËCl›Á.h
"

33 
	~"ResourûReque¡.h
"

34 
	~"ResourûRe¥Ú£.h
"

35 
	~<wtf/RefCouÁed.h
>

36 
	~"Auth’tiÿtiÚCh®Ënge.h
"

37 
	~"KURL.h
"

39 
	~<wtf/FÜw¬d.h
>

41 
Çme¥aû
 
	gWebCÜe
 {

43 
şass
 
	gAµliÿtiÚCacheHo¡
;

44 
şass
 
	gDocum’tLßd”
;

45 
şass
 
	gF¿me
;

46 
şass
 
	gF¿meLßd”
;

47 
şass
 
	gResourûHªdË
;

48 
şass
 
	gSh¬edBufãr
;

50 
şass
 
	gResourûLßd”
 : 
public
 
RefCouÁed
<
ResourûLßd”
>, 
´Ùeùed
 
	gResourûHªdËCl›Á
 {

51 
	gpublic
:

52 
vœtu®
 ~
ResourûLßd”
();

54 
ÿnûl
();

56 
vœtu®
 
boŞ
 
lßd
(cÚ¡ 
ResourûReque¡
&);

58 
F¿meLßd”
* 
äameLßd”
() const;

59 
Docum’tLßd”
* 
docum’tLßd”
(ècÚ¡ {  
	gm_docum’tLßd”
.
g‘
(); }

61 
vœtu®
 
ÿnûl
(cÚ¡ 
ResourûE¼Ü
&);

62 
ResourûE¼Ü
 
ÿnûÎedE¼Ü
();

63 
ResourûE¼Ü
 
blockedE¼Ü
();

64 
ResourûE¼Ü
 
ÿÂÙShowURLE¼Ü
();

66 
vœtu®
 
£tDeãrsLßdšg
(
boŞ
);

68 
£tId’tif›r
(
id’tif›r
è{ 
	gm_id’tif›r
 = identifier; }

69 
id’tif›r
(ècÚ¡ {  
	gm_id’tif›r
; }

71 
vœtu®
 
»Ëa£Resourûs
();

72 cÚ¡ 
	gResourûRe¥Ú£
& 
»¥Ú£
() const;

74 
vœtu®
 
addD©a
(cÚ¡ *, , 
boŞ
 
®lAtOnû
);

75 
vœtu®
 
	gPassRefPŒ
<
	gSh¬edBufãr
> 
»sourûD©a
();

76 
ş—rResourûD©a
();

78 
vœtu®
 
wlS’dReque¡
(
ResourûReque¡
&, cÚ¡ 
ResourûRe¥Ú£
& 
»dœeùRe¥Ú£
);

79 
vœtu®
 
didS’dD©a
(
by‹sS’t
, 
tÙ®By‹sToBeS’t
);

80 
vœtu®
 
didReûiveRe¥Ú£
(cÚ¡ 
ResourûRe¥Ú£
&);

81 
vœtu®
 
didReûiveD©a
(cÚ¡ *, , 
ËngthReûived
, 
boŞ
 
®lAtOnû
);

82 
wlStİBufãršgD©a
(const *, );

83 
vœtu®
 
didFšishLßdšg
();

84 
vœtu®
 
didFa
(cÚ¡ 
ResourûE¼Ü
&);

86 
vœtu®
 
boŞ
 
shouldU£C»d’tŸlStÜage
();

87 
vœtu®
 
didReûiveAuth’tiÿtiÚCh®Ënge
(cÚ¡ 
Auth’tiÿtiÚCh®Ënge
&);

88 
didCªûlAuth’tiÿtiÚCh®Ënge
(cÚ¡ 
Auth’tiÿtiÚCh®Ënge
&);

89 
vœtu®
 
»ûivedCªûÎ©iÚ
(cÚ¡ 
Auth’tiÿtiÚCh®Ënge
&);

92 
vœtu®
 
wlS’dReque¡
(
ResourûHªdË
*, 
ResourûReque¡
&, cÚ¡ 
ResourûRe¥Ú£
& 
»dœeùRe¥Ú£
);

93 
vœtu®
 
didS’dD©a
(
ResourûHªdË
*, 
by‹sS’t
, 
tÙ®By‹sToBeS’t
);

94 
vœtu®
 
didReûiveRe¥Ú£
(
ResourûHªdË
*, cÚ¡ 
ResourûRe¥Ú£
&);

95 
vœtu®
 
didReûiveD©a
(
ResourûHªdË
*, cÚ¡ *, , 
ËngthReûived
);

96 
vœtu®
 
didFšishLßdšg
(
ResourûHªdË
*);

97 
vœtu®
 
didFa
(
ResourûHªdË
*, cÚ¡ 
ResourûE¼Ü
&);

98 
vœtu®
 
wasBlocked
(
ResourûHªdË
*);

99 
vœtu®
 
ÿÂÙShowURL
(
ResourûHªdË
*);

100 
vœtu®
 
wlStİBufãršgD©a
(
ResourûHªdË
*, cÚ¡ * 
d©a
, 
Ëngth
) { willStopBufferingData(data,†ength); }

101 
vœtu®
 
boŞ
 
shouldU£C»d’tŸlStÜage
(
ResourûHªdË
*) {  shouldUseCredentialStorage(); }

102 
vœtu®
 
didReûiveAuth’tiÿtiÚCh®Ënge
(
ResourûHªdË
*, cÚ¡ 
Auth’tiÿtiÚCh®Ënge
& 
ch®Ënge
) { didReceiveAuthenticationChallenge(challenge); }

103 
vœtu®
 
didCªûlAuth’tiÿtiÚCh®Ënge
(
ResourûHªdË
*, cÚ¡ 
Auth’tiÿtiÚCh®Ënge
& 
ch®Ënge
) { didCancelAuthenticationChallenge(challenge); }

104 
vœtu®
 
»ûivedCªûÎ©iÚ
(
ResourûHªdË
*, cÚ¡ 
Auth’tiÿtiÚCh®Ënge
& 
ch®Ënge
) {„eceivedCancellation(challenge); }

105 
vœtu®
 
wlCacheRe¥Ú£
(
ResourûHªdË
*, 
CacheStÜagePŞicy
&);

106 #ià
PLATFORM
(
MAC
)

107 
vœtu®
 
NSCachedURLRe¥Ú£
* 
wlCacheRe¥Ú£
(
ResourûHªdË
*, NSCachedURLResponse*);

109 #ià
USE
(
CFNETWORK
)

110 
vœtu®
 
boŞ
 
shouldCacheRe¥Ú£
(
ResourûHªdË
*, 
CFCachedURLRe¥Ú£Ref
);

113 
ResourûHªdË
* 
hªdË
(ècÚ¡ {  
	gm_hªdË
.
g‘
(); }

114 
boŞ
 
£ndResourûLßdC®lbacks
(ècÚ¡ {  
	gm_£ndResourûLßdC®lbacks
; }

116 
£tShouldBufãrD©a
(
boŞ
 
shouldBufãrD©a
);

118 
	g´Ùeùed
:

119 
ResourûLßd”
(
F¿me
*, 
boŞ
 
£ndResourûLßdC®lbacks
, boŞ 
shouldCÚ‹ÁSniff
);

121 #ià
ENABLE
(
OFFLINE_WEB_APPLICATIONS
)

122 
ä›nd
 
şass
 
	gAµliÿtiÚCacheHo¡
;

125 
vœtu®
 
didCªûl
(cÚ¡ 
ResourûE¼Ü
&);

126 
didFšishLßdšgOÃP¬t
();

128 cÚ¡ 
	gResourûReque¡
& 
»que¡
(ècÚ¡ {  
	gm_»que¡
; }

129 
boŞ
 
»achedT”mš®S‹
(ècÚ¡ {  
	gm_»achedT”mš®S‹
; }

130 
boŞ
 
ÿnûÎed
(ècÚ¡ {  
	gm_ÿnûÎed
; }

131 
boŞ
 
deãrsLßdšg
(ècÚ¡ {  
	gm_deãrsLßdšg
; }

133 
	gRefPŒ
<
	gResourûHªdË
> 
	gm_hªdË
;

134 
	gRefPŒ
<
	gF¿me
> 
	gm_äame
;

135 
	gRefPŒ
<
	gDocum’tLßd”
> 
	gm_docum’tLßd”
;

136 
ResourûRe¥Ú£
 
	gm_»¥Ú£
;

138 
	g´iv©e
:

139 
ResourûReque¡
 
m_»que¡
;

140 
	gRefPŒ
<
	gSh¬edBufãr
> 
	gm_»sourûD©a
;

142 
	gm_id’tif›r
;

144 
boŞ
 
	gm_»achedT”mš®S‹
;

145 
boŞ
 
	gm_ÿnûÎed
;

146 
boŞ
 
	gm_ÿÎedDidFšishLßd
;

148 
boŞ
 
	gm_£ndResourûLßdC®lbacks
;

149 
boŞ
 
	gm_shouldCÚ‹ÁSniff
;

150 
boŞ
 
	gm_shouldBufãrD©a
;

151 
boŞ
 
	gm_deãrsLßdšg
;

152 
ResourûReque¡
 
	gm_deã¼edReque¡
;

	@SubresourceLoader.cpp

29 
	~"cÚfig.h
"

30 
	~"Sub»sourûLßd”.h
"

32 
	~"Docum’tLßd”.h
"

33 
	~"F¿me.h
"

34 
	~"F¿meLßd”.h
"

35 
	~"ResourûHªdË.h
"

36 
	~"Secur™yOrigš.h
"

37 
	~"Sub»sourûLßd”Cl›Á.h
"

38 
	~<wtf/RefCouÁedL—kCouÁ”.h
>

40 
Çme¥aû
 
	gWebCÜe
 {

42 #iâdeà
NDEBUG


43 
	gWTF
::
RefCouÁedL—kCouÁ”
 
sub»sourûLßd”CouÁ”
("SubresourceLoader");

46 
	gSub»sourûLßd”
::
Sub»sourûLßd”
(
F¿me
* 
äame
, 
Sub»sourûLßd”Cl›Á
* 
ş›Á
, 
boŞ
 
£ndResourûLßdC®lbacks
, boŞ 
shouldCÚ‹ÁSniff
)

47 : 
ResourûLßd”
(
äame
, 
£ndResourûLßdC®lbacks
, 
shouldCÚ‹ÁSniff
)

48 , 
m_ş›Á
(
ş›Á
)

49 , 
m_lßdšgMuÉ¬tCÚ‹Á
(
çl£
)

51 #iâdeà
NDEBUG


52 
	gsub»sourûLßd”CouÁ”
.
šüem’t
();

54 
	gm_docum’tLßd”
->
addSub»sourûLßd”
(
this
);

57 
	gSub»sourûLßd”
::~
Sub»sourûLßd”
()

59 #iâdeà
NDEBUG


60 
sub»sourûLßd”CouÁ”
.
deüem’t
();

64 
	gPassRefPŒ
<
	gSub»sourûLßd”
> Sub»sourûLßd”::
ü—‹
(
F¿me
* 
äame
, 
Sub»sourûLßd”Cl›Á
* 
ş›Á
, cÚ¡ 
ResourûReque¡
& 
»que¡
, 
Secur™yCheckPŞicy
 
£cur™yCheck
, 
boŞ
 
£ndResourûLßdC®lbacks
, boŞ 
shouldCÚ‹ÁSniff
)

66 ià(!
	gäame
)

69 
F¿meLßd”
* 
	gæ
 = 
äame
->
lßd”
();

70 ià(
	g£cur™yCheck
 =ğ
DoSecur™yCheck
 && (
æ
->
¡©e
(è=ğ
F¿meS‹ProvisiÚ®
 || fl->
aùiveDocum’tLßd”
()->
isStİpšg
()))

73 
ResourûReque¡
 
	gÃwReque¡
 = 
»que¡
;

75 ià(
	g£cur™yCheck
 =ğ
DoSecur™yCheck


76 && 
Secur™yOrigš
::
»¡riùAcûssToLoÿl
()

77 && !
Secur™yOrigš
::
ÿnLßd
(
»que¡
.
u¾
(), 
SŒšg
(), 
äame
->
docum’t
())) {

78 
	gF¿meLßd”
::
»pÜtLoÿlLßdFaed
(
äame
, 
»que¡
.
u¾
().
¡ršg
());

82 ià(
	gSecur™yOrigš
::
shouldHideReã¼”
(
»que¡
.
u¾
(), 
æ
->
outgošgReã¼”
()))

83 
	gÃwReque¡
.
ş—rHTTPReã¼”
();

84 ià(!
	g»que¡
.
h‰pReã¼”
())

85 
	gÃwReque¡
.
£tHTTPReã¼”
(
æ
->
outgošgReã¼”
());

86 
	gF¿meLßd”
::
addHTTPOrigšIfN“ded
(
ÃwReque¡
, 
æ
->
outgošgOrigš
());

94 ià(
	gÃwReque¡
.
isCÚd™iÚ®
())

95 
	gÃwReque¡
.
£tCachePŞicy
(
R–ßdIgnÜšgCacheD©a
);

97 
	gÃwReque¡
.
£tCachePŞicy
(
æ
->
Üigš®Reque¡
().
ÿchePŞicy
());

99 
	gæ
->
addExŒaF›ldsToSub»sourûReque¡
(
ÃwReque¡
);

101 
	gRefPŒ
<
	gSub»sourûLßd”
> 
sublßd”
(
adİtRef
(
Ãw
 
Sub»sourûLßd”
(
äame
, 
ş›Á
, 
£ndResourûLßdC®lbacks
, 
shouldCÚ‹ÁSniff
)));

102 ià(!
	gsublßd”
->
lßd
(
ÃwReque¡
))

105  
	gsublßd”
.
»Ëa£
();

108 
	gSub»sourûLßd”
::
wlS’dReque¡
(
ResourûReque¡
& 
ÃwReque¡
, cÚ¡ 
ResourûRe¥Ú£
& 
»dœeùRe¥Ú£
)

111 
KURL
 
	g´eviousURL
 = 
»que¡
().
u¾
();

113 
	gResourûLßd”
::
wlS’dReque¡
(
ÃwReque¡
, 
»dœeùRe¥Ú£
);

114 ià(!
	g´eviousURL
.
isNuÎ
(è&& !
	gÃwReque¡
.isNuÎ(è&&…»viousURL !ğ
ÃwReque¡
.
u¾
(è&& 
m_ş›Á
)

115 
m_ş›Á
->
wlS’dReque¡
(
this
, 
ÃwReque¡
, 
»dœeùRe¥Ú£
);

118 
	gSub»sourûLßd”
::
didS’dD©a
(
by‹sS’t
, 
tÙ®By‹sToBeS’t
)

120 
	gRefPŒ
<
	gSub»sourûLßd”
> 
´Ùeù
(
this
);

122 ià(
	gm_ş›Á
)

123 
	gm_ş›Á
->
didS’dD©a
(
this
, 
by‹sS’t
, 
tÙ®By‹sToBeS’t
);

126 
	gSub»sourûLßd”
::
didReûiveRe¥Ú£
(cÚ¡ 
ResourûRe¥Ú£
& 
r
)

128 
ASSERT
(!
r
.
isNuÎ
());

130 ià(
	gr
.
isMuÉ¬t
())

131 
	gm_lßdšgMuÉ¬tCÚ‹Á
 = 
Œue
;

135 
	gRefPŒ
<
	gSub»sourûLßd”
> 
´Ùeù
(
this
);

137 ià(
	gm_ş›Á
)

138 
	gm_ş›Á
->
didReûiveRe¥Ú£
(
this
, 
r
);

141 ià(
»achedT”mš®S‹
())

143 
	gResourûLßd”
::
didReûiveRe¥Ú£
(
r
);

145 
	gRefPŒ
<
	gSh¬edBufãr
> 
	gbufãr
 = 
»sourûD©a
();

146 ià(
	gm_lßdšgMuÉ¬tCÚ‹Á
 && 
	gbufãr
 && bufãr->
size
()) {

150 ià(
	gm_ş›Á
)

151 
	gm_ş›Á
->
didReûiveD©a
(
this
, 
bufãr
->
d©a
(), bufãr->
size
());

152 
ş—rResourûD©a
();

155 
	gm_docum’tLßd”
->
sub»sourûLßd”FšishedLßdšgOÃP¬t
(
this
);

156 
didFšishLßdšgOÃP¬t
();

160 
	gSub»sourûLßd”
::
didReûiveD©a
(cÚ¡ * 
d©a
, 
Ëngth
, 
ËngthReûived
, 
boŞ
 
®lAtOnû
)

164 
	gRefPŒ
<
	gSub»sourûLßd”
> 
´Ùeù
(
this
);

166 
	gResourûLßd”
::
didReûiveD©a
(
d©a
, 
Ëngth
, 
ËngthReûived
, 
®lAtOnû
);

170 ià(!
	gm_lßdšgMuÉ¬tCÚ‹Á
 && 
	gm_ş›Á
)

171 
	gm_ş›Á
->
didReûiveD©a
(
this
, 
d©a
, 
Ëngth
);

174 
	gSub»sourûLßd”
::
didFšishLßdšg
()

176 ià(
ÿnûÎed
())

178 
ASSERT
(!
»achedT”mš®S‹
());

181 
	gRefPŒ
<
	gSub»sourûLßd”
> 
´Ùeù
(
this
);

183 ià(
	gm_ş›Á
)

184 
	gm_ş›Á
->
didFšishLßdšg
(
this
);

186 
	gm_hªdË
 = 0;

188 ià(
ÿnûÎed
())

190 
	gm_docum’tLßd”
->
»moveSub»sourûLßd”
(
this
);

191 
	gResourûLßd”
::
didFšishLßdšg
();

194 
	gSub»sourûLßd”
::
didFa
(cÚ¡ 
ResourûE¼Ü
& 
”rÜ
)

196 ià(
ÿnûÎed
())

198 
ASSERT
(!
»achedT”mš®S‹
());

201 
	gRefPŒ
<
	gSub»sourûLßd”
> 
´Ùeù
(
this
);

203 ià(
	gm_ş›Á
)

204 
	gm_ş›Á
->
didFa
(
this
, 
”rÜ
);

206 
	gm_hªdË
 = 0;

208 ià(
ÿnûÎed
())

210 
	gm_docum’tLßd”
->
»moveSub»sourûLßd”
(
this
);

211 
	gResourûLßd”
::
didFa
(
”rÜ
);

214 
	gSub»sourûLßd”
::
didCªûl
(cÚ¡ 
ResourûE¼Ü
& 
”rÜ
)

216 
ASSERT
(!
»achedT”mš®S‹
());

219 
	gRefPŒ
<
	gSub»sourûLßd”
> 
´Ùeù
(
this
);

221 ià(
	gm_ş›Á
)

222 
	gm_ş›Á
->
didFa
(
this
, 
”rÜ
);

224 ià(
ÿnûÎed
())

229 
ASSERT
(!
»achedT”mš®S‹
());

230 ià(
»achedT”mš®S‹
())

233 
	gm_docum’tLßd”
->
»moveSub»sourûLßd”
(
this
);

234 
	gResourûLßd”
::
didCªûl
(
”rÜ
);

237 
boŞ
 
	gSub»sourûLßd”
::
shouldU£C»d’tŸlStÜage
()

239 
RefPŒ
<
Sub»sourûLßd”
> 
´Ùeù
(
this
);

241 
boŞ
 
	gshouldU£
;

242 ià(
	gm_ş›Á
 && m_ş›Á->
g‘ShouldU£C»d’tŸlStÜage
(
this
, 
shouldU£
))

243  
	gshouldU£
;

245  
	gResourûLßd”
::
shouldU£C»d’tŸlStÜage
();

248 
	gSub»sourûLßd”
::
didReûiveAuth’tiÿtiÚCh®Ënge
(cÚ¡ 
Auth’tiÿtiÚCh®Ënge
& 
ch®Ënge
)

250 
RefPŒ
<
Sub»sourûLßd”
> 
´Ùeù
(
this
);

252 ià(
	gm_ş›Á
)

253 
	gm_ş›Á
->
didReûiveAuth’tiÿtiÚCh®Ënge
(
this
, 
ch®Ënge
);

257 ià(
»achedT”mš®S‹
())

260 
	gResourûLßd”
::
didReûiveAuth’tiÿtiÚCh®Ënge
(
ch®Ënge
);

263 
	gSub»sourûLßd”
::
»ûivedCªûÎ©iÚ
(cÚ¡ 
Auth’tiÿtiÚCh®Ënge
& 
ch®Ënge
)

265 
ASSERT
(!
»achedT”mš®S‹
());

267 
	gRefPŒ
<
	gSub»sourûLßd”
> 
´Ùeù
(
this
);

269 ià(
	gm_ş›Á
)

270 
	gm_ş›Á
->
»ûivedCªûÎ©iÚ
(
this
, 
ch®Ënge
);

272 
	gResourûLßd”
::
»ûivedCªûÎ©iÚ
(
ch®Ënge
);

	@SubresourceLoader.h

29 #iâdeà
Sub»sourûLßd”_h


30 
	#Sub»sourûLßd”_h


	)

32 
	~"F¿meLßd”Ty³s.h
"

33 
	~"ResourûLßd”.h
"

35 
Çme¥aû
 
	gWebCÜe
 {

37 
şass
 
	gResourûReque¡
;

38 
şass
 
	gSub»sourûLßd”Cl›Á
;

40 şas 
	cSub»sourûLßd”
 : 
public
 
ResourûLßd”
 {

41 
public
:

42 
PassRefPŒ
<
Sub»sourûLßd”
> 
ü—‹
(
F¿me
*, 
Sub»sourûLßd”Cl›Á
*, cÚ¡ 
ResourûReque¡
&, 
Secur™yCheckPŞicy
 = 
DoSecur™yCheck
, 
boŞ
 
£ndResourûLßdC®lbacks
 = 
Œue
, boŞ 
shouldCÚ‹ÁSniff
 =rue);

44 
ş—rCl›Á
(è{ 
	gm_ş›Á
 = 0; }

46 
	g´iv©e
:

47 
Sub»sourûLßd”
(
F¿me
*, 
Sub»sourûLßd”Cl›Á
*, 
boŞ
 
£ndResourûLßdC®lbacks
, boŞ 
shouldCÚ‹ÁSniff
);

48 
	gvœtu®
 ~
Sub»sourûLßd”
();

50 
vœtu®
 
wlS’dReque¡
(
ResourûReque¡
&, cÚ¡ 
ResourûRe¥Ú£
& 
»dœeùRe¥Ú£
);

51 
vœtu®
 
didS’dD©a
(
by‹sS’t
, 
tÙ®By‹sToBeS’t
);

52 
vœtu®
 
didReûiveRe¥Ú£
(cÚ¡ 
ResourûRe¥Ú£
&);

53 
vœtu®
 
didReûiveD©a
(cÚ¡ *, , 
ËngthReûived
, 
boŞ
 
®lAtOnû
);

54 
vœtu®
 
didFšishLßdšg
();

55 
vœtu®
 
didFa
(cÚ¡ 
ResourûE¼Ü
&);

56 
vœtu®
 
boŞ
 
shouldU£C»d’tŸlStÜage
();

57 
vœtu®
 
didReûiveAuth’tiÿtiÚCh®Ënge
(cÚ¡ 
Auth’tiÿtiÚCh®Ënge
&);

58 
vœtu®
 
»ûivedCªûÎ©iÚ
(cÚ¡ 
Auth’tiÿtiÚCh®Ënge
&);

59 
vœtu®
 
didCªûl
(cÚ¡ 
ResourûE¼Ü
&);

61 
Sub»sourûLßd”Cl›Á
* 
	gm_ş›Á
;

62 
boŞ
 
	gm_lßdšgMuÉ¬tCÚ‹Á
;

	@SubresourceLoaderClient.h

29 #iâdeà
Sub»sourûLßd”Cl›Á_h


30 
	#Sub»sourûLßd”Cl›Á_h


	)

32 
Çme¥aû
 
	gWebCÜe
 {

34 
şass
 
	gAuth’tiÿtiÚCh®Ënge
;

35 
şass
 
	gResourûE¼Ü
;

36 
şass
 
	gResourûReque¡
;

37 
şass
 
	gResourûRe¥Ú£
;

38 
şass
 
	gSub»sourûLßd”
;

40 şas 
	cSub»sourûLßd”Cl›Á
 {

41 
	gpublic
:

42 
vœtu®
 ~
Sub»sourûLßd”Cl›Á
() { }

45 
vœtu®
 
wlS’dReque¡
(
Sub»sourûLßd”
*, 
ResourûReque¡
&, cÚ¡ 
ResourûRe¥Ú£
& ) { }

46 
vœtu®
 
didS’dD©a
(
Sub»sourûLßd”
*, , ) { }

48 
vœtu®
 
didReûiveRe¥Ú£
(
Sub»sourûLßd”
*, cÚ¡ 
ResourûRe¥Ú£
&) { }

49 
vœtu®
 
didReûiveD©a
(
Sub»sourûLßd”
*, const *, ) { }

50 
vœtu®
 
didFšishLßdšg
(
Sub»sourûLßd”
*) { }

51 
vœtu®
 
didFa
(
Sub»sourûLßd”
*, cÚ¡ 
ResourûE¼Ü
&) { }

53 
vœtu®
 
boŞ
 
g‘ShouldU£C»d’tŸlStÜage
(
Sub»sourûLßd”
*, boŞ& ) {  
	gçl£
; }

54 
vœtu®
 
didReûiveAuth’tiÿtiÚCh®Ënge
(
Sub»sourûLßd”
*, cÚ¡ 
Auth’tiÿtiÚCh®Ënge
&) { }

55 
vœtu®
 
»ûivedCªûÎ©iÚ
(
Sub»sourûLßd”
*, cÚ¡ 
Auth’tiÿtiÚCh®Ënge
&) { }

	@SubstituteData.h

26 #iâdeà
Sub¡™u‹D©a_h


27 
	#Sub¡™u‹D©a_h


	)

29 
	~"KURL.h
"

30 
	~"Sh¬edBufãr.h
"

31 
	~"PÏtfÜmSŒšg.h
"

32 
	~<wtf/PassRefPŒ.h
>

33 
	~<wtf/RefPŒ.h
>

35 
Çme¥aû
 
	gWebCÜe
 {

37 şas 
	cSub¡™u‹D©a
 {

38 
	gpublic
:

39 
Sub¡™u‹D©a
() { }

41 
Sub¡™u‹D©a
(
PassRefPŒ
<
Sh¬edBufãr
> 
cÚ‹Á
, cÚ¡ 
SŒšg
& 
mimeTy³
, cÚ¡ SŒšg& 
‹xtEncodšg
, cÚ¡ 
KURL
& 
çšgURL
, cÚ¡ KURL& 
»¥Ú£URL
 = KURL())

42 : 
m_cÚ‹Á
(
cÚ‹Á
)

43 , 
m_mimeTy³
(
mimeTy³
)

44 , 
m_‹xtEncodšg
(
‹xtEncodšg
)

45 , 
m_çšgURL
(
çšgURL
)

46 , 
m_»¥Ú£URL
(
»¥Ú£URL
)

50 
boŞ
 
isV®id
(ècÚ¡ {  
	gm_cÚ‹Á
 != 0; }

52 cÚ¡ 
Sh¬edBufãr
* 
cÚ‹Á
(ècÚ¡ {  
	gm_cÚ‹Á
.
g‘
(); }

53 cÚ¡ 
	gSŒšg
& 
mimeTy³
(ècÚ¡ {  
	gm_mimeTy³
; }

54 cÚ¡ 
	gSŒšg
& 
‹xtEncodšg
(ècÚ¡ {  
	gm_‹xtEncodšg
; }

55 cÚ¡ 
	gKURL
& 
çšgURL
(ècÚ¡ {  
	gm_çšgURL
; }

56 cÚ¡ 
	gKURL
& 
»¥Ú£URL
(ècÚ¡ {  
	gm_»¥Ú£URL
; }

58 
	g´iv©e
:

59 
RefPŒ
<
Sh¬edBufãr
> 
m_cÚ‹Á
;

60 
SŒšg
 
	gm_mimeTy³
;

61 
SŒšg
 
	gm_‹xtEncodšg
;

62 
KURL
 
	gm_çšgURL
;

63 
KURL
 
	gm_»¥Ú£URL
;

	@SubstituteResource.h

26 #iâdeà
Sub¡™u‹Resourû_h


27 
	#Sub¡™u‹Resourû_h


	)

29 
	~<wtf/RefCouÁed.h
>

31 
	~"KURL.h
"

32 
	~"ResourûRe¥Ú£.h
"

33 
	~"Sh¬edBufãr.h
"

35 
	~<wtf/RefPŒ.h
>

37 
Çme¥aû
 
	gWebCÜe
 {

39 
şass
 
	gSub¡™u‹Resourû
 : 
public
 
RefCouÁed
<
Sub¡™u‹Resourû
> {

40 
public
:

41 
vœtu®
 ~
Sub¡™u‹Resourû
() { }

43 cÚ¡ 
KURL
& 
u¾
(ècÚ¡ {  
m_u¾
; }

44 cÚ¡ 
	gResourûRe¥Ú£
& 
»¥Ú£
(ècÚ¡ {  
	gm_»¥Ú£
; }

45 
Sh¬edBufãr
* 
d©a
(ècÚ¡ {  
	gm_d©a
.
g‘
(); }

47 
	g´Ùeùed
:

48 
Sub¡™u‹Resourû
(cÚ¡ 
KURL
& 
u¾
, cÚ¡ 
ResourûRe¥Ú£
& 
»¥Ú£
, 
PassRefPŒ
<
Sh¬edBufãr
> 
d©a
)

49 : 
m_u¾
(
u¾
)

50 , 
m_»¥Ú£
(
»¥Ú£
)

51 , 
m_d©a
(
d©a
)

53 
ASSERT
(
m_d©a
);

56 
	g´iv©e
:

57 
KURL
 
m_u¾
;

58 
ResourûRe¥Ú£
 
	gm_»¥Ú£
;

59 
	gRefPŒ
<
	gSh¬edBufãr
> 
	gm_d©a
;

	@TextDocument.cpp

25 
	~"cÚfig.h
"

26 
	~"TextDocum’t.h
"

28 
	~"EËm’t.h
"

29 
	~"HTMLNames.h
"

30 
	~"HTMLV›wSourûDocum’t.h
"

31 
	~"Segm’‹dSŒšg.h
"

32 
	~"Text.h
"

33 
	~"XMLTok’iz”.h
"

35 
usšg
 
Çme¥aû
 
	g¡d
;

37 
Çme¥aû
 
	gWebCÜe
 {

39 
usšg
 
Çme¥aû
 
	gHTMLNames
;

41 şas 
	cTextTok’iz”
 : 
public
 
Tok’iz”
 {

42 
public
:

43 
TextTok’iz”
(
Docum’t
*);

44 
	gvœtu®
 ~
TextTok’iz”
();

45 
TextTok’iz”
(
HTMLV›wSourûDocum’t
*);

47 
vœtu®
 
wr™e
(cÚ¡ 
Segm’‹dSŒšg
&, 
boŞ
 
­³ndD©a
);

48 
vœtu®
 
fšish
();

49 
vœtu®
 
boŞ
 
isWa™šgFÜSüts
() const;

51 
šlše
 
checkBufãr
(
Ën
 = 10)

53 ià((
m_de¡
 - 
m_bufãr
è> 
m_size
 - 
Ën
) {

55 
ÃwSize
 = 
¡d
::
max
(
m_size
 * 2, m_siz+ 
Ën
);

56 
	gŞdOff£t
 = 
m_de¡
 - 
m_bufãr
;

57 
	gm_bufãr
 = 
¡©ic_ÿ¡
<
UCh¬
*>(
ç¡R—Îoc
(
m_bufãr
, 
ÃwSize
 * (UChar)));

58 
	gm_de¡
 = 
m_bufãr
 + 
ŞdOff£t
;

59 
	gm_size
 = 
ÃwSize
;

63 
	g´iv©e
:

64 
Docum’t
* 
m_doc
;

65 
EËm’t
* 
	gm_´eEËm’t
;

67 
boŞ
 
	gm_skLF
;

69 
	gm_size
;

70 
UCh¬
* 
	gm_bufãr
;

71 
UCh¬
* 
	gm_de¡
;

74 
	gTextTok’iz”
::
	$TextTok’iz”
(
Docum’t
* 
doc
)

75 : 
	`m_doc
(
doc
)

76 , 
	`m_´eEËm’t
(0)

77 , 
	$m_skLF
(
çl£
)

80 
m_size
 = 254;

81 
m_bufãr
 = 
¡©ic_ÿ¡
<
UCh¬
*>(
	`ç¡M®loc
((UCh¬è* 
m_size
));

82 
m_de¡
 = 
m_bufãr
;

83 
	}
}

85 
	gTextTok’iz”
::
	$TextTok’iz”
(
HTMLV›wSourûDocum’t
* 
doc
)

86 : 
	`Tok’iz”
(
Œue
)

87 , 
	`m_doc
(
doc
)

88 , 
	`m_´eEËm’t
(0)

89 , 
	$m_skLF
(
çl£
)

92 
m_size
 = 254;

93 
m_bufãr
 = 
¡©ic_ÿ¡
<
UCh¬
*>(
	`ç¡M®loc
((UCh¬è* 
m_size
));

94 
m_de¡
 = 
m_bufãr
;

95 
	}
}

97 
	gTextTok’iz”
::~
	$TextTok’iz”
()

100 
	`ASSERT
(!
m_bufãr
);

101 
	}
}

103 
	gTextTok’iz”
::
	$wr™e
(cÚ¡ 
Segm’‹dSŒšg
& 
s
, 
boŞ
)

105 
Exû±iÚCode
 
ec
;

107 
m_de¡
 = 
m_bufãr
;

109 
Segm’‹dSŒšg
 
¡r
 = 
s
;

110 !
¡r
.
	`isEm±y
()) {

111 
UCh¬
 
c
 = *
¡r
;

113 ià(
c
 == '\r') {

114 *
m_de¡
++ = '\n';

117 
m_skLF
 = 
Œue
;

118 } ià(
c
 == '\n') {

119 ià(!
m_skLF
)

120 *
m_de¡
++ = 
c
;

122 
m_skLF
 = 
çl£
;

124 *
m_de¡
++ = 
c
;

125 
m_skLF
 = 
çl£
;

128 
¡r
.
	`advªû
();

131 
	`checkBufãr
();

134 ià(!
m_´eEËm’t
 && !
	`šV›wSourûMode
()) {

135 
RefPŒ
<
EËm’t
> 
roÙEËm’t
 = 
m_doc
->
	`ü—‹EËm’t
(
htmlTag
, 
çl£
);

136 
m_doc
->
	`­³ndChd
(
roÙEËm’t
, 
ec
);

138 
RefPŒ
<
EËm’t
> 
body
 = 
m_doc
->
	`ü—‹EËm’t
(
bodyTag
, 
çl£
);

139 
roÙEËm’t
->
	`­³ndChd
(
body
, 
ec
);

141 
RefPŒ
<
EËm’t
> 
´eEËm’t
 = 
m_doc
->
	`ü—‹EËm’t
(
´eTag
, 
çl£
);

142 
´eEËm’t
->
	`£tA‰ribu‹
("¡yË", "wÜd-w¿p: b»ak-wÜd; wh™e-¥aû:…»-w¿p;", 
ec
);

144 
body
->
	`­³ndChd
(
´eEËm’t
, 
ec
);

146 
m_´eEËm’t
 = 
´eEËm’t
.
	`g‘
();

149 
SŒšg
 
¡ršg
 = 
	`SŒšg
(
m_bufãr
, 
m_de¡
 - m_buffer);

150 ià(
	`šV›wSourûMode
()) {

151 
¡©ic_ÿ¡
<
HTMLV›wSourûDocum’t
*>(
m_doc
)->
	`addV›wSourûText
(
¡ršg
);

155 
ch¬sLeá
 = 
¡ršg
.
	`Ëngth
();

156 
ch¬sLeá
) {

158 
RefPŒ
<
Text
> 
‹xt
 = Text::
	`ü—‹W™hL’gthLim™
(
m_doc
, 
¡ršg
, 
ch¬sLeá
);

159 
m_´eEËm’t
->
	`­³ndChd
(
‹xt
, 
ec
);

161 
	}
}

163 
	gTextTok’iz”
::
	$fšish
()

165 ià(!
m_´eEËm’t
)

166 
	`wr™e
(
	`Segm’‹dSŒšg
(), 
Œue
);

167 
m_´eEËm’t
 = 0;

168 
	`ç¡F»e
(
m_bufãr
);

169 
m_bufãr
 = 0;

170 
m_de¡
 = 0;

172 
m_doc
->
	`fšishedP¬sšg
();

173 
	}
}

175 
boŞ
 
	gTextTok’iz”
::
	$isWa™šgFÜSüts
() const

178  
çl£
;

179 
	}
}

181 
	gTextDocum’t
::
	$TextDocum’t
(
F¿me
* 
äame
)

182 : 
	$HTMLDocum’t
(
äame
)

184 
	}
}

186 
Tok’iz”
* 
TextDocum’t
::
	$ü—‹Tok’iz”
()

188  
Ãw
 
	`TextTok’iz”
(
this
);

189 
	}
}

191 
Tok’iz”
* 
	$ü—‹TextTok’iz”
(
HTMLV›wSourûDocum’t
* 
docum’t
)

193  
Ãw
 
	`TextTok’iz”
(
docum’t
);

194 
	}
}

	@TextDocument.h

25 #iâdeà
TextDocum’t_h


26 
	#TextDocum’t_h


	)

28 
	~"HTMLDocum’t.h
"

30 
Çme¥aû
 
	gWebCÜe
 {

32 
şass
 
	gHTMLV›wSourûDocum’t
;

34 şas 
	cTextDocum’t
 : 
public
 
HTMLDocum’t
 {

35 
public
:

36 
PassRefPŒ
<
TextDocum’t
> 
ü—‹
(
F¿me
* 
äame
)

38  
adİtRef
(
Ãw
 
TextDocum’t
(
äame
));

41 
	g´iv©e
:

42 
TextDocum’t
(
F¿me
*);

44 
vœtu®
 
Tok’iz”
* 
ü—‹Tok’iz”
();

47 
Tok’iz”
* 
ü—‹TextTok’iz”
(
HTMLV›wSourûDocum’t
*);

	@TextResourceDecoder.cpp

23 
	~"cÚfig.h
"

24 
	~"TextResourûDecod”.h
"

26 
	~"DOMIm¶em’tiÚ.h
"

27 
	~"HTMLNames.h
"

28 
	~"TextCodec.h
"

29 
	~"TextEncodšg.h
"

30 
	~"TextEncodšgD‘eùÜ.h
"

31 
	~"TextEncodšgRegi¡ry.h
"

32 
	~<wtf/ASCIICTy³.h
>

33 
	~<wtf/SŒšgExŒas.h
>

35 
usšg
 
Çme¥aû
 
	gWTF
;

37 
Çme¥aû
 
	gWebCÜe
 {

39 
usšg
 
Çme¥aû
 
	gHTMLNames
;

45 
fšd
(cÚ¡ * 
subjeù
, 
size_t
 
subjeùL’gth
, cÚ¡ * 
rg‘
)

47 
size_t
 
	grg‘L’gth
 = 
¡¾’
(
rg‘
);

48 ià(
	grg‘L’gth
 > 
	gsubjeùL’gth
)

50 
size_t
 
	gi
 = 0; i <ğ
subjeùL’gth
 - 
rg‘L’gth
; ++i) {

51 
boŞ
 
	gm©ch
 = 
Œue
;

52 
size_t
 
	gj
 = 0; j < 
	grg‘L’gth
; ++j) {

53 ià(
	gsubjeù
[
i
 + 
j
] !ğ
rg‘
[j]) {

54 
m©ch
 = 
çl£
;

58 ià(
	gm©ch
)

59  
	gi
;

64 
fšdIgnÜšgCa£
(cÚ¡ * 
subjeù
, 
size_t
 
subjeùL’gth
, cÚ¡ * 
rg‘
)

66 
size_t
 
	grg‘L’gth
 = 
¡¾’
(
rg‘
);

67 ià(
	grg‘L’gth
 > 
	gsubjeùL’gth
)

69 #iâdeà
NDEBUG


70 
size_t
 
	gi
 = 0; i < 
	grg‘L’gth
; ++i)

71 
ASSERT
(
isASCIILow”
(
rg‘
[
i
]));

73 
size_t
 
	gi
 = 0; i <ğ
subjeùL’gth
 - 
rg‘L’gth
; ++i) {

74 
boŞ
 
	gm©ch
 = 
Œue
;

75 
size_t
 
	gj
 = 0; j < 
	grg‘L’gth
; ++j) {

76 ià(
toASCIILow”
(
subjeù
[
i
 + 
j
]è!ğ
rg‘
[j]) {

77 
m©ch
 = 
çl£
;

81 ià(
	gm©ch
)

82  
	gi
;

87 
TextEncodšg
 
fšdTextEncodšg
(cÚ¡ * 
’codšgName
, 
Ëngth
)

89 
	gVeùÜ
<, 64> 
bufãr
(
Ëngth
 + 1);

90 
memıy
(
bufãr
.
d©a
(), 
’codšgName
, 
Ëngth
);

91 
	gbufãr
[
Ëngth
] = '\0';

92  
	gbufãr
.
d©a
();

95 şas 
	cKªjiCode
 {

96 
	gpublic
:

97 
	eTy³
 { 
ASCII
, 
	gJIS
, 
	gEUC
, 
	gSJIS
, 
	gUTF16
, 
	gUTF8
 };

98 
Ty³
 
judge
(cÚ¡ * 
¡r
, 
Ëngth
);

99 cÚ¡ 
	gESC
 = 0x1b;

100 cÚ¡ 
	gsjisM­
[256];

101 
ISkªji
(
code
)

103 ià(
	gcode
 >= 0x100)

105  
	gsjisM­
[
code
 & 0xff] & 1;

107 
ISkªa
(
code
)

109 ià(
	gcode
 >= 0x100)

111  
	gsjisM­
[
code
 & 0xff] & 2;

115 cÚ¡ 
	gKªjiCode
::
sjisM­
[256] = {

154 
	gKªjiCode
::
Ty³
 
KªjiCode
::
	$judge
(cÚ¡ * 
¡r
, 
size
)

156 
Ty³
 
code
;

157 
i
;

158 
bä
 = 
çl£
;

159 
bfk
 = 0;

160 
sjis
 = 0;

161 
euc
 = 0;

163 cÚ¡ * 
±r
 = 
»š‹½»t_ÿ¡
<cÚ¡ *>(
¡r
);

165 
code
 = 
ASCII
;

167 
i
 = 0;

168 
i
 < 
size
) {

169 ià(
±r
[
i
] =ğ
ESC
 && (
size
 - i >= 3)) {

170 ià((
±r
[
i
 + 1] == '$' &&…tr[i + 2] == 'B')

171 || (
±r
[
i
 + 1] == '(' &&…tr[i + 2] == 'B')) {

172 
code
 = 
JIS
;

173 
b»akB»ak
;

174 } ià((
±r
[
i
 + 1] == '$' &&…tr[i + 2] == '@')

175 || (
±r
[
i
 + 1] == '(' &&…tr[i + 2] == 'J')) {

176 
code
 = 
JIS
;

177 
b»akB»ak
;

178 } ià(
±r
[
i
 + 1] == '(' &&…tr[i + 2] == 'I') {

179 
code
 = 
JIS
;

180 
i
 += 3;

181 } ià(
±r
[
i
 + 1] == ')' &&…tr[i + 2] == 'I') {

182 
code
 = 
JIS
;

183 
i
 += 3;

185 
i
++;

187 
bä
 = 
çl£
;

188 
bfk
 = 0;

190 ià(
±r
[
i
] < 0x20) {

191 
bä
 = 
çl£
;

192 
bfk
 = 0;

194 ià((
i
 >ğ2è&& (
±r
[i - 2] == 0x81)

195 && (0x41 <ğ
±r
[
i
 - 1] &&…tr[i - 1] <= 0x49)) {

196 
code
 = 
SJIS
;

197 
sjis
 += 100;

198 } ià((
i
 >ğ2è&& (
±r
[i - 2] == 0xa1)

199 && (0xa2 <ğ
±r
[
i
 - 1] &&…tr[i - 1] <= 0xaa)) {

200 
code
 = 
EUC
;

201 
euc
 += 100;

202 } ià((
i
 >ğ2è&& (
±r
[i - 2] == 0x82) && (0xa0 <=…tr[i - 1])) {

203 
sjis
 += 40;

204 } ià((
i
 >ğ2è&& (
±r
[i - 2] == 0xa4) && (0xa0 <=…tr[i - 1])) {

205 
euc
 += 40;

209 ià((
size
 - 
i
 > 1è&& (
±r
[i] == 0x82) && (0xa0 <=…tr[i + 1])) {

210 
sjis
++;

211 } ià((
size
 - 
i
 > 1è&& (
±r
[i] == 0x83)

212 && (0x40 <ğ
±r
[
i
 + 1] &&…tr[i + 1] <= 0x9f)) {

213 
sjis
++;

214 } ià((
size
 - 
i
 > 1è&& (
±r
[i] == 0xa4) && (0xa0 <=…tr[i + 1])) {

215 
euc
++;

216 } ià((
size
 - 
i
 > 1è&& (
±r
[i] == 0xa5) && (0xa0 <=…tr[i + 1])) {

217 
euc
++;

219 ià(
bä
) {

220 ià((
i
 >ğ1è&& (0x40 <ğ
±r
[i] &&…Œ[i] <ğ0xa0è&& 
	`ISkªji
(ptr[i - 1])) {

221 
code
 = 
SJIS
;

222 
b»akB»ak
;

223 } ià((
i
 >ğ1è&& (0x81 <ğ
±r
[i - 1] &&…tr[i - 1] <= 0x9f) && ((0x40 <=…tr[i] &&…tr[i] < 0x7e) || (0x7e <…tr[i] &&…tr[i] <= 0xfc))) {

224 
code
 = 
SJIS
;

225 
b»akB»ak
;

226 } ià((
i
 >ğ1è&& (0xfd <ğ
±r
[i] &&…tr[i] <= 0xfe) && (0xa1 <=…tr[i - 1] &&…tr[i - 1] <= 0xfe)) {

227 
code
 = 
EUC
;

228 
b»akB»ak
;

229 } ià((
i
 >ğ1è&& (0xfd <ğ
±r
[i - 1] &&…tr[i - 1] <= 0xfe) && (0xa1 <=…tr[i] &&…tr[i] <= 0xfe)) {

230 
code
 = 
EUC
;

231 
b»akB»ak
;

232 } ià((
i
 >ğ1è&& (
±r
[i] < 0xa0 || 0xdf <…tr[i]) && (0x8e ==…tr[i - 1])) {

233 
code
 = 
SJIS
;

234 
b»akB»ak
;

235 } ià(
±r
[
i
] <= 0x7f) {

236 
code
 = 
SJIS
;

237 
b»akB»ak
;

239 ià(0xa1 <ğ
±r
[
i
] &&…tr[i] <= 0xa6) {

240 
euc
++;

241 } ià(0xa1 <ğ
±r
[
i
] &&…tr[i] <= 0xdf) {

243 } ià(0xa1 <ğ
±r
[
i
] &&…tr[i] <= 0xfe) {

244 
euc
++;

245 } ià(0x8=ğ
±r
[
i
]) {

246 
euc
++;

247 } ià(0x20 <ğ
±r
[
i
] &&…tr[i] <= 0x7f) {

248 
sjis
++;

250 
bä
 = 
çl£
;

251 
bfk
 = 0;

253 } ià(0x8=ğ
±r
[
i
]) {

254 ià(
size
 - 
i
 <= 1) {

256 } ià(0xa1 <ğ
±r
[
i
 + 1] &&…tr[i + 1] <= 0xdf) {

258 ià(
bfk
 == 1) {

259 
euc
 += 100;

261 
bfk
++;

262 
i
++;

265 
code
 = 
SJIS
;

266 
b»akB»ak
;

268 } ià(0x81 <ğ
±r
[
i
] &&…tr[i] <= 0x9f) {

270 
code
 = 
SJIS
;

271 ià((
size
 - 
i
 >= 1)

272 && ((0x40 <ğ
±r
[
i
 + 1] &&…tr[i + 1] <= 0x7e)

273 || (0x80 <ğ
±r
[
i
 + 1] &&…tr[i + 1] <= 0xfc))) {

274 
b»akB»ak
;

276 } ià(0xfd <ğ
±r
[
i
] &&…tr[i] <= 0xfe) {

278 
code
 = 
EUC
;

279 ià((
size
 - 
i
 >= 1)

280 && (0xa1 <ğ
±r
[
i
 + 1] &&…tr[i + 1] <= 0xfe)) {

281 
b»akB»ak
;

283 } ià(
±r
[
i
] <= 0x7f) {

286 
bä
 = 
Œue
;

287 
bfk
 = 0;

290 
i
++;

293 ià(
code
 =ğ
ASCII
) {

294 ià(
sjis
 > 
euc
) {

295 
code
 = 
SJIS
;

296 } ià(
sjis
 < 
euc
) {

297 
code
 = 
EUC
;

300 
b»akB»ak
:

301  (
code
);

302 
	}
}

304 
	gTextResourûDecod”
::
CÚ‹ÁTy³
 
TextResourûDecod”
::
	$d‘”mšeCÚ‹ÁTy³
(cÚ¡ 
SŒšg
& 
mimeTy³
)

306 ià(
	`equ®IgnÜšgCa£
(
mimeTy³
, "text/css"))

307  
CSS
;

308 ià(
	`equ®IgnÜšgCa£
(
mimeTy³
, "text/html"))

309  
HTML
;

310 ià(
DOMIm¶em’tiÚ
::
	`isXMLMIMETy³
(
mimeTy³
))

311  
XML
;

312  
PÏšText
;

313 
	}
}

315 cÚ¡ 
	gTextEncodšg
& 
	gTextResourûDecod”
::
	$deçuÉEncodšg
(
CÚ‹ÁTy³
 
cÚ‹ÁTy³
, cÚ¡ 
TextEncodšg
& 
¥ecif›dDeçuÉEncodšg
)

319 ià(
cÚ‹ÁTy³
 =ğ
XML
)

320  
	`UTF8Encodšg
();

321 ià(!
¥ecif›dDeçuÉEncodšg
.
	`isV®id
())

322  
	`L©š1Encodšg
();

323  
¥ecif›dDeçuÉEncodšg
;

324 
	}
}

326 
	gTextResourûDecod”
::
	$TextResourûDecod”
(cÚ¡ 
SŒšg
& 
mimeTy³
, cÚ¡ 
TextEncodšg
& 
¥ecif›dDeçuÉEncodšg
, 
boŞ
 
u£sEncodšgD‘eùÜ
)

327 : 
	`m_cÚ‹ÁTy³
(
	`d‘”mšeCÚ‹ÁTy³
(
mimeTy³
))

328 , 
	`m_’codšg
(
	`deçuÉEncodšg
(
m_cÚ‹ÁTy³
, 
¥ecif›dDeçuÉEncodšg
))

329 , 
	`m_sourû
(
DeçuÉEncodšg
)

330 , 
	`m_hštEncodšg
(0)

331 , 
	`m_checkedFÜBOM
(
çl£
)

332 , 
	`m_checkedFÜCSSCh¬£t
(
çl£
)

333 , 
	`m_checkedFÜH—dCh¬£t
(
çl£
)

334 , 
	`m_u£L’›ÁXMLDecodšg
(
çl£
)

335 , 
	`m_§wE¼Ü
(
çl£
)

336 , 
	$m_u£sEncodšgD‘eùÜ
(
u£sEncodšgD‘eùÜ
)

338 
	}
}

340 
	gTextResourûDecod”
::~
	$TextResourûDecod”
()

342 
	}
}

344 
TextResourûDecod”
::
	$£tEncodšg
(cÚ¡ 
TextEncodšg
& 
’codšg
, 
EncodšgSourû
 
sourû
)

347 ià(!
’codšg
.
	`isV®id
())

352 ià(
sourû
 =ğ
EncodšgFromM‘aTag
 && 
	`¡rÿ£cmp
(
’codšg
.
	`Çme
(), "x-user-defined") == 0)

353 
m_’codšg
 = "windows-1252";

354 ià(
sourû
 =ğ
EncodšgFromM‘aTag
 || sourû =ğ
EncodšgFromXMLH—d”
 || sourû =ğ
EncodšgFromCSSCh¬£t
)

355 
m_’codšg
 = 
’codšg
.
	`şo£¡By‹Ba£dEquiv®’t
();

357 
m_’codšg
 = 
’codšg
;

359 
m_codec
.
	`ş—r
();

360 
m_sourû
 = 
sourû
;

361 
	}
}

364 
	$fšdXMLEncodšg
(cÚ¡ * 
¡r
, 
Ën
, & 
’codšgL’gth
)

366 
pos
 = 
	`fšd
(
¡r
, 
Ën
, "encoding");

367 ià(
pos
 == -1)

369 
pos
 += 8;

372 
pos
 < 
Ën
 && 
¡r
[pos] <= ' ')

373 ++
pos
;

376 ià(
pos
 >ğ
Ën
 || 
¡r
[pos] != '=')

378 ++
pos
;

381 
pos
 < 
Ën
 && 
¡r
[pos] <= ' ')

382 ++
pos
;

385 ià(
pos
 >ğ
Ën
)

387 
quÙeM¬k
 = 
¡r
[
pos
];

388 ià(
quÙeM¬k
 != '"' && quoteMark != '\'')

390 ++
pos
;

393 
’d
 = 
pos
;

394 
’d
 < 
Ën
 && 
¡r
[’d] !ğ
quÙeM¬k
)

395 ++
’d
;

396 ià(
’d
 >ğ
Ën
)

399 
’codšgL’gth
 = 
’d
 - 
pos
;

400  
pos
;

401 
	}
}

404 
šlše
 
boŞ
 
	$skWh™e¥aû
(cÚ¡ *& 
pos
, cÚ¡ * 
d©aEnd
)

406 
pos
 < 
d©aEnd
 && (*pos == '\t' || *pos == ' '))

407 ++
pos
;

408  
pos
 !ğ
d©aEnd
;

409 
	}
}

411 
size_t
 
	gTextResourûDecod”
::
	$checkFÜBOM
(cÚ¡ * 
d©a
, 
size_t
 
Ën
)

415 
	`ASSERT
(!
m_checkedFÜBOM
);

417 
size_t
 
ËngthOfBOM
 = 0;

419 
size_t
 
bufãrL’gth
 = 
m_bufãr
.
	`size
();

421 
size_t
 
buf1L’
 = 
bufãrL’gth
;

422 
size_t
 
buf2L’
 = 
Ën
;

423 cÚ¡ * 
buf1
 = 
»š‹½»t_ÿ¡
<cÚ¡ *>(
m_bufãr
.
	`d©a
());

424 cÚ¡ * 
buf2
 = 
»š‹½»t_ÿ¡
<cÚ¡ *>(
d©a
);

425 
c1
 = 
buf1L’
 ? (--buf1L’, *
buf1
++è: 
buf2L’
 ? (--buf2L’, *
buf2
++) : 0;

426 
c2
 = 
buf1L’
 ? (--buf1L’, *
buf1
++è: 
buf2L’
 ? (--buf2L’, *
buf2
++) : 0;

427 
c3
 = 
buf1L’
 ? (--buf1L’, *
buf1
++è: 
buf2L’
 ? (--buf2L’, *
buf2
++) : 0;

428 
c4
 = 
buf2L’
 ? (--buf2L’, *
buf2
++) : 0;

431 ià(
c1
 =ğ0xFF && 
c2
 == 0xFE) {

432 ià(
c3
 !ğ0 || 
c4
 != 0) {

433 
	`£tEncodšg
(
	`UTF16L™eEndŸnEncodšg
(), 
AutoD‘eùedEncodšg
);

434 
ËngthOfBOM
 = 2;

436 
	`£tEncodšg
(
	`UTF32L™eEndŸnEncodšg
(), 
AutoD‘eùedEncodšg
);

437 
ËngthOfBOM
 = 4;

439 } ià(
c1
 =ğ0xEF && 
c2
 =ğ0xBB && 
c3
 == 0xBF) {

440 
	`£tEncodšg
(
	`UTF8Encodšg
(), 
AutoD‘eùedEncodšg
);

441 
ËngthOfBOM
 = 3;

442 } ià(
c1
 =ğ0xFE && 
c2
 == 0xFF) {

443 
	`£tEncodšg
(
	`UTF16BigEndŸnEncodšg
(), 
AutoD‘eùedEncodšg
);

444 
ËngthOfBOM
 = 2;

445 } ià(
c1
 =ğ0 && 
c2
 =ğ0 && 
c3
 =ğ0xFE && 
c4
 == 0xFF) {

446 
	`£tEncodšg
(
	`UTF32BigEndŸnEncodšg
(), 
AutoD‘eùedEncodšg
);

447 
ËngthOfBOM
 = 4;

450 ià(
ËngthOfBOM
 || 
bufãrL’gth
 + 
Ën
 >= 4)

451 
m_checkedFÜBOM
 = 
Œue
;

453  
ËngthOfBOM
;

454 
	}
}

456 
boŞ
 
	gTextResourûDecod”
::
	$checkFÜCSSCh¬£t
(cÚ¡ * 
d©a
, 
size_t
 
Ën
, 
boŞ
& 
movedD©aToBufãr
)

458 ià(
m_sourû
 !ğ
DeçuÉEncodšg
 && m_sourû !ğ
EncodšgFromP¬’tF¿me
) {

459 
m_checkedFÜCSSCh¬£t
 = 
Œue
;

460  
Œue
;

463 
size_t
 
ŞdSize
 = 
m_bufãr
.
	`size
();

464 
m_bufãr
.
	`grow
(
ŞdSize
 + 
Ën
);

465 
	`memıy
(
m_bufãr
.
	`d©a
(è+ 
ŞdSize
, 
d©a
, 
Ën
);

467 
movedD©aToBufãr
 = 
Œue
;

469 ià(
m_bufãr
.
	`size
() > 8) {

470 cÚ¡ * 
d©aS¹
 = 
m_bufãr
.
	`d©a
();

471 cÚ¡ * 
d©aEnd
 = 
d©aS¹
 + 
m_bufãr
.
	`size
();

473 ià(
d©aS¹
[0] == '@' && dataStart[1] == 'c' && dataStart[2] == 'h' && dataStart[3] == 'a' && dataStart[4] == 'r' &&

474 
d©aS¹
[5] == 's' && dataStart[6] == 'e' && dataStart[7] == 't') {

476 
d©aS¹
 += 8;

477 cÚ¡ * 
pos
 = 
d©aS¹
;

478 ià(!
	`skWh™e¥aû
(
pos
, 
d©aEnd
))

479  
çl£
;

481 ià(*
pos
 == '"' || *pos == '\'') {

482 
quÙ©iÚM¬k
 = *
pos
;

483 ++
pos
;

484 
d©aS¹
 = 
pos
;

486 
pos
 < 
d©aEnd
 && *po !ğ
quÙ©iÚM¬k
)

487 ++
pos
;

488 ià(
pos
 =ğ
d©aEnd
)

489  
çl£
;

491 
’codšgNameL’gth
 = 
pos
 - 
d©aS¹
 + 1;

493 ++
pos
;

494 ià(!
	`skWh™e¥aû
(
pos
, 
d©aEnd
))

495  
çl£
;

497 ià(*
pos
 == ';')

498 
	`£tEncodšg
(
	`fšdTextEncodšg
(
d©aS¹
, 
’codšgNameL’gth
), 
EncodšgFromCSSCh¬£t
);

501 
m_checkedFÜCSSCh¬£t
 = 
Œue
;

502  
Œue
;

504  
çl£
;

505 
	}
}

509 
šlše
 
	$skComm’t
(cÚ¡ *& 
±r
, cÚ¡ * 
pEnd
)

511 cÚ¡ * 
p
 = 
±r
;

512 ià(
p
 =ğ
pEnd
)

515 ià(*
p
 == '>') {

516 
p
++;

518 
p
 + 2 < 
pEnd
) {

519 ià(*
p
 == '-') {

521 ià(
p
[1] == '-' &&…[2] == '>') {

522 
p
 += 3;

526 ià(
p
 + 3 < 
pEnd
 &&…[1] == '-' &&…[2] == '!' &&…[3] == '>') {

527 
p
 += 4;

531 
p
++;

534 
±r
 = 
p
;

535 
	}
}

537 cÚ¡ 
	gby‹sToCheckUncÚd™iÚ®ly
 = 1024;

539 
boŞ
 
	gTextResourûDecod”
::
	$checkFÜH—dCh¬£t
(cÚ¡ * 
d©a
, 
size_t
 
Ën
, 
boŞ
& 
movedD©aToBufãr
)

541 ià(
m_sourû
 !ğ
DeçuÉEncodšg
 && m_sourû !ğ
EncodšgFromP¬’tF¿me
) {

542 
m_checkedFÜH—dCh¬£t
 = 
Œue
;

543  
Œue
;

549 
size_t
 
ŞdSize
 = 
m_bufãr
.
	`size
();

550 
m_bufãr
.
	`grow
(
ŞdSize
 + 
Ën
);

551 
	`memıy
(
m_bufãr
.
	`d©a
(è+ 
ŞdSize
, 
d©a
, 
Ën
);

553 
movedD©aToBufãr
 = 
Œue
;

555 cÚ¡ * 
±r
 = 
m_bufãr
.
	`d©a
();

556 cÚ¡ * 
pEnd
 = 
±r
 + 
m_bufãr
.
	`size
();

559 ià(
m_bufãr
.
	`size
() < 8)

560  
çl£
;

564 ià(
±r
[0] == '<' &&…tr[1] == '?' &&…tr[2] == 'x' &&…tr[3] == 'm' &&…tr[4] == 'l') {

565 cÚ¡ * 
xmlDeş¬©iÚEnd
 = 
±r
;

566 
xmlDeş¬©iÚEnd
 !ğ
pEnd
 && *xmlDeclarationEnd != '>')

567 ++
xmlDeş¬©iÚEnd
;

568 ià(
xmlDeş¬©iÚEnd
 =ğ
pEnd
)

569  
çl£
;

571 
Ën
;

572 
pos
 = 
	`fšdXMLEncodšg
(
±r
, 
xmlDeş¬©iÚEnd
 -…Œ, 
Ën
);

573 ià(
pos
 != -1)

574 
	`£tEncodšg
(
	`fšdTextEncodšg
(
±r
 + 
pos
, 
Ën
), 
EncodšgFromXMLH—d”
);

576 } ià(
±r
[0] == '<' &&…tr[1] == 0 &&…tr[2] == '?' &&…tr[3] == 0 &&…tr[4] == 'x' &&…tr[5] == 0) {

577 
	`£tEncodšg
(
	`UTF16L™eEndŸnEncodšg
(), 
AutoD‘eùedEncodšg
);

578  
Œue
;

579 } ià(
±r
[0] == 0 &&…tr[1] == '<' &&…tr[2] == 0 &&…tr[3] == '?' &&…tr[4] == 0 &&…tr[5] == 'x') {

580 
	`£tEncodšg
(
	`UTF16BigEndŸnEncodšg
(), 
AutoD‘eùedEncodšg
);

581  
Œue
;

582 } ià(
±r
[0] == '<' &&…tr[1] == 0 &&…tr[2] == 0 &&…tr[3] == 0 &&…tr[4] == '?' &&…tr[5] == 0 &&…tr[6] == 0 &&…tr[7] == 0) {

583 
	`£tEncodšg
(
	`UTF32L™eEndŸnEncodšg
(), 
AutoD‘eùedEncodšg
);

584  
Œue
;

585 } ià(
±r
[0] == 0 &&…tr[1] == 0 &&…tr[2] == 0 &&…tr[3] == '<' &&…tr[4] == 0 &&…tr[5] == 0 &&…tr[6] == 0 &&…tr[7] == '?') {

586 
	`£tEncodšg
(
	`UTF32BigEndŸnEncodšg
(), 
AutoD‘eùedEncodšg
);

587  
Œue
;

606 
AtomicSŒšgIm¶
* 
’şosšgTagName
 = 0;

607 
boŞ
 
šH—dSeùiÚ
 = 
Œue
;

610 ià(
m_cÚ‹ÁTy³
 =ğ
XML
)

611  
Œue
;

613 
±r
 + 3 < 
pEnd
) {

614 ià(*
±r
 == '<') {

615 
boŞ
 
’d
 = 
çl£
;

616 
±r
++;

619 ià(
±r
[0] == '!' &&…tr[1] == '-' &&…tr[2] == '-') {

620 
±r
 += 3;

621 
	`skComm’t
(
±r
, 
pEnd
);

622 ià(
±r
 - 
m_bufãr
.
	`d©a
(è>ğ
by‹sToCheckUncÚd™iÚ®ly
 && !
šH—dSeùiÚ
) {

626 
m_checkedFÜH—dCh¬£t
 = 
Œue
;

627  
Œue
;

632 ià(*
±r
 == '/') {

633 ++
±r
;

634 
’d
 = 
Œue
;

638 
boŞ
 
§wName¥aû
 = 
çl£
;

639 
gBufãr
[20];

640 
Ën
 = 0;

641 
Ën
 < 19) {

642 ià(
±r
 =ğ
pEnd
)

643  
çl£
;

644 
c
 = *
±r
;

645 ià(
c
 == ':') {

646 
Ën
 = 0;

647 
§wName¥aû
 = 
Œue
;

648 
±r
++;

651 ià((
c
 >= 'a' && c <= 'z') || (c >= '0' && c <= '9'))

653 ià(
c
 >= 'A' && c <= 'Z')

654 
c
 += 'a' - 'A';

657 
gBufãr
[
Ën
++] = 
c
;

658 
±r
++;

660 
gBufãr
[
Ën
] = 0;

661 
AtomicSŒšg
 
	`g
(
gBufãr
);

663 ià(
’şosšgTagName
) {

664 ià(
’d
 && 
g
.
	`im¶
(è=ğ
’şosšgTagName
)

665 
’şosšgTagName
 = 0;

667 ià(
g
 =ğ
t™ËTag
)

668 
’şosšgTagName
 = 
t™ËTag
.
	`loÿlName
().
	`im¶
();

669 ià(
g
 =ğ
sütTag
)

670 
’şosšgTagName
 = 
sütTag
.
	`loÿlName
().
	`im¶
();

671 ià(
g
 =ğ
nosütTag
)

672 
’şosšgTagName
 = 
nosütTag
.
	`loÿlName
().
	`im¶
();

676 cÚ¡ * 
gCÚ‹ÁS¹
 = 
±r
;

677 ià(!
’d
) {

678 
±r
 !ğ
pEnd
 && *ptr != '>') {

679 ià(*
±r
 == '\'' || *ptr == '"') {

680 
quÙeM¬k
 = *
±r
;

681 ++
±r
;

682 
±r
 !ğ
pEnd
 && *±¸!ğ
quÙeM¬k
)

683 ++
±r
;

684 ià(
±r
 =ğ
pEnd
)

685  
çl£
;

687 ++
±r
;

689 ià(
±r
 =ğ
pEnd
)

690  
çl£
;

691 ++
±r
;

694 ià(!
’d
 && 
g
 =ğ
m‘aTag
 && !
§wName¥aû
) {

695 cÚ¡ * 
¡r
 = 
gCÚ‹ÁS¹
;

696 
Ëngth
 = 
±r
 - 
gCÚ‹ÁS¹
;

697 
pos
 = 0;

698 
pos
 < 
Ëngth
) {

699 
ch¬£tPos
 = 
	`fšdIgnÜšgCa£
(
¡r
 + 
pos
, 
Ëngth
 -…os, "charset");

700 ià(
ch¬£tPos
 == -1)

702 
pos
 +ğ
ch¬£tPos
 + 7;

704 
pos
 < 
Ëngth
 && 
¡r
[pos] <= ' ')

705 
pos
++;

706 ià(
pos
 =ğ
Ëngth
)

708 ià(
¡r
[
pos
++] != '=')

710 (
pos
 < 
Ëngth
) &&

711 (
¡r
[
pos
] <= ' ' || str[pos] == '=' || str[pos] == '"' || str[pos] == '\''))

712 
pos
++;

715 ià(
pos
 =ğ
Ëngth
)

717 
’d
 = 
pos
;

718 
’d
 < 
Ëngth
 &&

719 
¡r
[
’d
] != ' ' && str[end] != '"' && str[end] != '\'' &&

720 
¡r
[
’d
] != ';' && str[end] != '>')

721 
’d
++;

722 
	`£tEncodšg
(
	`fšdTextEncodšg
(
¡r
 + 
pos
, 
’d
 -…os), 
EncodšgFromM‘aTag
);

723 ià(
m_sourû
 =ğ
EncodšgFromM‘aTag
)

724  
Œue
;

726 ià(
’d
 >ğ
Ëngth
 || 
¡r
[end] == '/' || str[end] == '>')

729 
pos
 = 
’d
 + 1;

732 ià(!
’şosšgTagName
 && 
g
 !ğ
sütTag
 &&ag !ğ
nosütTag
 &&ag !ğ
¡yËTag


733 && 
g
 !ğ
lškTag
 &&ag !ğ
m‘aTag
 &&ag !ğ
objeùTag
 &&ag !ğ
t™ËTag
 &&ag !ğ
ba£Tag


734 && (
’d
 || 
g
 !ğ
htmlTag
è&& (’d ||ag !ğ
h—dTag
è&& 
	`isASCIIAÍha
(
gBufãr
[0])) {

735 
šH—dSeùiÚ
 = 
çl£
;

738 ià(
±r
 - 
m_bufãr
.
	`d©a
(è>ğ
by‹sToCheckUncÚd™iÚ®ly
 && !
šH—dSeùiÚ
) {

739 
m_checkedFÜH—dCh¬£t
 = 
Œue
;

740  
Œue
;

744 ++
±r
;

746  
çl£
;

747 
	}
}

749 
	gTextResourûDecod”
::
	$d‘eùJ­ªe£Encodšg
(cÚ¡ * 
d©a
, 
size_t
 
Ën
)

751 
KªjiCode
::
	`judge
(
d©a
, 
Ën
)) {

752 
KªjiCode
::
JIS
:

753 
	`£tEncodšg
("ISO-2022-JP", 
AutoD‘eùedEncodšg
);

755 
KªjiCode
::
EUC
:

756 
	`£tEncodšg
("EUC-JP", 
AutoD‘eùedEncodšg
);

758 
KªjiCode
::
SJIS
:

759 
	`£tEncodšg
("Shiá_JIS", 
AutoD‘eùedEncodšg
);

761 
KªjiCode
::
ASCII
:

762 
KªjiCode
::
UTF16
:

763 
KªjiCode
::
UTF8
:

766 
	}
}

777 
boŞ
 
	gTextResourûDecod”
::
	$shouldAutoD‘eù
() const

781  
m_u£sEncodšgD‘eùÜ


782 && (
m_sourû
 =ğ
DeçuÉEncodšg
 || (m_sourû =ğ
EncodšgFromP¬’tF¿me
 && 
m_hštEncodšg
));

783 
	}
}

785 
SŒšg
 
	gTextResourûDecod”
::
	$decode
(cÚ¡ * 
d©a
, 
size_t
 
Ën
)

787 
size_t
 
ËngthOfBOM
 = 0;

788 ià(!
m_checkedFÜBOM
)

789 
ËngthOfBOM
 = 
	`checkFÜBOM
(
d©a
, 
Ën
);

791 
boŞ
 
movedD©aToBufãr
 = 
çl£
;

793 ià(
m_cÚ‹ÁTy³
 =ğ
CSS
 && !
m_checkedFÜCSSCh¬£t
)

794 ià(!
	`checkFÜCSSCh¬£t
(
d©a
, 
Ën
, 
movedD©aToBufãr
))

797 ià((
m_cÚ‹ÁTy³
 =ğ
HTML
 || m_cÚ‹ÁTy³ =ğ
XML
è&& !
m_checkedFÜH—dCh¬£t
)

798 ià(!
	`checkFÜH—dCh¬£t
(
d©a
, 
Ën
, 
movedD©aToBufãr
))

802 ià(
	`shouldAutoD‘eù
()) {

803 ià(
m_’codšg
.
	`isJ­ªe£
())

804 
	`d‘eùJ­ªe£Encodšg
(
d©a
, 
Ën
);

806 
TextEncodšg
 
d‘eùedEncodšg
;

807 ià(
	`d‘eùTextEncodšg
(
d©a
, 
Ën
, 
m_hštEncodšg
, &
d‘eùedEncodšg
))

808 
	`£tEncodšg
(
d‘eùedEncodšg
, 
AutoD‘eùedEncodšg
);

812 
	`ASSERT
(
m_’codšg
.
	`isV®id
());

814 ià(!
m_codec
)

815 
m_codec
.
	`£t
(
	`ÃwTextCodec
(
m_’codšg
).
	`»Ëa£
());

817 ià(
m_bufãr
.
	`isEm±y
())

818  
m_codec
->
	`decode
(
d©a
 + 
ËngthOfBOM
, 
Ën
 -†’gthOfBOM, 
çl£
, 
m_cÚ‹ÁTy³
 =ğ
XML
, 
m_§wE¼Ü
);

820 ià(!
movedD©aToBufãr
) {

821 
size_t
 
ŞdSize
 = 
m_bufãr
.
	`size
();

822 
m_bufãr
.
	`grow
(
ŞdSize
 + 
Ën
);

823 
	`memıy
(
m_bufãr
.
	`d©a
(è+ 
ŞdSize
, 
d©a
, 
Ën
);

826 
SŒšg
 
»suÉ
 = 
m_codec
->
	`decode
(
m_bufãr
.
	`d©a
(è+ 
ËngthOfBOM
, m_bufãr.
	`size
(è-†’gthOfBOM, 
çl£
, 
m_cÚ‹ÁTy³
 =ğ
XML
 && !
m_u£L’›ÁXMLDecodšg
, 
m_§wE¼Ü
);

827 
m_bufãr
.
	`ş—r
();

828  
»suÉ
;

829 
	}
}

831 
SŒšg
 
	gTextResourûDecod”
::
	$æush
()

836 ià(
m_bufãr
.
	`size
(è&& 
	`shouldAutoD‘eù
()

837 && ((!
m_checkedFÜH—dCh¬£t
 && (
m_cÚ‹ÁTy³
 =ğ
HTML
 || m_cÚ‹ÁTy³ =ğ
XML
)è|| (!
m_checkedFÜCSSCh¬£t
 && (m_cÚ‹ÁTy³ =ğ
CSS
)))) {

838 
TextEncodšg
 
d‘eùedEncodšg
;

839 ià(
	`d‘eùTextEncodšg
(
m_bufãr
.
	`d©a
(), m_bufãr.
	`size
(),

840 
m_hštEncodšg
, &
d‘eùedEncodšg
))

841 
	`£tEncodšg
(
d‘eùedEncodšg
, 
AutoD‘eùedEncodšg
);

844 ià(!
m_codec
)

845 
m_codec
.
	`£t
(
	`ÃwTextCodec
(
m_’codšg
).
	`»Ëa£
());

847 
SŒšg
 
»suÉ
 = 
m_codec
->
	`decode
(
m_bufãr
.
	`d©a
(), m_bufãr.
	`size
(), 
Œue
, 
m_cÚ‹ÁTy³
 =ğ
XML
 && !
m_u£L’›ÁXMLDecodšg
, 
m_§wE¼Ü
);

848 
m_bufãr
.
	`ş—r
();

849 
m_codec
.
	`ş—r
();

850 
m_checkedFÜBOM
 = 
çl£
;

851  
»suÉ
;

852 
	}
}

	@TextResourceDecoder.h

23 #iâdeà
TextResourûDecod”_h


24 
	#TextResourûDecod”_h


	)

26 
	~"TextEncodšg.h
"

28 
Çme¥aû
 
	gWebCÜe
 {

30 
şass
 
	gTextResourûDecod”
 : 
public
 
RefCouÁed
<
TextResourûDecod”
> {

31 
public
:

32 
	eEncodšgSourû
 {

33 
DeçuÉEncodšg
,

34 
	gAutoD‘eùedEncodšg
,

35 
	gEncodšgFromXMLH—d”
,

36 
	gEncodšgFromM‘aTag
,

37 
	gEncodšgFromCSSCh¬£t
,

38 
	gEncodšgFromHTTPH—d”
,

39 
	gU£rCho£nEncodšg
,

40 
	gEncodšgFromP¬’tF¿me


43 
	gPassRefPŒ
<
	gTextResourûDecod”
> 
ü—‹
(cÚ¡ 
SŒšg
& 
mimeTy³
, cÚ¡ 
TextEncodšg
& 
deçuÉEncodšg
 = TextEncodšg(), 
boŞ
 
u£sEncodšgD‘eùÜ
 = 
çl£
)

45  
adİtRef
(
Ãw
 
TextResourûDecod”
(
mimeTy³
, 
deçuÉEncodšg
, 
u£sEncodšgD‘eùÜ
));

47 ~
TextResourûDecod”
();

49 
£tEncodšg
(cÚ¡ 
TextEncodšg
&, 
EncodšgSourû
);

50 cÚ¡ 
	gTextEncodšg
& 
’codšg
(ècÚ¡ {  
	gm_’codšg
; }

52 
SŒšg
 
decode
(cÚ¡ * 
d©a
, 
size_t
 
Ëngth
);

53 
SŒšg
 
æush
();

55 
£tHštEncodšg
(cÚ¡ 
TextResourûDecod”
* 
hštDecod”
)

59 ià(
	ghštDecod”
 && hštDecod”->
	gm_sourû
 =ğ
AutoD‘eùedEncodšg
)

60 
m_hštEncodšg
 = 
hštDecod”
->
’codšg
().
Çme
();

63 
u£L’›ÁXMLDecodšg
(è{ 
	gm_u£L’›ÁXMLDecodšg
 = 
Œue
; }

64 
boŞ
 
§wE¼Ü
(ècÚ¡ {  
	gm_§wE¼Ü
; }

66 
	g´iv©e
:

67 
TextResourûDecod”
(cÚ¡ 
SŒšg
& 
mimeTy³
, cÚ¡ 
TextEncodšg
& 
deçuÉEncodšg
,

68 
boŞ
 
u£sEncodšgD‘eùÜ
);

70 
	eCÚ‹ÁTy³
 { 
	gPÏšText
, 
	gHTML
, 
	gXML
, 
	gCSS
 };

71 
CÚ‹ÁTy³
 
d‘”mšeCÚ‹ÁTy³
(cÚ¡ 
SŒšg
& 
mimeTy³
);

72 cÚ¡ 
	gTextEncodšg
& 
deçuÉEncodšg
(
CÚ‹ÁTy³
, cÚ¡ 
TextEncodšg
& defaultEncoding);

74 
size_t
 
checkFÜBOM
(const *, size_t);

75 
boŞ
 
checkFÜCSSCh¬£t
(cÚ¡ *, 
size_t
, boŞ& 
movedD©aToBufãr
);

76 
boŞ
 
checkFÜH—dCh¬£t
(cÚ¡ *, 
size_t
, boŞ& 
movedD©aToBufãr
);

77 
d‘eùJ­ªe£Encodšg
(cÚ¡ *, 
size_t
);

78 
boŞ
 
shouldAutoD‘eù
() const;

80 
CÚ‹ÁTy³
 
	gm_cÚ‹ÁTy³
;

81 
TextEncodšg
 
	gm_’codšg
;

82 
	gOwnPŒ
<
	gTextCodec
> 
	gm_codec
;

83 
EncodšgSourû
 
	gm_sourû
;

84 cÚ¡ * 
	gm_hštEncodšg
;

85 
	gVeùÜ
<> 
	gm_bufãr
;

86 
boŞ
 
	gm_checkedFÜBOM
;

87 
boŞ
 
	gm_checkedFÜCSSCh¬£t
;

88 
boŞ
 
	gm_checkedFÜH—dCh¬£t
;

89 
boŞ
 
	gm_u£L’›ÁXMLDecodšg
;

90 
boŞ
 
	gm_§wE¼Ü
;

91 
boŞ
 
	gm_u£sEncodšgD‘eùÜ
;

	@ThreadableLoader.cpp

31 
	~"cÚfig.h
"

32 
	~"Th»adabËLßd”.h
"

34 
	~"SütExecutiÚCÚ‹xt.h
"

35 
	~"Docum’t.h
"

36 
	~"Docum’tTh»adabËLßd”.h
"

37 
	~"WÜk”CÚ‹xt.h
"

38 
	~"WÜk”RunLoİ.h
"

39 
	~"WÜk”Th»adabËLßd”.h
"

41 
Çme¥aû
 
	gWebCÜe
 {

43 
	gPassRefPŒ
<
	gTh»adabËLßd”
> Th»adabËLßd”::
ü—‹
(
SütExecutiÚCÚ‹xt
* 
cÚ‹xt
, 
Th»adabËLßd”Cl›Á
* 
ş›Á
, cÚ¡ 
ResourûReque¡
& 
»que¡
, cÚ¡ 
Th»adabËLßd”O±iÚs
& 
İtiÚs
)

45 
ASSERT
(
ş›Á
);

46 
ASSERT
(
cÚ‹xt
);

48 #ià
ENABLE
(
WORKERS
)

49 ià(
	gcÚ‹xt
->
isWÜk”CÚ‹xt
())

50  
	gWÜk”Th»adabËLßd”
::
ü—‹
(
¡©ic_ÿ¡
<
WÜk”CÚ‹xt
*>(
cÚ‹xt
), 
ş›Á
, 
WÜk”RunLoİ
::
deçuÉMode
(), 
»que¡
, 
İtiÚs
);

53 
ASSERT
(
cÚ‹xt
->
isDocum’t
());

54  
	gDocum’tTh»adabËLßd”
::
ü—‹
(
¡©ic_ÿ¡
<
Docum’t
*>(
cÚ‹xt
), 
ş›Á
, 
»que¡
, 
İtiÚs
);

57 
	gTh»adabËLßd”
::
lßdResourûSynchrÚou¦y
(
SütExecutiÚCÚ‹xt
* 
cÚ‹xt
, cÚ¡ 
ResourûReque¡
& 
»que¡
, 
Th»adabËLßd”Cl›Á
& 
ş›Á
, cÚ¡ 
Th»adabËLßd”O±iÚs
& 
İtiÚs
)

59 
ASSERT
(
cÚ‹xt
);

61 #ià
ENABLE
(
WORKERS
)

62 ià(
	gcÚ‹xt
->
isWÜk”CÚ‹xt
()) {

63 
	gWÜk”Th»adabËLßd”
::
lßdResourûSynchrÚou¦y
(
¡©ic_ÿ¡
<
WÜk”CÚ‹xt
*>(
cÚ‹xt
), 
»que¡
, 
ş›Á
, 
İtiÚs
);

68 
ASSERT
(
cÚ‹xt
->
isDocum’t
());

69 
	gDocum’tTh»adabËLßd”
::
lßdResourûSynchrÚou¦y
(
¡©ic_ÿ¡
<
Docum’t
*>(
cÚ‹xt
), 
»que¡
, 
ş›Á
, 
İtiÚs
);

	@ThreadableLoader.h

31 #iâdeà
Th»adabËLßd”_h


32 
	#Th»adabËLßd”_h


	)

34 
	~<wtf/NÚcİyabË.h
>

35 
	~<wtf/PassRefPŒ.h
>

36 
	~<wtf/VeùÜ.h
>

38 
Çme¥aû
 
	gWebCÜe
 {

40 
şass
 
	gResourûE¼Ü
;

41 
şass
 
	gResourûReque¡
;

42 
şass
 
	gResourûRe¥Ú£
;

43 
şass
 
	gSütExecutiÚCÚ‹xt
;

44 
şass
 
	gTh»adabËLßd”Cl›Á
;

46 
	eStÜedC»d’tŸls
 {

47 
	gAÎowStÜedC»d’tŸls
,

48 
	gDoNÙAÎowStÜedC»d’tŸls


51 
	eCrossOrigšReque¡PŞicy
 {

52 
	gD’yCrossOrigšReque¡s
,

53 
	gU£AcûssCÚŒŞ
,

54 
	gAÎowCrossOrigšReque¡s


57 
	sTh»adabËLßd”O±iÚs
 {

58 
Th»adabËLßd”O±iÚs
(è: 
£ndLßdC®lbacks
(
çl£
), 
¢iffCÚ‹Á
(çl£), 
®lowC»d’tŸls
(çl£), 
fÜûP»æight
(çl£), 
üossOrigšReque¡PŞicy
(
D’yCrossOrigšReque¡s
) { }

59 
boŞ
 
	g£ndLßdC®lbacks
;

60 
boŞ
 
	g¢iffCÚ‹Á
;

61 
boŞ
 
	g®lowC»d’tŸls
;

62 
boŞ
 
	gfÜûP»æight
;

63 
CrossOrigšReque¡PŞicy
 
	güossOrigšReque¡PŞicy
;

68 şas 
	cTh»adabËLßd”
 : 
public
 
NÚcİyabË
 {

69 
public
:

70 
lßdResourûSynchrÚou¦y
(
SütExecutiÚCÚ‹xt
*, cÚ¡ 
ResourûReque¡
&, 
Th»adabËLßd”Cl›Á
&, cÚ¡ 
Th»adabËLßd”O±iÚs
&);

71 
	gPassRefPŒ
<
	gTh»adabËLßd”
> 
ü—‹
(
SütExecutiÚCÚ‹xt
*, 
Th»adabËLßd”Cl›Á
*, cÚ¡ 
ResourûReque¡
&, cÚ¡ 
Th»adabËLßd”O±iÚs
&);

73 
vœtu®
 
ÿnûl
() = 0;

74 
»f
(è{ 
»fTh»adabËLßd”
(); }

75 
d”ef
(è{ 
d”efTh»adabËLßd”
(); }

77 
	g´Ùeùed
:

78 
vœtu®
 ~
Th»adabËLßd”
() { }

79 
vœtu®
 
»fTh»adabËLßd”
() = 0;

80 
vœtu®
 
d”efTh»adabËLßd”
() = 0;

	@ThreadableLoaderClient.h

31 #iâdeà
Th»adabËLßd”Cl›Á_h


32 
	#Th»adabËLßd”Cl›Á_h


	)

34 
Çme¥aû
 
	gWebCÜe
 {

36 
şass
 
	gResourûE¼Ü
;

37 
şass
 
	gResourûRe¥Ú£
;

39 şas 
	cTh»adabËLßd”Cl›Á
 : 
public
 
NÚcİyabË
 {

40 
public
:

41 
vœtu®
 
didS’dD©a
(, ) { }

43 
vœtu®
 
didReûiveRe¥Ú£
(cÚ¡ 
ResourûRe¥Ú£
&) { }

44 
vœtu®
 
didReûiveD©a
(const *, ) { }

45 
vœtu®
 
didFšishLßdšg
() { }

46 
vœtu®
 
didFa
(cÚ¡ 
ResourûE¼Ü
&) { }

47 
vœtu®
 
didFaRedœeùCheck
() { }

49 
vœtu®
 
didReûiveAuth’tiÿtiÚCªûÎ©iÚ
(cÚ¡ 
ResourûRe¥Ú£
&) { }

51 
	g´Ùeùed
:

52 
vœtu®
 ~
Th»adabËLßd”Cl›Á
() { }

	@ThreadableLoaderClientWrapper.h

31 #iâdeà
Th»adabËLßd”Cl›ÁW¿µ”_h


32 
	#Th»adabËLßd”Cl›ÁW¿µ”_h


	)

34 
	~"Th»adabËLßd”Cl›Á.h
"

35 
	~<wtf/NÚcİyabË.h
>

36 
	~<wtf/PassRefPŒ.h
>

37 
	~<wtf/Th»adšg.h
>

39 
Çme¥aû
 
	gWebCÜe
 {

41 
şass
 
	gTh»adabËLßd”Cl›ÁW¿µ”
 : 
public
 
Th»adSaãSh¬ed
<
Th»adabËLßd”Cl›ÁW¿µ”
> {

42 
public
:

43 
PassRefPŒ
<
Th»adabËLßd”Cl›ÁW¿µ”
> 
ü—‹
(
Th»adabËLßd”Cl›Á
* 
ş›Á
)

45  
adİtRef
(
Ãw
 
Th»adabËLßd”Cl›ÁW¿µ”
(
ş›Á
));

48 
ş—rCl›Á
()

50 
	gm_dÚe
 = 
Œue
;

51 
	gm_ş›Á
 = 0;

54 
boŞ
 
dÚe
() const

56  
	gm_dÚe
;

59 
didS’dD©a
(
by‹sS’t
, 
tÙ®By‹sToBeS’t
)

61 ià(
	gm_ş›Á
)

62 
	gm_ş›Á
->
didS’dD©a
(
by‹sS’t
, 
tÙ®By‹sToBeS’t
);

65 
didReûiveRe¥Ú£
(cÚ¡ 
ResourûRe¥Ú£
& 
»¥Ú£
)

67 ià(
	gm_ş›Á
)

68 
	gm_ş›Á
->
didReûiveRe¥Ú£
(
»¥Ú£
);

71 
didReûiveD©a
(cÚ¡ * 
d©a
, 
ËngthReûived
)

73 ià(
	gm_ş›Á
)

74 
	gm_ş›Á
->
didReûiveD©a
(
d©a
, 
ËngthReûived
);

77 
didFšishLßdšg
(
id’tif›r
)

79 
	gm_dÚe
 = 
Œue
;

80 ià(
	gm_ş›Á
)

81 
	gm_ş›Á
->
didFšishLßdšg
(
id’tif›r
);

84 
didFa
(cÚ¡ 
ResourûE¼Ü
& 
”rÜ
)

86 
	gm_dÚe
 = 
Œue
;

87 ià(
	gm_ş›Á
)

88 
	gm_ş›Á
->
didFa
(
”rÜ
);

91 
didFaRedœeùCheck
()

93 
	gm_dÚe
 = 
Œue
;

94 ià(
	gm_ş›Á
)

95 
	gm_ş›Á
->
didFaRedœeùCheck
();

98 
didReûiveAuth’tiÿtiÚCªûÎ©iÚ
(cÚ¡ 
ResourûRe¥Ú£
& 
»¥Ú£
)

100 ià(
	gm_ş›Á
)

101 
	gm_ş›Á
->
didReûiveRe¥Ú£
(
»¥Ú£
);

104 
	g´Ùeùed
:

105 
Th»adabËLßd”Cl›ÁW¿µ”
(
Th»adabËLßd”Cl›Á
* 
ş›Á
)

106 : 
m_ş›Á
(
ş›Á
)

107 , 
m_dÚe
(
çl£
)

111 
Th»adabËLßd”Cl›Á
* 
	gm_ş›Á
;

112 
boŞ
 
	gm_dÚe
;

	@WorkerThreadableLoader.cpp

31 
	~"cÚfig.h
"

33 #ià
ENABLE
(
WORKERS
)

35 
	~"WÜk”Th»adabËLßd”.h
"

37 
	~"G’”icWÜk”Task.h
"

38 
	~"ResourûE¼Ü.h
"

39 
	~"ResourûReque¡.h
"

40 
	~"ResourûRe¥Ú£.h
"

41 
	~"Th»adabËLßd”.h
"

42 
	~"WÜk”CÚ‹xt.h
"

43 
	~"WÜk”Lßd”Proxy.h
"

44 
	~"WÜk”Th»ad.h
"

45 
	~<wtf/OwnPŒ.h
>

46 
	~<wtf/Th»adšg.h
>

47 
	~<wtf/VeùÜ.h
>

49 
usšg
 
Çme¥aû
 
	g¡d
;

51 
Çme¥aû
 
	gWebCÜe
 {

53 cÚ¡ 
	glßdResourûSynchrÚou¦yMode
[] = "loadResourceSynchronouslyMode";

55 
	gWÜk”Th»adabËLßd”
::
WÜk”Th»adabËLßd”
(
WÜk”CÚ‹xt
* 
wÜk”CÚ‹xt
, 
Th»adabËLßd”Cl›Á
* 
ş›Á
, cÚ¡ 
SŒšg
& 
skMode
, cÚ¡ 
ResourûReque¡
& 
»que¡
, cÚ¡ 
Th»adabËLßd”O±iÚs
& 
İtiÚs
)

56 : 
m_wÜk”CÚ‹xt
(
wÜk”CÚ‹xt
)

57 , 
m_wÜk”Cl›ÁW¿µ”
(
Th»adabËLßd”Cl›ÁW¿µ”
::
ü—‹
(
ş›Á
))

58 , 
m_bridge
(*(
Ãw
 
MašTh»adBridge
(
m_wÜk”Cl›ÁW¿µ”
, 
m_wÜk”CÚ‹xt
->
th»ad
()->
wÜk”Lßd”Proxy
(), 
skMode
, 
»que¡
, 
İtiÚs
)))

62 
	gWÜk”Th»adabËLßd”
::~
WÜk”Th»adabËLßd”
()

64 
m_bridge
.
de¡roy
();

67 
	gWÜk”Th»adabËLßd”
::
lßdResourûSynchrÚou¦y
(
WÜk”CÚ‹xt
* 
wÜk”CÚ‹xt
, cÚ¡ 
ResourûReque¡
& 
»que¡
, 
Th»adabËLßd”Cl›Á
& 
ş›Á
, cÚ¡ 
Th»adabËLßd”O±iÚs
& 
İtiÚs
)

69 
	gWÜk”RunLoİ
& 
	grunLoİ
 = 
wÜk”CÚ‹xt
->
th»ad
()->
runLoİ
();

72 
SŒšg
 
	gmode
 = 
lßdResourûSynchrÚou¦yMode
;

73 
	gmode
.
­³nd
(
SŒšg
::
numb”
(
runLoİ
.
ü—‹UniqueId
()));

75 
	gRefPŒ
<
	gWÜk”Th»adabËLßd”
> 
	glßd”
 = 
WÜk”Th»adabËLßd”
::
ü—‹
(
wÜk”CÚ‹xt
, &
ş›Á
, 
mode
, 
»que¡
, 
İtiÚs
);

76 
Mes§geQueueWa™ResuÉ
 
	g»suÉ
 = 
Mes§geQueueMes§geReûived
;

77 !
	glßd”
->
dÚe
(è&& 
	g»suÉ
 !ğ
Mes§geQueueT”mš©ed
)

78 
»suÉ
 = 
runLoİ
.
runInMode
(
wÜk”CÚ‹xt
, 
mode
);

80 ià(!
	glßd”
->
dÚe
(è&& 
	g»suÉ
 =ğ
Mes§geQueueT”mš©ed
)

81 
lßd”
->
ÿnûl
();

84 
	gWÜk”Th»adabËLßd”
::
ÿnûl
()

86 
m_bridge
.
ÿnûl
();

89 
	gWÜk”Th»adabËLßd”
::
MašTh»adBridge
::MašTh»adBridge(
PassRefPŒ
<
Th»adabËLßd”Cl›ÁW¿µ”
> 
wÜk”Cl›ÁW¿µ”
, 
WÜk”Lßd”Proxy
& 
lßd”Proxy
, cÚ¡ 
SŒšg
& 
skMode
,

90 cÚ¡ 
ResourûReque¡
& 
»que¡
, cÚ¡ 
Th»adabËLßd”O±iÚs
& 
İtiÚs
)

91 : 
m_wÜk”Cl›ÁW¿µ”
(
wÜk”Cl›ÁW¿µ”
)

92 , 
m_lßd”Proxy
(
lßd”Proxy
)

93 , 
m_skMode
(
skMode
.
üossTh»adSŒšg
())

95 
ASSERT
(
m_wÜk”Cl›ÁW¿µ”
.
g‘
());

96 
	gm_lßd”Proxy
.
po¡TaskToLßd”
(
ü—‹C®lbackTask
(&
MašTh»adBridge
::
mašTh»adC»©eLßd”
, 
this
, 
»que¡
, 
İtiÚs
));

99 
	gWÜk”Th»adabËLßd”
::
MašTh»adBridge
::~MainThreadBridge()

103 
WÜk”Th»adabËLßd”
::
MašTh»adBridge
::
mašTh»adC»©eLßd”
(
SütExecutiÚCÚ‹xt
* 
cÚ‹xt
, MašTh»adBridge* 
thisPŒ
, 
PassOwnPŒ
<
CrossTh»adResourûReque¡D©a
> 
»que¡D©a
, 
Th»adabËLßd”O±iÚs
 
İtiÚs
)

105 
ASSERT
(
isMašTh»ad
());

106 
ASSERT
(
cÚ‹xt
->
isDocum’t
());

111 
	gOwnPŒ
<
	gResourûReque¡
> 
»que¡
(
ResourûReque¡
::
adİt
(
»que¡D©a
));

115 
	gthisPŒ
->
	gm_mašTh»adLßd”
 = 
Th»adabËLßd”
::
ü—‹
(
cÚ‹xt
, 
thisPŒ
, *
»que¡
, 
İtiÚs
);

116 
ASSERT
(
thisPŒ
->
m_mašTh»adLßd”
);

119 
	gWÜk”Th»adabËLßd”
::
MašTh»adBridge
::
mašTh»adDe¡roy
(
SütExecutiÚCÚ‹xt
* 
cÚ‹xt
, MašTh»adBridge* 
thisPŒ
)

121 
ASSERT
(
isMašTh»ad
());

122 
ASSERT_UNUSED
(
cÚ‹xt
, cÚ‹xt->
isDocum’t
());

123 
d–‘e
 
	gthisPŒ
;

126 
	gWÜk”Th»adabËLßd”
::
MašTh»adBridge
::
de¡roy
()

129 
ş—rCl›ÁW¿µ”
();

132 
	gm_lßd”Proxy
.
po¡TaskToLßd”
(
ü—‹C®lbackTask
(&
MašTh»adBridge
::
mašTh»adDe¡roy
, 
this
));

135 
	gWÜk”Th»adabËLßd”
::
MašTh»adBridge
::
mašTh»adCªûl
(
SütExecutiÚCÚ‹xt
* 
cÚ‹xt
, MašTh»adBridge* 
thisPŒ
)

137 
ASSERT
(
isMašTh»ad
());

138 
ASSERT_UNUSED
(
cÚ‹xt
, cÚ‹xt->
isDocum’t
());

140 ià(!
	gthisPŒ
->
	gm_mašTh»adLßd”
)

142 
	gthisPŒ
->
	gm_mašTh»adLßd”
->
ÿnûl
();

143 
	gthisPŒ
->
	gm_mašTh»adLßd”
 = 0;

146 
	gWÜk”Th»adabËLßd”
::
MašTh»adBridge
::
ÿnûl
()

148 
m_lßd”Proxy
.
po¡TaskToLßd”
(
ü—‹C®lbackTask
(&
MašTh»adBridge
::
mašTh»adCªûl
, 
this
));

149 
Th»adabËLßd”Cl›ÁW¿µ”
* 
	gş›ÁW¿µ”
 = 
m_wÜk”Cl›ÁW¿µ”
.
g‘
();

150 ià(!
	gş›ÁW¿µ”
->
dÚe
()) {

153 
ResourûE¼Ü
 
”rÜ
(
SŒšg
(), 0, String(), String());

154 
	g”rÜ
.
£tIsCªûÎ©iÚ
(
Œue
);

155 
	gş›ÁW¿µ”
->
didFa
(
”rÜ
);

157 
ş—rCl›ÁW¿µ”
();

160 
	gWÜk”Th»adabËLßd”
::
MašTh»adBridge
::
ş—rCl›ÁW¿µ”
()

162 
m_wÜk”Cl›ÁW¿µ”
->
ş—rCl›Á
();

165 
wÜk”CÚ‹xtDidS’dD©a
(
SütExecutiÚCÚ‹xt
* 
cÚ‹xt
, 
RefPŒ
<
Th»adabËLßd”Cl›ÁW¿µ”
> 
wÜk”Cl›ÁW¿µ”
, 
by‹sS’t
, 
tÙ®By‹sToBeS’t
)

167 
ASSERT_UNUSED
(
cÚ‹xt
, cÚ‹xt->
isWÜk”CÚ‹xt
());

168 
	gwÜk”Cl›ÁW¿µ”
->
didS’dD©a
(
by‹sS’t
, 
tÙ®By‹sToBeS’t
);

171 
	gWÜk”Th»adabËLßd”
::
MašTh»adBridge
::
didS’dD©a
(
by‹sS’t
, 
tÙ®By‹sToBeS’t
)

173 
	gm_lßd”Proxy
.
po¡TaskFÜModeToWÜk”CÚ‹xt
(
ü—‹C®lbackTask
(&
wÜk”CÚ‹xtDidS’dD©a
, 
m_wÜk”Cl›ÁW¿µ”
, 
by‹sS’t
, 
tÙ®By‹sToBeS’t
), 
m_skMode
);

176 
wÜk”CÚ‹xtDidReûiveRe¥Ú£
(
SütExecutiÚCÚ‹xt
* 
cÚ‹xt
, 
RefPŒ
<
Th»adabËLßd”Cl›ÁW¿µ”
> 
wÜk”Cl›ÁW¿µ”
, 
PassOwnPŒ
<
CrossTh»adResourûRe¥Ú£D©a
> 
»¥Ú£D©a
)

178 
ASSERT_UNUSED
(
cÚ‹xt
, cÚ‹xt->
isWÜk”CÚ‹xt
());

179 
	gOwnPŒ
<
	gResourûRe¥Ú£
> 
»¥Ú£
(
ResourûRe¥Ú£
::
adİt
(
»¥Ú£D©a
));

180 
	gwÜk”Cl›ÁW¿µ”
->
didReûiveRe¥Ú£
(*
»¥Ú£
);

183 
	gWÜk”Th»adabËLßd”
::
MašTh»adBridge
::
didReûiveRe¥Ú£
(cÚ¡ 
ResourûRe¥Ú£
& 
»¥Ú£
)

185 
m_lßd”Proxy
.
po¡TaskFÜModeToWÜk”CÚ‹xt
(
ü—‹C®lbackTask
(&
wÜk”CÚ‹xtDidReûiveRe¥Ú£
, 
m_wÜk”Cl›ÁW¿µ”
, 
»¥Ú£
), 
m_skMode
);

188 
wÜk”CÚ‹xtDidReûiveD©a
(
SütExecutiÚCÚ‹xt
* 
cÚ‹xt
, 
RefPŒ
<
Th»adabËLßd”Cl›ÁW¿µ”
> 
wÜk”Cl›ÁW¿µ”
, 
PassOwnPŒ
<
VeùÜ
<> > 
veùÜD©a
)

190 
ASSERT_UNUSED
(
cÚ‹xt
, cÚ‹xt->
isWÜk”CÚ‹xt
());

191 
	gwÜk”Cl›ÁW¿µ”
->
didReûiveD©a
(
veùÜD©a
->
d©a
(), veùÜD©a->
size
());

194 
	gWÜk”Th»adabËLßd”
::
MašTh»adBridge
::
didReûiveD©a
(cÚ¡ * 
d©a
, 
ËngthReûived
)

196 
	gOwnPŒ
<
	gVeùÜ
<> > 
veùÜ
(
Ãw
 
VeùÜ
<>(
ËngthReûived
));

197 
memıy
(
veùÜ
->
d©a
(), d©a, 
ËngthReûived
);

198 
	gm_lßd”Proxy
.
po¡TaskFÜModeToWÜk”CÚ‹xt
(
ü—‹C®lbackTask
(&
wÜk”CÚ‹xtDidReûiveD©a
, 
m_wÜk”Cl›ÁW¿µ”
, 
veùÜ
.
»Ëa£
()), 
m_skMode
);

201 
wÜk”CÚ‹xtDidFšishLßdšg
(
SütExecutiÚCÚ‹xt
* 
cÚ‹xt
, 
RefPŒ
<
Th»adabËLßd”Cl›ÁW¿µ”
> 
wÜk”Cl›ÁW¿µ”
, 
id’tif›r
)

203 
ASSERT_UNUSED
(
cÚ‹xt
, cÚ‹xt->
isWÜk”CÚ‹xt
());

204 
	gwÜk”Cl›ÁW¿µ”
->
didFšishLßdšg
(
id’tif›r
);

207 
	gWÜk”Th»adabËLßd”
::
MašTh»adBridge
::
didFšishLßdšg
(
id’tif›r
)

209 
m_lßd”Proxy
.
po¡TaskFÜModeToWÜk”CÚ‹xt
(
ü—‹C®lbackTask
(&
wÜk”CÚ‹xtDidFšishLßdšg
, 
m_wÜk”Cl›ÁW¿µ”
, 
id’tif›r
), 
m_skMode
);

212 
wÜk”CÚ‹xtDidFa
(
SütExecutiÚCÚ‹xt
* 
cÚ‹xt
, 
RefPŒ
<
Th»adabËLßd”Cl›ÁW¿µ”
> 
wÜk”Cl›ÁW¿µ”
, cÚ¡ 
ResourûE¼Ü
& 
”rÜ
)

214 
ASSERT_UNUSED
(
cÚ‹xt
, cÚ‹xt->
isWÜk”CÚ‹xt
());

215 
	gwÜk”Cl›ÁW¿µ”
->
didFa
(
”rÜ
);

218 
	gWÜk”Th»adabËLßd”
::
MašTh»adBridge
::
didFa
(cÚ¡ 
ResourûE¼Ü
& 
”rÜ
)

220 
m_lßd”Proxy
.
po¡TaskFÜModeToWÜk”CÚ‹xt
(
ü—‹C®lbackTask
(&
wÜk”CÚ‹xtDidFa
, 
m_wÜk”Cl›ÁW¿µ”
, 
”rÜ
), 
m_skMode
);

223 
wÜk”CÚ‹xtDidFaRedœeùCheck
(
SütExecutiÚCÚ‹xt
* 
cÚ‹xt
, 
RefPŒ
<
Th»adabËLßd”Cl›ÁW¿µ”
> 
wÜk”Cl›ÁW¿µ”
)

225 
ASSERT_UNUSED
(
cÚ‹xt
, cÚ‹xt->
isWÜk”CÚ‹xt
());

226 
	gwÜk”Cl›ÁW¿µ”
->
didFaRedœeùCheck
();

229 
	gWÜk”Th»adabËLßd”
::
MašTh»adBridge
::
didFaRedœeùCheck
()

231 
m_lßd”Proxy
.
po¡TaskFÜModeToWÜk”CÚ‹xt
(
ü—‹C®lbackTask
(&
wÜk”CÚ‹xtDidFaRedœeùCheck
, 
m_wÜk”Cl›ÁW¿µ”
), 
m_skMode
);

234 
wÜk”CÚ‹xtDidReûiveAuth’tiÿtiÚCªûÎ©iÚ
(
SütExecutiÚCÚ‹xt
* 
cÚ‹xt
, 
RefPŒ
<
Th»adabËLßd”Cl›ÁW¿µ”
> 
wÜk”Cl›ÁW¿µ”
, 
PassOwnPŒ
<
CrossTh»adResourûRe¥Ú£D©a
> 
»¥Ú£D©a
)

236 
ASSERT_UNUSED
(
cÚ‹xt
, cÚ‹xt->
isWÜk”CÚ‹xt
());

237 
	gOwnPŒ
<
	gResourûRe¥Ú£
> 
»¥Ú£
(
ResourûRe¥Ú£
::
adİt
(
»¥Ú£D©a
));

238 
	gwÜk”Cl›ÁW¿µ”
->
didReûiveAuth’tiÿtiÚCªûÎ©iÚ
(*
»¥Ú£
);

241 
	gWÜk”Th»adabËLßd”
::
MašTh»adBridge
::
didReûiveAuth’tiÿtiÚCªûÎ©iÚ
(cÚ¡ 
ResourûRe¥Ú£
& 
»¥Ú£
)

243 
m_lßd”Proxy
.
po¡TaskFÜModeToWÜk”CÚ‹xt
(
ü—‹C®lbackTask
(&
wÜk”CÚ‹xtDidReûiveAuth’tiÿtiÚCªûÎ©iÚ
, 
m_wÜk”Cl›ÁW¿µ”
, 
»¥Ú£
), 
m_skMode
);

	@WorkerThreadableLoader.h

31 #iâdeà
WÜk”Th»adabËLßd”_h


32 
	#WÜk”Th»adabËLßd”_h


	)

34 #ià
ENABLE
(
WORKERS
)

36 
	~"PÏtfÜmSŒšg.h
"

37 
	~"Th»adabËLßd”.h
"

38 
	~"Th»adabËLßd”Cl›Á.h
"

39 
	~"Th»adabËLßd”Cl›ÁW¿µ”.h
"

41 
	~<wtf/PassOwnPŒ.h
>

42 
	~<wtf/PassRefPŒ.h
>

43 
	~<wtf/RefCouÁed.h
>

44 
	~<wtf/RefPŒ.h
>

45 
	~<wtf/Th»adšg.h
>

47 
Çme¥aû
 
	gWebCÜe
 {

49 
şass
 
	gResourûE¼Ü
;

50 
şass
 
	gResourûReque¡
;

51 
şass
 
	gWÜk”CÚ‹xt
;

52 
şass
 
	gWÜk”Lßd”Proxy
;

53 
	gCrossTh»adResourûRe¥Ú£D©a
;

54 
	gCrossTh»adResourûReque¡D©a
;

56 
şass
 
	gWÜk”Th»adabËLßd”
 : 
public
 
RefCouÁed
<
WÜk”Th»adabËLßd”
>,…ubliø
	gTh»adabËLßd”
 {

57 
	gpublic
:

58 
lßdResourûSynchrÚou¦y
(
WÜk”CÚ‹xt
*, cÚ¡ 
ResourûReque¡
&, 
Th»adabËLßd”Cl›Á
&, cÚ¡ 
Th»adabËLßd”O±iÚs
&);

59 
	gPassRefPŒ
<
	gWÜk”Th»adabËLßd”
> 
ü—‹
(
WÜk”CÚ‹xt
* 
wÜk”CÚ‹xt
, 
Th»adabËLßd”Cl›Á
* 
ş›Á
, cÚ¡ 
SŒšg
& 
skMode
, cÚ¡ 
ResourûReque¡
& 
»que¡
, cÚ¡ 
Th»adabËLßd”O±iÚs
& 
İtiÚs
)

61  
adİtRef
(
Ãw
 
WÜk”Th»adabËLßd”
(
wÜk”CÚ‹xt
, 
ş›Á
, 
skMode
, 
»que¡
, 
İtiÚs
));

64 ~
WÜk”Th»adabËLßd”
();

66 
vœtu®
 
ÿnûl
();

68 
boŞ
 
dÚe
(ècÚ¡ {  
	gm_wÜk”Cl›ÁW¿µ”
->done(); }

70 
usšg
 
	gRefCouÁed
<
	gWÜk”Th»adabËLßd”
>::
»f
;

71 
usšg
 
	gRefCouÁed
<
	gWÜk”Th»adabËLßd”
>::
d”ef
;

73 
	g´Ùeùed
:

74 
vœtu®
 
»fTh»adabËLßd”
(è{ 
»f
(); }

75 
vœtu®
 
d”efTh»adabËLßd”
(è{ 
d”ef
(); }

77 
	g´iv©e
:

97 şas 
	cMašTh»adBridge
 : 
public
 
Th»adabËLßd”Cl›Á
 {

98 
public
:

100 
MašTh»adBridge
(
PassRefPŒ
<
Th»adabËLßd”Cl›ÁW¿µ”
>, 
WÜk”Lßd”Proxy
&, cÚ¡ 
SŒšg
& 
skMode
, cÚ¡ 
ResourûReque¡
&, cÚ¡ 
Th»adabËLßd”O±iÚs
&);

101 
ÿnûl
();

102 
de¡roy
();

104 
	g´iv©e
:

106 
ş—rCl›ÁW¿µ”
();

109 
mašTh»adDe¡roy
(
SütExecutiÚCÚ‹xt
*, 
MašTh»adBridge
*);

110 ~
MašTh»adBridge
();

112 
mašTh»adC»©eLßd”
(
SütExecutiÚCÚ‹xt
*, 
MašTh»adBridge
*, 
PassOwnPŒ
<
CrossTh»adResourûReque¡D©a
>, 
Th»adabËLßd”O±iÚs
);

113 
mašTh»adCªûl
(
SütExecutiÚCÚ‹xt
*, 
MašTh»adBridge
*);

114 
vœtu®
 
didS’dD©a
(
by‹sS’t
, 
tÙ®By‹sToBeS’t
);

115 
vœtu®
 
didReûiveRe¥Ú£
(cÚ¡ 
ResourûRe¥Ú£
&);

116 
vœtu®
 
didReûiveD©a
(cÚ¡ *, 
ËngthReûived
);

117 
vœtu®
 
didFšishLßdšg
(
id’tif›r
);

118 
vœtu®
 
didFa
(cÚ¡ 
ResourûE¼Ü
&);

119 
vœtu®
 
didFaRedœeùCheck
();

120 
vœtu®
 
didReûiveAuth’tiÿtiÚCªûÎ©iÚ
(cÚ¡ 
ResourûRe¥Ú£
&);

123 
	gRefPŒ
<
	gTh»adabËLßd”
> 
	gm_mašTh»adLßd”
;

127 
	gRefPŒ
<
	gTh»adabËLßd”Cl›ÁW¿µ”
> 
	gm_wÜk”Cl›ÁW¿µ”
;

130 
	gWÜk”Lßd”Proxy
& 
	gm_lßd”Proxy
;

133 
SŒšg
 
	gm_skMode
;

136 
WÜk”Th»adabËLßd”
(
WÜk”CÚ‹xt
*, 
Th»adabËLßd”Cl›Á
*, cÚ¡ 
SŒšg
& 
skMode
, cÚ¡ 
ResourûReque¡
&, cÚ¡ 
Th»adabËLßd”O±iÚs
&);

138 
	gRefPŒ
<
	gWÜk”CÚ‹xt
> 
	gm_wÜk”CÚ‹xt
;

139 
	gRefPŒ
<
	gTh»adabËLßd”Cl›ÁW¿µ”
> 
	gm_wÜk”Cl›ÁW¿µ”
;

140 
	gMašTh»adBridge
& 
	gm_bridge
;

	@loader.cpp

24 
	~"cÚfig.h
"

25 
	~"lßd”.h
"

27 
	~"Cache.h
"

28 
	~"CachedImage.h
"

29 
	~"CachedResourû.h
"

30 
	~"DocLßd”.h
"

31 
	~"F¿me.h
"

32 
	~"F¿meLßd”.h
"

33 
	~"HTMLDocum’t.h
"

34 
	~"Reque¡.h
"

35 
	~"ResourûHªdË.h
"

36 
	~"ResourûReque¡.h
"

37 
	~"ResourûRe¥Ú£.h
"

38 
	~"Secur™yOrigš.h
"

39 
	~"Sh¬edBufãr.h
"

40 
	~"Sub»sourûLßd”.h
"

41 
	~<wtf/As£¹iÚs.h
>

42 
	~<wtf/VeùÜ.h
>

44 
	#REQUEST_MANAGEMENT_ENABLED
 1

	)

45 
	#REQUEST_DEBUG
 0

	)

47 
Çme¥aû
 
	gWebCÜe
 {

49 #ià
REQUEST_MANAGEMENT_ENABLED


51 
	gmaxReque¡sInFlightP”Ho¡
;

53 cÚ¡ 
	gmaxReque¡sInFlightFÜNÚHTTPPrÙocŞs
 = 20;

55 cÚ¡ 
	gmaxReque¡sInFlightP”Ho¡
 = 10000;

56 cÚ¡ 
	gmaxReque¡sInFlightFÜNÚHTTPPrÙocŞs
 = 10000;

59 
	gLßd”
::
Lßd”
()

60 : 
m_»que¡Tim”
(
this
, &
Lßd”
::
»que¡Tim”Fœed
)

61 , 
m_isSu¥’dšgP’dšgReque¡s
(
çl£
)

63 
	gm_nÚHTTPPrÙocŞHo¡
 = 
Ho¡
::
ü—‹
(
AtomicSŒšg
(), 
maxReque¡sInFlightFÜNÚHTTPPrÙocŞs
);

64 #ià
REQUEST_MANAGEMENT_ENABLED


65 
	gmaxReque¡sInFlightP”Ho¡
 = 
š™ŸlizeMaximumHTTPCÚÃùiÚCouÁP”Ho¡
();

69 
	gLßd”
::~
Lßd”
()

71 
ASSERT_NOT_REACHED
();

74 
	gResourûReque¡
::
T¬g‘Ty³
 
ÿchedResourûTy³ToT¬g‘Ty³
(
CachedResourû
::
Ty³
 
ty³
)

76 
ty³
) {

77 
CachedResourû
::
CSSStyËSh“t
:

78 #ià
ENABLE
(
XSLT
)

79 
CachedResourû
::
XSLStyËSh“t
:

81 #ià
ENABLE
(
XBL
)

82 
CachedResourû
::
XBL
:

84  
ResourûReque¡
::
T¬g‘IsStyËSh“t
;

85 
	gCachedResourû
::
Süt
:

86  
ResourûReque¡
::
T¬g‘IsSüt
;

87 
	gCachedResourû
::
FÚtResourû
:

88  
ResourûReque¡
::
T¬g‘IsFÚtResourû
;

89 
	gCachedResourû
::
ImageResourû
:

90  
ResourûReque¡
::
T¬g‘IsImage
;

92  
	gResourûReque¡
::
T¬g‘IsSub»sourû
;

95 
	gLßd”
::
PriÜ™y
 
Lßd”
::
d‘”mšePriÜ™y
(cÚ¡ 
CachedResourû
* 
»sourû
) const

97 #ià
REQUEST_MANAGEMENT_ENABLED


98 
»sourû
->
ty³
()) {

99 
CachedResourû
::
CSSStyËSh“t
:

100 #ià
ENABLE
(
XSLT
)

101 
CachedResourû
::
XSLStyËSh“t
:

103 #ià
ENABLE
(
XBL
)

104 
CachedResourû
::
XBL
:

106  
High
;

107 
	gCachedResourû
::
Süt
:

108 
CachedResourû
::
FÚtResourû
:

109  
Medium
;

110 
	gCachedResourû
::
ImageResourû
:

111  
Low
;

113 
ASSERT_NOT_REACHED
();

114  
	gLow
;

116  
	gHigh
;

120 
	gLßd”
::
lßd
(
DocLßd”
* 
docLßd”
, 
CachedResourû
* 
»sourû
, 
boŞ
 
šüem’l
, 
Secur™yCheckPŞicy
 
£cur™yCheck
, boŞ 
£ndResourûLßdC®lbacks
)

122 
ASSERT
(
docLßd”
);

123 
Reque¡
* 
	g»que¡
 = 
Ãw
 Reque¡(
docLßd”
, 
»sourû
, 
šüem’l
, 
£cur™yCheck
, 
£ndResourûLßdC®lbacks
);

125 
	gRefPŒ
<
	gHo¡
> 
	gho¡
;

126 
KURL
 
u¾
(
P¬£dURLSŒšg
, 
»sourû
->url());

127 ià(
	gu¾
.
´ÙocŞInHTTPFamy
()) {

128 
	gm_ho¡s
.
checkCÚsi¡’cy
();

129 
AtomicSŒšg
 
	gho¡Name
 = 
u¾
.
ho¡
();

130 
	gho¡
 = 
m_ho¡s
.
g‘
(
ho¡Name
.
im¶
());

131 ià(!
	gho¡
) {

132 
	gho¡
 = 
Ho¡
::
ü—‹
(
ho¡Name
, 
maxReque¡sInFlightP”Ho¡
);

133 
	gm_ho¡s
.
add
(
ho¡Name
.
im¶
(), 
ho¡
);

136 
	gho¡
 = 
m_nÚHTTPPrÙocŞHo¡
;

138 
boŞ
 
	ghadReque¡s
 = 
ho¡
->
hasReque¡s
();

139 
PriÜ™y
 
	g´iÜ™y
 = 
d‘”mšePriÜ™y
(
»sourû
);

140 
	gho¡
->
addReque¡
(
»que¡
, 
´iÜ™y
);

141 
	gdocLßd”
->
šüem’tReque¡CouÁ
();

143 ià(
	g´iÜ™y
 > 
	gLow
 || !
	gu¾
.
´ÙocŞInHTTPFamy
(è|| !
	ghadReque¡s
) {

145 
	gho¡
->
£rveP’dšgReque¡s
(
´iÜ™y
);

148 
scheduËS”veP’dšgReque¡s
();

152 
	gLßd”
::
scheduËS”veP’dšgReque¡s
()

154 ià(!
m_»que¡Tim”
.
isAùive
())

155 
m_»que¡Tim”
.
¡¬tOÃShÙ
(0);

158 
	gLßd”
::
»que¡Tim”Fœed
(
Tim”
<
Lßd”
>*)

160 
£rveP’dšgReque¡s
();

163 
	gLßd”
::
£rveP’dšgReque¡s
(
PriÜ™y
 
mšimumPriÜ™y
)

165 ià(
m_isSu¥’dšgP’dšgReque¡s
)

168 
	gm_»que¡Tim”
.
¡İ
();

170 
	gm_nÚHTTPPrÙocŞHo¡
->
£rveP’dšgReque¡s
(
mšimumPriÜ™y
);

172 
	gVeùÜ
<
	gHo¡
*> 
	gho¡sToS”ve
;

173 
	gm_ho¡s
.
checkCÚsi¡’cy
();

174 
	gHo¡M­
::
™”©Ü
 
i
 = 
m_ho¡s
.
begš
();

175 
	gHo¡M­
::
™”©Ü
 
’d
 = 
m_ho¡s
.end();

176 ;
	gi
 !ğ
’d
; ++i)

177 
	gho¡sToS”ve
.
­³nd
(
i
->
£cÚd
.
g‘
());

179 
	gn
 = 0;‚ < 
	gho¡sToS”ve
.
size
(); ++n) {

180 
Ho¡
* 
	gho¡
 = 
ho¡sToS”ve
[
n
];

181 ià(
	gho¡
->
hasReque¡s
())

182 
	gho¡
->
£rveP’dšgReque¡s
(
mšimumPriÜ™y
);

183 ià(!
	gho¡
->
´oûssšgResourû
()){

184 
AtomicSŒšg
 
	gÇme
 = 
ho¡
->
Çme
();

185 
	gm_ho¡s
.
»move
(
Çme
.
im¶
());

190 
	gLßd”
::
su¥’dP’dšgReque¡s
()

192 
ASSERT
(!
m_isSu¥’dšgP’dšgReque¡s
);

193 
	gm_isSu¥’dšgP’dšgReque¡s
 = 
Œue
;

196 
	gLßd”
::
»sumeP’dšgReque¡s
()

198 
ASSERT
(
m_isSu¥’dšgP’dšgReque¡s
);

199 
	gm_isSu¥’dšgP’dšgReque¡s
 = 
çl£
;

200 ià(!
	gm_ho¡s
.
isEm±y
(è|| 
	gm_nÚHTTPPrÙocŞHo¡
->
hasReque¡s
())

201 
scheduËS”veP’dšgReque¡s
();

204 
	gLßd”
::
nÚCacheReque¡InFlight
(cÚ¡ 
KURL
& 
u¾
)

206 ià(!
u¾
.
´ÙocŞInHTTPFamy
())

209 
AtomicSŒšg
 
	gho¡Name
 = 
u¾
.
ho¡
();

210 
	gm_ho¡s
.
checkCÚsi¡’cy
();

211 
	gRefPŒ
<
	gHo¡
> 
	gho¡
 = 
m_ho¡s
.
g‘
(
ho¡Name
.
im¶
());

212 ià(!
	gho¡
) {

213 
	gho¡
 = 
Ho¡
::
ü—‹
(
ho¡Name
, 
maxReque¡sInFlightP”Ho¡
);

214 
	gm_ho¡s
.
add
(
ho¡Name
.
im¶
(), 
ho¡
);

217 
	gho¡
->
nÚCacheReque¡InFlight
();

220 
	gLßd”
::
nÚCacheReque¡Com¶‘e
(cÚ¡ 
KURL
& 
u¾
)

222 ià(!
u¾
.
´ÙocŞInHTTPFamy
())

225 
AtomicSŒšg
 
	gho¡Name
 = 
u¾
.
ho¡
();

226 
	gm_ho¡s
.
checkCÚsi¡’cy
();

227 
	gRefPŒ
<
	gHo¡
> 
	gho¡
 = 
m_ho¡s
.
g‘
(
ho¡Name
.
im¶
());

228 
ASSERT
(
ho¡
);

229 ià(!
	gho¡
)

232 
	gho¡
->
nÚCacheReque¡Com¶‘e
();

235 
	gLßd”
::
ÿnûlReque¡s
(
DocLßd”
* 
docLßd”
)

237 
docLßd”
->
ş—rP’dšgP»lßds
();

239 ià(
	gm_nÚHTTPPrÙocŞHo¡
->
hasReque¡s
())

240 
	gm_nÚHTTPPrÙocŞHo¡
->
ÿnûlReque¡s
(
docLßd”
);

242 
	gVeùÜ
<
	gHo¡
*> 
	gho¡sToCªûl
;

243 
	gm_ho¡s
.
checkCÚsi¡’cy
();

244 
	gHo¡M­
::
™”©Ü
 
i
 = 
m_ho¡s
.
begš
();

245 
	gHo¡M­
::
™”©Ü
 
’d
 = 
m_ho¡s
.end();

246 ;
	gi
 !ğ
’d
; ++i)

247 
	gho¡sToCªûl
.
­³nd
(
i
->
£cÚd
.
g‘
());

249 
	gn
 = 0;‚ < 
	gho¡sToCªûl
.
size
(); ++n) {

250 
Ho¡
* 
	gho¡
 = 
ho¡sToCªûl
[
n
];

251 ià(
	gho¡
->
hasReque¡s
())

252 
	gho¡
->
ÿnûlReque¡s
(
docLßd”
);

255 
scheduËS”veP’dšgReque¡s
();

257 
ASSERT
(
docLßd”
->
»que¡CouÁ
(è=ğ(docLßd”->
lßdInProg»ss
() ? 1 : 0));

260 
	gLßd”
::
Ho¡
::Ho¡(cÚ¡ 
AtomicSŒšg
& 
Çme
, 
maxReque¡sInFlight
)

261 : 
m_Çme
(
Çme
)

262 , 
m_maxReque¡sInFlight
(
maxReque¡sInFlight
)

263 , 
m_numResourûsProûssšg
(0)

264 , 
m_nÚCachedReque¡sInFlight
(0)

268 
	gLßd”
::
Ho¡
::~Host()

270 
ASSERT
(
m_»que¡sLßdšg
.
isEm±y
());

271 
	gp
 = 0;… <ğ
High
;…++)

272 
ASSERT
(
m_»que¡sP’dšg
[
p
].
isEm±y
());

275 
	gLßd”
::
Ho¡
::
addReque¡
(
Reque¡
* 
»que¡
, 
PriÜ™y
 
´iÜ™y
)

277 
	gm_»que¡sP’dšg
[
´iÜ™y
].
­³nd
(
»que¡
);

280 
	gLßd”
::
Ho¡
::
nÚCacheReque¡InFlight
()

282 ++
m_nÚCachedReque¡sInFlight
;

285 
	gLßd”
::
Ho¡
::
nÚCacheReque¡Com¶‘e
()

287 --
m_nÚCachedReque¡sInFlight
;

288 
ASSERT
(
m_nÚCachedReque¡sInFlight
 >= 0);

290 
ÿche
()->
lßd”
()->
scheduËS”veP’dšgReque¡s
();

293 
boŞ
 
	gLßd”
::
Ho¡
::
hasReque¡s
() const

295 ià(!
m_»que¡sLßdšg
.
isEm±y
())

296  
Œue
;

297 
	gp
 = 0;… <ğ
High
;…++) {

298 ià(!
	gm_»que¡sP’dšg
[
p
].
isEm±y
())

299  
	gŒue
;

301  
	gçl£
;

304 
	gLßd”
::
Ho¡
::
£rveP’dšgReque¡s
(
Lßd”
::
PriÜ™y
 
mšimumPriÜ™y
)

306 ià(
ÿche
()->
lßd”
()->
isSu¥’dšgP’dšgReque¡s
())

309 
boŞ
 
	g£rveMÜe
 = 
Œue
;

310 
	g´iÜ™y
 = 
High
;…riÜ™y >ğ
mšimumPriÜ™y
 && 
£rveMÜe
; --priority)

311 
£rveP’dšgReque¡s
(
m_»que¡sP’dšg
[
´iÜ™y
], 
£rveMÜe
);

314 
	gLßd”
::
Ho¡
::
£rveP’dšgReque¡s
(
Reque¡Queue
& 
»que¡sP’dšg
, 
boŞ
& 
£rveLow”PriÜ™y
)

316 !
	g»que¡sP’dšg
.
isEm±y
()) {

317 
Reque¡
* 
	g»que¡
 = 
»que¡sP’dšg
.
fœ¡
();

318 
DocLßd”
* 
	gdocLßd”
 = 
»que¡
->
docLßd”
();

319 
boŞ
 
	g»sourûIsCacheV®id©Ü
 = 
»que¡
->
ÿchedResourû
()->
isCacheV®id©Ü
();

324 
boŞ
 
	gshouldLim™Reque¡s
 = !
m_Çme
.
isNuÎ
(è|| 
docLßd”
->
doc
()->
·rsšg
(è|| !docLßd”->doc()->
haveStyËsh“tsLßded
();

325 ià(
	gshouldLim™Reque¡s
 && 
	gm_»que¡sLßdšg
.
size
(è+ 
	gm_nÚCachedReque¡sInFlight
 >ğ
m_maxReque¡sInFlight
) {

326 
£rveLow”PriÜ™y
 = 
çl£
;

329 
	g»que¡sP’dšg
.
»moveFœ¡
();

331 
ResourûReque¡
 
»sourûReque¡
(
»que¡
->
ÿchedResourû
()->
u¾
());

332 
	g»sourûReque¡
.
£tT¬g‘Ty³
(
ÿchedResourûTy³ToT¬g‘Ty³
(
»que¡
->
ÿchedResourû
()->
ty³
()));

334 ià(!
	g»que¡
->
ÿchedResourû
()->
acû±
().
isEm±y
())

335 
	g»sourûReque¡
.
£tHTTPAcû±
(
»que¡
->
ÿchedResourû
()->
acû±
());

339 ià(
	g»sourûIsCacheV®id©Ü
) {

340 
CachedResourû
* 
	g»sourûToRev®id©e
 = 
»que¡
->
ÿchedResourû
()->
»sourûToRev®id©e
();

341 
ASSERT
(
»sourûToRev®id©e
->
ÿnU£CacheV®id©Ü
());

342 
ASSERT
(
»sourûToRev®id©e
->
isLßded
());

343 cÚ¡ 
	gSŒšg
& 
	gÏ¡Modif›d
 = 
»sourûToRev®id©e
->
»¥Ú£
().
h‰pH—d”F›ld
("Last-Modified");

344 cÚ¡ 
	gSŒšg
& 
	geTag
 = 
»sourûToRev®id©e
->
»¥Ú£
().
h‰pH—d”F›ld
("ETag");

345 ià(!
	gÏ¡Modif›d
.
isEm±y
(è|| !
	geTag
.isEmpty()) {

346 
ASSERT
(
docLßd”
->
ÿchePŞicy
(è!ğ
CachePŞicyR–ßd
);

347 ià(
	gdocLßd”
->
ÿchePŞicy
(è=ğ
CachePŞicyRev®id©e
)

348 
»sourûReque¡
.
£tHTTPH—d”F›ld
("Cache-Control", "max-age=0");

349 ià(!
	gÏ¡Modif›d
.
isEm±y
())

350 
	g»sourûReque¡
.
£tHTTPH—d”F›ld
("If-Modif›d-Sšû", 
Ï¡Modif›d
);

351 ià(!
	geTag
.
isEm±y
())

352 
	g»sourûReque¡
.
£tHTTPH—d”F›ld
("If-NÚe-M©ch", 
eTag
);

356 
	gRefPŒ
<
	gSub»sourûLßd”
> 
	glßd”
 = 
Sub»sourûLßd”
::
ü—‹
(
docLßd”
->
doc
()->
äame
(),

357 
this
, 
»sourûReque¡
, 
»que¡
->
shouldDoSecur™yCheck
(),„eque¡->
£ndResourûLßdC®lbacks
());

358 ià(
	glßd”
) {

359 
	gm_»que¡sLßdšg
.
add
(
lßd”
.
»Ëa£
(), 
»que¡
);

360 
	g»que¡
->
ÿchedResourû
()->
£tReque¡edFromN‘wÜkšgLay”
();

361 #ià
REQUEST_DEBUG


362 
´štf
("HOST % COUNT %d LOADING %s\n", 
»sourûReque¡
.
u¾
().
ho¡
().
Ïtš1
().
d©a
(), 
m_»que¡sLßdšg
.
size
(), 
»que¡
->
ÿchedResourû
()->url().latin1().data());

365 
	gdocLßd”
->
deüem’tReque¡CouÁ
();

366 
	gdocLßd”
->
£tLßdInProg»ss
(
Œue
);

367 
	g»que¡
->
ÿchedResourû
()->
”rÜ
();

368 
	gdocLßd”
->
£tLßdInProg»ss
(
çl£
);

369 
d–‘e
 
	g»que¡
;

374 
	gLßd”
::
Ho¡
::
didFšishLßdšg
(
Sub»sourûLßd”
* 
lßd”
)

376 
RefPŒ
<
Ho¡
> 
myPrÙeùÜ
(
this
);

378 
	gReque¡M­
::
™”©Ü
 
i
 = 
m_»que¡sLßdšg
.
fšd
(
lßd”
);

379 ià(
	gi
 =ğ
m_»que¡sLßdšg
.
’d
())

382 
Reque¡
* 
	g»que¡
 = 
i
->
£cÚd
;

383 
	gm_»que¡sLßdšg
.
»move
(
i
);

384 
DocLßd”
* 
	gdocLßd”
 = 
»que¡
->
docLßd”
();

387 
	gRefPŒ
<
	gDocum’t
> 
´ÙeùÜ
(
docLßd”
->
doc
());

388 ià(!
	g»que¡
->
isMuÉ¬t
())

389 
	gdocLßd”
->
deüem’tReque¡CouÁ
();

391 
CachedResourû
* 
	g»sourû
 = 
»que¡
->
ÿchedResourû
();

392 
ASSERT
(!
»sourû
->
»sourûToRev®id©e
());

396 ià(!
	g»sourû
->
”rÜOccu¼ed
()) {

397 
	gdocLßd”
->
£tLßdInProg»ss
(
Œue
);

398 
	g»sourû
->
d©a
(
lßd”
->
»sourûD©a
(), 
Œue
);

399 
	g»sourû
->
fšish
();

402 
d–‘e
 
	g»que¡
;

404 
	gdocLßd”
->
£tLßdInProg»ss
(
çl£
);

406 
	gdocLßd”
->
checkFÜP’dšgP»lßds
();

408 #ià
REQUEST_DEBUG


409 
KURL
 
u
(
P¬£dURLSŒšg
, 
»sourû
->
u¾
());

410 
´štf
("HOST % COUNT %d RECEIVED %s\n", 
u
.
ho¡
().
Ïtš1
().
d©a
(), 
m_»que¡sLßdšg
.
size
(), 
»sourû
->
u¾
().latin1().data());

412 
£rveP’dšgReque¡s
();

415 
	gLßd”
::
Ho¡
::
didFa
(
Sub»sourûLßd”
* 
lßd”
, cÚ¡ 
ResourûE¼Ü
&)

417 
didFa
(
lßd”
);

420 
	gLßd”
::
Ho¡
::
didFa
(
Sub»sourûLßd”
* 
lßd”
, 
boŞ
 
ÿnûÎed
)

422 
	gRefPŒ
<
	gHo¡
> 
myPrÙeùÜ
(
this
);

424 
	glßd”
->
ş—rCl›Á
();

426 
	gReque¡M­
::
™”©Ü
 
i
 = 
m_»que¡sLßdšg
.
fšd
(
lßd”
);

427 ià(
	gi
 =ğ
m_»que¡sLßdšg
.
’d
())

430 
Reque¡
* 
	g»que¡
 = 
i
->
£cÚd
;

431 
	gm_»que¡sLßdšg
.
»move
(
i
);

432 
DocLßd”
* 
	gdocLßd”
 = 
»que¡
->
docLßd”
();

435 
	gRefPŒ
<
	gDocum’t
> 
´ÙeùÜ
(
docLßd”
->
doc
());

436 ià(!
	g»que¡
->
isMuÉ¬t
())

437 
	gdocLßd”
->
deüem’tReque¡CouÁ
();

439 
CachedResourû
* 
	g»sourû
 = 
»que¡
->
ÿchedResourû
();

441 ià(
	g»sourû
->
»sourûToRev®id©e
())

442 
ÿche
()->
»v®id©iÚFaed
(
»sourû
);

444 ià(!
	gÿnûÎed
) {

445 
	gdocLßd”
->
£tLßdInProg»ss
(
Œue
);

446 
	g»sourû
->
”rÜ
();

449 
	gdocLßd”
->
£tLßdInProg»ss
(
çl£
);

450 ià(
	gÿnûÎed
 || !
	g»sourû
->
isP»lßded
())

451 
ÿche
()->
»move
(
»sourû
);

453 
d–‘e
 
	g»que¡
;

455 
	gdocLßd”
->
checkFÜP’dšgP»lßds
();

457 
£rveP’dšgReque¡s
();

460 
	gLßd”
::
Ho¡
::
didReûiveRe¥Ú£
(
Sub»sourûLßd”
* 
lßd”
, cÚ¡ 
ResourûRe¥Ú£
& 
»¥Ú£
)

462 
	gRefPŒ
<
	gHo¡
> 
´ÙeùÜ
(
this
);

464 
Reque¡
* 
	g»que¡
 = 
m_»que¡sLßdšg
.
g‘
(
lßd”
);

472 ià(!
	g»que¡
)

475 
CachedResourû
* 
	g»sourû
 = 
»que¡
->
ÿchedResourû
();

477 ià(
	g»sourû
->
isCacheV®id©Ü
()) {

478 ià(
	g»¥Ú£
.
h‰pStusCode
() == 304) {

480 
m_»que¡sLßdšg
.
»move
(
lßd”
);

481 
	glßd”
->
ş—rCl›Á
();

482 
	g»que¡
->
docLßd”
()->
deüem’tReque¡CouÁ
();

485 
ÿche
()->
»v®id©iÚSucûeded
(
»sourû
, 
»¥Ú£
);

487 ià(
	g»que¡
->
docLßd”
()->
äame
())

488 
	g»que¡
->
docLßd”
()->
äame
()->
lßd”
()->
checkCom¶‘ed
();

490 
d–‘e
 
	g»que¡
;

492 
£rveP’dšgReque¡s
();

496 
ÿche
()->
»v®id©iÚFaed
(
»sourû
);

499 
	g»sourû
->
£tRe¥Ú£
(
»¥Ú£
);

501 
SŒšg
 
	g’codšg
 = 
»¥Ú£
.
‹xtEncodšgName
();

502 ià(!
	g’codšg
.
isNuÎ
())

503 
	g»sourû
->
£tEncodšg
(
’codšg
);

505 ià(
	g»que¡
->
isMuÉ¬t
()) {

506 
ASSERT
(
»sourû
->
isImage
());

507 
	g¡©ic_ÿ¡
<
	gCachedImage
*>(
	g»sourû
)->
ş—r
();

508 ià(
	g»que¡
->
docLßd”
()->
äame
())

509 
	g»que¡
->
docLßd”
()->
äame
()->
lßd”
()->
checkCom¶‘ed
();

510 } ià(
	g»¥Ú£
.
isMuÉ¬t
()) {

511 
	g»que¡
->
£tIsMuÉ¬t
(
Œue
);

514 
	g»que¡
->
docLßd”
()->
deüem’tReque¡CouÁ
();

517 
ASSERT
(
lßd”
->
hªdË
());

518 ià(!
	g»sourû
->
isImage
())

519 
	glßd”
->
hªdË
()->
ÿnûl
();

523 
	gLßd”
::
Ho¡
::
didReûiveD©a
(
Sub»sourûLßd”
* 
lßd”
, cÚ¡ * 
d©a
, 
size
)

525 
	gRefPŒ
<
	gHo¡
> 
´ÙeùÜ
(
this
);

527 
Reque¡
* 
	g»que¡
 = 
m_»que¡sLßdšg
.
g‘
(
lßd”
);

528 ià(!
	g»que¡
)

531 
CachedResourû
* 
	g»sourû
 = 
»que¡
->
ÿchedResourû
();

532 
ASSERT
(!
»sourû
->
isCacheV®id©Ü
());

534 ià(
	g»sourû
->
”rÜOccu¼ed
())

537 ià(
	g»sourû
->
»¥Ú£
().
h‰pStusCode
() / 100 == 4) {

540 
»sourû
->
h‰pStusCodeE¼Ü
();

545 ià(
	g»que¡
->
isMuÉ¬t
()) {

548 
	gRefPŒ
<
	gSh¬edBufãr
> 
	gcİ›dD©a
 = 
Sh¬edBufãr
::
ü—‹
(
d©a
, 
size
);

549 
	g»sourû
->
d©a
(
cİ›dD©a
.
»Ëa£
(), 
Œue
);

550 } ià(
	g»que¡
->
isInüem’l
())

551 
	g»sourû
->
d©a
(
lßd”
->
»sourûD©a
(), 
çl£
);

554 
	gLßd”
::
Ho¡
::
ÿnûlP’dšgReque¡s
(
Reque¡Queue
& 
»que¡sP’dšg
, 
DocLßd”
* 
docLßd”
)

556 
Reque¡Queue
 
	g»maššg
;

557 
	gReque¡Queue
::
™”©Ü
 
’d
 = 
»que¡sP’dšg
.end();

558 
	gReque¡Queue
::
™”©Ü
 
™
 = 
»que¡sP’dšg
.
begš
(); 
	g™
 !ğ
’d
; ++it) {

559 
Reque¡
* 
	g»que¡
 = *
™
;

560 ià(
	g»que¡
->
docLßd”
() == docLoader) {

561 
ÿche
()->
»move
(
»que¡
->
ÿchedResourû
());

562 
d–‘e
 
	g»que¡
;

563 
	gdocLßd”
->
deüem’tReque¡CouÁ
();

565 
	g»maššg
.
­³nd
(
»que¡
);

567 
	g»que¡sP’dšg
.
sw­
(
»maššg
);

570 
	gLßd”
::
Ho¡
::
ÿnûlReque¡s
(
DocLßd”
* 
docLßd”
)

572 
p
 = 0; 
	gp
 <ğ
High
;…++)

573 
ÿnûlP’dšgReque¡s
(
m_»que¡sP’dšg
[
p
], 
docLßd”
);

575 
	gVeùÜ
<
	gSub»sourûLßd”
*, 256> 
	glßd”sToCªûl
;

577 
	gReque¡M­
::
™”©Ü
 
’d
 = 
m_»que¡sLßdšg
.end();

578 
	gReque¡M­
::
™”©Ü
 
i
 = 
m_»que¡sLßdšg
.
begš
(); 
	gi
 !ğ
’d
; ++i) {

579 
Reque¡
* 
	gr
 = 
i
->
£cÚd
;

580 ià(
	gr
->
docLßd”
() == docLoader)

581 
lßd”sToCªûl
.
­³nd
(
i
->
fœ¡
.
g‘
());

584 
	gi
 = 0; i < 
	glßd”sToCªûl
.
size
(); ++i) {

585 
Sub»sourûLßd”
* 
	glßd”
 = 
lßd”sToCªûl
[
i
];

586 
didFa
(
lßd”
, 
Œue
);

	@loader.h

22 #iâdeà
lßd”_h


23 
	#lßd”_h


	)

25 
	~"AtomicSŒšg.h
"

26 
	~"AtomicSŒšgIm¶.h
"

27 
	~"F¿meLßd”Ty³s.h
"

28 
	~"PÏtfÜmSŒšg.h
"

29 
	~"Sub»sourûLßd”Cl›Á.h
"

30 
	~"Tim”.h
"

31 
	~<wtf/Deque.h
>

32 
	~<wtf/HashM­.h
>

33 
	~<wtf/NÚcİyabË.h
>

35 
Çme¥aû
 
	gWebCÜe
 {

37 
şass
 
	gCachedResourû
;

38 
şass
 
	gDocLßd”
;

39 
şass
 
	gKURL
;

40 
şass
 
	gReque¡
;

42 şas 
	cLßd”
 : 
public
 
NÚcİyabË
 {

43 
public
:

44 
Lßd”
();

45 ~
Lßd”
();

47 
lßd
(
DocLßd”
*, 
CachedResourû
*, 
boŞ
 
šüem’l
 = 
Œue
, 
Secur™yCheckPŞicy
 = 
DoSecur™yCheck
, boŞ 
£ndResourûLßdC®lbacks
 =rue);

49 
ÿnûlReque¡s
(
DocLßd”
*);

51 
	ePriÜ™y
 { 
	gLow
, 
	gMedium
, 
	gHigh
 };

52 
£rveP’dšgReque¡s
(
PriÜ™y
 
mšimumPriÜ™y
 = 
Low
);

54 
boŞ
 
isSu¥’dšgP’dšgReque¡s
(è{  
	gm_isSu¥’dšgP’dšgReque¡s
; }

55 
su¥’dP’dšgReque¡s
();

56 
»sumeP’dšgReque¡s
();

58 
nÚCacheReque¡InFlight
(cÚ¡ 
KURL
&);

59 
nÚCacheReque¡Com¶‘e
(cÚ¡ 
KURL
&);

61 
	g´iv©e
:

62 
PriÜ™y
 
d‘”mšePriÜ™y
(cÚ¡ 
CachedResourû
*) const;

63 
scheduËS”veP’dšgReque¡s
();

65 
»que¡Tim”Fœed
(
Tim”
<
Lßd”
>*);

67 
şass
 
	gHo¡
 : 
public
 
RefCouÁed
<
Ho¡
>, 
´iv©e
 
	gSub»sourûLßd”Cl›Á
 {

68 
	gpublic
:

69 
PassRefPŒ
<
Ho¡
> 
ü—‹
(cÚ¡ 
AtomicSŒšg
& 
Çme
, 
maxReque¡sInFlight
)

71  
adİtRef
(
Ãw
 
Ho¡
(
Çme
, 
maxReque¡sInFlight
));

73 ~
Ho¡
();

75 cÚ¡ 
	gAtomicSŒšg
& 
Çme
(ècÚ¡ {  
	gm_Çme
; }

76 
addReque¡
(
Reque¡
*, 
PriÜ™y
);

77 
nÚCacheReque¡InFlight
();

78 
nÚCacheReque¡Com¶‘e
();

79 
£rveP’dšgReque¡s
(
PriÜ™y
 
mšimumPriÜ™y
 = 
Low
);

80 
ÿnûlReque¡s
(
DocLßd”
*);

81 
boŞ
 
hasReque¡s
() const;

83 
boŞ
 
´oûssšgResourû
(ècÚ¡ {  
	gm_numResourûsProûssšg
 !ğ0 || 
m_nÚCachedReque¡sInFlight
 !=0; }

85 
	g´iv©e
:

86 
Ho¡
(cÚ¡ 
AtomicSŒšg
&, );

88 
vœtu®
 
didReûiveRe¥Ú£
(
Sub»sourûLßd”
*, cÚ¡ 
ResourûRe¥Ú£
&);

89 
vœtu®
 
didReûiveD©a
(
Sub»sourûLßd”
*, const *, );

90 
vœtu®
 
didFšishLßdšg
(
Sub»sourûLßd”
*);

91 
vœtu®
 
didFa
(
Sub»sourûLßd”
*, cÚ¡ 
ResourûE¼Ü
&);

93 
	gDeque
<
	tReque¡
*> 
	tReque¡Queue
;

94 
£rveP’dšgReque¡s
(
Reque¡Queue
& 
»que¡sP’dšg
, 
boŞ
& 
£rveLow”PriÜ™y
);

95 
didFa
(
Sub»sourûLßd”
*, 
boŞ
 
ÿnûÎed
 = 
çl£
);

96 
ÿnûlP’dšgReque¡s
(
Reque¡Queue
& 
»que¡sP’dšg
, 
DocLßd”
*);

98 
Reque¡Queue
 
	gm_»que¡sP’dšg
[
High
 + 1];

99 
	gHashM­
<
	tRefPŒ
<
	tSub»sourûLßd”
>, 
	tReque¡
*> 
	tReque¡M­
;

100 
Reque¡M­
 
	gm_»que¡sLßdšg
;

101 cÚ¡ 
AtomicSŒšg
 
	gm_Çme
;

102 cÚ¡ 
	gm_maxReque¡sInFlight
;

103 
	gm_numResourûsProûssšg
;

104 
	gm_nÚCachedReque¡sInFlight
;

106 
	gHashM­
<
	tAtomicSŒšgIm¶
*, 
	tRefPŒ
<
	tHo¡
> > 
	tHo¡M­
;

107 
Ho¡M­
 
	gm_ho¡s
;

108 
	gRefPŒ
<
	gHo¡
> 
	gm_nÚHTTPPrÙocŞHo¡
;

110 
	gTim”
<
	gLßd”
> 
	gm_»que¡Tim”
;

112 
boŞ
 
	gm_isSu¥’dšgP’dšgReque¡s
;

	@/usr/include/pthread.h

20 #iâdeà
_PTHREAD_H


21 
	#_PTHREAD_H
 1

	)

23 
	~<ã©u»s.h
>

24 
	~<’dŸn.h
>

25 
	~<sched.h
>

26 
	~<time.h
>

28 
	#__Ãed_sig£t_t


	)

29 
	~<sigÇl.h
>

30 
	~<b™s/±h»adty³s.h
>

31 
	~<b™s/£tjmp.h
>

32 
	~<b™s/wÜdsize.h
>

38 
	mPTHREAD_CREATE_JOINABLE
,

39 
	#PTHREAD_CREATE_JOINABLE
 
PTHREAD_CREATE_JOINABLE


	)

40 
	mPTHREAD_CREATE_DETACHED


41 
	#PTHREAD_CREATE_DETACHED
 
PTHREAD_CREATE_DETACHED


	)

48 
	mPTHREAD_MUTEX_TIMED_NP
,

49 
	mPTHREAD_MUTEX_RECURSIVE_NP
,

50 
	mPTHREAD_MUTEX_ERRORCHECK_NP
,

51 
	mPTHREAD_MUTEX_ADAPTIVE_NP


52 #ifdeà
__USE_UNIX98


54 
	mPTHREAD_MUTEX_NORMAL
 = 
PTHREAD_MUTEX_TIMED_NP
,

55 
	mPTHREAD_MUTEX_RECURSIVE
 = 
PTHREAD_MUTEX_RECURSIVE_NP
,

56 
	mPTHREAD_MUTEX_ERRORCHECK
 = 
PTHREAD_MUTEX_ERRORCHECK_NP
,

57 
	mPTHREAD_MUTEX_DEFAULT
 = 
PTHREAD_MUTEX_NORMAL


59 #ifdeà
__USE_GNU


61 , 
	mPTHREAD_MUTEX_FAST_NP
 = 
PTHREAD_MUTEX_TIMED_NP


66 #ifdeà
__USE_XOPEN2K


70 
	mPTHREAD_MUTEX_STALLED
,

71 
	mPTHREAD_MUTEX_STALLED_NP
 = 
PTHREAD_MUTEX_STALLED
,

72 
	mPTHREAD_MUTEX_ROBUST
,

73 
	mPTHREAD_MUTEX_ROBUST_NP
 = 
PTHREAD_MUTEX_ROBUST


78 #ifdeà
__USE_UNIX98


82 
	mPTHREAD_PRIO_NONE
,

83 
	mPTHREAD_PRIO_INHERIT
,

84 
	mPTHREAD_PRIO_PROTECT


90 #ià
__WORDSIZE
 == 64

91 
	#PTHREAD_MUTEX_INITIALIZER
 \

92 { { 0, 0, 0, 0, 0, 0, { 0, 0 } } }

	)

93 #ifdeà
__USE_GNU


94 
	#PTHREAD_RECURSIVE_MUTEX_INITIALIZER_NP
 \

95 { { 0, 0, 0, 0, 
PTHREAD_MUTEX_RECURSIVE_NP
, 0, { 0, 0 } } }

	)

96 
	#PTHREAD_ERRORCHECK_MUTEX_INITIALIZER_NP
 \

97 { { 0, 0, 0, 0, 
PTHREAD_MUTEX_ERRORCHECK_NP
, 0, { 0, 0 } } }

	)

98 
	#PTHREAD_ADAPTIVE_MUTEX_INITIALIZER_NP
 \

99 { { 0, 0, 0, 0, 
PTHREAD_MUTEX_ADAPTIVE_NP
, 0, { 0, 0 } } }

	)

102 
	#PTHREAD_MUTEX_INITIALIZER
 \

103 { { 0, 0, 0, 0, 0, { 0 } } }

	)

104 #ifdeà
__USE_GNU


105 
	#PTHREAD_RECURSIVE_MUTEX_INITIALIZER_NP
 \

106 { { 0, 0, 0, 
PTHREAD_MUTEX_RECURSIVE_NP
, 0, { 0 } } }

	)

107 
	#PTHREAD_ERRORCHECK_MUTEX_INITIALIZER_NP
 \

108 { { 0, 0, 0, 
PTHREAD_MUTEX_ERRORCHECK_NP
, 0, { 0 } } }

	)

109 
	#PTHREAD_ADAPTIVE_MUTEX_INITIALIZER_NP
 \

110 { { 0, 0, 0, 
PTHREAD_MUTEX_ADAPTIVE_NP
, 0, { 0 } } }

	)

116 #ià
defšed
 
__USE_UNIX98
 || defšed 
__USE_XOPEN2K


119 
	mPTHREAD_RWLOCK_PREFER_READER_NP
,

120 
	mPTHREAD_RWLOCK_PREFER_WRITER_NP
,

121 
	mPTHREAD_RWLOCK_PREFER_WRITER_NONRECURSIVE_NP
,

122 
	mPTHREAD_RWLOCK_DEFAULT_NP
 = 
PTHREAD_RWLOCK_PREFER_READER_NP


126 
	#PTHREAD_RWLOCK_INITIALIZER
 \

127 { { 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0 } }

	)

128 #ifdeà
__USE_GNU


129 #ià
__WORDSIZE
 == 64

130 
	#PTHREAD_RWLOCK_WRITER_NONRECURSIVE_INITIALIZER_NP
 \

132 
PTHREAD_RWLOCK_PREFER_WRITER_NONRECURSIVE_NP
 } }

	)

134 #ià
__BYTE_ORDER
 =ğ
__LITTLE_ENDIAN


135 
	#PTHREAD_RWLOCK_WRITER_NONRECURSIVE_INITIALIZER_NP
 \

136 { { 0, 0, 0, 0, 0, 0, 
PTHREAD_RWLOCK_PREFER_WRITER_NONRECURSIVE_NP
, \

137 0, 0, 0, 0 } }

	)

139 
	#PTHREAD_RWLOCK_WRITER_NONRECURSIVE_INITIALIZER_NP
 \

140 { { 0, 0, 0, 0, 0, 0, 0, 0, 0, 
PTHREAD_RWLOCK_PREFER_WRITER_NONRECURSIVE_NP
,\

141 0 } }

	)

151 
	mPTHREAD_INHERIT_SCHED
,

152 
	#PTHREAD_INHERIT_SCHED
 
PTHREAD_INHERIT_SCHED


	)

153 
	mPTHREAD_EXPLICIT_SCHED


154 
	#PTHREAD_EXPLICIT_SCHED
 
PTHREAD_EXPLICIT_SCHED


	)

161 
	mPTHREAD_SCOPE_SYSTEM
,

162 
	#PTHREAD_SCOPE_SYSTEM
 
PTHREAD_SCOPE_SYSTEM


	)

163 
	mPTHREAD_SCOPE_PROCESS


164 
	#PTHREAD_SCOPE_PROCESS
 
PTHREAD_SCOPE_PROCESS


	)

171 
	mPTHREAD_PROCESS_PRIVATE
,

172 
	#PTHREAD_PROCESS_PRIVATE
 
PTHREAD_PROCESS_PRIVATE


	)

173 
	mPTHREAD_PROCESS_SHARED


174 
	#PTHREAD_PROCESS_SHARED
 
PTHREAD_PROCESS_SHARED


	)

180 
	#PTHREAD_COND_INITIALIZER
 { { 0, 0, 0, 0, 0, (*è0, 0, 0 } }

	)

184 
	s_±h»ad_ş—nup_bufãr


186 (*
	m__routše
) (*);

187 *
	m__¬g
;

188 
	m__ÿnûÉy³
;

189 
_±h»ad_ş—nup_bufãr
 *
	m__´ev
;

195 
	mPTHREAD_CANCEL_ENABLE
,

196 
	#PTHREAD_CANCEL_ENABLE
 
PTHREAD_CANCEL_ENABLE


	)

197 
	mPTHREAD_CANCEL_DISABLE


198 
	#PTHREAD_CANCEL_DISABLE
 
PTHREAD_CANCEL_DISABLE


	)

202 
	mPTHREAD_CANCEL_DEFERRED
,

203 
	#PTHREAD_CANCEL_DEFERRED
 
PTHREAD_CANCEL_DEFERRED


	)

204 
	mPTHREAD_CANCEL_ASYNCHRONOUS


205 
	#PTHREAD_CANCEL_ASYNCHRONOUS
 
PTHREAD_CANCEL_ASYNCHRONOUS


	)

207 
	#PTHREAD_CANCELED
 ((*è-1)

	)

211 
	#PTHREAD_ONCE_INIT
 0

	)

214 #ifdeà
__USE_XOPEN2K


218 
	#PTHREAD_BARRIER_SERIAL_THREAD
 -1

	)

222 
__BEGIN_DECLS


227 
±h»ad_ü—‹
 (
±h»ad_t
 *
__»¡riù
 
__Ãwth»ad
,

228 
__cÚ¡
 
±h»ad_©Œ_t
 *
__»¡riù
 
__©Œ
,

229 *(*
__¡¬t_routše
) (*),

230 *
__»¡riù
 
__¬g
è
__THROW
 
__nÚnuÎ
 ((1, 3));

236 
	$±h»ad_ex™
 (*
__»tv®
è
	`__©Œibu‹__
 ((
__nÜ‘uº__
));

244 
	`±h»ad_još
 (
±h»ad_t
 
__th
, **
__th»ad_»tuº
);

246 #ifdeà
__USE_GNU


249 
	$±h»ad_Œyjoš_Å
 (
±h»ad_t
 
__th
, **
__th»ad_»tuº
è
__THROW
;

257 
	`±h»ad_timedjoš_Å
 (
±h»ad_t
 
__th
, **
__th»ad_»tuº
,

258 
__cÚ¡
 
time¥ec
 *
__ab¡ime
);

265 
	$±h»ad_d‘ach
 (
±h»ad_t
 
__th
è
__THROW
;

269 
±h»ad_t
 
	$±h»ad_£lf
 (è
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
));

272 
	$±h»ad_equ®
 (
±h»ad_t
 
__th»ad1
,…th»ad_ˆ
__th»ad2
è
__THROW
;

280 
	$±h»ad_©Œ_š™
 (
±h»ad_©Œ_t
 *
__©Œ
è
__THROW
 
	`__nÚnuÎ
 ((1));

283 
	$±h»ad_©Œ_de¡roy
 (
±h»ad_©Œ_t
 *
__©Œ
)

284 
__THROW
 
	`__nÚnuÎ
 ((1));

287 
	$±h»ad_©Œ_g‘d‘ach¡©e
 (
__cÚ¡
 
±h»ad_©Œ_t
 *
__©Œ
,

288 *
__d‘ach¡©e
)

289 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

292 
	$±h»ad_©Œ_£td‘ach¡©e
 (
±h»ad_©Œ_t
 *
__©Œ
,

293 
__d‘ach¡©e
)

294 
__THROW
 
	`__nÚnuÎ
 ((1));

298 
	$±h»ad_©Œ_g‘gu¬dsize
 (
__cÚ¡
 
±h»ad_©Œ_t
 *
__©Œ
,

299 
size_t
 *
__gu¬dsize
)

300 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

303 
	$±h»ad_©Œ_£tgu¬dsize
 (
±h»ad_©Œ_t
 *
__©Œ
,

304 
size_t
 
__gu¬dsize
)

305 
__THROW
 
	`__nÚnuÎ
 ((1));

309 
	$±h»ad_©Œ_g‘sched·¿m
 (
__cÚ¡
 
±h»ad_©Œ_t
 *
__»¡riù


310 
__©Œ
,

311 
sched_·¿m
 *
__»¡riù
 
__·¿m
)

312 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

315 
	$±h»ad_©Œ_£tsched·¿m
 (
±h»ad_©Œ_t
 *
__»¡riù
 
__©Œ
,

316 
__cÚ¡
 
sched_·¿m
 *
__»¡riù


317 
__·¿m
è
__THROW
 
	`__nÚnuÎ
 ((1, 2));

320 
	$±h»ad_©Œ_g‘schedpŞicy
 (
__cÚ¡
 
±h»ad_©Œ_t
 *
__»¡riù


321 
__©Œ
, *
__»¡riù
 
__pŞicy
)

322 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

325 
	$±h»ad_©Œ_£tschedpŞicy
 (
±h»ad_©Œ_t
 *
__©Œ
, 
__pŞicy
)

326 
__THROW
 
	`__nÚnuÎ
 ((1));

329 
	$±h»ad_©Œ_g‘šh”™sched
 (
__cÚ¡
 
±h»ad_©Œ_t
 *
__»¡riù


330 
__©Œ
, *
__»¡riù
 
__šh”™
)

331 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

334 
	$±h»ad_©Œ_£tšh”™sched
 (
±h»ad_©Œ_t
 *
__©Œ
,

335 
__šh”™
)

336 
__THROW
 
	`__nÚnuÎ
 ((1));

340 
	$±h»ad_©Œ_g‘scİe
 (
__cÚ¡
 
±h»ad_©Œ_t
 *
__»¡riù
 
__©Œ
,

341 *
__»¡riù
 
__scİe
)

342 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

345 
	$±h»ad_©Œ_£tscİe
 (
±h»ad_©Œ_t
 *
__©Œ
, 
__scİe
)

346 
__THROW
 
	`__nÚnuÎ
 ((1));

349 
	$±h»ad_©Œ_g‘¡ackaddr
 (
__cÚ¡
 
±h»ad_©Œ_t
 *
__»¡riù


350 
__©Œ
, **
__»¡riù
 
__¡ackaddr
)

351 
__THROW
 
	`__nÚnuÎ
 ((1, 2)è
__©Œibu‹_d•»ÿ‹d__
;

357 
	$±h»ad_©Œ_£t¡ackaddr
 (
±h»ad_©Œ_t
 *
__©Œ
,

358 *
__¡ackaddr
)

359 
__THROW
 
	`__nÚnuÎ
 ((1)è
__©Œibu‹_d•»ÿ‹d__
;

362 
	$±h»ad_©Œ_g‘¡acksize
 (
__cÚ¡
 
±h»ad_©Œ_t
 *
__»¡riù


363 
__©Œ
, 
size_t
 *
__»¡riù
 
__¡acksize
)

364 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

369 
	$±h»ad_©Œ_£t¡acksize
 (
±h»ad_©Œ_t
 *
__©Œ
,

370 
size_t
 
__¡acksize
)

371 
__THROW
 
	`__nÚnuÎ
 ((1));

373 #ifdeà
__USE_XOPEN2K


375 
	$±h»ad_©Œ_g‘¡ack
 (
__cÚ¡
 
±h»ad_©Œ_t
 *
__»¡riù
 
__©Œ
,

376 **
__»¡riù
 
__¡ackaddr
,

377 
size_t
 *
__»¡riù
 
__¡acksize
)

378 
__THROW
 
	`__nÚnuÎ
 ((1, 2, 3));

383 
	$±h»ad_©Œ_£t¡ack
 (
±h»ad_©Œ_t
 *
__©Œ
, *
__¡ackaddr
,

384 
size_t
 
__¡acksize
è
__THROW
 
	`__nÚnuÎ
 ((1));

387 #ifdeà
__USE_GNU


390 
	$±h»ad_©Œ_£ffš™y_Å
 (
±h»ad_©Œ_t
 *
__©Œ
,

391 
size_t
 
__ıu£tsize
,

392 
__cÚ¡
 
ıu_£t_t
 *
__ıu£t
)

393 
__THROW
 
	`__nÚnuÎ
 ((1, 3));

397 
	$±h»ad_©Œ_g‘affš™y_Å
 (
__cÚ¡
 
±h»ad_©Œ_t
 *
__©Œ
,

398 
size_t
 
__ıu£tsize
,

399 
ıu_£t_t
 *
__ıu£t
)

400 
__THROW
 
	`__nÚnuÎ
 ((1, 3));

406 
	$±h»ad_g‘©Œ_Å
 (
±h»ad_t
 
__th
, 
±h»ad_©Œ_t
 *
__©Œ
)

407 
__THROW
 
	`__nÚnuÎ
 ((2));

415 
	$±h»ad_£tsched·¿m
 (
±h»ad_t
 
__rg‘_th»ad
, 
__pŞicy
,

416 
__cÚ¡
 
sched_·¿m
 *
__·¿m
)

417 
__THROW
 
	`__nÚnuÎ
 ((3));

420 
	$±h»ad_g‘sched·¿m
 (
±h»ad_t
 
__rg‘_th»ad
,

421 *
__»¡riù
 
__pŞicy
,

422 
sched_·¿m
 *
__»¡riù
 
__·¿m
)

423 
__THROW
 
	`__nÚnuÎ
 ((2, 3));

426 
	$±h»ad_£tsched´io
 (
±h»ad_t
 
__rg‘_th»ad
, 
__´io
)

427 
__THROW
;

430 #ifdeà
__USE_UNIX98


432 
	$±h»ad_g‘cÚcu¼’cy
 (è
__THROW
;

435 
	$±h»ad_£tcÚcu¼’cy
 (
__Ëv–
è
__THROW
;

438 #ifdeà
__USE_GNU


443 
	$±h»ad_y›ld
 (è
__THROW
;

448 
	$±h»ad_£ffš™y_Å
 (
±h»ad_t
 
__th
, 
size_t
 
__ıu£tsize
,

449 
__cÚ¡
 
ıu_£t_t
 *
__ıu£t
)

450 
__THROW
 
	`__nÚnuÎ
 ((3));

453 
	$±h»ad_g‘affš™y_Å
 (
±h»ad_t
 
__th
, 
size_t
 
__ıu£tsize
,

454 
ıu_£t_t
 *
__ıu£t
)

455 
__THROW
 
	`__nÚnuÎ
 ((3));

468 
	`±h»ad_Úû
 (
±h»ad_Úû_t
 *
__Úû_cÚŒŞ
,

469 (*
__š™_routše
è()è
	`__nÚnuÎ
 ((1, 2));

480 
	`±h»ad_£tÿnûl¡©e
 (
__¡©e
, *
__Şd¡©e
);

484 
	`±h»ad_£tÿnûÉy³
 (
__ty³
, *
__Şdty³
);

487 
	`±h»ad_ÿnûl
 (
±h»ad_t
 
__th
);

492 
	`±h»ad_‹¡ÿnûl
 ();

501 
__jmp_buf
 
__ÿnûl_jmp_buf
;

502 
__mask_was_§ved
;

503 } 
__ÿnûl_jmp_buf
[1];

504 *
__·d
[4];

505 } 
	t__±h»ad_unwšd_buf_t
 
	t__©Œibu‹__
 ((
	t__®igÃd__
));

508 #iâdeà
__ş—nup_fù_©Œibu‹


509 
	#__ş—nup_fù_©Œibu‹


	)

514 
	s__±h»ad_ş—nup_äame


516 (*
__ÿnûl_routše
) (*);

517 *
__ÿnûl_¬g
;

518 
__do_™
;

519 
__ÿnûl_ty³
;

522 #ià
defšed
 
__GNUC__
 && defšed 
__EXCEPTIONS


523 #ifdeà
__ılu¥lus


525 şas 
	c__±h»ad_ş—nup_şass


527 (*
__ÿnûl_routše
) (*);

528 *
__ÿnûl_¬g
;

529 
__do_™
;

530 
__ÿnûl_ty³
;

532 
public
:

533 
	`__±h»ad_ş—nup_şass
 ((*
__fù
è(*), *
__¬g
)

534 : 
	`__ÿnûl_routše
 (
__fù
), 
	`__ÿnûl_¬g
 (
__¬g
), 
	$__do_™
 (1) { }

535 ~
	$__±h»ad_ş—nup_şass
 (è{ ià(
__do_™
è
	`__ÿnûl_routše
 (
__ÿnûl_¬g
); 
	}
}

536 
	$__£tdo™
 (
__Ãwv®
è{ 
__do_™
 = __Ãwv®; 
	}
}

537 
	$__deãr
 (è{ 
	`±h»ad_£tÿnûÉy³
 (
PTHREAD_CANCEL_DEFERRED
,

538 &
__ÿnûl_ty³
); 
	}
}

539 
	$__»¡Üe
 (ècÚ¡ { 
	`±h»ad_£tÿnûÉy³
 (
__ÿnûl_ty³
, 0); 
	}
}

549 
	#±h»ad_ş—nup_push
(
routše
, 
¬g
) \

551 
__±h»ad_ş—nup_şass
 
	`__şäame
 (
routše
, 
¬g
)

	)

555 
	#±h»ad_ş—nup_pİ
(
execu‹
) \

556 
__şäame
.
	`__£tdo™
 (
execu‹
); \

557 } 0)

	)

559 #ifdeà
__USE_GNU


563 
	#±h»ad_ş—nup_push_deãr_Å
(
routše
, 
¬g
) \

565 
__±h»ad_ş—nup_şass
 
	`__şäame
 (
routše
, 
¬g
); \

566 
__şäame
.
	`__deãr
 ()

	)

571 
	#±h»ad_ş—nup_pİ_»¡Üe_Å
(
execu‹
) \

572 
__şäame
.
	`__»¡Üe
 (); \

573 
__şäame
.
	`__£tdo™
 (
execu‹
); \

574 } 0)

	)

581 
__ex‹º_šlše
 

582 
	$__±h»ad_ş—nup_routše
 (
__±h»ad_ş—nup_äame
 *
__äame
)

584 ià(
__äame
->
__do_™
)

585 
__äame
->
	`__ÿnûl_routše
 (__äame->
__ÿnûl_¬g
);

586 
	}
}

595 
	#±h»ad_ş—nup_push
(
routše
, 
¬g
) \

597 
__±h»ad_ş—nup_äame
 
__şäame
 \

598 
	`__©Œibu‹__
 ((
	`__ş—nup__
 (
__±h»ad_ş—nup_routše
))) \

599 ğ{ .
__ÿnûl_routše
 = (
routše
), .
__ÿnûl_¬g
 = (
¬g
), \

600 .
__do_™
 = 1 };

	)

604 
	#±h»ad_ş—nup_pİ
(
execu‹
) \

605 
__şäame
.
__do_™
 = (
execu‹
); \

606 } 0)

	)

608 #ifdeà
__USE_GNU


612 
	#±h»ad_ş—nup_push_deãr_Å
(
routše
, 
¬g
) \

614 
__±h»ad_ş—nup_äame
 
__şäame
 \

615 
	`__©Œibu‹__
 ((
	`__ş—nup__
 (
__±h»ad_ş—nup_routše
))) \

616 ğ{ .
__ÿnûl_routše
 = (
routše
), .
__ÿnûl_¬g
 = (
¬g
), \

617 .
__do_™
 = 1 }; \

618 (è
	`±h»ad_£tÿnûÉy³
 (
PTHREAD_CANCEL_DEFERRED
, \

619 &
__şäame
.
__ÿnûl_ty³
)

	)

624 
	#±h»ad_ş—nup_pİ_»¡Üe_Å
(
execu‹
) \

625 (è
	`±h»ad_£tÿnûÉy³
 (
__şäame
.
__ÿnûl_ty³
, 
NULL
); \

626 
__şäame
.
__do_™
 = (
execu‹
); \

627 } 0)

	)

638 
	#±h»ad_ş—nup_push
(
routše
, 
¬g
) \

640 
__±h»ad_unwšd_buf_t
 
__ÿnûl_buf
; \

641 (*
__ÿnûl_routše
è(*èğ(
routše
); \

642 *
__ÿnûl_¬g
 = (
¬g
); \

643 
nÙ_fœ¡_ÿÎ
 = 
	`__sig£tjmp
 ((
__jmp_buf_g
 *) (*) \

644 
__ÿnûl_buf
.
__ÿnûl_jmp_buf
, 0); \

645 ià(
	`__butš_ex³ù
 (
nÙ_fœ¡_ÿÎ
, 0)) \

647 
	`__ÿnûl_routše
 (
__ÿnûl_¬g
); \

648 
	`__±h»ad_unwšd_Ãxt
 (&
__ÿnûl_buf
); \

652 
	`__±h»ad_»gi¡”_ÿnûl
 (&
__ÿnûl_buf
); \

653 dØ{

	)

654 
__±h»ad_»gi¡”_ÿnûl
 (
__±h»ad_unwšd_buf_t
 *
__buf
)

655 
__ş—nup_fù_©Œibu‹
;

659 
	#±h»ad_ş—nup_pİ
(
execu‹
) \

662 
	`__±h»ad_uÄegi¡”_ÿnûl
 (&
__ÿnûl_buf
); \

663 ià(
execu‹
) \

664 
	`__ÿnûl_routše
 (
__ÿnûl_¬g
); \

665 } 0)

	)

666 
	$__±h»ad_uÄegi¡”_ÿnûl
 (
__±h»ad_unwšd_buf_t
 *
__buf
)

667 
__ş—nup_fù_©Œibu‹
;

669 #ifdeà
__USE_GNU


673 
	#±h»ad_ş—nup_push_deãr_Å
(
routše
, 
¬g
) \

675 
__±h»ad_unwšd_buf_t
 
__ÿnûl_buf
; \

676 (*
__ÿnûl_routše
è(*èğ(
routše
); \

677 *
__ÿnûl_¬g
 = (
¬g
); \

678 
nÙ_fœ¡_ÿÎ
 = 
	`__sig£tjmp
 ((
__jmp_buf_g
 *) (*) \

679 
__ÿnûl_buf
.
__ÿnûl_jmp_buf
, 0); \

680 ià(
	`__butš_ex³ù
 (
nÙ_fœ¡_ÿÎ
, 0)) \

682 
	`__ÿnûl_routše
 (
__ÿnûl_¬g
); \

683 
	`__±h»ad_unwšd_Ãxt
 (&
__ÿnûl_buf
); \

687 
	`__±h»ad_»gi¡”_ÿnûl_deãr
 (&
__ÿnûl_buf
); \

688 dØ{

	)

689 
	`__±h»ad_»gi¡”_ÿnûl_deãr
 (
__±h»ad_unwšd_buf_t
 *
__buf
)

690 
__ş—nup_fù_©Œibu‹
;

695 
	#±h»ad_ş—nup_pİ_»¡Üe_Å
(
execu‹
) \

698 
	`__±h»ad_uÄegi¡”_ÿnûl_»¡Üe
 (&
__ÿnûl_buf
); \

699 ià(
execu‹
) \

700 
	`__ÿnûl_routše
 (
__ÿnûl_¬g
); \

701 
	}
} 0)

	)

702 
	$__±h»ad_uÄegi¡”_ÿnûl_»¡Üe
 (
__±h»ad_unwšd_buf_t
 *
__buf
)

703 
__ş—nup_fù_©Œibu‹
;

707 
	$__±h»ad_unwšd_Ãxt
 (
__±h»ad_unwšd_buf_t
 *
__buf
)

708 
__ş—nup_fù_©Œibu‹
 
	`__©Œibu‹__
 ((
__nÜ‘uº__
))

709 #iâdeà
SHARED


710 
	`__©Œibu‹__
 ((
__w—k__
))

716 
__jmp_buf_g
;

717 
	$__sig£tjmp
 (
__jmp_buf_g
 *
__’v
, 
__§vemask
è
__THROW
;

723 
	$±h»ad_mu‹x_š™
 (
±h»ad_mu‹x_t
 *
__mu‹x
,

724 
__cÚ¡
 
±h»ad_mu‹x©Œ_t
 *
__mu‹x©Œ
)

725 
__THROW
 
	`__nÚnuÎ
 ((1));

728 
	$±h»ad_mu‹x_de¡roy
 (
±h»ad_mu‹x_t
 *
__mu‹x
)

729 
__THROW
 
	`__nÚnuÎ
 ((1));

732 
	$±h»ad_mu‹x_Œylock
 (
±h»ad_mu‹x_t
 *
__mu‹x
)

733 
__THROW
 
	`__nÚnuÎ
 ((1));

736 
	$±h»ad_mu‹x_lock
 (
±h»ad_mu‹x_t
 *
__mu‹x
)

737 
__THROW
 
	`__nÚnuÎ
 ((1));

739 #ifdeà
__USE_XOPEN2K


741 
	$±h»ad_mu‹x_timedlock
 (
±h»ad_mu‹x_t
 *
__»¡riù
 
__mu‹x
,

742 
__cÚ¡
 
time¥ec
 *
__»¡riù


743 
__ab¡ime
è
__THROW
 
	`__nÚnuÎ
 ((1, 2));

747 
	$±h»ad_mu‹x_uÆock
 (
±h»ad_mu‹x_t
 *
__mu‹x
)

748 
__THROW
 
	`__nÚnuÎ
 ((1));

751 #ifdeà
__USE_UNIX98


753 
	$±h»ad_mu‹x_g‘´ioûšg
 (
__cÚ¡
 
±h»ad_mu‹x_t
 *

754 
__»¡riù
 
__mu‹x
,

755 *
__»¡riù
 
__´ioûšg
)

756 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

760 
	$±h»ad_mu‹x_£rioûšg
 (
±h»ad_mu‹x_t
 *
__»¡riù
 
__mu‹x
,

761 
__´ioûšg
,

762 *
__»¡riù
 
__Şd_ûšg
)

763 
__THROW
 
	`__nÚnuÎ
 ((1, 3));

767 #ifdeà
__USE_XOPEN2K8


769 
	$±h»ad_mu‹x_cÚsi¡’t_Å
 (
±h»ad_mu‹x_t
 *
__mu‹x
)

770 
__THROW
 
	`__nÚnuÎ
 ((1));

771 #ifdeà
__USE_GNU


772 
	$±h»ad_mu‹x_cÚsi¡’t_Å
 (
±h»ad_mu‹x_t
 *
__mu‹x
)

773 
__THROW
 
	`__nÚnuÎ
 ((1));

782 
	$±h»ad_mu‹x©Œ_š™
 (
±h»ad_mu‹x©Œ_t
 *
__©Œ
)

783 
__THROW
 
	`__nÚnuÎ
 ((1));

786 
	$±h»ad_mu‹x©Œ_de¡roy
 (
±h»ad_mu‹x©Œ_t
 *
__©Œ
)

787 
__THROW
 
	`__nÚnuÎ
 ((1));

790 
	$±h»ad_mu‹x©Œ_g‘psh¬ed
 (
__cÚ¡
 
±h»ad_mu‹x©Œ_t
 *

791 
__»¡riù
 
__©Œ
,

792 *
__»¡riù
 
__psh¬ed
)

793 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

796 
	$±h»ad_mu‹x©Œ_£sh¬ed
 (
±h»ad_mu‹x©Œ_t
 *
__©Œ
,

797 
__psh¬ed
)

798 
__THROW
 
	`__nÚnuÎ
 ((1));

800 #ifdeà
__USE_UNIX98


802 
	$±h»ad_mu‹x©Œ_g‘ty³
 (
__cÚ¡
 
±h»ad_mu‹x©Œ_t
 *
__»¡riù


803 
__©Œ
, *
__»¡riù
 
__kšd
)

804 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

809 
	$±h»ad_mu‹x©Œ_£‰y³
 (
±h»ad_mu‹x©Œ_t
 *
__©Œ
, 
__kšd
)

810 
__THROW
 
	`__nÚnuÎ
 ((1));

813 
	$±h»ad_mu‹x©Œ_g‘´ÙocŞ
 (
__cÚ¡
 
±h»ad_mu‹x©Œ_t
 *

814 
__»¡riù
 
__©Œ
,

815 *
__»¡riù
 
__´ÙocŞ
)

816 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

820 
	$±h»ad_mu‹x©Œ_£rÙocŞ
 (
±h»ad_mu‹x©Œ_t
 *
__©Œ
,

821 
__´ÙocŞ
)

822 
__THROW
 
	`__nÚnuÎ
 ((1));

825 
	$±h»ad_mu‹x©Œ_g‘´ioûšg
 (
__cÚ¡
 
±h»ad_mu‹x©Œ_t
 *

826 
__»¡riù
 
__©Œ
,

827 *
__»¡riù
 
__´ioûšg
)

828 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

831 
	$±h»ad_mu‹x©Œ_£rioûšg
 (
±h»ad_mu‹x©Œ_t
 *
__©Œ
,

832 
__´ioûšg
)

833 
__THROW
 
	`__nÚnuÎ
 ((1));

836 #ifdeà
__USE_XOPEN2K


838 
	$±h»ad_mu‹x©Œ_g‘robu¡
 (
__cÚ¡
 
±h»ad_mu‹x©Œ_t
 *
__©Œ
,

839 *
__robu¡Ãss
)

840 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

841 #ifdeà
__USE_GNU


842 
	$±h»ad_mu‹x©Œ_g‘robu¡_Å
 (
__cÚ¡
 
±h»ad_mu‹x©Œ_t
 *
__©Œ
,

843 *
__robu¡Ãss
)

844 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

848 
	$±h»ad_mu‹x©Œ_£Œobu¡
 (
±h»ad_mu‹x©Œ_t
 *
__©Œ
,

849 
__robu¡Ãss
)

850 
__THROW
 
	`__nÚnuÎ
 ((1));

851 #ifdeà
__USE_GNU


852 
	$±h»ad_mu‹x©Œ_£Œobu¡_Å
 (
±h»ad_mu‹x©Œ_t
 *
__©Œ
,

853 
__robu¡Ãss
)

854 
__THROW
 
	`__nÚnuÎ
 ((1));

859 #ià
defšed
 
__USE_UNIX98
 || defšed 
__USE_XOPEN2K


864 
	$±h»ad_rwlock_š™
 (
±h»ad_rwlock_t
 *
__»¡riù
 
__rwlock
,

865 
__cÚ¡
 
±h»ad_rwlock©Œ_t
 *
__»¡riù


866 
__©Œ
è
__THROW
 
	`__nÚnuÎ
 ((1));

869 
	$±h»ad_rwlock_de¡roy
 (
±h»ad_rwlock_t
 *
__rwlock
)

870 
__THROW
 
	`__nÚnuÎ
 ((1));

873 
	$±h»ad_rwlock_rdlock
 (
±h»ad_rwlock_t
 *
__rwlock
)

874 
__THROW
 
	`__nÚnuÎ
 ((1));

877 
	$±h»ad_rwlock_Œyrdlock
 (
±h»ad_rwlock_t
 *
__rwlock
)

878 
__THROW
 
	`__nÚnuÎ
 ((1));

880 #ifdeà
__USE_XOPEN2K


882 
	$±h»ad_rwlock_timedrdlock
 (
±h»ad_rwlock_t
 *
__»¡riù
 
__rwlock
,

883 
__cÚ¡
 
time¥ec
 *
__»¡riù


884 
__ab¡ime
è
__THROW
 
	`__nÚnuÎ
 ((1, 2));

888 
	$±h»ad_rwlock_w¾ock
 (
±h»ad_rwlock_t
 *
__rwlock
)

889 
__THROW
 
	`__nÚnuÎ
 ((1));

892 
	$±h»ad_rwlock_Œyw¾ock
 (
±h»ad_rwlock_t
 *
__rwlock
)

893 
__THROW
 
	`__nÚnuÎ
 ((1));

895 #ifdeà
__USE_XOPEN2K


897 
	$±h»ad_rwlock_timedw¾ock
 (
±h»ad_rwlock_t
 *
__»¡riù
 
__rwlock
,

898 
__cÚ¡
 
time¥ec
 *
__»¡riù


899 
__ab¡ime
è
__THROW
 
	`__nÚnuÎ
 ((1, 2));

903 
	$±h»ad_rwlock_uÆock
 (
±h»ad_rwlock_t
 *
__rwlock
)

904 
__THROW
 
	`__nÚnuÎ
 ((1));

910 
	$±h»ad_rwlock©Œ_š™
 (
±h»ad_rwlock©Œ_t
 *
__©Œ
)

911 
__THROW
 
	`__nÚnuÎ
 ((1));

914 
	$±h»ad_rwlock©Œ_de¡roy
 (
±h»ad_rwlock©Œ_t
 *
__©Œ
)

915 
__THROW
 
	`__nÚnuÎ
 ((1));

918 
	$±h»ad_rwlock©Œ_g‘psh¬ed
 (
__cÚ¡
 
±h»ad_rwlock©Œ_t
 *

919 
__»¡riù
 
__©Œ
,

920 *
__»¡riù
 
__psh¬ed
)

921 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

924 
	$±h»ad_rwlock©Œ_£sh¬ed
 (
±h»ad_rwlock©Œ_t
 *
__©Œ
,

925 
__psh¬ed
)

926 
__THROW
 
	`__nÚnuÎ
 ((1));

929 
	$±h»ad_rwlock©Œ_g‘kšd_Å
 (
__cÚ¡
 
±h»ad_rwlock©Œ_t
 *

930 
__»¡riù
 
__©Œ
,

931 *
__»¡riù
 
__´ef
)

932 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

935 
	$±h»ad_rwlock©Œ_£tkšd_Å
 (
±h»ad_rwlock©Œ_t
 *
__©Œ
,

936 
__´ef
è
__THROW
 
	`__nÚnuÎ
 ((1));

944 
	$±h»ad_cÚd_š™
 (
±h»ad_cÚd_t
 *
__»¡riù
 
__cÚd
,

945 
__cÚ¡
 
±h»ad_cÚd©Œ_t
 *
__»¡riù


946 
__cÚd_©Œ
è
__THROW
 
	`__nÚnuÎ
 ((1));

949 
	$±h»ad_cÚd_de¡roy
 (
±h»ad_cÚd_t
 *
__cÚd
)

950 
__THROW
 
	`__nÚnuÎ
 ((1));

953 
	$±h»ad_cÚd_sigÇl
 (
±h»ad_cÚd_t
 *
__cÚd
)

954 
__THROW
 
	`__nÚnuÎ
 ((1));

957 
	$±h»ad_cÚd_brßdÿ¡
 (
±h»ad_cÚd_t
 *
__cÚd
)

958 
__THROW
 
	`__nÚnuÎ
 ((1));

965 
	$±h»ad_cÚd_wa™
 (
±h»ad_cÚd_t
 *
__»¡riù
 
__cÚd
,

966 
±h»ad_mu‹x_t
 *
__»¡riù
 
__mu‹x
)

967 
	`__nÚnuÎ
 ((1, 2));

976 
	$±h»ad_cÚd_timedwa™
 (
±h»ad_cÚd_t
 *
__»¡riù
 
__cÚd
,

977 
±h»ad_mu‹x_t
 *
__»¡riù
 
__mu‹x
,

978 
__cÚ¡
 
time¥ec
 *
__»¡riù


979 
__ab¡ime
è
	`__nÚnuÎ
 ((1, 2, 3));

984 
	$±h»ad_cÚd©Œ_š™
 (
±h»ad_cÚd©Œ_t
 *
__©Œ
)

985 
__THROW
 
	`__nÚnuÎ
 ((1));

988 
	$±h»ad_cÚd©Œ_de¡roy
 (
±h»ad_cÚd©Œ_t
 *
__©Œ
)

989 
__THROW
 
	`__nÚnuÎ
 ((1));

992 
	$±h»ad_cÚd©Œ_g‘psh¬ed
 (
__cÚ¡
 
±h»ad_cÚd©Œ_t
 *

993 
__»¡riù
 
__©Œ
,

994 *
__»¡riù
 
__psh¬ed
)

995 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

998 
	$±h»ad_cÚd©Œ_£sh¬ed
 (
±h»ad_cÚd©Œ_t
 *
__©Œ
,

999 
__psh¬ed
è
__THROW
 
	`__nÚnuÎ
 ((1));

1001 #ifdeà
__USE_XOPEN2K


1003 
	$±h»ad_cÚd©Œ_g‘şock
 (
__cÚ¡
 
±h»ad_cÚd©Œ_t
 *

1004 
__»¡riù
 
__©Œ
,

1005 
__şockid_t
 *
__»¡riù
 
__şock_id
)

1006 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

1009 
	$±h»ad_cÚd©Œ_£tşock
 (
±h»ad_cÚd©Œ_t
 *
__©Œ
,

1010 
__şockid_t
 
__şock_id
)

1011 
__THROW
 
	`__nÚnuÎ
 ((1));

1015 #ifdeà
__USE_XOPEN2K


1020 
	$±h»ad_¥š_š™
 (
±h»ad_¥šlock_t
 *
__lock
, 
__psh¬ed
)

1021 
__THROW
 
	`__nÚnuÎ
 ((1));

1024 
	$±h»ad_¥š_de¡roy
 (
±h»ad_¥šlock_t
 *
__lock
)

1025 
__THROW
 
	`__nÚnuÎ
 ((1));

1028 
	$±h»ad_¥š_lock
 (
±h»ad_¥šlock_t
 *
__lock
)

1029 
__THROW
 
	`__nÚnuÎ
 ((1));

1032 
	$±h»ad_¥š_Œylock
 (
±h»ad_¥šlock_t
 *
__lock
)

1033 
__THROW
 
	`__nÚnuÎ
 ((1));

1036 
	$±h»ad_¥š_uÆock
 (
±h»ad_¥šlock_t
 *
__lock
)

1037 
__THROW
 
	`__nÚnuÎ
 ((1));

1044 
	$±h»ad_b¬r›r_š™
 (
±h»ad_b¬r›r_t
 *
__»¡riù
 
__b¬r›r
,

1045 
__cÚ¡
 
±h»ad_b¬r›¿‰r_t
 *
__»¡riù


1046 
__©Œ
, 
__couÁ
)

1047 
__THROW
 
	`__nÚnuÎ
 ((1));

1050 
	$±h»ad_b¬r›r_de¡roy
 (
±h»ad_b¬r›r_t
 *
__b¬r›r
)

1051 
__THROW
 
	`__nÚnuÎ
 ((1));

1054 
	$±h»ad_b¬r›r_wa™
 (
±h»ad_b¬r›r_t
 *
__b¬r›r
)

1055 
__THROW
 
	`__nÚnuÎ
 ((1));

1059 
	$±h»ad_b¬r›¿‰r_š™
 (
±h»ad_b¬r›¿‰r_t
 *
__©Œ
)

1060 
__THROW
 
	`__nÚnuÎ
 ((1));

1063 
	$±h»ad_b¬r›¿‰r_de¡roy
 (
±h»ad_b¬r›¿‰r_t
 *
__©Œ
)

1064 
__THROW
 
	`__nÚnuÎ
 ((1));

1067 
	$±h»ad_b¬r›¿‰r_g‘psh¬ed
 (
__cÚ¡
 
±h»ad_b¬r›¿‰r_t
 *

1068 
__»¡riù
 
__©Œ
,

1069 *
__»¡riù
 
__psh¬ed
)

1070 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

1073 
	$±h»ad_b¬r›¿‰r_£sh¬ed
 (
±h»ad_b¬r›¿‰r_t
 *
__©Œ
,

1074 
__psh¬ed
)

1075 
__THROW
 
	`__nÚnuÎ
 ((1));

1087 
	`±h»ad_key_ü—‹
 (
±h»ad_key_t
 *
__key
,

1088 (*
__de¡r_funùiÚ
) (*))

1089 
__THROW
 
	`__nÚnuÎ
 ((1));

1092 
	$±h»ad_key_d–‘e
 (
±h»ad_key_t
 
__key
è
__THROW
;

1095 *
	$±h»ad_g‘¥ecific
 (
±h»ad_key_t
 
__key
è
__THROW
;

1098 
	$±h»ad_£t¥ecific
 (
±h»ad_key_t
 
__key
,

1099 
__cÚ¡
 *
__poš‹r
è
__THROW
 ;

1102 #ifdeà
__USE_XOPEN2K


1104 
	$±h»ad_g‘ıuşockid
 (
±h»ad_t
 
__th»ad_id
,

1105 
__şockid_t
 *
__şock_id
)

1106 
__THROW
 
	`__nÚnuÎ
 ((2));

1121 
	`±h»ad_©fÜk
 ((*
__´•¬e
) (),

1122 (*
__·»Á
) (),

1123 (*
__chd
è()è
__THROW
;

1126 #ifdeà
__USE_EXTERN_INLINES


1128 
__ex‹º_šlše
 

1129 
	`__NTH
 (
	$±h»ad_equ®
 (
±h»ad_t
 
__th»ad1
,…th»ad_ˆ
__th»ad2
))

1131  
__th»ad1
 =ğ
__th»ad2
;

1132 
	}
}

1135 
	g__END_DECLS


	@/usr/include/stdio.h

24 #iâdeà
_STDIO_H


26 #ià!
defšed
 
__Ãed_FILE
 && !defšed 
__Ãed___FILE


27 
	#_STDIO_H
 1

	)

28 
	~<ã©u»s.h
>

30 
	g__BEGIN_DECLS


32 
	#__Ãed_size_t


	)

33 
	#__Ãed_NULL


	)

34 
	~<¡ddef.h
>

36 
	~<b™s/ty³s.h
>

37 
	#__Ãed_FILE


	)

38 
	#__Ãed___FILE


	)

42 #ià!
defšed
 
__FILE_defšed
 && defšed 
__Ãed_FILE


45 
	g_IO_FILE
;

47 
__BEGIN_NAMESPACE_STD


49 
_IO_FILE
 
	tFILE
;

50 
	g__END_NAMESPACE_STD


51 #ià
defšed
 
__USE_LARGEFILE64
 || defšed 
__USE_SVID
 || defšed 
__USE_POSIX
 \

52 || 
defšed
 
	g__USE_BSD
 || defšed 
	g__USE_ISOC99
 || defšed 
	g__USE_XOPEN
 \

53 || 
defšed
 
__USE_POSIX2


54 
	$__USING_NAMESPACE_STD
(
FILE
)

57 
	#__FILE_defšed
 1

	)

59 #undeà
__Ãed_FILE


62 #ià!
defšed
 
____FILE_defšed
 && defšed 
__Ãed___FILE


65 
_IO_FILE
 
	t__FILE
;

67 
	#____FILE_defšed
 1

	)

69 #undeà
__Ãed___FILE


72 #ifdef 
_STDIO_H


73 
	#_STDIO_USES_IOSTREAM


	)

75 
	~<libio.h
>

77 #ifdeà
__USE_XOPEN


78 #ifdeà
__GNUC__


79 #iâdeà
_VA_LIST_DEFINED


80 
_G_va_li¡
 
	tva_li¡
;

81 
	#_VA_LIST_DEFINED


	)

84 
	~<¡d¬g.h
>

89 
__BEGIN_NAMESPACE_STD


90 #iâdeà
__USE_FILE_OFFSET64


91 
_G_åos_t
 
	tåos_t
;

93 
_G_åos64_t
 
	tåos_t
;

95 
__END_NAMESPACE_STD


96 #ifdeà
__USE_LARGEFILE64


97 
_G_åos64_t
 
	tåos64_t
;

101 
	#_IOFBF
 0

	)

102 
	#_IOLBF
 1

	)

103 
	#_IONBF
 2

	)

107 #iâdeà
BUFSIZ


108 
	#BUFSIZ
 
_IO_BUFSIZ


	)

114 #iâdeà
EOF


115 
	#EOF
 (-1)

	)

121 
	#SEEK_SET
 0

	)

122 
	#SEEK_CUR
 1

	)

123 
	#SEEK_END
 2

	)

126 #ià
defšed
 
__USE_SVID
 || defšed 
__USE_XOPEN


128 
	#P_tmpdœ
 "/tmp"

	)

141 
	~<b™s/¡dio_lim.h
>

145 
_IO_FILE
 *
¡dš
;

146 
_IO_FILE
 *
¡dout
;

147 
_IO_FILE
 *
¡d”r
;

149 
	#¡dš
 
¡dš


	)

150 
	#¡dout
 
¡dout


	)

151 
	#¡d”r
 
¡d”r


	)

153 
__BEGIN_NAMESPACE_STD


155 
	$»move
 (
__cÚ¡
 *
__f’ame
è
__THROW
;

157 
	$»Çme
 (
__cÚ¡
 *
__Şd
, __cÚ¡ *
__Ãw
è
__THROW
;

158 
__END_NAMESPACE_STD


160 #ifdeà
__USE_ATFILE


162 
	$»Çm—t
 (
__Şdfd
, 
__cÚ¡
 *
__Şd
, 
__Ãwfd
,

163 
__cÚ¡
 *
__Ãw
è
__THROW
;

166 
__BEGIN_NAMESPACE_STD


171 #iâdeà
__USE_FILE_OFFSET64


172 
FILE
 *
	$tmpfe
 (è
__wur
;

174 #ifdeà
__REDIRECT


175 
FILE
 *
	`__REDIRECT
 (
tmpfe
, (), 
tmpfe64
è
__wur
;

177 
	#tmpfe
 
tmpfe64


	)

181 #ifdeà
__USE_LARGEFILE64


182 
FILE
 *
	$tmpfe64
 (è
__wur
;

186 *
	$tm²am
 (*
__s
è
__THROW
 
__wur
;

187 
__END_NAMESPACE_STD


189 #ifdeà
__USE_MISC


192 *
	$tm²am_r
 (*
__s
è
__THROW
 
__wur
;

196 #ià
defšed
 
__USE_SVID
 || defšed 
__USE_XOPEN


204 *
	$‹m²am
 (
__cÚ¡
 *
__dœ
, __cÚ¡ *
__pfx
)

205 
__THROW
 
__©Œibu‹_m®loc__
 
__wur
;

209 
__BEGIN_NAMESPACE_STD


214 
	`fşo£
 (
FILE
 *
__¡»am
);

219 
	`fæush
 (
FILE
 *
__¡»am
);

220 
__END_NAMESPACE_STD


222 #ifdeà
__USE_MISC


229 
	`fæush_uÆocked
 (
FILE
 *
__¡»am
);

232 #ifdeà
__USE_GNU


239 
	`fşo£®l
 ();

243 
__BEGIN_NAMESPACE_STD


244 #iâdeà
__USE_FILE_OFFSET64


249 
FILE
 *
	$fİ’
 (
__cÚ¡
 *
__»¡riù
 
__f’ame
,

250 
__cÚ¡
 *
__»¡riù
 
__modes
è
__wur
;

255 
FILE
 *
	$äeİ’
 (
__cÚ¡
 *
__»¡riù
 
__f’ame
,

256 
__cÚ¡
 *
__»¡riù
 
__modes
,

257 
FILE
 *
__»¡riù
 
__¡»am
è
__wur
;

259 #ifdeà
__REDIRECT


260 
FILE
 *
	`__REDIRECT
 (
fİ’
, (
__cÚ¡
 *
__»¡riù
 
__f’ame
,

261 
__cÚ¡
 *
__»¡riù
 
__modes
), 
fİ’64
)

262 
__wur
;

263 
FILE
 *
	`__REDIRECT
 (
äeİ’
, (
__cÚ¡
 *
__»¡riù
 
__f’ame
,

264 
__cÚ¡
 *
__»¡riù
 
__modes
,

265 
FILE
 *
__»¡riù
 
__¡»am
), 
äeİ’64
)

266 
__wur
;

268 
	#fİ’
 
fİ’64


	)

269 
	#äeİ’
 
äeİ’64


	)

272 
__END_NAMESPACE_STD


273 #ifdeà
__USE_LARGEFILE64


274 
FILE
 *
	$fİ’64
 (
__cÚ¡
 *
__»¡riù
 
__f’ame
,

275 
__cÚ¡
 *
__»¡riù
 
__modes
è
__wur
;

276 
FILE
 *
	$äeİ’64
 (
__cÚ¡
 *
__»¡riù
 
__f’ame
,

277 
__cÚ¡
 *
__»¡riù
 
__modes
,

278 
FILE
 *
__»¡riù
 
__¡»am
è
__wur
;

281 #ifdef 
__USE_POSIX


283 
FILE
 *
	$fdİ’
 (
__fd
, 
__cÚ¡
 *
__modes
è
__THROW
 
__wur
;

286 #ifdef 
__USE_GNU


289 
FILE
 *
	$fİ’cook›
 (*
__»¡riù
 
__magic_cook›
,

290 
__cÚ¡
 *
__»¡riù
 
__modes
,

291 
_IO_cook›_io_funùiÚs_t
 
__io_funcs
è
__THROW
 
__wur
;

294 #ifdeà
__USE_XOPEN2K8


296 
FILE
 *
	$fmemİ’
 (*
__s
, 
size_t
 
__Ën
, 
__cÚ¡
 *
__modes
)

297 
__THROW
 
__wur
;

302 
FILE
 *
	$İ’_mem¡»am
 (**
__buæoc
, 
size_t
 *
__siz–oc
è
__THROW
 
__wur
;

306 
__BEGIN_NAMESPACE_STD


309 
	$£tbuf
 (
FILE
 *
__»¡riù
 
__¡»am
, *__»¡riù 
__buf
è
__THROW
;

313 
	$£tvbuf
 (
FILE
 *
__»¡riù
 
__¡»am
, *__»¡riù 
__buf
,

314 
__modes
, 
size_t
 
__n
è
__THROW
;

315 
__END_NAMESPACE_STD


317 #ifdef 
__USE_BSD


320 
	$£tbufãr
 (
FILE
 *
__»¡riù
 
__¡»am
, *__»¡riù 
__buf
,

321 
size_t
 
__size
è
__THROW
;

324 
	$£šebuf
 (
FILE
 *
__¡»am
è
__THROW
;

328 
__BEGIN_NAMESPACE_STD


333 
	`årštf
 (
FILE
 *
__»¡riù
 
__¡»am
,

334 
__cÚ¡
 *
__»¡riù
 
__fÜm©
, ...);

339 
	`´štf
 (
__cÚ¡
 *
__»¡riù
 
__fÜm©
, ...);

341 
	$¥rštf
 (*
__»¡riù
 
__s
,

342 
__cÚ¡
 *
__»¡riù
 
__fÜm©
, ...è
__THROW
;

348 
	`vårštf
 (
FILE
 *
__»¡riù
 
__s
, 
__cÚ¡
 *__»¡riù 
__fÜm©
,

349 
_G_va_li¡
 
__¬g
);

354 
	`v´štf
 (
__cÚ¡
 *
__»¡riù
 
__fÜm©
, 
_G_va_li¡
 
__¬g
);

356 
	$v¥rštf
 (*
__»¡riù
 
__s
, 
__cÚ¡
 *__»¡riù 
__fÜm©
,

357 
_G_va_li¡
 
__¬g
è
__THROW
;

358 
__END_NAMESPACE_STD


360 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_ISOC99
 || defšed 
__USE_UNIX98


361 
__BEGIN_NAMESPACE_C99


363 
	$¢´štf
 (*
__»¡riù
 
__s
, 
size_t
 
__maxËn
,

364 
__cÚ¡
 *
__»¡riù
 
__fÜm©
, ...)

365 
__THROW
 
	`__©Œibu‹__
 ((
	`__fÜm©__
 (
__´štf__
, 3, 4)));

367 
	$v¢´štf
 (*
__»¡riù
 
__s
, 
size_t
 
__maxËn
,

368 
__cÚ¡
 *
__»¡riù
 
__fÜm©
, 
_G_va_li¡
 
__¬g
)

369 
__THROW
 
	`__©Œibu‹__
 ((
	`__fÜm©__
 (
__´štf__
, 3, 0)));

370 
__END_NAMESPACE_C99


373 #ifdeà
__USE_GNU


376 
	$va¥rštf
 (**
__»¡riù
 
__±r
, 
__cÚ¡
 *__»¡riù 
__f
,

377 
_G_va_li¡
 
__¬g
)

378 
__THROW
 
	`__©Œibu‹__
 ((
	$__fÜm©__
 (
__´štf__
, 2, 0))è
__wur
;

379 
	$__a¥rštf
 (**
__»¡riù
 
__±r
,

380 
__cÚ¡
 *
__»¡riù
 
__fmt
, ...)

381 
__THROW
 
	`__©Œibu‹__
 ((
	$__fÜm©__
 (
__´štf__
, 2, 3))è
__wur
;

382 
	$a¥rštf
 (**
__»¡riù
 
__±r
,

383 
__cÚ¡
 *
__»¡riù
 
__fmt
, ...)

384 
__THROW
 
	`__©Œibu‹__
 ((
	$__fÜm©__
 (
__´štf__
, 2, 3))è
__wur
;

387 #ifdeà
__USE_XOPEN2K8


394 
	$vd´štf
 (
__fd
, 
__cÚ¡
 *
__»¡riù
 
__fmt
,

395 
_G_va_li¡
 
__¬g
)

396 
	`__©Œibu‹__
 ((
	`__fÜm©__
 (
__´štf__
, 2, 0)));

397 
	$d´štf
 (
__fd
, 
__cÚ¡
 *
__»¡riù
 
__fmt
, ...)

398 
	`__©Œibu‹__
 ((
	`__fÜm©__
 (
__´štf__
, 2, 3)));

402 
__BEGIN_NAMESPACE_STD


407 
	$fsÿnf
 (
FILE
 *
__»¡riù
 
__¡»am
,

408 
__cÚ¡
 *
__»¡riù
 
__fÜm©
, ...è
__wur
;

413 
	$sÿnf
 (
__cÚ¡
 *
__»¡riù
 
__fÜm©
, ...è
__wur
;

415 
	$ssÿnf
 (
__cÚ¡
 *
__»¡riù
 
__s
,

416 
__cÚ¡
 *
__»¡riù
 
__fÜm©
, ...è
__THROW
;

418 #ià
defšed
 
__USE_ISOC99
 && !defšed 
__USE_GNU
 \

419 && (!
defšed
 
__LDBL_COMPAT
 || !defšed 
__REDIRECT
) \

420 && (
defšed
 
__STRICT_ANSI__
 || defšed 
__USE_XOPEN2K
)

421 #ifdeà
__REDIRECT


425 
	`__REDIRECT
 (
fsÿnf
, (
FILE
 *
__»¡riù
 
__¡»am
,

426 
__cÚ¡
 *
__»¡riù
 
__fÜm©
, ...),

427 
__isoc99_fsÿnf
è
__wur
;

428 
	`__REDIRECT
 (
sÿnf
, (
__cÚ¡
 *
__»¡riù
 
__fÜm©
, ...),

429 
__isoc99_sÿnf
è
__wur
;

430 
	`__REDIRECT_NTH
 (
ssÿnf
, (
__cÚ¡
 *
__»¡riù
 
__s
,

431 
__cÚ¡
 *
__»¡riù
 
__fÜm©
, ...),

432 
__isoc99_ssÿnf
);

434 
	$__isoc99_fsÿnf
 (
FILE
 *
__»¡riù
 
__¡»am
,

435 
__cÚ¡
 *
__»¡riù
 
__fÜm©
, ...è
__wur
;

436 
	$__isoc99_sÿnf
 (
__cÚ¡
 *
__»¡riù
 
__fÜm©
, ...è
__wur
;

437 
	$__isoc99_ssÿnf
 (
__cÚ¡
 *
__»¡riù
 
__s
,

438 
__cÚ¡
 *
__»¡riù
 
__fÜm©
, ...è
__THROW
;

439 
	#fsÿnf
 
__isoc99_fsÿnf


	)

440 
	#sÿnf
 
__isoc99_sÿnf


	)

441 
	#ssÿnf
 
__isoc99_ssÿnf


	)

445 
__END_NAMESPACE_STD


447 #ifdef 
__USE_ISOC99


448 
__BEGIN_NAMESPACE_C99


453 
	$vfsÿnf
 (
FILE
 *
__»¡riù
 
__s
, 
__cÚ¡
 *__»¡riù 
__fÜm©
,

454 
_G_va_li¡
 
__¬g
)

455 
	`__©Œibu‹__
 ((
	$__fÜm©__
 (
__sÿnf__
, 2, 0))è
__wur
;

461 
	$vsÿnf
 (
__cÚ¡
 *
__»¡riù
 
__fÜm©
, 
_G_va_li¡
 
__¬g
)

462 
	`__©Œibu‹__
 ((
	$__fÜm©__
 (
__sÿnf__
, 1, 0))è
__wur
;

465 
	$vssÿnf
 (
__cÚ¡
 *
__»¡riù
 
__s
,

466 
__cÚ¡
 *
__»¡riù
 
__fÜm©
, 
_G_va_li¡
 
__¬g
)

467 
__THROW
 
	`__©Œibu‹__
 ((
	`__fÜm©__
 (
__sÿnf__
, 2, 0)));

469 #ià!
defšed
 
__USE_GNU
 \

470 && (!
defšed
 
__LDBL_COMPAT
 || !defšed 
__REDIRECT
) \

471 && (
defšed
 
__STRICT_ANSI__
 || defšed 
__USE_XOPEN2K
)

472 #ifdeà
__REDIRECT


476 
	`__REDIRECT
 (
vfsÿnf
,

477 (
FILE
 *
__»¡riù
 
__s
,

478 
__cÚ¡
 *
__»¡riù
 
__fÜm©
, 
_G_va_li¡
 
__¬g
),

479 
__isoc99_vfsÿnf
)

480 
	`__©Œibu‹__
 ((
	$__fÜm©__
 (
__sÿnf__
, 2, 0))è
__wur
;

481 
	`__REDIRECT
 (
vsÿnf
, (
__cÚ¡
 *
__»¡riù
 
__fÜm©
,

482 
_G_va_li¡
 
__¬g
), 
__isoc99_vsÿnf
)

483 
	`__©Œibu‹__
 ((
	$__fÜm©__
 (
__sÿnf__
, 1, 0))è
__wur
;

484 
	`__REDIRECT_NTH
 (
vssÿnf
,

485 (
__cÚ¡
 *
__»¡riù
 
__s
,

486 
__cÚ¡
 *
__»¡riù
 
__fÜm©
,

487 
_G_va_li¡
 
__¬g
), 
__isoc99_vssÿnf
)

488 
	`__©Œibu‹__
 ((
	`__fÜm©__
 (
__sÿnf__
, 2, 0)));

490 
	$__isoc99_vfsÿnf
 (
FILE
 *
__»¡riù
 
__s
,

491 
__cÚ¡
 *
__»¡riù
 
__fÜm©
,

492 
_G_va_li¡
 
__¬g
è
__wur
;

493 
	$__isoc99_vsÿnf
 (
__cÚ¡
 *
__»¡riù
 
__fÜm©
,

494 
_G_va_li¡
 
__¬g
è
__wur
;

495 
	$__isoc99_vssÿnf
 (
__cÚ¡
 *
__»¡riù
 
__s
,

496 
__cÚ¡
 *
__»¡riù
 
__fÜm©
,

497 
_G_va_li¡
 
__¬g
è
__THROW
;

498 
	#vfsÿnf
 
__isoc99_vfsÿnf


	)

499 
	#vsÿnf
 
__isoc99_vsÿnf


	)

500 
	#vssÿnf
 
__isoc99_vssÿnf


	)

504 
__END_NAMESPACE_C99


508 
__BEGIN_NAMESPACE_STD


513 
	`fg‘c
 (
FILE
 *
__¡»am
);

514 
	`g‘c
 (
FILE
 *
__¡»am
);

520 
	`g‘ch¬
 ();

521 
__END_NAMESPACE_STD


525 
	#g‘c
(
_å
è
	`_IO_g‘c
 (_å)

	)

527 #ià
defšed
 
__USE_POSIX
 || defšed 
__USE_MISC


532 
	`g‘c_uÆocked
 (
FILE
 *
__¡»am
);

533 
	`g‘ch¬_uÆocked
 ();

536 #ifdeà
__USE_MISC


543 
	`fg‘c_uÆocked
 (
FILE
 *
__¡»am
);

547 
__BEGIN_NAMESPACE_STD


555 
	`åutc
 (
__c
, 
FILE
 *
__¡»am
);

556 
	`putc
 (
__c
, 
FILE
 *
__¡»am
);

562 
	`putch¬
 (
__c
);

563 
__END_NAMESPACE_STD


567 
	#putc
(
_ch
, 
_å
è
	`_IO_putc
 (_ch, _å)

	)

569 #ifdeà
__USE_MISC


576 
	`åutc_uÆocked
 (
__c
, 
FILE
 *
__¡»am
);

579 #ià
defšed
 
__USE_POSIX
 || defšed 
__USE_MISC


584 
	`putc_uÆocked
 (
__c
, 
FILE
 *
__¡»am
);

585 
	`putch¬_uÆocked
 (
__c
);

589 #ià
defšed
 
__USE_SVID
 || defšed 
__USE_MISC
 \

590 || (
defšed
 
__USE_XOPEN
 && !defšed 
__USE_XOPEN2K
)

592 
	`g‘w
 (
FILE
 *
__¡»am
);

595 
	`putw
 (
__w
, 
FILE
 *
__¡»am
);

599 
__BEGIN_NAMESPACE_STD


604 *
	$fg‘s
 (*
__»¡riù
 
__s
, 
__n
, 
FILE
 *__»¡riù 
__¡»am
)

605 
__wur
;

612 *
	$g‘s
 (*
__s
è
__wur
;

613 
__END_NAMESPACE_STD


615 #ifdeà
__USE_GNU


622 *
	$fg‘s_uÆocked
 (*
__»¡riù
 
__s
, 
__n
,

623 
FILE
 *
__»¡riù
 
__¡»am
è
__wur
;

627 #ifdef 
__USE_XOPEN2K8


638 
_IO_ssize_t
 
	$__g‘d–im
 (**
__»¡riù
 
__lš•Œ
,

639 
size_t
 *
__»¡riù
 
__n
, 
__d–im™”
,

640 
FILE
 *
__»¡riù
 
__¡»am
è
__wur
;

641 
_IO_ssize_t
 
	$g‘d–im
 (**
__»¡riù
 
__lš•Œ
,

642 
size_t
 *
__»¡riù
 
__n
, 
__d–im™”
,

643 
FILE
 *
__»¡riù
 
__¡»am
è
__wur
;

651 
_IO_ssize_t
 
	$g‘lše
 (**
__»¡riù
 
__lš•Œ
,

652 
size_t
 *
__»¡riù
 
__n
,

653 
FILE
 *
__»¡riù
 
__¡»am
è
__wur
;

657 
__BEGIN_NAMESPACE_STD


662 
	`åuts
 (
__cÚ¡
 *
__»¡riù
 
__s
, 
FILE
 *__»¡riù 
__¡»am
);

668 
	`puts
 (
__cÚ¡
 *
__s
);

675 
	`ung‘c
 (
__c
, 
FILE
 *
__¡»am
);

682 
size_t
 
	$ä—d
 (*
__»¡riù
 
__±r
, 
size_t
 
__size
,

683 
size_t
 
__n
, 
FILE
 *
__»¡riù
 
__¡»am
è
__wur
;

688 
size_t
 
	$fwr™e
 (
__cÚ¡
 *
__»¡riù
 
__±r
, 
size_t
 
__size
,

689 
size_t
 
__n
, 
FILE
 *
__»¡riù
 
__s
è
__wur
;

690 
__END_NAMESPACE_STD


692 #ifdeà
__USE_GNU


699 
	`åuts_uÆocked
 (
__cÚ¡
 *
__»¡riù
 
__s
,

700 
FILE
 *
__»¡riù
 
__¡»am
);

703 #ifdeà
__USE_MISC


710 
size_t
 
	$ä—d_uÆocked
 (*
__»¡riù
 
__±r
, 
size_t
 
__size
,

711 
size_t
 
__n
, 
FILE
 *
__»¡riù
 
__¡»am
è
__wur
;

712 
size_t
 
	$fwr™e_uÆocked
 (
__cÚ¡
 *
__»¡riù
 
__±r
, 
size_t
 
__size
,

713 
size_t
 
__n
, 
FILE
 *
__»¡riù
 
__¡»am
è
__wur
;

717 
__BEGIN_NAMESPACE_STD


722 
	`f£ek
 (
FILE
 *
__¡»am
, 
__off
, 
__wh’û
);

727 
	$á–l
 (
FILE
 *
__¡»am
è
__wur
;

732 
	`»wšd
 (
FILE
 *
__¡»am
);

733 
__END_NAMESPACE_STD


740 #ià
defšed
 
__USE_LARGEFILE
 || defšed 
__USE_XOPEN2K


741 #iâdeà
__USE_FILE_OFFSET64


746 
	`f£eko
 (
FILE
 *
__¡»am
, 
__off_t
 
__off
, 
__wh’û
);

751 
__off_t
 
	$á–lo
 (
FILE
 *
__¡»am
è
__wur
;

753 #ifdeà
__REDIRECT


754 
	`__REDIRECT
 (
f£eko
,

755 (
FILE
 *
__¡»am
, 
__off64_t
 
__off
, 
__wh’û
),

756 
f£eko64
);

757 
__off64_t
 
	`__REDIRECT
 (
á–lo
, (
FILE
 *
__¡»am
), 
á–lo64
);

759 
	#f£eko
 
f£eko64


	)

760 
	#á–lo
 
á–lo64


	)

765 
__BEGIN_NAMESPACE_STD


766 #iâdeà
__USE_FILE_OFFSET64


771 
	`fg‘pos
 (
FILE
 *
__»¡riù
 
__¡»am
, 
åos_t
 *__»¡riù 
__pos
);

776 
	`f£os
 (
FILE
 *
__¡»am
, 
__cÚ¡
 
åos_t
 *
__pos
);

778 #ifdeà
__REDIRECT


779 
	`__REDIRECT
 (
fg‘pos
, (
FILE
 *
__»¡riù
 
__¡»am
,

780 
åos_t
 *
__»¡riù
 
__pos
), 
fg‘pos64
);

781 
	`__REDIRECT
 (
f£os
,

782 (
FILE
 *
__¡»am
, 
__cÚ¡
 
åos_t
 *
__pos
), 
f£os64
);

784 
	#fg‘pos
 
fg‘pos64


	)

785 
	#f£os
 
f£os64


	)

788 
__END_NAMESPACE_STD


790 #ifdeà
__USE_LARGEFILE64


791 
	`f£eko64
 (
FILE
 *
__¡»am
, 
__off64_t
 
__off
, 
__wh’û
);

792 
__off64_t
 
	$á–lo64
 (
FILE
 *
__¡»am
è
__wur
;

793 
	`fg‘pos64
 (
FILE
 *
__»¡riù
 
__¡»am
, 
åos64_t
 *__»¡riù 
__pos
);

794 
	`f£os64
 (
FILE
 *
__¡»am
, 
__cÚ¡
 
åos64_t
 *
__pos
);

797 
__BEGIN_NAMESPACE_STD


799 
	$ş—»¼
 (
FILE
 *
__¡»am
è
__THROW
;

801 
	$ãof
 (
FILE
 *
__¡»am
è
__THROW
 
__wur
;

803 
	$ã¼Ü
 (
FILE
 *
__¡»am
è
__THROW
 
__wur
;

804 
__END_NAMESPACE_STD


806 #ifdeà
__USE_MISC


808 
	$ş—»¼_uÆocked
 (
FILE
 *
__¡»am
è
__THROW
;

809 
	$ãof_uÆocked
 (
FILE
 *
__¡»am
è
__THROW
 
__wur
;

810 
	$ã¼Ü_uÆocked
 (
FILE
 *
__¡»am
è
__THROW
 
__wur
;

814 
__BEGIN_NAMESPACE_STD


819 
	`³¼Ü
 (
__cÚ¡
 *
__s
);

820 
__END_NAMESPACE_STD


826 
	~<b™s/sys_”¾i¡.h
>

829 #ifdef 
__USE_POSIX


831 
	$f’o
 (
FILE
 *
__¡»am
è
__THROW
 
__wur
;

834 #ifdeà
__USE_MISC


836 
	$f’o_uÆocked
 (
FILE
 *
__¡»am
è
__THROW
 
__wur
;

840 #ià(
defšed
 
__USE_POSIX2
 || defšed 
__USE_SVID
 || defšed 
__USE_BSD
 || \

841 
defšed
 
__USE_MISC
)

846 
FILE
 *
	$pİ’
 (
__cÚ¡
 *
__commªd
, __cÚ¡ *
__modes
è
__wur
;

852 
	`pşo£
 (
FILE
 *
__¡»am
);

856 #ifdef 
__USE_POSIX


858 *
	$ù”mid
 (*
__s
è
__THROW
;

862 #ifdeà
__USE_XOPEN


864 *
	`cu£rid
 (*
__s
);

868 #ifdef 
__USE_GNU


869 
ob¡ack
;

872 
	$ob¡ack_´štf
 (
ob¡ack
 *
__»¡riù
 
__ob¡ack
,

873 
__cÚ¡
 *
__»¡riù
 
__fÜm©
, ...)

874 
__THROW
 
	`__©Œibu‹__
 ((
	`__fÜm©__
 (
__´štf__
, 2, 3)));

875 
	$ob¡ack_v´štf
 (
ob¡ack
 *
__»¡riù
 
__ob¡ack
,

876 
__cÚ¡
 *
__»¡riù
 
__fÜm©
,

877 
_G_va_li¡
 
__¬gs
)

878 
__THROW
 
	`__©Œibu‹__
 ((
	`__fÜm©__
 (
__´štf__
, 2, 0)));

882 #ià
defšed
 
__USE_POSIX
 || defšed 
__USE_MISC


886 
	$æockfe
 (
FILE
 *
__¡»am
è
__THROW
;

890 
	$árylockfe
 (
FILE
 *
__¡»am
è
__THROW
 
__wur
;

893 
	$fuÆockfe
 (
FILE
 *
__¡»am
è
__THROW
;

896 #ià
defšed
 
__USE_XOPEN
 && !defšed 
__USE_XOPEN2K
 && !defšed 
__USE_GNU


900 
	#__Ãed_g‘İt


	)

901 
	~<g‘İt.h
>

906 #ifdeà
__USE_EXTERN_INLINES


907 
	~<b™s/¡dio.h
>

909 #ià
__USE_FORTIFY_LEVEL
 > 0 && 
defšed
 
__ex‹º_®ways_šlše


910 
	~<b™s/¡dio2.h
>

912 #ifdeà
__LDBL_COMPAT


913 
	~<b™s/¡dio-ldbl.h
>

916 
__END_DECLS


	@/usr/include/time.h

23 #iâdef 
_TIME_H


25 #ià(! 
defšed
 
__Ãed_time_t
 && !defšed 
__Ãed_şock_t
 && \

26 ! 
defšed
 
	g__Ãed_time¥ec
)

27 
	#_TIME_H
 1

	)

28 
	~<ã©u»s.h
>

30 
	g__BEGIN_DECLS


34 #ifdef 
_TIME_H


36 
	#__Ãed_size_t


	)

37 
	#__Ãed_NULL


	)

38 
	~<¡ddef.h
>

42 
	~<b™s/time.h
>

45 #ià!
defšed
 
__STRICT_ANSI__
 && !defšed 
__USE_XOPEN2K


46 #iâdeà
CLK_TCK


47 
	#CLK_TCK
 
CLOCKS_PER_SEC


	)

53 #ià!
defšed
 
__şock_t_defšed
 && (defšed 
_TIME_H
 || defšed 
__Ãed_şock_t
)

54 
	#__şock_t_defšed
 1

	)

56 
	~<b™s/ty³s.h
>

58 
__BEGIN_NAMESPACE_STD


60 
__şock_t
 
	tşock_t
;

61 
	g__END_NAMESPACE_STD


62 #ià
defšed
 
__USE_XOPEN
 || defšed 
__USE_POSIX
 || defšed 
__USE_MISC


63 
	$__USING_NAMESPACE_STD
(
şock_t
)

67 #undeà
__Ãed_şock_t


69 #ià!
defšed
 
__time_t_defšed
 && (defšed 
_TIME_H
 || defšed 
__Ãed_time_t
)

70 
	#__time_t_defšed
 1

	)

72 
	~<b™s/ty³s.h
>

74 
__BEGIN_NAMESPACE_STD


76 
__time_t
 
	ttime_t
;

77 
__END_NAMESPACE_STD


78 #ià
defšed
 
__USE_POSIX
 || defšed 
__USE_MISC
 || defšed 
__USE_SVID


79 
	$__USING_NAMESPACE_STD
(
time_t
)

83 #undeà
__Ãed_time_t


85 #ià!
defšed
 
__şockid_t_defšed
 && \

86 ((
defšed
 
_TIME_H
 && defšed 
__USE_POSIX199309
è|| defšed 
__Ãed_şockid_t
)

87 
	#__şockid_t_defšed
 1

	)

89 
	~<b™s/ty³s.h
>

92 
__şockid_t
 
	tşockid_t
;

95 #undeà
__şockid_time_t


97 #ià!
defšed
 
__tim”_t_defšed
 && \

98 ((
defšed
 
_TIME_H
 && defšed 
__USE_POSIX199309
è|| defšed 
__Ãed_tim”_t
)

99 
	#__tim”_t_defšed
 1

	)

101 
	~<b™s/ty³s.h
>

104 
__tim”_t
 
	ttim”_t
;

107 #undeà
__Ãed_tim”_t


110 #ià!
defšed
 
__time¥ec_defšed
 && \

111 ((
defšed
 
_TIME_H
 && \

112 (
defšed
 
__USE_POSIX199309
 || defšed 
__USE_MISC
)) || \

113 
defšed
 
__Ãed_time¥ec
)

114 
	#__time¥ec_defšed
 1

	)

116 
	~<b™s/ty³s.h
>

120 
	stime¥ec


122 
__time_t
 
tv_£c
;

123 
tv_n£c
;

127 #undeà
__Ãed_time¥ec


130 #ifdef 
_TIME_H


131 
__BEGIN_NAMESPACE_STD


133 
	stm


135 
tm_£c
;

136 
tm_mš
;

137 
tm_hour
;

138 
tm_mday
;

139 
tm_mÚ
;

140 
tm_y—r
;

141 
tm_wday
;

142 
tm_yday
;

143 
tm_isd¡
;

145 #ifdef 
__USE_BSD


146 
tm_gmtoff
;

147 
__cÚ¡
 *
tm_zÚe
;

149 
__tm_gmtoff
;

150 
__cÚ¡
 *
__tm_zÚe
;

153 
__END_NAMESPACE_STD


154 #ià
defšed
 
__USE_XOPEN
 || defšed 
__USE_POSIX
 || defšed 
__USE_MISC


155 
	$__USING_NAMESPACE_STD
(
tm
)

159 #ifdeà
__USE_POSIX199309


161 
	s™im”¥ec


163 
time¥ec
 
™_š‹rv®
;

164 
time¥ec
 
™_v®ue
;

168 
sigev’t
;

172 #ifdeà
__USE_XOPEN2K


173 #iâdeà
__pid_t_defšed


174 
__pid_t
 
	tpid_t
;

175 
	#__pid_t_defšed


	)

180 
__BEGIN_NAMESPACE_STD


183 
şock_t
 
	$şock
 (è
__THROW
;

186 
time_t
 
	$time
 (
time_t
 *
__tim”
è
__THROW
;

189 
	$difáime
 (
time_t
 
__time1
,ime_ˆ
__time0
)

190 
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
));

193 
time_t
 
	$mktime
 (
tm
 *
__
è
__THROW
;

199 
size_t
 
	$¡ráime
 (*
__»¡riù
 
__s
, 
size_t
 
__maxsize
,

200 
__cÚ¡
 *
__»¡riù
 
__fÜm©
,

201 
__cÚ¡
 
tm
 *
__»¡riù
 
__
è
__THROW
;

202 
__END_NAMESPACE_STD


204 #ifdeà
__USE_XOPEN


207 *
	$¡½time
 (
__cÚ¡
 *
__»¡riù
 
__s
,

208 
__cÚ¡
 *
__»¡riù
 
__fmt
, 
tm
 *
__
)

209 
__THROW
;

212 #ifdeà
__USE_XOPEN2K8


215 
	~<xloÿË.h
>

217 
size_t
 
	$¡ráime_l
 (*
__»¡riù
 
__s
, 
size_t
 
__maxsize
,

218 
__cÚ¡
 *
__»¡riù
 
__fÜm©
,

219 
__cÚ¡
 
tm
 *
__»¡riù
 
__
,

220 
__loÿË_t
 
__loc
è
__THROW
;

223 #ifdeà
__USE_GNU


224 *
	$¡½time_l
 (
__cÚ¡
 *
__»¡riù
 
__s
,

225 
__cÚ¡
 *
__»¡riù
 
__fmt
, 
tm
 *
__
,

226 
__loÿË_t
 
__loc
è
__THROW
;

230 
__BEGIN_NAMESPACE_STD


233 
tm
 *
	$gmtime
 (
__cÚ¡
 
time_t
 *
__tim”
è
__THROW
;

237 
tm
 *
	$loÿÉime
 (
__cÚ¡
 
time_t
 *
__tim”
è
__THROW
;

238 
__END_NAMESPACE_STD


240 #ià
defšed
 
__USE_POSIX
 || defšed 
__USE_MISC


243 
tm
 *
	$gmtime_r
 (
__cÚ¡
 
time_t
 *
__»¡riù
 
__tim”
,

244 
tm
 *
__»¡riù
 
__
è
__THROW
;

248 
tm
 *
	$loÿÉime_r
 (
__cÚ¡
 
time_t
 *
__»¡riù
 
__tim”
,

249 
tm
 *
__»¡riù
 
__
è
__THROW
;

252 
__BEGIN_NAMESPACE_STD


255 *
	$asùime
 (
__cÚ¡
 
tm
 *
__
è
__THROW
;

258 *
	$ùime
 (
__cÚ¡
 
time_t
 *
__tim”
è
__THROW
;

259 
__END_NAMESPACE_STD


261 #ià
defšed
 
__USE_POSIX
 || defšed 
__USE_MISC


266 *
	$asùime_r
 (
__cÚ¡
 
tm
 *
__»¡riù
 
__
,

267 *
__»¡riù
 
__buf
è
__THROW
;

270 *
	$ùime_r
 (
__cÚ¡
 
time_t
 *
__»¡riù
 
__tim”
,

271 *
__»¡riù
 
__buf
è
__THROW
;

276 *
__tzÇme
[2];

277 
__daylight
;

278 
__timezÚe
;

281 #ifdef 
__USE_POSIX


283 *
tzÇme
[2];

287 
	$tz£t
 (è
__THROW
;

290 #ià
defšed
 
__USE_SVID
 || defšed 
__USE_XOPEN


291 
daylight
;

292 
timezÚe
;

295 #ifdeà
__USE_SVID


298 
	$¡ime
 (
__cÚ¡
 
time_t
 *
__wh’
è
__THROW
;

304 
	#__i¦—p
(
y—r
) \

305 ((
y—r
è% 4 =ğ0 && ((y—rè% 100 !ğ0 || (y—rè% 400 =ğ0))

	)

308 #ifdeà
__USE_MISC


313 
time_t
 
	$timegm
 (
tm
 *
__
è
__THROW
;

316 
time_t
 
	$tim–oÿl
 (
tm
 *
__
è
__THROW
;

319 
	$dysize
 (
__y—r
è
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
));

323 #ifdeà
__USE_POSIX199309


328 
	`Çno¦“p
 (
__cÚ¡
 
time¥ec
 *
__»que¡ed_time
,

329 
time¥ec
 *
__»maššg
);

333 
	$şock_g‘»s
 (
şockid_t
 
__şock_id
, 
time¥ec
 *
__»s
è
__THROW
;

336 
	$şock_g‘time
 (
şockid_t
 
__şock_id
, 
time¥ec
 *
__
è
__THROW
;

339 
	$şock_£‰ime
 (
şockid_t
 
__şock_id
, 
__cÚ¡
 
time¥ec
 *
__
)

340 
__THROW
;

342 #ifdeà
__USE_XOPEN2K


347 
	`şock_Çno¦“p
 (
şockid_t
 
__şock_id
, 
__æags
,

348 
__cÚ¡
 
time¥ec
 *
__»q
,

349 
time¥ec
 *
__»m
);

352 
	$şock_g‘ıuşockid
 (
pid_t
 
__pid
, 
şockid_t
 *
__şock_id
è
__THROW
;

357 
	$tim”_ü—‹
 (
şockid_t
 
__şock_id
,

358 
sigev’t
 *
__»¡riù
 
__evp
,

359 
tim”_t
 *
__»¡riù
 
__tim”id
è
__THROW
;

362 
	$tim”_d–‘e
 (
tim”_t
 
__tim”id
è
__THROW
;

365 
	$tim”_£‰ime
 (
tim”_t
 
__tim”id
, 
__æags
,

366 
__cÚ¡
 
™im”¥ec
 *
__»¡riù
 
__v®ue
,

367 
™im”¥ec
 *
__»¡riù
 
__ov®ue
è
__THROW
;

370 
	$tim”_g‘time
 (
tim”_t
 
__tim”id
, 
™im”¥ec
 *
__v®ue
)

371 
__THROW
;

374 
	$tim”_g‘ov”run
 (
tim”_t
 
__tim”id
è
__THROW
;

378 #ifdeà
__USE_XOPEN_EXTENDED


390 
g‘d©e_”r
;

399 
tm
 *
	`g‘d©e
 (
__cÚ¡
 *
__¡ršg
);

402 #ifdeà
__USE_GNU


413 
	`g‘d©e_r
 (
__cÚ¡
 *
__»¡riù
 
__¡ršg
,

414 
tm
 *
__»¡riù
 
__»sbuå
);

417 
__END_DECLS


	@/usr/include/bits/pthreadtypes.h

20 #iâdeà
_BITS_PTHREADTYPES_H


21 
	#_BITS_PTHREADTYPES_H
 1

	)

23 
	~<b™s/wÜdsize.h
>

25 #ià
__WORDSIZE
 == 64

26 
	#__SIZEOF_PTHREAD_ATTR_T
 56

	)

27 
	#__SIZEOF_PTHREAD_MUTEX_T
 40

	)

28 
	#__SIZEOF_PTHREAD_MUTEXATTR_T
 4

	)

29 
	#__SIZEOF_PTHREAD_COND_T
 48

	)

30 
	#__SIZEOF_PTHREAD_CONDATTR_T
 4

	)

31 
	#__SIZEOF_PTHREAD_RWLOCK_T
 56

	)

32 
	#__SIZEOF_PTHREAD_RWLOCKATTR_T
 8

	)

33 
	#__SIZEOF_PTHREAD_BARRIER_T
 32

	)

34 
	#__SIZEOF_PTHREAD_BARRIERATTR_T
 4

	)

36 
	#__SIZEOF_PTHREAD_ATTR_T
 36

	)

37 
	#__SIZEOF_PTHREAD_MUTEX_T
 24

	)

38 
	#__SIZEOF_PTHREAD_MUTEXATTR_T
 4

	)

39 
	#__SIZEOF_PTHREAD_COND_T
 48

	)

40 
	#__SIZEOF_PTHREAD_CONDATTR_T
 4

	)

41 
	#__SIZEOF_PTHREAD_RWLOCK_T
 32

	)

42 
	#__SIZEOF_PTHREAD_RWLOCKATTR_T
 8

	)

43 
	#__SIZEOF_PTHREAD_BARRIER_T
 20

	)

44 
	#__SIZEOF_PTHREAD_BARRIERATTR_T
 4

	)

50 
	t±h»ad_t
;

55 
	m__size
[
__SIZEOF_PTHREAD_ATTR_T
];

56 
	m__®ign
;

57 } 
	t±h»ad_©Œ_t
;

60 #ià
__WORDSIZE
 == 64

61 
	s__±h»ad_š‹º®_li¡


63 
__±h»ad_š‹º®_li¡
 *
	m__´ev
;

64 
__±h»ad_š‹º®_li¡
 *
	m__Ãxt
;

65 } 
	t__±h»ad_li¡_t
;

67 
	s__±h»ad_š‹º®_¦i¡


69 
__±h»ad_š‹º®_¦i¡
 *
	m__Ãxt
;

70 } 
	t__±h»ad_¦i¡_t
;

78 
	s__±h»ad_mu‹x_s


80 
	m__lock
;

81 
	m__couÁ
;

82 
	m__owÃr
;

83 #ià
__WORDSIZE
 == 64

84 
	m__nu£rs
;

88 
	m__kšd
;

89 #ià
__WORDSIZE
 == 64

90 
	m__¥šs
;

91 
__±h»ad_li¡_t
 
	m__li¡
;

92 
	#__PTHREAD_MUTEX_HAVE_PREV
 1

	)

94 
	m__nu£rs
;

95 
__ex‹nsiÚ__
 union

97 
	m__¥šs
;

98 
__±h»ad_¦i¡_t
 
	m__li¡
;

101 } 
	m__d©a
;

102 
	m__size
[
__SIZEOF_PTHREAD_MUTEX_T
];

103 
	m__®ign
;

104 } 
	t±h»ad_mu‹x_t
;

108 
	m__size
[
__SIZEOF_PTHREAD_MUTEXATTR_T
];

109 
	m__®ign
;

110 } 
	t±h»ad_mu‹x©Œ_t
;

119 
	m__lock
;

120 
	m__fu‹x
;

121 
__ex‹nsiÚ__
 
	m__tÙ®_£q
;

122 
__ex‹nsiÚ__
 
	m__wakeup_£q
;

123 
__ex‹nsiÚ__
 
	m__wok’_£q
;

124 *
	m__mu‹x
;

125 
	m__nwa™”s
;

126 
	m__brßdÿ¡_£q
;

127 } 
	m__d©a
;

128 
	m__size
[
__SIZEOF_PTHREAD_COND_T
];

129 
__ex‹nsiÚ__
 
	m__®ign
;

130 } 
	t±h»ad_cÚd_t
;

134 
	m__size
[
__SIZEOF_PTHREAD_CONDATTR_T
];

135 
	m__®ign
;

136 } 
	t±h»ad_cÚd©Œ_t
;

140 
	t±h»ad_key_t
;

144 
	t±h»ad_Úû_t
;

147 #ià
defšed
 
__USE_UNIX98
 || defšed 
__USE_XOPEN2K


152 #ià
__WORDSIZE
 == 64

155 
	m__lock
;

156 
	m__Ä_»ad”s
;

157 
	m__»ad”s_wakeup
;

158 
	m__wr™”_wakeup
;

159 
	m__Ä_»ad”s_queued
;

160 
	m__Ä_wr™”s_queued
;

161 
	m__wr™”
;

162 
	m__sh¬ed
;

163 
	m__·d1
;

164 
	m__·d2
;

167 
	m__æags
;

168 } 
	m__d©a
;

172 
	m__lock
;

173 
	m__Ä_»ad”s
;

174 
	m__»ad”s_wakeup
;

175 
	m__wr™”_wakeup
;

176 
	m__Ä_»ad”s_queued
;

177 
	m__Ä_wr™”s_queued
;

180 
	m__æags
;

181 
	m__sh¬ed
;

182 
	m__·d1
;

183 
	m__·d2
;

184 
	m__wr™”
;

185 } 
	m__d©a
;

187 
	m__size
[
__SIZEOF_PTHREAD_RWLOCK_T
];

188 
	m__®ign
;

189 } 
	t±h»ad_rwlock_t
;

193 
	m__size
[
__SIZEOF_PTHREAD_RWLOCKATTR_T
];

194 
	m__®ign
;

195 } 
	t±h»ad_rwlock©Œ_t
;

199 #ifdeà
__USE_XOPEN2K


201 vŞ©
	t±h»ad_¥šlock_t
;

208 
	m__size
[
__SIZEOF_PTHREAD_BARRIER_T
];

209 
	m__®ign
;

210 } 
	t±h»ad_b¬r›r_t
;

214 
	m__size
[
__SIZEOF_PTHREAD_BARRIERATTR_T
];

215 
	m__®ign
;

216 } 
	t±h»ad_b¬r›¿‰r_t
;

220 #ià
__WORDSIZE
 == 32

222 
	#__ş—nup_fù_©Œibu‹
 
	`__©Œibu‹__
 ((
	`__»g·rm__
 (1)))

	)

	@/usr/include/bits/setjmp.h

20 #iâdeà
_BITS_SETJMP_H


21 
	#_BITS_SETJMP_H
 1

	)

23 #ià!
defšed
 
_SETJMP_H
 && !defšed 
_PTHREAD_H


27 
	~<b™s/wÜdsize.h
>

29 #iâdeà
_ASM


31 #ià
__WORDSIZE
 == 64

32 
	t__jmp_buf
[8];

34 
	t__jmp_buf
[6];

	@/usr/include/bits/stdio-ldbl.h

20 #iâdeà
_STDIO_H


24 
__BEGIN_NAMESPACE_STD


25 
	$__LDBL_REDIR_DECL
 (
årštf
)

26 
	$__LDBL_REDIR_DECL
 (
´štf
)

27 
	$__LDBL_REDIR_DECL
 (
¥rštf
)

28 
	$__LDBL_REDIR_DECL
 (
vårštf
)

29 
	$__LDBL_REDIR_DECL
 (
v´štf
)

30 
	$__LDBL_REDIR_DECL
 (
v¥rštf
)

31 #ià
defšed
 
__USE_ISOC99
 && !defšed 
__USE_GNU
 \

32 && !
defšed
 
__REDIRECT
 \

33 && (
defšed
 
__STRICT_ANSI__
 || defšed 
__USE_XOPEN2K
)

34 
	$__LDBL_REDIR1_DECL
 (
fsÿnf
, 
__Ædbl___isoc99_fsÿnf
)

35 
	$__LDBL_REDIR1_DECL
 (
sÿnf
, 
__Ædbl___isoc99_sÿnf
)

36 
	$__LDBL_REDIR1_DECL
 (
ssÿnf
, 
__Ædbl___isoc99_ssÿnf
)

38 
	$__LDBL_REDIR_DECL
 (
fsÿnf
)

39 
	$__LDBL_REDIR_DECL
 (
sÿnf
)

40 
	$__LDBL_REDIR_DECL
 (
ssÿnf
)

42 
__END_NAMESPACE_STD


44 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_ISOC99
 || defšed 
__USE_UNIX98


45 
__BEGIN_NAMESPACE_C99


46 
	$__LDBL_REDIR_DECL
 (
¢´štf
)

47 
	$__LDBL_REDIR_DECL
 (
v¢´štf
)

48 
__END_NAMESPACE_C99


51 #ifdef 
__USE_ISOC99


52 
__BEGIN_NAMESPACE_C99


53 #ià!
defšed
 
__USE_GNU
 && !defšed 
__REDIRECT
 \

54 && (
defšed
 
__STRICT_ANSI__
 || defšed 
__USE_XOPEN2K
)

55 
	$__LDBL_REDIR1_DECL
 (
vfsÿnf
, 
__Ædbl___isoc99_vfsÿnf
)

56 
	$__LDBL_REDIR1_DECL
 (
vsÿnf
, 
__Ædbl___isoc99_vsÿnf
)

57 
	$__LDBL_REDIR1_DECL
 (
vssÿnf
, 
__Ædbl___isoc99_vssÿnf
)

59 
	$__LDBL_REDIR_DECL
 (
vfsÿnf
)

60 
	$__LDBL_REDIR_DECL
 (
vssÿnf
)

61 
	$__LDBL_REDIR_DECL
 (
vsÿnf
)

63 
__END_NAMESPACE_C99


66 #ifdeà
__USE_GNU


67 
	$__LDBL_REDIR_DECL
 (
vd´štf
)

68 
	$__LDBL_REDIR_DECL
 (
d´štf
)

69 
	$__LDBL_REDIR_DECL
 (
va¥rštf
)

70 
	$__LDBL_REDIR_DECL
 (
__a¥rštf
)

71 
	$__LDBL_REDIR_DECL
 (
a¥rštf
)

72 
	$__LDBL_REDIR_DECL
 (
ob¡ack_´štf
)

73 
	$__LDBL_REDIR_DECL
 (
ob¡ack_v´štf
)

76 #ià
__USE_FORTIFY_LEVEL
 > 0 && 
defšed
 
__ex‹º_®ways_šlše


77 
	$__LDBL_REDIR_DECL
 (
__¥rštf_chk
)

78 
	$__LDBL_REDIR_DECL
 (
__v¥rštf_chk
)

79 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_ISOC99
 || defšed 
__USE_UNIX98


80 
	$__LDBL_REDIR_DECL
 (
__¢´štf_chk
)

81 
	$__LDBL_REDIR_DECL
 (
__v¢´štf_chk
)

83 #ià
__USE_FORTIFY_LEVEL
 > 1

84 
	$__LDBL_REDIR_DECL
 (
__årštf_chk
)

85 
	$__LDBL_REDIR_DECL
 (
__´štf_chk
)

86 
	$__LDBL_REDIR_DECL
 (
__vårštf_chk
)

87 
	$__LDBL_REDIR_DECL
 (
__v´štf_chk
)

88 #ifdeà
__USE_GNU


89 
	$__LDBL_REDIR_DECL
 (
__a¥rštf_chk
)

90 
	$__LDBL_REDIR_DECL
 (
__va¥rštf_chk
)

91 
	$__LDBL_REDIR_DECL
 (
__d´štf_chk
)

92 
	$__LDBL_REDIR_DECL
 (
__vd´štf_chk
)

93 
	$__LDBL_REDIR_DECL
 (
__ob¡ack_´štf_chk
)

94 
	$__LDBL_REDIR_DECL
 (
__ob¡ack_v´štf_chk
)

	@/usr/include/bits/stdio.h

20 #iâdeà
_STDIO_H


24 #iâdeà
__ex‹º_šlše


25 
	#__STDIO_INLINE
 
šlše


	)

27 
	#__STDIO_INLINE
 
__ex‹º_šlše


	)

31 #ifdeà
__USE_EXTERN_INLINES


34 #ià!(
__USE_FORTIFY_LEVEL
 > 0 && 
defšed
 
__ex‹º_®ways_šlše
)

36 
__STDIO_INLINE
 

37 
	$v´štf
 (
__cÚ¡
 *
__»¡riù
 
__fmt
, 
_G_va_li¡
 
__¬g
)

39  
	`vårštf
 (
¡dout
, 
__fmt
, 
__¬g
);

40 
	}
}

44 
__STDIO_INLINE
 

45 
	$g‘ch¬
 ()

47  
	`_IO_g‘c
 (
¡dš
);

48 
	}
}

51 #ifdeà
__USE_MISC


53 
__STDIO_INLINE
 

54 
	$fg‘c_uÆocked
 (
FILE
 *
__å
)

56  
	`_IO_g‘c_uÆocked
 (
__å
);

57 
	}
}

61 #ià
defšed
 
__USE_POSIX
 || defšed 
__USE_MISC


63 
__STDIO_INLINE
 

64 
	$g‘c_uÆocked
 (
FILE
 *
__å
)

66  
	`_IO_g‘c_uÆocked
 (
__å
);

67 
	}
}

70 
__STDIO_INLINE
 

71 
	$g‘ch¬_uÆocked
 ()

73  
	`_IO_g‘c_uÆocked
 (
¡dš
);

74 
	}
}

79 
__STDIO_INLINE
 

80 
	$putch¬
 (
__c
)

82  
	`_IO_putc
 (
__c
, 
¡dout
);

83 
	}
}

86 #ifdeà
__USE_MISC


88 
__STDIO_INLINE
 

89 
	$åutc_uÆocked
 (
__c
, 
FILE
 *
__¡»am
)

91  
	`_IO_putc_uÆocked
 (
__c
, 
__¡»am
);

92 
	}
}

96 #ià
defšed
 
__USE_POSIX
 || defšed 
__USE_MISC


98 
__STDIO_INLINE
 

99 
	$putc_uÆocked
 (
__c
, 
FILE
 *
__¡»am
)

101  
	`_IO_putc_uÆocked
 (
__c
, 
__¡»am
);

102 
	}
}

105 
__STDIO_INLINE
 

106 
	$putch¬_uÆocked
 (
__c
)

108  
	`_IO_putc_uÆocked
 (
__c
, 
¡dout
);

109 
	}
}

113 #ifdef 
__USE_GNU


115 
__STDIO_INLINE
 
_IO_ssize_t


116 
	$g‘lše
 (**
__lš•Œ
, 
size_t
 *
__n
, 
FILE
 *
__¡»am
)

118  
	`__g‘d–im
 (
__lš•Œ
, 
__n
, '\n', 
__¡»am
);

119 
	}
}

123 #ifdeà
__USE_MISC


125 
__STDIO_INLINE
 

126 
__NTH
 (
	$ãof_uÆocked
 (
FILE
 *
__¡»am
))

128  
	`_IO_ãof_uÆocked
 (
__¡»am
);

129 
	}
}

132 
__STDIO_INLINE
 

133 
__NTH
 (
	$ã¼Ü_uÆocked
 (
FILE
 *
__¡»am
))

135  
	`_IO_ã¼Ü_uÆocked
 (
__¡»am
);

136 
	}
}

142 #ià
defšed
 
__USE_MISC
 && defšed 
__GNUC__
 && defšed 
__OPTIMIZE__
 \

143 && !
defšed
 
	g__ılu¥lus


145 
	#ä—d_uÆocked
(
±r
, 
size
, 
n
, 
¡»am
) \

146 (
	`__ex‹nsiÚ__
 ((
	`__butš_cÚ¡ªt_p
 (
size
è&& __butš_cÚ¡ªt_°(
n
) \

147 && (
size_t
è(
size
è* (size_tè(
n
) <= 8 \

148 && (
size_t
è(
size
) != 0) \

149 ? ({ *
__±r
 = (*è(
±r
); \

150 
FILE
 *
__¡»am
 = (
¡»am
); \

151 
size_t
 
__út
; \

152 
__út
 = (
size_t
è(
size
è* (size_tè(
n
); \

153 
__út
 > 0; --__cnt) \

155 
__c
 = 
	`_IO_g‘c_uÆocked
 (
__¡»am
); \

156 ià(
__c
 =ğ
EOF
) \

158 *
__±r
++ = 
__c
; \

160 ((
size_t
è(
size
è* (size_tè(
n
è- 
__út
) \

161 / (
size_t
è(
size
); }) \

162 : (((
	`__butš_cÚ¡ªt_p
 (
size
è&& (
size_t
) (size) == 0) \

163 || (
	`__butš_cÚ¡ªt_p
 (
n
è&& (
size_t
) (n) == 0)) \

165 ? ((è(
±r
), (è(
¡»am
), (è(
size
), \

166 (è(
n
), (
size_t
) 0) \

167 : 
	`ä—d_uÆocked
 (
±r
, 
size
, 
n
, 
¡»am
))))

	)

169 
	#fwr™e_uÆocked
(
±r
, 
size
, 
n
, 
¡»am
) \

170 (
	`__ex‹nsiÚ__
 ((
	`__butš_cÚ¡ªt_p
 (
size
è&& __butš_cÚ¡ªt_°(
n
) \

171 && (
size_t
è(
size
è* (size_tè(
n
) <= 8 \

172 && (
size_t
è(
size
) != 0) \

173 ? ({ cÚ¡ *
__±r
 = (cÚ¡ *è(
±r
); \

174 
FILE
 *
__¡»am
 = (
¡»am
); \

175 
size_t
 
__út
; \

176 
__út
 = (
size_t
è(
size
è* (size_tè(
n
); \

177 
__út
 > 0; --__cnt) \

178 ià(
	`_IO_putc_uÆocked
 (*
__±r
++, 
__¡»am
è=ğ
EOF
) \

180 ((
size_t
è(
size
è* (size_tè(
n
è- 
__út
) \

181 / (
size_t
è(
size
); }) \

182 : (((
	`__butš_cÚ¡ªt_p
 (
size
è&& (
size_t
) (size) == 0) \

183 || (
	`__butš_cÚ¡ªt_p
 (
n
è&& (
size_t
) (n) == 0)) \

185 ? ((è(
±r
), (è(
¡»am
), (è(
size
), \

186 (è(
n
), (
size_t
) 0) \

187 : 
	`fwr™e_uÆocked
 (
±r
, 
size
, 
n
, 
¡»am
))))

	)

191 #undeà
__STDIO_INLINE


	@/usr/include/bits/stdio2.h

20 #iâdeà
_STDIO_H


24 
	$__¥rštf_chk
 (*
__»¡riù
 
__s
, 
__æag
, 
size_t
 
__¦’
,

25 
__cÚ¡
 *
__»¡riù
 
__fÜm©
, ...è
__THROW
;

26 
	$__v¥rštf_chk
 (*
__»¡riù
 
__s
, 
__æag
, 
size_t
 
__¦’
,

27 
__cÚ¡
 *
__»¡riù
 
__fÜm©
,

28 
_G_va_li¡
 
__­
è
__THROW
;

30 #ifdeà
__va_¬g_·ck


31 
__ex‹º_®ways_šlše
 

32 
	`__NTH
 (
	$¥rštf
 (*
__»¡riù
 
__s
, 
__cÚ¡
 *__»¡riù 
__fmt
, ...))

34  
	`__butš___¥rštf_chk
 (
__s
, 
__USE_FORTIFY_LEVEL
 - 1,

35 
	`__bos
 (
__s
), 
__fmt
, 
	`__va_¬g_·ck
 ());

36 
	}
}

37 #–ià!
defšed
 
__ılu¥lus


38 
	#¥rštf
(
¡r
, ...) \

39 
	`__butš___¥rštf_chk
 (
¡r
, 
__USE_FORTIFY_LEVEL
 - 1, 
	`__bos
 (str), \

40 
__VA_ARGS__
)

	)

43 
__ex‹º_®ways_šlše
 

44 
__NTH
 (
	$v¥rštf
 (*
__»¡riù
 
__s
, 
__cÚ¡
 *__»¡riù 
__fmt
,

45 
_G_va_li¡
 
__­
))

47  
	`__butš___v¥rštf_chk
 (
__s
, 
__USE_FORTIFY_LEVEL
 - 1,

48 
	`__bos
 (
__s
), 
__fmt
, 
__­
);

49 
	}
}

51 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_ISOC99
 || defšed 
__USE_UNIX98


53 
	$__¢´štf_chk
 (*
__»¡riù
 
__s
, 
size_t
 
__n
, 
__æag
,

54 
size_t
 
__¦’
, 
__cÚ¡
 *
__»¡riù
 
__fÜm©
,

55 ...è
__THROW
;

56 
	$__v¢´štf_chk
 (*
__»¡riù
 
__s
, 
size_t
 
__n
, 
__æag
,

57 
size_t
 
__¦’
, 
__cÚ¡
 *
__»¡riù
 
__fÜm©
,

58 
_G_va_li¡
 
__­
è
__THROW
;

60 #ifdeà
__va_¬g_·ck


61 
__ex‹º_®ways_šlše
 

62 
	`__NTH
 (
	$¢´štf
 (*
__»¡riù
 
__s
, 
size_t
 
__n
,

63 
__cÚ¡
 *
__»¡riù
 
__fmt
, ...))

65  
	`__butš___¢´štf_chk
 (
__s
, 
__n
, 
__USE_FORTIFY_LEVEL
 - 1,

66 
	`__bos
 (
__s
), 
__fmt
, 
	`__va_¬g_·ck
 ());

67 
	}
}

68 #–ià!
defšed
 
__ılu¥lus


69 
	#¢´štf
(
¡r
, 
Ën
, ...) \

70 
	`__butš___¢´štf_chk
 (
¡r
, 
Ën
, 
__USE_FORTIFY_LEVEL
 - 1, 
	`__bos
 (str), \

71 
__VA_ARGS__
)

	)

74 
__ex‹º_®ways_šlše
 

75 
__NTH
 (
	$v¢´štf
 (*
__»¡riù
 
__s
, 
size_t
 
__n
,

76 
__cÚ¡
 *
__»¡riù
 
__fmt
, 
_G_va_li¡
 
__­
))

78  
	`__butš___v¢´štf_chk
 (
__s
, 
__n
, 
__USE_FORTIFY_LEVEL
 - 1,

79 
	`__bos
 (
__s
), 
__fmt
, 
__­
);

80 
	}
}

84 #ià
__USE_FORTIFY_LEVEL
 > 1

86 
__årštf_chk
 (
FILE
 *
__»¡riù
 
__¡»am
, 
__æag
,

87 
__cÚ¡
 *
__»¡riù
 
__fÜm©
, ...);

88 
__´štf_chk
 (
__æag
, 
__cÚ¡
 *
__»¡riù
 
__fÜm©
, ...);

89 
__vårštf_chk
 (
FILE
 *
__»¡riù
 
__¡»am
, 
__æag
,

90 
__cÚ¡
 *
__»¡riù
 
__fÜm©
, 
_G_va_li¡
 
__­
);

91 
__v´štf_chk
 (
__æag
, 
__cÚ¡
 *
__»¡riù
 
__fÜm©
,

92 
_G_va_li¡
 
__­
);

94 #ifdeà
__va_¬g_·ck


95 
__ex‹º_®ways_šlše
 

96 
	$årštf
 (
FILE
 *
__»¡riù
 
__¡»am
, 
__cÚ¡
 *__»¡riù 
__fmt
, ...)

98  
	`__årštf_chk
 (
__¡»am
, 
__USE_FORTIFY_LEVEL
 - 1, 
__fmt
,

99 
	`__va_¬g_·ck
 ());

100 
	}
}

102 
__ex‹º_®ways_šlše
 

103 
	$´štf
 (
__cÚ¡
 *
__»¡riù
 
__fmt
, ...)

105  
	`__´štf_chk
 (
__USE_FORTIFY_LEVEL
 - 1, 
__fmt
, 
	`__va_¬g_·ck
 ());

106 
	}
}

107 #–ià!
defšed
 
__ılu¥lus


108 
	#´štf
(...) \

109 
	`__´štf_chk
 (
__USE_FORTIFY_LEVEL
 - 1, 
__VA_ARGS__
)

	)

110 
	#årštf
(
¡»am
, ...) \

111 
	`__årštf_chk
 (
¡»am
, 
__USE_FORTIFY_LEVEL
 - 1, 
__VA_ARGS__
)

	)

114 
__ex‹º_®ways_šlše
 

115 
	$v´štf
 (
__cÚ¡
 *
__»¡riù
 
__fmt
, 
_G_va_li¡
 
__­
)

117 #ifdeà
__USE_EXTERN_INLINES


118  
	`__vårštf_chk
 (
¡dout
, 
__USE_FORTIFY_LEVEL
 - 1, 
__fmt
, 
__­
);

120  
	`__v´štf_chk
 (
__USE_FORTIFY_LEVEL
 - 1, 
__fmt
, 
__­
);

122 
	}
}

124 
__ex‹º_®ways_šlše
 

125 
	$vårštf
 (
FILE
 *
__»¡riù
 
__¡»am
,

126 
__cÚ¡
 *
__»¡riù
 
__fmt
, 
_G_va_li¡
 
__­
)

128  
	`__vårštf_chk
 (
__¡»am
, 
__USE_FORTIFY_LEVEL
 - 1, 
__fmt
, 
__­
);

129 
	}
}

131 #ifdeà
__USE_GNU


133 
	$__a¥rštf_chk
 (**
__»¡riù
 
__±r
, 
__æag
,

134 
__cÚ¡
 *
__»¡riù
 
__fmt
, ...)

135 
__THROW
 
	`__©Œibu‹__
 ((
	$__fÜm©__
 (
__´štf__
, 3, 4))è
__wur
;

136 
	$__va¥rštf_chk
 (**
__»¡riù
 
__±r
, 
__æag
,

137 
__cÚ¡
 *
__»¡riù
 
__fmt
, 
_G_va_li¡
 
__¬g
)

138 
__THROW
 
	`__©Œibu‹__
 ((
	$__fÜm©__
 (
__´štf__
, 3, 0))è
__wur
;

139 
	$__d´štf_chk
 (
__fd
, 
__æag
, 
__cÚ¡
 *
__»¡riù
 
__fmt
,

140 ...è
	`__©Œibu‹__
 ((
	`__fÜm©__
 (
__´štf__
, 3, 4)));

141 
	$__vd´štf_chk
 (
__fd
, 
__æag
,

142 
__cÚ¡
 *
__»¡riù
 
__fmt
, 
_G_va_li¡
 
__¬g
)

143 
	`__©Œibu‹__
 ((
	`__fÜm©__
 (
__´štf__
, 3, 0)));

144 
	$__ob¡ack_´štf_chk
 (
ob¡ack
 *
__»¡riù
 
__ob¡ack
,

145 
__æag
, 
__cÚ¡
 *
__»¡riù
 
__fÜm©
,

147 
__THROW
 
	`__©Œibu‹__
 ((
	`__fÜm©__
 (
__´štf__
, 3, 4)));

148 
	$__ob¡ack_v´štf_chk
 (
ob¡ack
 *
__»¡riù
 
__ob¡ack
,

149 
__æag
,

150 
__cÚ¡
 *
__»¡riù
 
__fÜm©
,

151 
_G_va_li¡
 
__¬gs
)

152 
__THROW
 
	`__©Œibu‹__
 ((
	`__fÜm©__
 (
__´štf__
, 3, 0)));

154 #ifdeà
__va_¬g_·ck


155 
__ex‹º_®ways_šlše
 

156 
	`__NTH
 (
	$a¥rštf
 (**
__»¡riù
 
__±r
, 
__cÚ¡
 *__»¡riù 
__fmt
, ...))

158  
	`__a¥rštf_chk
 (
__±r
, 
__USE_FORTIFY_LEVEL
 - 1, 
__fmt
,

159 
	`__va_¬g_·ck
 ());

160 
	}
}

162 
__ex‹º_®ways_šlše
 

163 
__NTH
 (
	$__a¥rštf
 (**
__»¡riù
 
__±r
, 
__cÚ¡
 *__»¡riù 
__fmt
,

166  
	`__a¥rštf_chk
 (
__±r
, 
__USE_FORTIFY_LEVEL
 - 1, 
__fmt
,

167 
	`__va_¬g_·ck
 ());

168 
	}
}

170 
__ex‹º_®ways_šlše
 

171 
	$d´štf
 (
__fd
, 
__cÚ¡
 *
__»¡riù
 
__fmt
, ...)

173  
	`__d´štf_chk
 (
__fd
, 
__USE_FORTIFY_LEVEL
 - 1, 
__fmt
,

174 
	`__va_¬g_·ck
 ());

175 
	}
}

177 
__ex‹º_®ways_šlše
 

178 
__NTH
 (
	$ob¡ack_´štf
 (
ob¡ack
 *
__»¡riù
 
__ob¡ack
,

179 
__cÚ¡
 *
__»¡riù
 
__fmt
, ...))

181  
	`__ob¡ack_´štf_chk
 (
__ob¡ack
, 
__USE_FORTIFY_LEVEL
 - 1, 
__fmt
,

182 
	`__va_¬g_·ck
 ());

183 
	}
}

184 #–ià!
defšed
 
__ılu¥lus


185 
	#a¥rštf
(
±r
, ...) \

186 
	`__a¥rštf_chk
 (
±r
, 
__USE_FORTIFY_LEVEL
 - 1, 
__VA_ARGS__
)

	)

187 
	#__a¥rštf
(
±r
, ...) \

188 
	`__a¥rštf_chk
 (
±r
, 
__USE_FORTIFY_LEVEL
 - 1, 
__VA_ARGS__
)

	)

189 
	#d´štf
(
fd
, ...) \

190 
	`__d´štf_chk
 (
fd
, 
__USE_FORTIFY_LEVEL
 - 1, 
__VA_ARGS__
)

	)

191 
	#ob¡ack_´štf
(
ob¡ack
, ...) \

192 
	`__ob¡ack_´štf_chk
 (
ob¡ack
, 
__USE_FORTIFY_LEVEL
 - 1, 
__VA_ARGS__
)

	)

195 
__ex‹º_®ways_šlše
 

196 
__NTH
 (
	$va¥rštf
 (**
__»¡riù
 
__±r
, 
__cÚ¡
 *__»¡riù 
__fmt
,

197 
_G_va_li¡
 
__­
))

199  
	`__va¥rštf_chk
 (
__±r
, 
__USE_FORTIFY_LEVEL
 - 1, 
__fmt
, 
__­
);

200 
	}
}

202 
__ex‹º_®ways_šlše
 

203 
	$vd´štf
 (
__fd
, 
__cÚ¡
 *
__»¡riù
 
__fmt
, 
_G_va_li¡
 
__­
)

205  
	`__vd´štf_chk
 (
__fd
, 
__USE_FORTIFY_LEVEL
 - 1, 
__fmt
, 
__­
);

206 
	}
}

208 
__ex‹º_®ways_šlše
 

209 
__NTH
 (
	$ob¡ack_v´štf
 (
ob¡ack
 *
__»¡riù
 
__ob¡ack
,

210 
__cÚ¡
 *
__»¡riù
 
__fmt
, 
_G_va_li¡
 
__­
))

212  
	`__ob¡ack_v´štf_chk
 (
__ob¡ack
, 
__USE_FORTIFY_LEVEL
 - 1, 
__fmt
,

213 
__­
);

214 
	}
}

220 *
	$__g‘s_chk
 (*
__¡r
, 
size_t
è
__wur
;

221 *
	`__REDIRECT
 (
__g‘s_w¬n
, (*
__¡r
), 
g‘s
)

222 
__wur
 
	`__w¬Ç‰r
 ("please use fgets or getline instead, gets can't "

225 
__ex‹º_®ways_šlše
 
__wur
 *

226 
	$g‘s
 (*
__¡r
)

228 ià(
	`__bos
 (
__¡r
è!ğ(
size_t
) -1)

229  
	`__g‘s_chk
 (
__¡r
, 
	`__bos
 (__str));

230  
	`__g‘s_w¬n
 (
__¡r
);

231 
	}
}

233 *
	$__fg‘s_chk
 (*
__»¡riù
 
__s
, 
size_t
 
__size
, 
__n
,

234 
FILE
 *
__»¡riù
 
__¡»am
è
__wur
;

235 *
	`__REDIRECT
 (
__fg‘s_®Ÿs
,

236 (*
__»¡riù
 
__s
, 
__n
,

237 
FILE
 *
__»¡riù
 
__¡»am
), 
fg‘s
è
__wur
;

238 *
	`__REDIRECT
 (
__fg‘s_chk_w¬n
,

239 (*
__»¡riù
 
__s
, 
size_t
 
__size
, 
__n
,

240 
FILE
 *
__»¡riù
 
__¡»am
), 
__fg‘s_chk
)

241 
__wur
 
	`__w¬Ç‰r
 ("fgets called with bigger sizehan†ength "

244 
__ex‹º_®ways_šlše
 
__wur
 *

245 
	$fg‘s
 (*
__»¡riù
 
__s
, 
__n
, 
FILE
 *__»¡riù 
__¡»am
)

247 ià(
	`__bos
 (
__s
è!ğ(
size_t
) -1)

249 ià(!
	`__butš_cÚ¡ªt_p
 (
__n
) || __n <= 0)

250  
	`__fg‘s_chk
 (
__s
, 
	`__bos
 (__s), 
__n
, 
__¡»am
);

252 ià((
size_t
è
__n
 > 
	`__bos
 (
__s
))

253  
	`__fg‘s_chk_w¬n
 (
__s
, 
	`__bos
 (__s), 
__n
, 
__¡»am
);

255  
	`__fg‘s_®Ÿs
 (
__s
, 
__n
, 
__¡»am
);

256 
	}
}

258 
size_t
 
	$__ä—d_chk
 (*
__»¡riù
 
__±r
, 
size_t
 
__±¾’
,

259 
size_t
 
__size
, size_ˆ
__n
,

260 
FILE
 *
__»¡riù
 
__¡»am
è
__wur
;

261 
size_t
 
	`__REDIRECT
 (
__ä—d_®Ÿs
,

262 (*
__»¡riù
 
__±r
, 
size_t
 
__size
,

263 
size_t
 
__n
, 
FILE
 *
__»¡riù
 
__¡»am
),

264 
ä—d
è
__wur
;

265 
size_t
 
	`__REDIRECT
 (
__ä—d_chk_w¬n
,

266 (*
__»¡riù
 
__±r
, 
size_t
 
__±¾’
,

267 
size_t
 
__size
, size_ˆ
__n
,

268 
FILE
 *
__»¡riù
 
__¡»am
),

269 
__ä—d_chk
)

270 
__wur
 
	`__w¬Ç‰r
 ("fread called with bigger size *‚membhan†ength "

273 
__ex‹º_®ways_šlše
 
__wur
 
size_t


274 
	$ä—d
 (*
__»¡riù
 
__±r
, 
size_t
 
__size
, size_ˆ
__n
,

275 
FILE
 *
__»¡riù
 
__¡»am
)

277 ià(
	`__bos0
 (
__±r
è!ğ(
size_t
) -1)

279 ià(!
	`__butš_cÚ¡ªt_p
 (
__size
)

280 || !
	`__butš_cÚ¡ªt_p
 (
__n
)

281 || (
__size
 | 
__n
è>ğ(((
size_t
) 1) << (8 *  (size_t) / 2)))

282  
	`__ä—d_chk
 (
__±r
, 
	`__bos0
 (__±r), 
__size
, 
__n
, 
__¡»am
);

284 ià(
__size
 * 
__n
 > 
	`__bos0
 (
__±r
))

285  
	`__ä—d_chk_w¬n
 (
__±r
, 
	`__bos0
 (__±r), 
__size
, 
__n
, 
__¡»am
);

287  
	`__ä—d_®Ÿs
 (
__±r
, 
__size
, 
__n
, 
__¡»am
);

288 
	}
}

290 #ifdeà
__USE_GNU


291 *
	$__fg‘s_uÆocked_chk
 (*
__»¡riù
 
__s
, 
size_t
 
__size
,

292 
__n
, 
FILE
 *
__»¡riù
 
__¡»am
è
__wur
;

293 *
	`__REDIRECT
 (
__fg‘s_uÆocked_®Ÿs
,

294 (*
__»¡riù
 
__s
, 
__n
,

295 
FILE
 *
__»¡riù
 
__¡»am
), 
fg‘s_uÆocked
è
__wur
;

296 *
	`__REDIRECT
 (
__fg‘s_uÆocked_chk_w¬n
,

297 (*
__»¡riù
 
__s
, 
size_t
 
__size
, 
__n
,

298 
FILE
 *
__»¡riù
 
__¡»am
), 
__fg‘s_uÆocked_chk
)

299 
__wur
 
	`__w¬Ç‰r
 ("fgets_unlocked called with bigger sizehan†ength "

302 
__ex‹º_®ways_šlše
 
__wur
 *

303 
	$fg‘s_uÆocked
 (*
__»¡riù
 
__s
, 
__n
, 
FILE
 *__»¡riù 
__¡»am
)

305 ià(
	`__bos
 (
__s
è!ğ(
size_t
) -1)

307 ià(!
	`__butš_cÚ¡ªt_p
 (
__n
) || __n <= 0)

308  
	`__fg‘s_uÆocked_chk
 (
__s
, 
	`__bos
 (__s), 
__n
, 
__¡»am
);

310 ià((
size_t
è
__n
 > 
	`__bos
 (
__s
))

311  
	`__fg‘s_uÆocked_chk_w¬n
 (
__s
, 
	`__bos
 (__s), 
__n
, 
__¡»am
);

313  
	`__fg‘s_uÆocked_®Ÿs
 (
__s
, 
__n
, 
__¡»am
);

314 
	}
}

317 #ifdeà
__USE_MISC


318 #undeà
ä—d_uÆocked


319 
size_t
 
	$__ä—d_uÆocked_chk
 (*
__»¡riù
 
__±r
, 
size_t
 
__±¾’
,

320 
size_t
 
__size
, size_ˆ
__n
,

321 
FILE
 *
__»¡riù
 
__¡»am
è
__wur
;

322 
size_t
 
	`__REDIRECT
 (
__ä—d_uÆocked_®Ÿs
,

323 (*
__»¡riù
 
__±r
, 
size_t
 
__size
,

324 
size_t
 
__n
, 
FILE
 *
__»¡riù
 
__¡»am
),

325 
ä—d_uÆocked
è
__wur
;

326 
size_t
 
	`__REDIRECT
 (
__ä—d_uÆocked_chk_w¬n
,

327 (*
__»¡riù
 
__±r
, 
size_t
 
__±¾’
,

328 
size_t
 
__size
, size_ˆ
__n
,

329 
FILE
 *
__»¡riù
 
__¡»am
),

330 
__ä—d_uÆocked_chk
)

331 
__wur
 
	`__w¬Ç‰r
 ("fread_unlocked called with bigger size *‚membhan "

334 
__ex‹º_®ways_šlše
 
__wur
 
size_t


335 
	$ä—d_uÆocked
 (*
__»¡riù
 
__±r
, 
size_t
 
__size
, size_ˆ
__n
,

336 
FILE
 *
__»¡riù
 
__¡»am
)

338 ià(
	`__bos0
 (
__±r
è!ğ(
size_t
) -1)

340 ià(!
	`__butš_cÚ¡ªt_p
 (
__size
)

341 || !
	`__butš_cÚ¡ªt_p
 (
__n
)

342 || (
__size
 | 
__n
è>ğ(((
size_t
) 1) << (8 *  (size_t) / 2)))

343  
	`__ä—d_uÆocked_chk
 (
__±r
, 
	`__bos0
 (__±r), 
__size
, 
__n
,

344 
__¡»am
);

346 ià(
__size
 * 
__n
 > 
	`__bos0
 (
__±r
))

347  
	`__ä—d_uÆocked_chk_w¬n
 (
__±r
, 
	`__bos0
 (__±r), 
__size
, 
__n
,

348 
__¡»am
);

351 #ifdeà
__USE_EXTERN_INLINES


352 ià(
	`__butš_cÚ¡ªt_p
 (
__size
)

353 && 
	`__butš_cÚ¡ªt_p
 (
__n
)

354 && (
__size
 | 
__n
è< (((
size_t
) 1) << (8 *  (size_t) / 2))

355 && 
__size
 * 
__n
 <= 8)

357 
size_t
 
__út
 = 
__size
 * 
__n
;

358 *
__ıŒ
 = (*è
__±r
;

359 ià(
__út
 == 0)

362 ; 
__út
 > 0; --__cnt)

364 
__c
 = 
	`_IO_g‘c_uÆocked
 (
__¡»am
);

365 ià(
__c
 =ğ
EOF
)

367 *
__ıŒ
++ = 
__c
;

369  (
__ıŒ
 - (*è
__±r
è/ 
__size
;

372  
	`__ä—d_uÆocked_®Ÿs
 (
__±r
, 
__size
, 
__n
, 
__¡»am
);

373 
	}
}

	@/usr/include/bits/stdio_lim.h

19 #ià!
defšed
 
_STDIO_H
 && !defšed 
__Ãed_FOPEN_MAX
 && !defšed 
__Ãed_IOV_MAX


23 #ifdeà
_STDIO_H


24 
	#L_tm²am
 20

	)

25 
	#TMP_MAX
 238328

	)

26 
	#FILENAME_MAX
 4096

	)

28 #ifdeà
__USE_POSIX


29 
	#L_ù”mid
 9

	)

30 #ià!
defšed
 
__USE_XOPEN2K
 || defšed 
__USE_GNU


31 
	#L_cu£rid
 9

	)

36 #ià
defšed
 
__Ãed_FOPEN_MAX
 || defšed 
_STDIO_H


37 #undeà
FOPEN_MAX


38 
	#FOPEN_MAX
 16

	)

41 #ià
defšed
 
__Ãed_IOV_MAX
 && !defšed 
IOV_MAX


42 
	#IOV_MAX
 1024

	)

	@/usr/include/bits/sys_errlist.h

20 #iâdeà
_STDIO_H


26 #ifdeà 
__USE_BSD


27 
sys_Ã¼
;

28 
__cÚ¡
 *__cÚ¡ 
sys_”¾i¡
[];

30 #ifdeà 
__USE_GNU


31 
_sys_Ã¼
;

32 
__cÚ¡
 *__cÚ¡ 
_sys_”¾i¡
[];

	@/usr/include/bits/time.h

24 #iâdeà
__Ãed_timev®


25 #iâdeà
_BITS_TIME_H


26 
	#_BITS_TIME_H
 1

	)

34 
	#CLOCKS_PER_SEC
 1000000l

	)

36 #ià!
defšed
 
__STRICT_ANSI__
 && !defšed 
__USE_XOPEN2K


39 
	~<b™s/ty³s.h
>

40 
__syscÚf
 ();

41 
	#CLK_TCK
 ((
__şock_t
è
	`__syscÚf
 (2)è

	)

44 #ifdeà
__USE_POSIX199309


46 
	#CLOCK_REALTIME
 0

	)

48 
	#CLOCK_MONOTONIC
 1

	)

50 
	#CLOCK_PROCESS_CPUTIME_ID
 2

	)

52 
	#CLOCK_THREAD_CPUTIME_ID
 3

	)

55 
	#TIMER_ABSTIME
 1

	)

61 #ifdeà
__Ãed_timev®


62 #undeà
__Ãed_timev®


63 #iâdeà
_STRUCT_TIMEVAL


64 
	#_STRUCT_TIMEVAL
 1

	)

65 
	~<b™s/ty³s.h
>

69 
	stimev®


71 
__time_t
 
	mtv_£c
;

72 
__su£cÚds_t
 
	mtv_u£c
;

	@/usr/include/bits/types.h

24 #iâdef 
_BITS_TYPES_H


25 
	#_BITS_TYPES_H
 1

	)

27 
	~<ã©u»s.h
>

28 
	~<b™s/wÜdsize.h
>

31 
	t__u_ch¬
;

32 
	t__u_shÜt
;

33 
	t__u_št
;

34 
	t__u_lÚg
;

37 sigÃd 
	t__št8_t
;

38 
	t__ušt8_t
;

39 sigÃd 
	t__št16_t
;

40 
	t__ušt16_t
;

41 sigÃd 
	t__št32_t
;

42 
	t__ušt32_t
;

43 #ià
__WORDSIZE
 == 64

44 sigÃd 
	t__št64_t
;

45 
	t__ušt64_t
;

46 #–ià
defšed
 
__GLIBC_HAVE_LONG_LONG


47 
__ex‹nsiÚ__
 sigÃd 
	t__št64_t
;

48 
__ex‹nsiÚ__
 
	t__ušt64_t
;

52 #ià
__WORDSIZE
 == 64

53 
	t__quad_t
;

54 
	t__u_quad_t
;

55 #–ià
defšed
 
__GLIBC_HAVE_LONG_LONG


56 
__ex‹nsiÚ__
 
	t__quad_t
;

57 
__ex‹nsiÚ__
 
	t__u_quad_t
;

61 
	m__v®
[2];

62 } 
	t__quad_t
;

65 
__u_lÚg
 
	m__v®
[2];

66 } 
	t__u_quad_t
;

99 
	#__S16_TYPE
 

	)

100 
	#__U16_TYPE
 

	)

101 
	#__S32_TYPE
 

	)

102 
	#__U32_TYPE
 

	)

103 
	#__SLONGWORD_TYPE
 

	)

104 
	#__ULONGWORD_TYPE
 

	)

105 #ià
__WORDSIZE
 == 32

106 
	#__SQUAD_TYPE
 
__quad_t


	)

107 
	#__UQUAD_TYPE
 
__u_quad_t


	)

108 
	#__SWORD_TYPE
 

	)

109 
	#__UWORD_TYPE
 

	)

110 
	#__SLONG32_TYPE
 

	)

111 
	#__ULONG32_TYPE
 

	)

112 
	#__S64_TYPE
 
__quad_t


	)

113 
	#__U64_TYPE
 
__u_quad_t


	)

116 
	#__STD_TYPE
 
__ex‹nsiÚ__
 

	)

117 #–ià
__WORDSIZE
 == 64

118 
	t__SQUAD_TYPE
 

	)

119 
	t__UQUAD_TYPE
 

	)

120 
	t__SWORD_TYPE
 

	)

121 
	t__UWORD_TYPE
 

	)

122 
	t__SLONG32_TYPE
 

	)

123 
	t__ULONG32_TYPE
 

	)

124 
	t__S64_TYPE
 

	)

125 
	t__U64_TYPE
 

	)

127 
	t__STD_TYPE
 

	)

131 
	~<b™s/ty³sizes.h
>

134 
__STD_TYPE
 
	t__DEV_T_TYPE
 
	t__dev_t
;

135 
__STD_TYPE
 
__UID_T_TYPE
 
	g__uid_t
;

136 
__STD_TYPE
 
__GID_T_TYPE
 
	g__gid_t
;

137 
__STD_TYPE
 
__INO_T_TYPE
 
	g__šo_t
;

138 
__STD_TYPE
 
__INO64_T_TYPE
 
	g__šo64_t
;

139 
__STD_TYPE
 
__MODE_T_TYPE
 
	g__mode_t
;

140 
__STD_TYPE
 
__NLINK_T_TYPE
 
	g__Æšk_t
;

141 
__STD_TYPE
 
__OFF_T_TYPE
 
	g__off_t
;

142 
__STD_TYPE
 
__OFF64_T_TYPE
 
	g__off64_t
;

143 
__STD_TYPE
 
__PID_T_TYPE
 
	g__pid_t
;

144 
__STD_TYPE
 
__FSID_T_TYPE
 
	g__fsid_t
;

145 
__STD_TYPE
 
__CLOCK_T_TYPE
 
	g__şock_t
;

146 
__STD_TYPE
 
__RLIM_T_TYPE
 
	g__¾im_t
;

147 
__STD_TYPE
 
__RLIM64_T_TYPE
 
	g__¾im64_t
;

148 
__STD_TYPE
 
__ID_T_TYPE
 
	g__id_t
;

149 
__STD_TYPE
 
__TIME_T_TYPE
 
	g__time_t
;

150 
__STD_TYPE
 
__USECONDS_T_TYPE
 
	g__u£cÚds_t
;

151 
__STD_TYPE
 
__SUSECONDS_T_TYPE
 
	g__su£cÚds_t
;

153 
__STD_TYPE
 
__DADDR_T_TYPE
 
	g__daddr_t
;

154 
__STD_TYPE
 
__SWBLK_T_TYPE
 
	g__swblk_t
;

155 
__STD_TYPE
 
__KEY_T_TYPE
 
	g__key_t
;

158 
__STD_TYPE
 
__CLOCKID_T_TYPE
 
	g__şockid_t
;

161 
__STD_TYPE
 
__TIMER_T_TYPE
 
	g__tim”_t
;

164 
__STD_TYPE
 
__BLKSIZE_T_TYPE
 
	g__blksize_t
;

169 
__STD_TYPE
 
__BLKCNT_T_TYPE
 
	g__blkút_t
;

170 
__STD_TYPE
 
__BLKCNT64_T_TYPE
 
	g__blkút64_t
;

173 
__STD_TYPE
 
__FSBLKCNT_T_TYPE
 
	g__fsblkút_t
;

174 
__STD_TYPE
 
__FSBLKCNT64_T_TYPE
 
	g__fsblkút64_t
;

177 
__STD_TYPE
 
__FSFILCNT_T_TYPE
 
	g__fsfút_t
;

178 
__STD_TYPE
 
__FSFILCNT64_T_TYPE
 
	g__fsfút64_t
;

180 
__STD_TYPE
 
__SSIZE_T_TYPE
 
	g__ssize_t
;

184 
__off64_t
 
	t__loff_t
;

185 
__quad_t
 *
	t__qaddr_t
;

186 *
	t__ÿddr_t
;

189 
__STD_TYPE
 
__SWORD_TYPE
 
	g__šŒ_t
;

192 
__STD_TYPE
 
__U32_TYPE
 
	g__sockËn_t
;

195 #undeà
__STD_TYPE


	@/usr/include/bits/wordsize.h

3 #ià
defšed
 
__x86_64__


4 
	#__WORDSIZE
 64

	)

5 
	#__WORDSIZE_COMPAT32
 1

	)

7 
	#__WORDSIZE
 32

	)

	@/usr/include/endian.h

19 #iâdef 
_ENDIAN_H


20 
	#_ENDIAN_H
 1

	)

22 
	~<ã©u»s.h
>

32 
	#__LITTLE_ENDIAN
 1234

	)

33 
	#__BIG_ENDIAN
 4321

	)

34 
	#__PDP_ENDIAN
 3412

	)

37 
	~<b™s/’dŸn.h
>

41 #iâdeà
__FLOAT_WORD_ORDER


42 
	#__FLOAT_WORD_ORDER
 
__BYTE_ORDER


	)

45 #ifdef 
__USE_BSD


46 
	#LITTLE_ENDIAN
 
__LITTLE_ENDIAN


	)

47 
	#BIG_ENDIAN
 
__BIG_ENDIAN


	)

48 
	#PDP_ENDIAN
 
__PDP_ENDIAN


	)

49 
	#BYTE_ORDER
 
__BYTE_ORDER


	)

52 #ià
__BYTE_ORDER
 =ğ
__LITTLE_ENDIAN


53 
	#__LONG_LONG_PAIR
(
HI
, 
LO
èLO, 
	)
HI

54 #–ià
__BYTE_ORDER
 =ğ
__BIG_ENDIAN


55 
	#__LONG_LONG_PAIR
(
HI
, 
LO
èHI, 
	)
LO

59 #ifdeà
__USE_BSD


61 
	~<b™s/by‹sw­.h
>

63 #ià
__BYTE_ORDER
 =ğ
__LITTLE_ENDIAN


64 
	#htobe16
(
x
è
	`__bsw­_16
 (x)

	)

65 
	#htŞe16
(
x
è(x)

	)

66 
	#be16toh
(
x
è
	`__bsw­_16
 (x)

	)

67 
	#Ë16toh
(
x
è(x)

	)

69 
	#htobe32
(
x
è
	`__bsw­_32
 (x)

	)

70 
	#htŞe32
(
x
è(x)

	)

71 
	#be32toh
(
x
è
	`__bsw­_32
 (x)

	)

72 
	#Ë32toh
(
x
è(x)

	)

74 
	#htobe64
(
x
è
	`__bsw­_64
 (x)

	)

75 
	#htŞe64
(
x
è(x)

	)

76 
	#be64toh
(
x
è
	`__bsw­_64
 (x)

	)

77 
	#Ë64toh
(
x
è(x)

	)

79 
	#htobe16
(
x
è(x)

	)

80 
	#htŞe16
(
x
è
	`__bsw­_16
 (x)

	)

81 
	#be16toh
(
x
è(x)

	)

82 
	#Ë16toh
(
x
è
	`__bsw­_16
 (x)

	)

84 
	#htobe32
(
x
è(x)

	)

85 
	#htŞe32
(
x
è
	`__bsw­_32
 (x)

	)

86 
	#be32toh
(
x
è(x)

	)

87 
	#Ë32toh
(
x
è
	`__bsw­_32
 (x)

	)

89 
	#htobe64
(
x
è(x)

	)

90 
	#htŞe64
(
x
è
	`__bsw­_64
 (x)

	)

91 
	#be64toh
(
x
è(x)

	)

92 
	#Ë64toh
(
x
è
	`__bsw­_64
 (x)

	)

	@/usr/include/features.h

19 #iâdef 
_FEATURES_H


20 
	#_FEATURES_H
 1

	)

95 #undeà
__USE_ISOC99


96 #undeà
__USE_ISOC95


97 #undeà
__USE_POSIX


98 #undeà
__USE_POSIX2


99 #undeà
__USE_POSIX199309


100 #undeà
__USE_POSIX199506


101 #undeà
__USE_XOPEN


102 #undeà
__USE_XOPEN_EXTENDED


103 #undeà
__USE_UNIX98


104 #undeà
__USE_XOPEN2K


105 #undeà
__USE_XOPEN2K8


106 #undeà
__USE_LARGEFILE


107 #undeà
__USE_LARGEFILE64


108 #undeà
__USE_FILE_OFFSET64


109 #undeà
__USE_BSD


110 #undeà
__USE_SVID


111 #undeà
__USE_MISC


112 #undeà
__USE_ATFILE


113 #undeà
__USE_GNU


114 #undeà
__USE_REENTRANT


115 #undeà
__USE_FORTIFY_LEVEL


116 #undeà
__FAVOR_BSD


117 #undeà
__KERNEL_STRICT_NAMES


121 #iâdeà
_LOOSE_KERNEL_NAMES


122 
	#__KERNEL_STRICT_NAMES


	)

126 
	#__USE_ANSI
 1

	)

135 #ià
defšed
 
__GNUC__
 && defšed 
__GNUC_MINOR__


136 
	#__GNUC_PREREQ
(
maj
, 
mš
) \

137 ((
__GNUC__
 << 16è+ 
__GNUC_MINOR__
 >ğ((
maj
è<< 16è+ (
mš
))

	)

139 
	#__GNUC_PREREQ
(
maj
, 
mš
è0

	)

144 #ià
defšed
 
_BSD_SOURCE
 && \

145 !(
defšed
 
	g_POSIX_SOURCE
 || defšed 
	g_POSIX_C_SOURCE
 || \

146 
defšed
 
	g_XOPEN_SOURCE
 || defšed 
	g_XOPEN_SOURCE_EXTENDED
 || \

147 
defšed
 
	g_GNU_SOURCE
 || defšed 
	g_SVID_SOURCE
)

148 
	#__FAVOR_BSD
 1

	)

152 #ifdeà
_GNU_SOURCE


153 #undeà
_ISOC99_SOURCE


154 
	#_ISOC99_SOURCE
 1

	)

155 #undeà
_POSIX_SOURCE


156 
	#_POSIX_SOURCE
 1

	)

157 #undeà
_POSIX_C_SOURCE


158 
	#_POSIX_C_SOURCE
 200809L

	)

159 #undeà
_XOPEN_SOURCE


160 
	#_XOPEN_SOURCE
 700

	)

161 #undeà
_XOPEN_SOURCE_EXTENDED


162 
	#_XOPEN_SOURCE_EXTENDED
 1

	)

163 #undeà
_LARGEFILE64_SOURCE


164 
	#_LARGEFILE64_SOURCE
 1

	)

165 #undeà
_BSD_SOURCE


166 
	#_BSD_SOURCE
 1

	)

167 #undeà
_SVID_SOURCE


168 
	#_SVID_SOURCE
 1

	)

169 #undeà
_ATFILE_SOURCE


170 
	#_ATFILE_SOURCE
 1

	)

175 #ià(!
defšed
 
__STRICT_ANSI__
 && !defšed 
_ISOC99_SOURCE
 && \

176 !
defšed
 
	g_POSIX_SOURCE
 && !defšed 
	g_POSIX_C_SOURCE
 && \

177 !
defšed
 
	g_XOPEN_SOURCE
 && !defšed 
	g_XOPEN_SOURCE_EXTENDED
 && \

178 !
defšed
 
	g_BSD_SOURCE
 && !defšed 
	g_SVID_SOURCE
)

179 
	#_BSD_SOURCE
 1

	)

180 
	#_SVID_SOURCE
 1

	)

187 #ià(
defšed
 
_ISOC99_SOURCE
 || defšed 
_ISOC9X_SOURCE
 \

188 || (
defšed
 
	g__STDC_VERSION__
 && __STDC_VERSION__ >= 199901L))

189 
	#__USE_ISOC99
 1

	)

193 #ià(
defšed
 
_ISOC99_SOURCE
 || defšed 
_ISOC9X_SOURCE
 \

194 || (
defšed
 
__STDC_VERSION__
 && __STDC_VERSION__ >= 199409L))

195 
	#__USE_ISOC95
 1

	)

200 #ià((!
defšed
 
__STRICT_ANSI__
 || (
_XOPEN_SOURCE
 - 0) >= 500) && \

201 !
defšed
 
_POSIX_SOURCE
 && !defšed 
_POSIX_C_SOURCE
)

202 
	#_POSIX_SOURCE
 1

	)

203 #ià
defšed
 
_XOPEN_SOURCE
 && (_XOPEN_SOURCE - 0) < 500

204 
	#_POSIX_C_SOURCE
 2

	)

205 #–ià
defšed
 
_XOPEN_SOURCE
 && (_XOPEN_SOURCE - 0) < 600

206 
	#_POSIX_C_SOURCE
 199506L

	)

207 #–ià
defšed
 
_XOPEN_SOURCE
 && (_XOPEN_SOURCE - 0) < 700

208 
	#_POSIX_C_SOURCE
 200112L

	)

210 
	#_POSIX_C_SOURCE
 200809L

	)

212 
	#__USE_POSIX_IMPLICITLY
 1

	)

215 #ià
defšed
 
_POSIX_SOURCE
 || 
_POSIX_C_SOURCE
 >ğ1 || defšed 
_XOPEN_SOURCE


216 
	#__USE_POSIX
 1

	)

219 #ià
defšed
 
_POSIX_C_SOURCE
 && _POSIX_C_SOURCE >ğ2 || defšed 
_XOPEN_SOURCE


220 
	#__USE_POSIX2
 1

	)

223 #ià(
_POSIX_C_SOURCE
 - 0) >= 199309L

224 
	#__USE_POSIX199309
 1

	)

227 #ià(
_POSIX_C_SOURCE
 - 0) >= 199506L

228 
	#__USE_POSIX199506
 1

	)

231 #ià(
_POSIX_C_SOURCE
 - 0) >= 200112L

232 
	#__USE_XOPEN2K
 1

	)

233 #undeà
__USE_ISOC99


234 
	#__USE_ISOC99
 1

	)

237 #ià(
_POSIX_C_SOURCE
 - 0) >= 200809L

238 
	#__USE_XOPEN2K8
 1

	)

239 #undeà
_ATFILE_SOURCE


240 
	#_ATFILE_SOURCE
 1

	)

243 #ifdef 
_XOPEN_SOURCE


244 
	#__USE_XOPEN
 1

	)

245 #ià(
_XOPEN_SOURCE
 - 0) >= 500

246 
	#__USE_XOPEN_EXTENDED
 1

	)

247 
	#__USE_UNIX98
 1

	)

248 #undeà
_LARGEFILE_SOURCE


249 
	#_LARGEFILE_SOURCE
 1

	)

250 #ià(
_XOPEN_SOURCE
 - 0) >= 600

251 #ià(
_XOPEN_SOURCE
 - 0) >= 700

252 
	#__USE_XOPEN2K8
 1

	)

254 
	#__USE_XOPEN2K
 1

	)

255 #undeà
__USE_ISOC99


256 
	#__USE_ISOC99
 1

	)

259 #ifdeà
_XOPEN_SOURCE_EXTENDED


260 
	#__USE_XOPEN_EXTENDED
 1

	)

265 #ifdeà
_LARGEFILE_SOURCE


266 
	#__USE_LARGEFILE
 1

	)

269 #ifdeà
_LARGEFILE64_SOURCE


270 
	#__USE_LARGEFILE64
 1

	)

273 #ià
defšed
 
_FILE_OFFSET_BITS
 && _FILE_OFFSET_BITS == 64

274 
	#__USE_FILE_OFFSET64
 1

	)

277 #ià
defšed
 
_BSD_SOURCE
 || defšed 
_SVID_SOURCE


278 
	#__USE_MISC
 1

	)

281 #ifdef 
_BSD_SOURCE


282 
	#__USE_BSD
 1

	)

285 #ifdef 
_SVID_SOURCE


286 
	#__USE_SVID
 1

	)

289 #ifdef 
_ATFILE_SOURCE


290 
	#__USE_ATFILE
 1

	)

293 #ifdef 
_GNU_SOURCE


294 
	#__USE_GNU
 1

	)

297 #ià
defšed
 
_REENTRANT
 || defšed 
_THREAD_SAFE


298 
	#__USE_REENTRANT
 1

	)

301 #ià
defšed
 
_FORTIFY_SOURCE
 && _FORTIFY_SOURCE > 0 \

302 && 
__GNUC_PREREQ
 (4, 1è&& 
defšed
 
	g__OPTIMIZE__
 && __OPTIMIZE__ > 0

303 #ià
_FORTIFY_SOURCE
 > 1

304 
	#__USE_FORTIFY_LEVEL
 2

	)

306 
	#__USE_FORTIFY_LEVEL
 1

	)

309 
	#__USE_FORTIFY_LEVEL
 0

	)

313 
	~<b™s/´edefs.h
>

316 
	#__STDC_ISO_10646__
 200009L

	)

324 #undeà
__GNU_LIBRARY__


325 
	#__GNU_LIBRARY__
 6

	)

329 
	#__GLIBC__
 2

	)

330 
	#__GLIBC_MINOR__
 11

	)

332 
	#__GLIBC_PREREQ
(
maj
, 
mš
) \

333 ((
__GLIBC__
 << 16è+ 
__GLIBC_MINOR__
 >ğ((
maj
è<< 16è+ (
mš
))

	)

336 #ià
defšed
 
__GNUC__
 \

337 || (
defšed
 
	g__PGI
 && defšed 
	g__i386__
 ) \

338 || (
defšed
 
	g__INTEL_COMPILER
 && (defšed 
	g__i386__
 || defšed 
	g__Ÿ64__
)) \

339 || (
defšed
 
	g__STDC_VERSION__
 && __STDC_VERSION__ >= 199901L)

340 
	#__GLIBC_HAVE_LONG_LONG
 1

	)

344 #iâdeà
__ASSEMBLER__


345 #iâdeà
_SYS_CDEFS_H


346 
	~<sys/cdefs.h
>

351 #ià
defšed
 
__USE_FILE_OFFSET64
 && !defšed 
__REDIRECT


352 
	#__USE_LARGEFILE
 1

	)

353 
	#__USE_LARGEFILE64
 1

	)

359 #ià
__GNUC_PREREQ
 (2, 7è&& 
defšed
 
__OPTIMIZE__
 \

360 && !
defšed
 
	g__OPTIMIZE_SIZE__
 && !defšed 
	g__NO_INLINE__
 \

361 && 
defšed
 
	g__ex‹º_šlše


362 
	#__USE_EXTERN_INLINES
 1

	)

367 #ià
__GNUC_PREREQ
 (2, 7è&& 
defšed
 
__OPTIMIZE__
 \

368 && (
defšed
 
	g_LIBC
 || !defšed 
	g__OPTIMIZE_SIZE__
è&& !defšed 
	g__NO_INLINE__
 \

369 && 
defšed
 
	g__ex‹º_šlše


370 
	#__USE_EXTERN_INLINES_IN_LIBC
 1

	)

378 
	~<gnu/¡ubs.h
>

	@/usr/include/getopt.h

21 #iâdeà
_GETOPT_H


23 #iâdeà
__Ãed_g‘İt


24 
	#_GETOPT_H
 1

	)

34 #ià!
defšed
 
__GNU_LIBRARY__


35 
	~<ùy³.h
>

38 #iâdeà
__THROW


39 #iâdeà
__GNUC_PREREQ


40 
	#__GNUC_PREREQ
(
maj
, 
mš
è(0)

	)

42 #ià
defšed
 
__ılu¥lus
 && 
__GNUC_PREREQ
 (2,8)

43 
	#__THROW
 
	`throw
 ()

	)

45 
	#__THROW


	)

49 #ifdef 
__ılu¥lus


59 *
İrg
;

73 
İtšd
;

78 
İ‹¼
;

82 
İtİt
;

84 #iâdeà
__Ãed_g‘İt


106 
	sİtiÚ


108 cÚ¡ *
	gÇme
;

111 
	ghas_¬g
;

112 *
	gæag
;

113 
	gv®
;

118 
	#no_¬gum’t
 0

	)

119 
	#»quœed_¬gum’t
 1

	)

120 
	#İtiÚ®_¬gum’t
 2

	)

148 #ifdeà
__GNU_LIBRARY__


152 
g‘İt
 (
___¬gc
, *cÚ¡ *
___¬gv
, cÚ¡ *
__shÜtİts
)

153 
__THROW
;

155 #ià
defšed
 
__Ãed_g‘İt
 && defšed 
__USE_POSIX2
 \

156 && !
defšed
 
	g__USE_POSIX_IMPLICITLY
 && !defšed 
	g__USE_GNU


160 #ifdeà
__REDIRECT


161 
__REDIRECT_NTH
 (
g‘İt
, (
___¬gc
, *cÚ¡ *
___¬gv
,

162 cÚ¡ *
__shÜtİts
),

163 
__posix_g‘İt
);

165 
__posix_g‘İt
 (
___¬gc
, *cÚ¡ *
___¬gv
,

166 cÚ¡ *
__shÜtİts
è
__THROW
;

167 
	#g‘İt
 
__posix_g‘İt


	)

171 
g‘İt
 ();

174 #iâdeà
__Ãed_g‘İt


175 
g‘İt_lÚg
 (
___¬gc
, *cÚ¡ *
___¬gv
,

176 cÚ¡ *
__shÜtİts
,

177 cÚ¡ 
İtiÚ
 *
__lÚgİts
, *
__lÚgšd
)

178 
__THROW
;

179 
g‘İt_lÚg_Úly
 (
___¬gc
, *cÚ¡ *
___¬gv
,

180 cÚ¡ *
__shÜtİts
,

181 cÚ¡ 
İtiÚ
 *
__lÚgİts
, *
__lÚgšd
)

182 
__THROW
;

186 #ifdef 
__ılu¥lus


191 #undeà
__Ãed_g‘İt


	@/usr/include/libio.h

29 #iâdeà
_IO_STDIO_H


30 
	#_IO_STDIO_H


	)

32 
	~<_G_cÚfig.h
>

34 
	#_IO_pos_t
 
_G_åos_t


	)

35 
	#_IO_åos_t
 
_G_åos_t


	)

36 
	#_IO_åos64_t
 
_G_åos64_t


	)

37 
	#_IO_size_t
 
_G_size_t


	)

38 
	#_IO_ssize_t
 
_G_ssize_t


	)

39 
	#_IO_off_t
 
_G_off_t


	)

40 
	#_IO_off64_t
 
_G_off64_t


	)

41 
	#_IO_pid_t
 
_G_pid_t


	)

42 
	#_IO_uid_t
 
_G_uid_t


	)

43 
	#_IO_icÚv_t
 
_G_icÚv_t


	)

44 
	#_IO_HAVE_SYS_WAIT
 
_G_HAVE_SYS_WAIT


	)

45 
	#_IO_HAVE_ST_BLKSIZE
 
_G_HAVE_ST_BLKSIZE


	)

46 
	#_IO_BUFSIZ
 
_G_BUFSIZ


	)

47 
	#_IO_va_li¡
 
_G_va_li¡


	)

48 
	#_IO_wšt_t
 
_G_wšt_t


	)

50 #ifdeà
_G_NEED_STDARG_H


52 
	#__Ãed___va_li¡


	)

53 
	~<¡d¬g.h
>

54 #ifdeà
__GNUC_VA_LIST


55 #undeà
_IO_va_li¡


56 
	#_IO_va_li¡
 
__gnuc_va_li¡


	)

60 #iâdeà
__P


61 #ià
_G_HAVE_SYS_CDEFS


62 
	~<sys/cdefs.h
>

64 #ifdeà
__STDC__


65 
	#__P
(
p
è
	)
p

66 
	#__PMT
(
p
è
	)
p

68 
	#__P
(
p
è()

	)

69 
	#__PMT
(
p
è()

	)

75 #iâdeà
_PARAMS


76 
	#_PARAMS
(
´Ùos
è
	`__P
ÕrÙos)

	)

79 #iâdeà
__STDC__


81 cÚ¡

	)

84 
	#_IO_UNIFIED_JUMPTABLES
 1

	)

85 #iâdeà
_G_HAVE_PRINTF_FP


86 
	#_IO_USE_DTOA
 1

	)

89 #iâdeà
EOF


90 
	#EOF
 (-1)

	)

92 #iâdeà
NULL


93 #ià
defšed
 
__GNUG__
 && \

94 (
	g__GNUC__
 > 2 || (__GNUC__ =ğ2 && 
__GNUC_MINOR__
 >= 8))

95 
	#NULL
 (
__nuÎ
)

	)

97 #ià!
defšed
(
__ılu¥lus
)

98 
	#NULL
 ((*)0)

	)

100 
	#NULL
 (0)

	)

105 
	#_IOS_INPUT
 1

	)

106 
	#_IOS_OUTPUT
 2

	)

107 
	#_IOS_ATEND
 4

	)

108 
	#_IOS_APPEND
 8

	)

109 
	#_IOS_TRUNC
 16

	)

110 
	#_IOS_NOCREATE
 32

	)

111 
	#_IOS_NOREPLACE
 64

	)

112 
	#_IOS_BIN
 128

	)

120 
	#_IO_MAGIC
 0xFBAD0000

	)

121 
	#_OLD_STDIO_MAGIC
 0xFABC0000

	)

122 
	#_IO_MAGIC_MASK
 0xFFFF0000

	)

123 
	#_IO_USER_BUF
 1

	)

124 
	#_IO_UNBUFFERED
 2

	)

125 
	#_IO_NO_READS
 4

	)

126 
	#_IO_NO_WRITES
 8

	)

127 
	#_IO_EOF_SEEN
 0x10

	)

128 
	#_IO_ERR_SEEN
 0x20

	)

129 
	#_IO_DELETE_DONT_CLOSE
 0x40

	)

130 
	#_IO_LINKED
 0x80

	)

131 
	#_IO_IN_BACKUP
 0x100

	)

132 
	#_IO_LINE_BUF
 0x200

	)

133 
	#_IO_TIED_PUT_GET
 0x400

	)

134 
	#_IO_CURRENTLY_PUTTING
 0x800

	)

135 
	#_IO_IS_APPENDING
 0x1000

	)

136 
	#_IO_IS_FILEBUF
 0x2000

	)

137 
	#_IO_BAD_SEEN
 0x4000

	)

138 
	#_IO_USER_LOCK
 0x8000

	)

140 
	#_IO_FLAGS2_MMAP
 1

	)

141 
	#_IO_FLAGS2_NOTCANCEL
 2

	)

142 #ifdeà
_LIBC


143 
	#_IO_FLAGS2_FORTIFY
 4

	)

145 
	#_IO_FLAGS2_USER_WBUF
 8

	)

146 #ifdeà
_LIBC


147 
	#_IO_FLAGS2_SCANF_STD
 16

	)

151 
	#_IO_SKIPWS
 01

	)

152 
	#_IO_LEFT
 02

	)

153 
	#_IO_RIGHT
 04

	)

154 
	#_IO_INTERNAL
 010

	)

155 
	#_IO_DEC
 020

	)

156 
	#_IO_OCT
 040

	)

157 
	#_IO_HEX
 0100

	)

158 
	#_IO_SHOWBASE
 0200

	)

159 
	#_IO_SHOWPOINT
 0400

	)

160 
	#_IO_UPPERCASE
 01000

	)

161 
	#_IO_SHOWPOS
 02000

	)

162 
	#_IO_SCIENTIFIC
 04000

	)

163 
	#_IO_FIXED
 010000

	)

164 
	#_IO_UNITBUF
 020000

	)

165 
	#_IO_STDIO
 040000

	)

166 
	#_IO_DONT_CLOSE
 0100000

	)

167 
	#_IO_BOOLALPHA
 0200000

	)

170 
_IO_jump_t
; 
	g_IO_FILE
;

173 #ifdeà
_IO_MTSAFE_IO


174 #ià
defšed
 
__GLIBC__
 && __GLIBC__ >= 2

175 
	~<b™s/¡dio-lock.h
>

180 
	t_IO_lock_t
;

186 
	s_IO_m¬k”
 {

187 
_IO_m¬k”
 *
	m_Ãxt
;

188 
_IO_FILE
 *
	m_sbuf
;

192 
	m_pos
;

194 
£t_¡»ampos
(
¡»ampos
 
¥
è{ 
	m_¥os
 = sp; }

195 
£t_off£t
(
off£t
è{ 
	m_pos
 = off£t; 
	m_¥os
 = (
¡»ampos
)(-2); }

196 
	mpublic
:

197 
¡»amm¬k”
(
¡»ambuf
 *
sb
);

198 ~
¡»amm¬k”
();

199 
§všg
(è{  
	m_¥os
 == -2; }

200 
d–
(
¡»amm¬k”
&);

201 
d–
();

206 
	e__codecvt_»suÉ


208 
	m__codecvt_ok
,

209 
	m__codecvt_·¹Ÿl
,

210 
	m__codecvt_”rÜ
,

211 
	m__codecvt_nocÚv


214 #ià
defšed
 
_LIBC
 || defšed 
_GLIBCPP_USE_WCHAR_T


217 
	s_IO_codecvt


219 (*
	m__codecvt_de¡r
è(
	m_IO_codecvt
 *);

220 
__codecvt_»suÉ
 (*
__codecvt_do_out
è(
	m_IO_codecvt
 *,

221 
	m__mb¡©e_t
 *,

222 cÚ¡ 
	mwch¬_t
 *,

223 cÚ¡ 
	mwch¬_t
 *,

224 cÚ¡ 
	mwch¬_t
 **, *,

226 
__codecvt_»suÉ
 (*
__codecvt_do_unshiá
è(
	m_IO_codecvt
 *,

227 
	m__mb¡©e_t
 *, *,

229 
__codecvt_»suÉ
 (*
__codecvt_do_š
è(
	m_IO_codecvt
 *,

230 
	m__mb¡©e_t
 *,

232 cÚ¡ **, 
	mwch¬_t
 *,

233 
	mwch¬_t
 *, wchar_t **);

234 (*
	m__codecvt_do_’codšg
è(
	m_IO_codecvt
 *);

235 (*
	m__codecvt_do_®ways_nocÚv
è(
	m_IO_codecvt
 *);

236 (*
	m__codecvt_do_Ëngth
è(
	m_IO_codecvt
 *, 
	m__mb¡©e_t
 *,

237 cÚ¡ *, cÚ¡ *, 
	m_IO_size_t
);

238 (*
	m__codecvt_do_max_Ëngth
è(
	m_IO_codecvt
 *);

240 
_IO_icÚv_t
 
	m__cd_š
;

241 
_IO_icÚv_t
 
	m__cd_out
;

245 
	s_IO_wide_d©a


247 
wch¬_t
 *
	m_IO_»ad_±r
;

248 
wch¬_t
 *
	m_IO_»ad_’d
;

249 
wch¬_t
 *
	m_IO_»ad_ba£
;

250 
wch¬_t
 *
	m_IO_wr™e_ba£
;

251 
wch¬_t
 *
	m_IO_wr™e_±r
;

252 
wch¬_t
 *
	m_IO_wr™e_’d
;

253 
wch¬_t
 *
	m_IO_buf_ba£
;

254 
wch¬_t
 *
	m_IO_buf_’d
;

256 
wch¬_t
 *
	m_IO_§ve_ba£
;

257 
wch¬_t
 *
	m_IO_backup_ba£
;

259 
wch¬_t
 *
	m_IO_§ve_’d
;

261 
__mb¡©e_t
 
	m_IO_¡©e
;

262 
__mb¡©e_t
 
	m_IO_Ï¡_¡©e
;

263 
_IO_codecvt
 
	m_codecvt
;

265 
wch¬_t
 
	m_shÜtbuf
[1];

267 cÚ¡ 
_IO_jump_t
 *
	m_wide_vbË
;

271 
	s_IO_FILE
 {

272 
	m_æags
;

273 
	#_IO_fe_æags
 
_æags


	)

277 * 
	m_IO_»ad_±r
;

278 * 
	m_IO_»ad_’d
;

279 * 
	m_IO_»ad_ba£
;

280 * 
	m_IO_wr™e_ba£
;

281 * 
	m_IO_wr™e_±r
;

282 * 
	m_IO_wr™e_’d
;

283 * 
	m_IO_buf_ba£
;

284 * 
	m_IO_buf_’d
;

286 *
	m_IO_§ve_ba£
;

287 *
	m_IO_backup_ba£
;

288 *
	m_IO_§ve_’d
;

290 
_IO_m¬k”
 *
	m_m¬k”s
;

292 
_IO_FILE
 *
	m_chaš
;

294 
	m_f’o
;

296 
	m_blksize
;

298 
	m_æags2
;

300 
_IO_off_t
 
	m_Şd_off£t
;

302 
	#__HAVE_COLUMN


	)

304 
	m_cur_cŞumn
;

305 sigÃd 
	m_vbË_off£t
;

306 
	m_shÜtbuf
[1];

310 
_IO_lock_t
 *
	m_lock
;

311 #ifdeà
_IO_USE_OLD_IO_FILE


314 
	s_IO_FILE_com¶‘e


316 
_IO_FILE
 
	m_fe
;

318 #ià
defšed
 
_G_IO_IO_FILE_VERSION
 && _G_IO_IO_FILE_VERSION == 0x20001

319 
_IO_off64_t
 
	m_off£t
;

320 #ià
defšed
 
_LIBC
 || defšed 
_GLIBCPP_USE_WCHAR_T


322 
_IO_codecvt
 *
	m_codecvt
;

323 
_IO_wide_d©a
 *
	m_wide_d©a
;

324 
_IO_FILE
 *
	m_ä“»s_li¡
;

325 *
	m_ä“»s_buf
;

326 
size_t
 
	m_ä“»s_size
;

328 *
	m__·d1
;

329 *
	m__·d2
;

330 *
	m__·d3
;

331 *
	m__·d4
;

332 
size_t
 
	m__·d5
;

334 
	m_mode
;

336 
	m_unu£d2
[15 *  (è- 4 *  (*è-  (
size_t
)];

340 #iâdeà
__ılu¥lus


341 
_IO_FILE
 
	t_IO_FILE
;

344 
	g_IO_FILE_¶us
;

346 
_IO_FILE_¶us
 
_IO_2_1_¡dš_
;

347 
_IO_FILE_¶us
 
_IO_2_1_¡dout_
;

348 
_IO_FILE_¶us
 
_IO_2_1_¡d”r_
;

349 #iâdeà
_LIBC


350 
	#_IO_¡dš
 ((
_IO_FILE
*)(&
_IO_2_1_¡dš_
))

	)

351 
	#_IO_¡dout
 ((
_IO_FILE
*)(&
_IO_2_1_¡dout_
))

	)

352 
	#_IO_¡d”r
 ((
_IO_FILE
*)(&
_IO_2_1_¡d”r_
))

	)

354 
_IO_FILE
 *
_IO_¡dš
 
©Œibu‹_hidd’
;

355 
_IO_FILE
 *
_IO_¡dout
 
©Œibu‹_hidd’
;

356 
_IO_FILE
 *
_IO_¡d”r
 
©Œibu‹_hidd’
;

364 
__ssize_t
 
	t__io_»ad_â
 (*
	t__cook›
, *
	t__buf
, 
	tsize_t
 
	t__nby‹s
);

372 
__ssize_t
 
	t__io_wr™e_â
 (*
	t__cook›
, 
	t__cÚ¡
 *
	t__buf
,

373 
	tsize_t
 
	t__n
);

381 
	t__io_£ek_â
 (*
	t__cook›
, 
	t_IO_off64_t
 *
	t__pos
, 
	t__w
);

384 
	t__io_şo£_â
 (*
	t__cook›
);

387 #ifdeà
_GNU_SOURCE


389 
__io_»ad_â
 
	tcook›_»ad_funùiÚ_t
;

390 
__io_wr™e_â
 
	tcook›_wr™e_funùiÚ_t
;

391 
__io_£ek_â
 
	tcook›_£ek_funùiÚ_t
;

392 
__io_şo£_â
 
	tcook›_şo£_funùiÚ_t
;

397 
__io_»ad_â
 *
	m»ad
;

398 
__io_wr™e_â
 *
	mwr™e
;

399 
__io_£ek_â
 *
	m£ek
;

400 
__io_şo£_â
 *
	mşo£
;

401 } 
	t_IO_cook›_io_funùiÚs_t
;

402 
_IO_cook›_io_funùiÚs_t
 
	tcook›_io_funùiÚs_t
;

404 
	g_IO_cook›_fe
;

407 
_IO_cook›_š™
 (
_IO_cook›_fe
 *
__cfe
, 
__»ad_wr™e
,

408 *
__cook›
, 
_IO_cook›_io_funùiÚs_t
 
__âs
);

412 #ifdeà
__ılu¥lus


416 
__und”æow
 (
_IO_FILE
 *);

417 
__uæow
 (
_IO_FILE
 *);

418 
__ov”æow
 (
_IO_FILE
 *, );

419 #ià
defšed
 
_LIBC
 || defšed 
_GLIBCPP_USE_WCHAR_T


420 
_IO_wšt_t
 
__wund”æow
 (
_IO_FILE
 *);

421 
_IO_wšt_t
 
__wuæow
 (
_IO_FILE
 *);

422 
_IO_wšt_t
 
__wov”æow
 (
_IO_FILE
 *, _IO_wint_t);

425 #ià 
__GNUC__
 >= 3

426 
	#_IO_BE
(
ex´
, 
»s
è
	`__butš_ex³ù
 (Óx´),„es)

	)

428 
	#_IO_BE
(
ex´
, 
»s
èÓx´)

	)

431 
	#_IO_g‘c_uÆocked
(
_å
) \

432 (
	`_IO_BE
 ((
_å
)->
_IO_»ad_±r
 >ğ(_å)->
_IO_»ad_’d
, 0) \

433 ? 
	`__uæow
 (
_å
è: *(*è(_å)->
_IO_»ad_±r
++)

	)

434 
	#_IO_³ekc_uÆocked
(
_å
) \

435 (
	`_IO_BE
 ((
_å
)->
_IO_»ad_±r
 >ğ(_å)->
_IO_»ad_’d
, 0) \

436 && 
	`__und”æow
 (
_å
è=ğ
EOF
 ? EOF \

437 : *(*è(
_å
)->
_IO_»ad_±r
)

	)

438 
	#_IO_putc_uÆocked
(
_ch
, 
_å
) \

439 (
	`_IO_BE
 ((
_å
)->
_IO_wr™e_±r
 >ğ(_å)->
_IO_wr™e_’d
, 0) \

440 ? 
	`__ov”æow
 (
_å
, (è(
_ch
)) \

441 : (è(*(
_å
)->
_IO_wr™e_±r
++ = (
_ch
)))

	)

443 #ià
defšed
 
_LIBC
 || defšed 
_GLIBCPP_USE_WCHAR_T


444 
	#_IO_g‘wc_uÆocked
(
_å
) \

445 (
	`_IO_BE
 ((
_å
)->
_wide_d©a
 =ğ
NULL
 \

446 || ((
_å
)->
_wide_d©a
->
_IO_»ad_±r
 \

447 >ğ(
_å
)->
_wide_d©a
->
_IO_»ad_’d
), 0) \

448 ? 
	`__wuæow
 (
_å
è: (
_IO_wšt_t
è*(_å)->
_wide_d©a
->
_IO_»ad_±r
++)

	)

449 
	#_IO_putwc_uÆocked
(
_wch
, 
_å
) \

450 (
	`_IO_BE
 ((
_å
)->
_wide_d©a
 =ğ
NULL
 \

451 || ((
_å
)->
_wide_d©a
->
_IO_wr™e_±r
 \

452 >ğ(
_å
)->
_wide_d©a
->
_IO_wr™e_’d
), 0) \

453 ? 
	`__wov”æow
 (
_å
, 
_wch
) \

454 : (
_IO_wšt_t
è(*(
_å
)->
_wide_d©a
->
_IO_wr™e_±r
++ = (
_wch
)))

	)

457 
	#_IO_ãof_uÆocked
(
__å
è(((__å)->
_æags
 & 
_IO_EOF_SEEN
è!ğ0)

	)

458 
	#_IO_ã¼Ü_uÆocked
(
__å
è(((__å)->
_æags
 & 
_IO_ERR_SEEN
è!ğ0)

	)

460 
_IO_g‘c
 (
_IO_FILE
 *
__å
);

461 
_IO_putc
 (
__c
, 
_IO_FILE
 *
__å
);

462 
_IO_ãof
 (
_IO_FILE
 *
__å
è
__THROW
;

463 
_IO_ã¼Ü
 (
_IO_FILE
 *
__å
è
__THROW
;

465 
_IO_³ekc_locked
 (
_IO_FILE
 *
__å
);

468 
	#_IO_PENDING_OUTPUT_COUNT
(
_å
) \

469 ((
_å
)->
_IO_wr™e_±r
 - (_å)->
_IO_wr™e_ba£
)

	)

471 
_IO_æockfe
 (
_IO_FILE
 *è
__THROW
;

472 
_IO_fuÆockfe
 (
_IO_FILE
 *è
__THROW
;

473 
_IO_árylockfe
 (
_IO_FILE
 *è
__THROW
;

475 #ifdeà
_IO_MTSAFE_IO


476 
	#_IO_³ekc
(
_å
è
	`_IO_³ekc_locked
 (_å)

	)

477 
	#_IO_æockfe
(
_å
) \

478 ià(((
_å
)->
_æags
 & 
_IO_USER_LOCK
è=ğ0è
	`_IO_æockfe
 (_å)

	)

479 
	#_IO_fuÆockfe
(
_å
) \

480 ià(((
_å
)->
_æags
 & 
_IO_USER_LOCK
è=ğ0è
	`_IO_fuÆockfe
 (_å)

	)

482 
	#_IO_³ekc
(
_å
è
	`_IO_³ekc_uÆocked
 (_å)

	)

483 
	#_IO_æockfe
(
_å
è

	)

484 
	#_IO_fuÆockfe
(
_å
è

	)

485 
	#_IO_árylockfe
(
_å
è

	)

486 
	#_IO_ş—nup_»giÚ_¡¬t
(
_fù
, 
_å
è

	)

487 
	#_IO_ş—nup_»giÚ_’d
(
_Do™
è

	)

490 
_IO_vfsÿnf
 (
_IO_FILE
 * 
__»¡riù
, const * __restrict,

491 
_IO_va_li¡
, *
__»¡riù
);

492 
_IO_vårštf
 (
_IO_FILE
 *
__»¡riù
, const *__restrict,

493 
_IO_va_li¡
);

494 
_IO_ssize_t
 
_IO_·dn
 (
_IO_FILE
 *, , _IO_ssize_t);

495 
_IO_size_t
 
_IO_sg‘n
 (
_IO_FILE
 *, *, _IO_size_t);

497 
_IO_off64_t
 
_IO_£ekoff
 (
_IO_FILE
 *, _IO_off64_t, , );

498 
_IO_off64_t
 
_IO_£ekpos
 (
_IO_FILE
 *, _IO_off64_t, );

500 
_IO_ä“_backup_¬—
 (
_IO_FILE
 *è
__THROW
;

502 #ià
defšed
 
_LIBC
 || defšed 
_GLIBCPP_USE_WCHAR_T


503 
_IO_wšt_t
 
_IO_g‘wc
 (
_IO_FILE
 *
__å
);

504 
_IO_wšt_t
 
_IO_putwc
 (
wch¬_t
 
__wc
, 
_IO_FILE
 *
__å
);

505 
_IO_fwide
 (
_IO_FILE
 *
__å
, 
__mode
è
__THROW
;

506 #ià
__GNUC__
 >= 2

509 #ià
defšed
 
_LIBC
 && defšed 
SHARED


510 
	~<shlib-com·t.h
>

511 #ià
SHLIB_COMPAT
 (
libc
, 
GLIBC_2_0
, 
GLIBC_2_1
)

512 
	#_IO_fwide_maybe_šcom·tibË
 \

513 (
	`__butš_ex³ù
 (&
_IO_¡dš_u£d
 =ğ
NULL
, 0))

	)

514 cÚ¡ 
_IO_¡dš_u£d
;

515 
w—k_ex‹º
 (
_IO_¡dš_u£d
);

518 #iâdeà
_IO_fwide_maybe_šcom·tibË


519 
	#_IO_fwide_maybe_šcom·tibË
 (0)

	)

523 
	#_IO_fwide
(
__å
, 
__mode
) \

524 ({ 
__»suÉ
 = (
__mode
); \

525 ià(
__»suÉ
 < 0 && ! 
_IO_fwide_maybe_šcom·tibË
) \

527 ià((
__å
)->
_mode
 == 0) \

529 (
__å
)->
_mode
 = -1; \

530 
__»suÉ
 = (
__å
)->
_mode
; \

532 ià(
	`__butš_cÚ¡ªt_p
 (
__mode
) && (__mode) == 0) \

533 
__»suÉ
 = 
_IO_fwide_maybe_šcom·tibË
 ? -1 : (
__å
)->
_mode
; \

535 
__»suÉ
 = 
	`_IO_fwide
 (
__å
, __result); \

536 
__»suÉ
; })

	)

539 
_IO_vfwsÿnf
 (
_IO_FILE
 * 
__»¡riù
, cÚ¡ 
wch¬_t
 * __restrict,

540 
_IO_va_li¡
, *
__»¡riù
);

541 
_IO_vfw´štf
 (
_IO_FILE
 *
__»¡riù
, cÚ¡ 
wch¬_t
 *__restrict,

542 
_IO_va_li¡
);

543 
_IO_ssize_t
 
_IO_w·dn
 (
_IO_FILE
 *, 
wšt_t
, _IO_ssize_t);

544 
_IO_ä“_wbackup_¬—
 (
_IO_FILE
 *è
__THROW
;

547 #ifdeà
__LDBL_COMPAT


548 
	~<b™s/libio-ldbl.h
>

551 #ifdeà
__ılu¥lus


	@/usr/include/sched.h

20 #iâdef 
_SCHED_H


21 
	#_SCHED_H
 1

	)

23 
	~<ã©u»s.h
>

26 
	~<b™s/ty³s.h
>

28 
	#__Ãed_size_t


	)

29 
	~<¡ddef.h
>

31 
	#__Ãed_time¥ec


	)

32 
	~<time.h
>

35 
	~<b™s/sched.h
>

37 
	#sched_´iÜ™y
 
__sched_´iÜ™y


	)

40 
__BEGIN_DECLS


43 
	$sched_£¬am
 (
__pid_t
 
__pid
, 
__cÚ¡
 
sched_·¿m
 *
__·¿m
)

44 
__THROW
;

47 
	$sched_g‘·¿m
 (
__pid_t
 
__pid
, 
sched_·¿m
 *
__·¿m
è
__THROW
;

50 
	$sched_£tscheduËr
 (
__pid_t
 
__pid
, 
__pŞicy
,

51 
__cÚ¡
 
sched_·¿m
 *
__·¿m
è
__THROW
;

54 
	$sched_g‘scheduËr
 (
__pid_t
 
__pid
è
__THROW
;

57 
	$sched_y›ld
 (è
__THROW
;

60 
	$sched_g‘_´iÜ™y_max
 (
__®gÜ™hm
è
__THROW
;

63 
	$sched_g‘_´iÜ™y_mš
 (
__®gÜ™hm
è
__THROW
;

66 
	$sched_¼_g‘_š‹rv®
 (
__pid_t
 
__pid
, 
time¥ec
 *
__t
è
__THROW
;

69 #ifdeà
__USE_GNU


71 
	#CPU_SETSIZE
 
__CPU_SETSIZE


	)

72 
	#CPU_SET
(
ıu
, 
ıu£
è
	`__CPU_SET_S
 (ıu,  (
ıu_£t_t
), cpu£)

	)

73 
	#CPU_CLR
(
ıu
, 
ıu£
è
	`__CPU_CLR_S
 (ıu,  (
ıu_£t_t
), cpu£)

	)

74 
	#CPU_ISSET
(
ıu
, 
ıu£
è
	`__CPU_ISSET_S
 (ıu,  (
ıu_£t_t
), \

75 
ıu£
)

	)

76 
	#CPU_ZERO
(
ıu£
è
	`__CPU_ZERO_S
 ( (
ıu_£t_t
), cpu£)

	)

77 
	#CPU_COUNT
(
ıu£
è
	`__CPU_COUNT_S
 ( (
ıu_£t_t
), cpu£)

	)

79 
	#CPU_SET_S
(
ıu
, 
£tsize
, 
ıu£
è
	`__CPU_SET_S
 (ıu, s‘size, cpu£)

	)

80 
	#CPU_CLR_S
(
ıu
, 
£tsize
, 
ıu£
è
	`__CPU_CLR_S
 (ıu, s‘size, cpu£)

	)

81 
	#CPU_ISSET_S
(
ıu
, 
£tsize
, 
ıu£
è
	`__CPU_ISSET_S
 (cpu, setsize, \

82 
ıu£
)

	)

83 
	#CPU_ZERO_S
(
£tsize
, 
ıu£
è
	`__CPU_ZERO_S
 (£tsize, cpu£)

	)

84 
	#CPU_COUNT_S
(
£tsize
, 
ıu£
è
	`__CPU_COUNT_S
 (£tsize, cpu£)

	)

86 
	#CPU_EQUAL
(
ıu£1
, 
ıu£2
) \

87 
	`__CPU_EQUAL_S
 ( (
ıu_£t_t
), 
ıu£1
, 
ıu£2
)

	)

88 
	#CPU_EQUAL_S
(
£tsize
, 
ıu£1
, 
ıu£2
) \

89 
	`__CPU_EQUAL_S
 (
£tsize
, 
ıu£1
, 
ıu£2
)

	)

91 
	#CPU_AND
(
de¡£t
, 
¤c£t1
, 
¤c£t2
) \

92 
	`__CPU_OP_S
 ( (
ıu_£t_t
), 
de¡£t
, 
¤c£t1
, 
¤c£t2
, &)

	)

93 
	#CPU_OR
(
de¡£t
, 
¤c£t1
, 
¤c£t2
) \

94 
	`__CPU_OP_S
 ( (
ıu_£t_t
), 
de¡£t
, 
¤c£t1
, 
¤c£t2
, |)

	)

95 
	#CPU_XOR
(
de¡£t
, 
¤c£t1
, 
¤c£t2
) \

96 
	`__CPU_OP_S
 ( (
ıu_£t_t
), 
de¡£t
, 
¤c£t1
, 
¤c£t2
, ^)

	)

97 
	#CPU_AND_S
(
£tsize
, 
de¡£t
, 
¤c£t1
, 
¤c£t2
) \

98 
	`__CPU_OP_S
 (
£tsize
, 
de¡£t
, 
¤c£t1
, 
¤c£t2
, &)

	)

99 
	#CPU_OR_S
(
£tsize
, 
de¡£t
, 
¤c£t1
, 
¤c£t2
) \

100 
	`__CPU_OP_S
 (
£tsize
, 
de¡£t
, 
¤c£t1
, 
¤c£t2
, |)

	)

101 
	#CPU_XOR_S
(
£tsize
, 
de¡£t
, 
¤c£t1
, 
¤c£t2
) \

102 
	`__CPU_OP_S
 (
£tsize
, 
de¡£t
, 
¤c£t1
, 
¤c£t2
, ^)

	)

104 
	#CPU_ALLOC_SIZE
(
couÁ
è
	`__CPU_ALLOC_SIZE
 (couÁ)

	)

105 
	#CPU_ALLOC
(
couÁ
è
	`__CPU_ALLOC
 (couÁ)

	)

106 
	#CPU_FREE
(
ıu£t
è
	`__CPU_FREE
 (ıu£t)

	)

110 
	$sched_£ffš™y
 (
__pid_t
 
__pid
, 
size_t
 
__ıu£tsize
,

111 
__cÚ¡
 
ıu_£t_t
 *
__ıu£t
è
__THROW
;

114 
	$sched_g‘affš™y
 (
__pid_t
 
__pid
, 
size_t
 
__ıu£tsize
,

115 
ıu_£t_t
 *
__ıu£t
è
__THROW
;

118 
__END_DECLS


	@/usr/include/signal.h

23 #iâdef 
_SIGNAL_H


25 #ià!
defšed
 
__Ãed_sig_©omic_t
 && !defšed 
__Ãed_sig£t_t


26 
	#_SIGNAL_H


	)

29 
	~<ã©u»s.h
>

31 
	g__BEGIN_DECLS


33 
	~<b™s/sig£t.h
>

37 #ià
defšed
 
__Ãed_sig_©omic_t
 || defšed 
_SIGNAL_H


38 #iâdeà
__sig_©omic_t_defšed


39 
	#__sig_©omic_t_defšed


	)

40 
__BEGIN_NAMESPACE_STD


41 
__sig_©omic_t
 
	tsig_©omic_t
;

42 
	g__END_NAMESPACE_STD


44 #undeà
__Ãed_sig_©omic_t


47 #ià
defšed
 
__Ãed_sig£t_t
 || (defšed 
_SIGNAL_H
 && defšed 
__USE_POSIX
)

48 #iâdeà
__sig£t_t_defšed


49 
	#__sig£t_t_defšed


	)

50 
__sig£t_t
 
	tsig£t_t
;

52 #undeà
__Ãed_sig£t_t


55 #ifdeà
_SIGNAL_H


57 
	~<b™s/ty³s.h
>

58 
	~<b™s/signum.h
>

60 #ià
defšed
 
__USE_XOPEN
 || defšed 
__USE_XOPEN2K


61 #iâdeà
__pid_t_defšed


62 
__pid_t
 
	tpid_t
;

63 
	#__pid_t_defšed


	)

65 #ifdeà
__USE_XOPEN


67 #iâdeà
__uid_t_defšed


68 
__uid_t
 
	tuid_t
;

69 
	#__uid_t_defšed


	)

73 #ifdeà
__USE_POSIX199309


75 
	#__Ãed_time¥ec


	)

76 
	~<time.h
>

79 
	~<b™s/sigšfo.h
>

84 (*
	t__sighªdËr_t
) ();

89 
__sighªdËr_t
 
	$__sysv_sigÇl
 (
__sig
, 
__sighªdËr_t
 
__hªdËr
)

90 
__THROW
;

91 #ifdeà
__USE_GNU


92 
__sighªdËr_t
 
	$sysv_sigÇl
 (
__sig
, 
__sighªdËr_t
 
__hªdËr
)

93 
__THROW
;

99 
__BEGIN_NAMESPACE_STD


100 #ifdeà
__USE_BSD


101 
__sighªdËr_t
 
	$sigÇl
 (
__sig
, 
__sighªdËr_t
 
__hªdËr
)

102 
__THROW
;

105 #ifdeà
__REDIRECT_NTH


106 
__sighªdËr_t
 
	`__REDIRECT_NTH
 (
sigÇl
,

107 (
__sig
, 
__sighªdËr_t
 
__hªdËr
),

108 
__sysv_sigÇl
);

110 
	#sigÇl
 
__sysv_sigÇl


	)

113 
__END_NAMESPACE_STD


115 #ifdeà
__USE_XOPEN


118 
__sighªdËr_t
 
	$bsd_sigÇl
 (
__sig
, 
__sighªdËr_t
 
__hªdËr
)

119 
__THROW
;

125 #ifdeà
__USE_POSIX


126 
	$kl
 (
__pid_t
 
__pid
, 
__sig
è
__THROW
;

129 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_XOPEN_EXTENDED


133 
	$kÍg
 (
__pid_t
 
__pg½
, 
__sig
è
__THROW
;

136 
__BEGIN_NAMESPACE_STD


138 
	$¿i£
 (
__sig
è
__THROW
;

139 
__END_NAMESPACE_STD


141 #ifdeà
__USE_SVID


143 
__sighªdËr_t
 
	$ssigÇl
 (
__sig
, 
__sighªdËr_t
 
__hªdËr
)

144 
__THROW
;

145 
	$gsigÇl
 (
__sig
è
__THROW
;

148 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_XOPEN2K


150 
	`psigÇl
 (
__sig
, 
__cÚ¡
 *
__s
);

153 #ifdeà
__USE_XOPEN2K


155 
	`psigšfo
 (
__cÚ¡
 
sigšfo_t
 *
__pšfo
, __cÚ¡ *
__s
);

168 
	`__sig·u£
 (
__sig_Ü_mask
, 
__is_sig
);

170 #ifdeà
__FAVOR_BSD


173 
	$sig·u£
 (
__mask
è
__THROW
 
__©Œibu‹_d•»ÿ‹d__
;

175 #ifdeà
__USE_XOPEN


176 #ifdeà
__GNUC__


177 
	$sig·u£
 (
__sig
è
	`__asm__
 ("__xpg_sigpause");

180 
	#sig·u£
(
sig
è
	`__sig·u£
 ((sig), 1)

	)

186 #ifdeà
__USE_BSD


193 
	#sigmask
(
sig
è
	`__sigmask
(sig)

	)

196 
	$sigblock
 (
__mask
è
__THROW
 
__©Œibu‹_d•»ÿ‹d__
;

199 
	$sig£tmask
 (
__mask
è
__THROW
 
__©Œibu‹_d•»ÿ‹d__
;

202 
	$sigg‘mask
 (è
__THROW
 
__©Œibu‹_d•»ÿ‹d__
;

206 #ifdeà
__USE_MISC


207 
	#NSIG
 
_NSIG


	)

210 #ifdeà
__USE_GNU


211 
__sighªdËr_t
 
	tsighªdËr_t
;

215 #ifdeà
__USE_BSD


216 
__sighªdËr_t
 
	tsig_t
;

219 #ifdeà
__USE_POSIX


222 
	$sigem±y£t
 (
sig£t_t
 *
__£t
è
__THROW
 
	`__nÚnuÎ
 ((1));

225 
	$sigfl£t
 (
sig£t_t
 *
__£t
è
__THROW
 
	`__nÚnuÎ
 ((1));

228 
	$sigadd£t
 (
sig£t_t
 *
__£t
, 
__signo
è
__THROW
 
	`__nÚnuÎ
 ((1));

231 
	$sigd–£t
 (
sig£t_t
 *
__£t
, 
__signo
è
__THROW
 
	`__nÚnuÎ
 ((1));

234 
	$sigismemb”
 (
__cÚ¡
 
sig£t_t
 *
__£t
, 
__signo
)

235 
__THROW
 
	`__nÚnuÎ
 ((1));

237 #ifdeà
__USE_GNU


239 
	$sigi£m±y£t
 (
__cÚ¡
 
sig£t_t
 *
__£t
è
__THROW
 
	`__nÚnuÎ
 ((1));

242 
	$sigªd£t
 (
sig£t_t
 *
__£t
, 
__cÚ¡
 sig£t_ˆ*
__Ëá
,

243 
__cÚ¡
 
sig£t_t
 *
__right
è
__THROW
 
	`__nÚnuÎ
 ((1, 2, 3));

246 
	$sigÜ£t
 (
sig£t_t
 *
__£t
, 
__cÚ¡
 sig£t_ˆ*
__Ëá
,

247 
__cÚ¡
 
sig£t_t
 *
__right
è
__THROW
 
	`__nÚnuÎ
 ((1, 2, 3));

252 
	~<b™s/sigaùiÚ.h
>

255 
	$sig´ocmask
 (
__how
, 
__cÚ¡
 
sig£t_t
 *
__»¡riù
 
__£t
,

256 
sig£t_t
 *
__»¡riù
 
__o£t
è
__THROW
;

263 
	$sigsu¥’d
 (
__cÚ¡
 
sig£t_t
 *
__£t
è
	`__nÚnuÎ
 ((1));

266 
	$sigaùiÚ
 (
__sig
, 
__cÚ¡
 
sigaùiÚ
 *
__»¡riù
 
__aù
,

267 
sigaùiÚ
 *
__»¡riù
 
__ßù
è
__THROW
;

270 
	$sig³ndšg
 (
sig£t_t
 *
__£t
è
__THROW
 
	`__nÚnuÎ
 ((1));

277 
	$sigwa™
 (
__cÚ¡
 
sig£t_t
 *
__»¡riù
 
__£t
, *__»¡riù 
__sig
)

278 
	`__nÚnuÎ
 ((1, 2));

280 #ifdeà
__USE_POSIX199309


285 
	$sigwa™šfo
 (
__cÚ¡
 
sig£t_t
 *
__»¡riù
 
__£t
,

286 
sigšfo_t
 *
__»¡riù
 
__šfo
è
	`__nÚnuÎ
 ((1));

293 
	$sigtimedwa™
 (
__cÚ¡
 
sig£t_t
 *
__»¡riù
 
__£t
,

294 
sigšfo_t
 *
__»¡riù
 
__šfo
,

295 
__cÚ¡
 
time¥ec
 *
__»¡riù
 
__timeout
)

296 
	`__nÚnuÎ
 ((1));

300 
	$sigqueue
 (
__pid_t
 
__pid
, 
__sig
, 
__cÚ¡
 
sigv®
 
__v®
)

301 
__THROW
;

306 #ifdeà
__USE_BSD


310 
__cÚ¡
 *__cÚ¡ 
_sys_sigli¡
[
_NSIG
];

311 
__cÚ¡
 *__cÚ¡ 
sys_sigli¡
[
_NSIG
];

314 
	ssigvec


316 
__sighªdËr_t
 
sv_hªdËr
;

317 
sv_mask
;

319 
sv_æags
;

320 
	#sv_Ú¡ack
 
sv_æags


	)

324 
	#SV_ONSTACK
 (1 << 0)

	)

325 
	#SV_INTERRUPT
 (1 << 1)

	)

326 
	#SV_RESETHAND
 (1 << 2)

	)

334 
	$sigvec
 (
__sig
, 
__cÚ¡
 
sigvec
 *
__vec
,

335 
sigvec
 *
__ovec
è
__THROW
;

339 
	~<b™s/sigcÚ‹xt.h
>

342 
	$sig»tuº
 (
sigcÚ‹xt
 *
__sı
è
__THROW
;

347 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_XOPEN_EXTENDED


348 
	#__Ãed_size_t


	)

349 
	~<¡ddef.h
>

354 
	$sigš‹¼u±
 (
__sig
, 
__š‹¼u±
è
__THROW
;

356 
	~<b™s/sig¡ack.h
>

357 #ifdeà
__USE_XOPEN


359 
	~<sys/ucÚ‹xt.h
>

365 
	$sig¡ack
 (
sig¡ack
 *
__ss
, sig¡ack *
__oss
)

366 
__THROW
 
__©Œibu‹_d•»ÿ‹d__
;

370 
	$sig®t¡ack
 (
__cÚ¡
 
sig®t¡ack
 *
__»¡riù
 
__ss
,

371 
sig®t¡ack
 *
__»¡riù
 
__oss
è
__THROW
;

375 #ifdeà
__USE_XOPEN_EXTENDED


379 
	$sighŞd
 (
__sig
è
__THROW
;

382 
	$sig»l£
 (
__sig
è
__THROW
;

385 
	$sigignÜe
 (
__sig
è
__THROW
;

388 
__sighªdËr_t
 
	$sig£t
 (
__sig
, 
__sighªdËr_t
 
__di¥
è
__THROW
;

391 #ià
defšed
 
__USE_POSIX199506
 || defšed 
__USE_UNIX98


394 
	~<b™s/±h»adty³s.h
>

395 
	~<b™s/sigth»ad.h
>

402 
	$__libc_cu¼’t_sig¹mš
 (è
__THROW
;

404 
	$__libc_cu¼’t_sig¹max
 (è
__THROW
;

408 
__END_DECLS


	@/usr/include/xlocale.h

21 #iâdeà
_XLOCALE_H


22 
	#_XLOCALE_H
 1

	)

28 
	s__loÿË_¡ruù


31 
loÿË_d©a
 *
	m__loÿËs
[13];

34 cÚ¡ *
	m__ùy³_b
;

35 cÚ¡ *
	m__ùy³_tŞow”
;

36 cÚ¡ *
	m__ùy³_touµ”
;

39 cÚ¡ *
	m__Çmes
[13];

40 } *
	t__loÿË_t
;

43 
__loÿË_t
 
	tloÿË_t
;

	@/usr/include/_G_config.h

4 #iâdeà
_G_cÚfig_h


5 
	#_G_cÚfig_h
 1

	)

9 
	~<b™s/ty³s.h
>

10 
	#__Ãed_size_t


	)

11 #ià
defšed
 
_LIBC
 || defšed 
_GLIBCPP_USE_WCHAR_T


12 
	#__Ãed_wch¬_t


	)

14 
	#__Ãed_NULL


	)

15 
	~<¡ddef.h
>

16 
	#__Ãed_mb¡©e_t


	)

17 #ià
defšed
 
_LIBC
 || defšed 
_GLIBCPP_USE_WCHAR_T


18 
	#__Ãed_wšt_t


	)

20 
	~<wch¬.h
>

21 
	#_G_size_t
 
size_t


	)

24 
__off_t
 
	m__pos
;

25 
__mb¡©e_t
 
	m__¡©e
;

26 } 
	t_G_åos_t
;

29 
__off64_t
 
	m__pos
;

30 
__mb¡©e_t
 
	m__¡©e
;

31 } 
	t_G_åos64_t
;

32 
	#_G_ssize_t
 
__ssize_t


	)

33 
	#_G_off_t
 
__off_t


	)

34 
	#_G_off64_t
 
__off64_t


	)

35 
	#_G_pid_t
 
__pid_t


	)

36 
	#_G_uid_t
 
__uid_t


	)

37 
	#_G_wch¬_t
 
wch¬_t


	)

38 
	#_G_wšt_t
 
wšt_t


	)

39 
	#_G_¡©64
 
¡©64


	)

40 #ià
defšed
 
_LIBC
 || defšed 
_GLIBCPP_USE_WCHAR_T


41 
	~<gcÚv.h
>

44 
__gcÚv_šfo
 
	m__cd
;

47 
__gcÚv_šfo
 
	m__cd
;

48 
__gcÚv_¡•_d©a
 
	m__d©a
;

49 } 
	m__combšed
;

50 } 
	t_G_icÚv_t
;

53 
	t_G_št16_t
 
	t__©Œibu‹__
 ((
	t__mode__
 (
	t__HI__
)));

54 
	t_G_št32_t
 
	t__©Œibu‹__
 ((
	t__mode__
 (
	t__SI__
)));

55 
	t_G_ušt16_t
 
	t__©Œibu‹__
 ((
	t__mode__
 (
	t__HI__
)));

56 
	t_G_ušt32_t
 
	t__©Œibu‹__
 ((
	t__mode__
 (
	t__SI__
)));

58 
	#_G_HAVE_BOOL
 1

	)

62 
	#_G_HAVE_ATEXIT
 1

	)

63 
	#_G_HAVE_SYS_CDEFS
 1

	)

64 
	#_G_HAVE_SYS_WAIT
 1

	)

65 
	#_G_NEED_STDARG_H
 1

	)

66 
	#_G_va_li¡
 
__gnuc_va_li¡


	)

68 
	#_G_HAVE_PRINTF_FP
 1

	)

69 
	#_G_HAVE_MMAP
 1

	)

70 
	#_G_HAVE_MREMAP
 1

	)

71 
	#_G_HAVE_LONG_DOUBLE_IO
 1

	)

72 
	#_G_HAVE_IO_FILE_OPEN
 1

	)

73 
	#_G_HAVE_IO_GETLINE_INFO
 1

	)

75 
	#_G_IO_IO_FILE_VERSION
 0x20001

	)

77 
	#_G_OPEN64
 
__İ’64


	)

78 
	#_G_LSEEK64
 
__l£ek64


	)

79 
	#_G_MMAP64
 
__mm­64


	)

80 
	#_G_FSTAT64
(
fd
,
buf
è
	`__fx¡©64
 (
_STAT_VER
, fd, buf)

	)

83 
	#_G_HAVE_ST_BLKSIZE
 
	`defšed
 (
_STATBUF_ST_BLKSIZE
)

	)

85 
	#_G_BUFSIZ
 8192

	)

88 
	#_G_NAMES_HAVE_UNDERSCORE
 0

	)

89 
	#_G_VTABLE_LABEL_HAS_LENGTH
 1

	)

90 
	#_G_USING_THUNKS
 1

	)

91 
	#_G_VTABLE_LABEL_PREFIX
 "__vt_"

	)

92 
	#_G_VTABLE_LABEL_PREFIX_ID
 
__vt_


	)

95 #ià
defšed
 
__ılu¥lus
 || defšed 
__STDC__


96 
	#_G_ARGS
(
ARGLIST
è
	)
ARGLIST

98 
	#_G_ARGS
(
ARGLIST
è()

	)

	@/usr/include/bits/byteswap.h

21 #ià!
defšed
 
_BYTESWAP_H
 && !defšed 
_NETINET_IN_H
 && !defšed 
_ENDIAN_H


25 #iâdeà
_BITS_BYTESWAP_H


26 
	#_BITS_BYTESWAP_H
 1

	)

28 
	~<b™s/wÜdsize.h
>

31 
	#__bsw­_cÚ¡ªt_16
(
x
) \

32 ((((
x
è>> 8è& 0xffè| (((xè& 0xffè<< 8))

	)

34 #ià
defšed
 
__GNUC__
 && __GNUC__ >= 2

35 
	#__bsw­_16
(
x
) \

36 (
__ex‹nsiÚ__
 \

37 ({ 
__v
, 
__x
 = (
x
); \

38 ià(
	`__butš_cÚ¡ªt_p
 (
__x
)) \

39 
__v
 = 
	`__bsw­_cÚ¡ªt_16
 (
__x
); \

41 
	`__asm__
 ("rorw $8, %w0" \

42 : "ô" (
__v
) \

43 : "0" (
__x
) \

45 
__v
; }))

	)

48 
	#__bsw­_16
(
x
) \

49 (
__ex‹nsiÚ__
 \

50 ({ 
__x
 = (
x
); 
	`__bsw­_cÚ¡ªt_16
 (__x); }))

	)

55 
	#__bsw­_cÚ¡ªt_32
(
x
) \

56 ((((
x
) & 0xff000000) >> 24) | (((x) & 0x00ff0000) >> 8) | \

57 (((
x
è& 0x0000ff00è<< 8è| (((xè& 0x000000ffè<< 24))

	)

59 #ià
defšed
 
__GNUC__
 && __GNUC__ >= 2

60 #ià
__WORDSIZE
 =ğ64 || (
defšed
 
__i486__
 || defšed 
__³Áium__
 \

61 || 
defšed
 
	g__³Áium´o__
 || defšed 
	g__³Áium4__
 \

62 || 
defšed
 
	g__k8__
 || defšed 
	g__©hlÚ__
 \

63 || 
defšed
 
	g__k6__
 || defšed 
	g__nocÚa__
 \

64 || 
defšed
 
	g__cÜe2__
 || defšed 
	g__geode__
 \

65 || 
defšed
 
	g__amdçm10__
)

68 
	#__bsw­_32
(
x
) \

69 (
__ex‹nsiÚ__
 \

70 ({ 
__v
, 
__x
 = (
x
); \

71 ià(
	`__butš_cÚ¡ªt_p
 (
__x
)) \

72 
__v
 = 
	`__bsw­_cÚ¡ªt_32
 (
__x
); \

74 
	`__asm__
 ("bsw­ %0" : "ô" (
__v
è: "0" (
__x
)); \

75 
__v
; }))

	)

77 
	#__bsw­_32
(
x
) \

78 (
__ex‹nsiÚ__
 \

79 ({ 
__v
, 
__x
 = (
x
); \

80 ià(
	`__butš_cÚ¡ªt_p
 (
__x
)) \

81 
__v
 = 
	`__bsw­_cÚ¡ªt_32
 (
__x
); \

83 
	`__asm__
 ("rorw $8, %w0;" \

86 : "ô" (
__v
) \

87 : "0" (
__x
) \

89 
__v
; }))

	)

92 
	#__bsw­_32
(
x
) \

93 (
__ex‹nsiÚ__
 \

94 ({ 
__x
 = (
x
); 
	`__bsw­_cÚ¡ªt_32
 (__x); }))

	)

98 #ià
defšed
 
__GNUC__
 && __GNUC__ >= 2

100 
	#__bsw­_cÚ¡ªt_64
(
x
) \

101 ((((
x
) & 0xff00000000000000ull) >> 56) \

102 | (((
x
) & 0x00ff000000000000ull) >> 40) \

103 | (((
x
) & 0x0000ff0000000000ull) >> 24) \

104 | (((
x
) & 0x000000ff00000000ull) >> 8) \

105 | (((
x
) & 0x00000000ff000000ull) << 8) \

106 | (((
x
) & 0x0000000000ff0000ull) << 24) \

107 | (((
x
) & 0x000000000000ff00ull) << 40) \

108 | (((
x
è& 0x00000000000000ffuÎè<< 56))

	)

110 #ià
__WORDSIZE
 == 64

111 
	#__bsw­_64
(
x
) \

112 (
__ex‹nsiÚ__
 \

113 ({ 
__v
, 
__x
 = (
x
); \

114 ià(
	`__butš_cÚ¡ªt_p
 (
__x
)) \

115 
__v
 = 
	`__bsw­_cÚ¡ªt_64
 (
__x
); \

117 
	`__asm__
 ("bsw­ %q0" : "ô" (
__v
è: "0" (
__x
)); \

118 
__v
; }))

	)

120 
	#__bsw­_64
(
x
) \

121 (
__ex‹nsiÚ__
 \

122 ({ uniÚ { 
__ex‹nsiÚ__
 
__Î
; \

123 
__l
[2]; } 
__w
, 
__r
; \

124 ià(
	`__butš_cÚ¡ªt_p
 (
x
)) \

125 
__r
.
__Î
 = 
	`__bsw­_cÚ¡ªt_64
 (
x
); \

128 
__w
.
__Î
 = (
x
); \

129 
__r
.
__l
[0] = 
	`__bsw­_32
 (
__w
.__l[1]); \

130 
__r
.
__l
[1] = 
	`__bsw­_32
 (
__w
.__l[0]); \

132 
__r
.
__Î
; }))

	)

	@/usr/include/bits/endian.h

3 #iâdeà
_ENDIAN_H


7 
	#__BYTE_ORDER
 
__LITTLE_ENDIAN


	)

	@/usr/include/bits/libio-ldbl.h

20 #iâdeà
_IO_STDIO_H


24 
	$__LDBL_REDIR_DECL
 (
_IO_vfsÿnf
)

25 
	`__LDBL_REDIR_DECL
 (
_IO_vårštf
)

	@/usr/include/bits/predefs.h

19 #iâdeà
_FEATURES_H


23 #iâdeà
_PREDEFS_H


24 
	#_PREDEFS_H


	)

27 
	#__STDC_IEC_559__
 1

	)

28 
	#__STDC_IEC_559_COMPLEX__
 1

	)

	@/usr/include/bits/sched.h

22 #iâdeà
__Ãed_sched·¿m


24 #iâdeà
_SCHED_H


30 
	#SCHED_OTHER
 0

	)

31 
	#SCHED_FIFO
 1

	)

32 
	#SCHED_RR
 2

	)

33 #ifdeà
__USE_GNU


34 
	#SCHED_BATCH
 3

	)

37 #ifdeà
__USE_MISC


39 
	#CSIGNAL
 0x000000fà

	)

40 
	#CLONE_VM
 0x00000100

	)

41 
	#CLONE_FS
 0x00000200

	)

42 
	#CLONE_FILES
 0x00000400

	)

43 
	#CLONE_SIGHAND
 0x00000800

	)

44 
	#CLONE_PTRACE
 0x00002000

	)

45 
	#CLONE_VFORK
 0x00004000

	)

47 
	#CLONE_PARENT
 0x00008000

	)

49 
	#CLONE_THREAD
 0x00010000

	)

50 
	#CLONE_NEWNS
 0x00020000

	)

51 
	#CLONE_SYSVSEM
 0x00040000

	)

52 
	#CLONE_SETTLS
 0x00080000

	)

53 
	#CLONE_PARENT_SETTID
 0x00100000

	)

55 
	#CLONE_CHILD_CLEARTID
 0x00200000

	)

57 
	#CLONE_DETACHED
 0x00400000

	)

58 
	#CLONE_UNTRACED
 0x00800000

	)

60 
	#CLONE_CHILD_SETTID
 0x01000000

	)

62 
	#CLONE_NEWUTS
 0x04000000

	)

63 
	#CLONE_NEWIPC
 0x08000000

	)

64 
	#CLONE_NEWUSER
 0x10000000

	)

65 
	#CLONE_NEWPID
 0x20000000

	)

66 
	#CLONE_NEWNET
 0x40000000

	)

67 
	#CLONE_IO
 0x80000000

	)

71 
	ssched_·¿m


73 
	m__sched_´iÜ™y
;

76 
	g__BEGIN_DECLS


78 #ifdeà
__USE_MISC


80 
şÚe
 ((*
__â
è(*
__¬g
), *
__chd_¡ack
,

81 
__æags
, *
__¬g
, ...è
__THROW
;

84 
	$unsh¬e
 (
__æags
è
__THROW
;

87 
	$sched_g‘ıu
 (è
__THROW
;

90 
__END_DECLS


94 #ià!
defšed
 
__defšed_sched·¿m
 \

95 && (
defšed
 
__Ãed_sched·¿m
 || defšed 
_SCHED_H
)

96 
	#__defšed_sched·¿m
 1

	)

98 
	s__sched_·¿m


100 
__sched_´iÜ™y
;

102 #undeà
__Ãed_sched·¿m


106 #ià
defšed
 
_SCHED_H
 && !defšed 
__ıu_£t_t_defšed


107 
	#__ıu_£t_t_defšed


	)

109 
	#__CPU_SETSIZE
 1024

	)

110 
	#__NCPUBITS
 (8 *  (
__ıu_mask
))

	)

113 
	t__ıu_mask
;

116 
	#__CPUELT
(
ıu
è((ıuè/ 
__NCPUBITS
)

	)

117 
	#__CPUMASK
(
ıu
è((
__ıu_mask
è1 << ((ıuè% 
__NCPUBITS
))

	)

122 
__ıu_mask
 
__b™s
[
__CPU_SETSIZE
 / 
__NCPUBITS
];

123 } 
	tıu_£t_t
;

126 #ià
	`__GNUC_PREREQ
 (2, 91)

127 
	#__CPU_ZERO_S
(
£tsize
, 
ıu£
) \

128 dØ
	`__butš_mem£t
 (
ıu£
, '\0', 
£tsize
); 0)

	)

130 
	#__CPU_ZERO_S
(
£tsize
, 
ıu£
) \

132 
size_t
 
__i
; \

133 
size_t
 
__imax
 = (
£tsize
è/  (
__ıu_mask
); \

134 
__ıu_mask
 *
__b™s
 = (
ıu£
)->__bits; \

135 
__i
 = 0; __˜< 
__imax
; ++__i) \

136 
__b™s
[
__i
] = 0; \

137 
	}
} 0)

	)

139 
	#__CPU_SET_S
(
ıu
, 
£tsize
, 
ıu£
) \

140 (
__ex‹nsiÚ__
 \

141 ({ 
size_t
 
__ıu
 = (
ıu
); \

142 
__ıu
 < 8 * (
£tsize
) \

143 ? (((
__ıu_mask
 *è((
ıu£
)->
__b™s
))[
	`__CPUELT
 (
__ıu
)] \

144 |ğ
	`__CPUMASK
 (
__ıu
)) \

145 : 0; }))

	)

146 
	#__CPU_CLR_S
(
ıu
, 
£tsize
, 
ıu£
) \

147 (
__ex‹nsiÚ__
 \

148 ({ 
size_t
 
__ıu
 = (
ıu
); \

149 
__ıu
 < 8 * (
£tsize
) \

150 ? (((
__ıu_mask
 *è((
ıu£
)->
__b™s
))[
	`__CPUELT
 (
__ıu
)] \

151 &ğ~
	`__CPUMASK
 (
__ıu
)) \

152 : 0; }))

	)

153 
	#__CPU_ISSET_S
(
ıu
, 
£tsize
, 
ıu£
) \

154 (
__ex‹nsiÚ__
 \

155 ({ 
size_t
 
__ıu
 = (
ıu
); \

156 
__ıu
 < 8 * (
£tsize
) \

157 ? ((((
__cÚ¡
 
__ıu_mask
 *è((
ıu£
)->
__b™s
))[
	`__CPUELT
 (
__ıu
)] \

158 & 
	`__CPUMASK
 (
__ıu
))) != 0 \

159 : 0; }))

	)

161 
	#__CPU_COUNT_S
(
£tsize
, 
ıu£
) \

162 
	`__sched_ıucouÁ
 (
£tsize
, 
ıu£
)

	)

164 #ià
__GNUC_PREREQ
 (2, 91)

165 
	#__CPU_EQUAL_S
(
£tsize
, 
ıu£1
, 
ıu£2
) \

166 (
	`__butš_memcmp
 (
ıu£1
, 
ıu£2
, 
£tsize
è=ğ0)

	)

168 
	#__CPU_EQUAL_S
(
£tsize
, 
ıu£1
, 
ıu£2
) \

169 (
__ex‹nsiÚ__
 \

170 ({ 
__cÚ¡
 
__ıu_mask
 *
__¬r1
 = (
ıu£1
)->
__b™s
; \

171 
__cÚ¡
 
__ıu_mask
 *
__¬r2
 = (
ıu£2
)->
__b™s
; \

172 
size_t
 
__imax
 = (
£tsize
è/  (
__ıu_mask
); \

173 
size_t
 
__i
; \

174 
__i
 = 0; __˜< 
__imax
; ++__i) \

175 ià(
__b™s
[
__i
] != __bits[__i]) \

177 
__i
 =ğ
__imax
; }))

	)

180 
	#__CPU_OP_S
(
£tsize
, 
de¡£t
, 
¤c£t1
, 
¤c£t2
, 
İ
) \

181 (
__ex‹nsiÚ__
 \

182 ({ 
ıu_£t_t
 *
__de¡
 = (
de¡£t
); \

183 
__cÚ¡
 
__ıu_mask
 *
__¬r1
 = (
¤c£t1
)->
__b™s
; \

184 
__cÚ¡
 
__ıu_mask
 *
__¬r2
 = (
¤c£t2
)->
__b™s
; \

185 
size_t
 
__imax
 = (
£tsize
è/  (
__ıu_mask
); \

186 
size_t
 
__i
; \

187 
__i
 = 0; __˜< 
__imax
; ++__i) \

188 ((
__ıu_mask
 *è
__de¡
->
__b™s
)[
__i
] = 
__¬r1
[__i] 
İ
 
__¬r2
[__i]; \

189 
__de¡
; }))

	)

191 
	#__CPU_ALLOC_SIZE
(
couÁ
) \

192 ((((
couÁ
è+ 
__NCPUBITS
 - 1è/ __NCPUBITSè*  (
__ıu_mask
))

	)

193 
	#__CPU_ALLOC
(
couÁ
è
	`__sched_ıu®loc
 (couÁ)

	)

194 
	#__CPU_FREE
(
ıu£t
è
	`__sched_ıuä“
 (ıu£t)

	)

196 
__BEGIN_DECLS


198 
	$__sched_ıucouÁ
 (
size_t
 
__£tsize
, cÚ¡ 
ıu_£t_t
 *
__£
)

199 
__THROW
;

200 
ıu_£t_t
 *
	$__sched_ıu®loc
 (
size_t
 
__couÁ
è
__THROW
 
__wur
;

201 
	$__sched_ıuä“
 (
ıu_£t_t
 *
__£t
è
__THROW
;

203 
__END_DECLS


	@/usr/include/bits/sigaction.h

20 #iâdeà
_SIGNAL_H


25 
	ssigaùiÚ


28 #ifdeà
__USE_POSIX199309


32 
__sighªdËr_t
 
	m§_hªdËr
;

34 (*
	m§_sigaùiÚ
è(, 
	msigšfo_t
 *, *);

36 
	m__sigaùiÚ_hªdËr
;

37 
	#§_hªdËr
 
__sigaùiÚ_hªdËr
.
§_hªdËr


	)

38 
	#§_sigaùiÚ
 
__sigaùiÚ_hªdËr
.
§_sigaùiÚ


	)

40 
__sighªdËr_t
 
	m§_hªdËr
;

44 
__sig£t_t
 
	m§_mask
;

47 
	m§_æags
;

50 (*
	m§_»¡Ü”
) ();

54 
	#SA_NOCLDSTOP
 1

	)

55 
	#SA_NOCLDWAIT
 2

	)

56 
	#SA_SIGINFO
 4

	)

58 #ià
defšed
 
__USE_UNIX98
 || defšed 
__USE_MISC


59 
	#SA_ONSTACK
 0x08000000

	)

60 
	#SA_RESTART
 0x10000000

	)

61 
	#SA_NODEFER
 0x40000000

	)

63 
	#SA_RESETHAND
 0x80000000

	)

65 #ifdeà
__USE_MISC


66 
	#SA_INTERRUPT
 0x20000000

	)

69 
	#SA_NOMASK
 
SA_NODEFER


	)

70 
	#SA_ONESHOT
 
SA_RESETHAND


	)

71 
	#SA_STACK
 
SA_ONSTACK


	)

75 
	#SIG_BLOCK
 0

	)

76 
	#SIG_UNBLOCK
 1

	)

77 
	#SIG_SETMASK
 2

	)

	@/usr/include/bits/sigcontext.h

19 #iâdeà
_BITS_SIGCONTEXT_H


20 
	#_BITS_SIGCONTEXT_H
 1

	)

22 #ià!
defšed
 
_SIGNAL_H
 && !defšed 
_SYS_UCONTEXT_H


26 
	~<b™s/wÜdsize.h
>

28 
	s_å»g


30 
	msignifiÿnd
[4];

31 
	mexpÚ’t
;

34 
	s_åx»g


36 
	msignifiÿnd
[4];

37 
	mexpÚ’t
;

38 
	m·ddšg
[3];

41 
	s_xmm»g


43 
__ušt32_t
 
	m–em’t
[4];

48 #ià
__WORDSIZE
 == 32

50 
	s_å¡©e


53 
__ušt32_t
 
	mcw
;

54 
__ušt32_t
 
	msw
;

55 
__ušt32_t
 
	mg
;

56 
__ušt32_t
 
	moff
;

57 
__ušt32_t
 
	mcs£l
;

58 
__ušt32_t
 
	md©aoff
;

59 
__ušt32_t
 
	md©a£l
;

60 
_å»g
 
	m_¡
[8];

61 
	m¡©us
;

62 
	mmagic
;

65 
__ušt32_t
 
	m_fx¤_’v
[6];

66 
__ušt32_t
 
	mmxc¤
;

67 
__ušt32_t
 
	m»£rved
;

68 
_åx»g
 
	m_fx¤_¡
[8];

69 
_xmm»g
 
	m_xmm
[8];

70 
__ušt32_t
 
	m·ddšg
[56];

73 #iâdeà
sigcÚ‹xt_¡ruù


78 
	#sigcÚ‹xt_¡ruù
 
sigcÚ‹xt


	)

81 
	ssigcÚ‹xt


83 
	mgs
, 
	m__gsh
;

84 
	mfs
, 
	m__fsh
;

85 
	mes
, 
	m__esh
;

86 
	mds
, 
	m__dsh
;

87 
	medi
;

88 
	mesi
;

89 
	mebp
;

90 
	me¥
;

91 
	mebx
;

92 
	medx
;

93 
	mecx
;

94 
	m—x
;

95 
	mŒ­no
;

96 
	m”r
;

97 
	me
;

98 
	mcs
, 
	m__csh
;

99 
	meæags
;

100 
	me¥_©_sigÇl
;

101 
	mss
, 
	m__ssh
;

102 
_å¡©e
 * 
	må¡©e
;

103 
	mŞdmask
;

104 
	mü2
;

109 
	s_å¡©e


112 
__ušt16_t
 
	mcwd
;

113 
__ušt16_t
 
	mswd
;

114 
__ušt16_t
 
	máw
;

115 
__ušt16_t
 
	mfİ
;

116 
__ušt64_t
 
	mr
;

117 
__ušt64_t
 
	mrdp
;

118 
__ušt32_t
 
	mmxc¤
;

119 
__ušt32_t
 
	mmxü_mask
;

120 
_åx»g
 
	m_¡
[8];

121 
_xmm»g
 
	m_xmm
[16];

122 
__ušt32_t
 
	m·ddšg
[24];

125 
	ssigcÚ‹xt


127 
	mr8
;

128 
	mr9
;

129 
	mr10
;

130 
	mr11
;

131 
	mr12
;

132 
	mr13
;

133 
	mr14
;

134 
	mr15
;

135 
	mrdi
;

136 
	mrsi
;

137 
	mrbp
;

138 
	mrbx
;

139 
	mrdx
;

140 
	m¿x
;

141 
	mrcx
;

142 
	mr¥
;

143 
	mr
;

144 
	meæags
;

145 
	mcs
;

146 
	mgs
;

147 
	mfs
;

148 
	m__·d0
;

149 
	m”r
;

150 
	mŒ­no
;

151 
	mŞdmask
;

152 
	mü2
;

153 
_å¡©e
 * 
	må¡©e
;

154 
	m__»£rved1
 [8];

	@/usr/include/bits/siginfo.h

20 #ià!
defšed
 
_SIGNAL_H
 && !defšed 
__Ãed_sigšfo_t
 \

21 && !
defšed
 
	g__Ãed_sigev’t_t


25 
	~<b™s/wÜdsize.h
>

27 #ià(!
defšed
 
__have_sigv®_t
 \

28 && (
defšed
 
	g_SIGNAL_H
 || defšed 
	g__Ãed_sigšfo_t
 \

29 || 
defšed
 
	g__Ãed_sigev’t_t
))

30 
	#__have_sigv®_t
 1

	)

33 
	usigv®


35 
	msiv®_št
;

36 *
	msiv®_±r
;

37 } 
	tsigv®_t
;

40 #ià(!
defšed
 
__have_sigšfo_t
 \

41 && (
defšed
 
	g_SIGNAL_H
 || defšed 
	g__Ãed_sigšfo_t
))

42 
	#__have_sigšfo_t
 1

	)

44 
	#__SI_MAX_SIZE
 128

	)

45 #ià
__WORDSIZE
 == 64

46 
	#__SI_PAD_SIZE
 ((
__SI_MAX_SIZE
 /  ()è- 4)

	)

48 
	#__SI_PAD_SIZE
 ((
__SI_MAX_SIZE
 /  ()è- 3)

	)

51 
	ssigšfo


53 
	msi_signo
;

54 
	msi_”ºo
;

56 
	msi_code
;

60 
	m_·d
[
__SI_PAD_SIZE
];

65 
__pid_t
 
	msi_pid
;

66 
__uid_t
 
	msi_uid
;

67 } 
	m_kl
;

72 
	msi_tid
;

73 
	msi_ov”run
;

74 
sigv®_t
 
	msi_sigv®
;

75 } 
	m_tim”
;

80 
__pid_t
 
	msi_pid
;

81 
__uid_t
 
	msi_uid
;

82 
sigv®_t
 
	msi_sigv®
;

83 } 
	m_¹
;

88 
__pid_t
 
	msi_pid
;

89 
__uid_t
 
	msi_uid
;

90 
	msi_¡©us
;

91 
__şock_t
 
	msi_utime
;

92 
__şock_t
 
	msi_¡ime
;

93 } 
	m_sigchld
;

98 *
	msi_addr
;

99 } 
	m_sigçuÉ
;

104 
	msi_bªd
;

105 
	msi_fd
;

106 } 
	m_sigpŞl
;

107 } 
	m_sif›lds
;

108 } 
	tsigšfo_t
;

112 
	#si_pid
 
_sif›lds
.
_kl
.
si_pid


	)

113 
	#si_uid
 
_sif›lds
.
_kl
.
si_uid


	)

114 
	#si_tim”id
 
_sif›lds
.
_tim”
.
si_tid


	)

115 
	#si_ov”run
 
_sif›lds
.
_tim”
.
si_ov”run


	)

116 
	#si_¡©us
 
_sif›lds
.
_sigchld
.
si_¡©us


	)

117 
	#si_utime
 
_sif›lds
.
_sigchld
.
si_utime


	)

118 
	#si_¡ime
 
_sif›lds
.
_sigchld
.
si_¡ime


	)

119 
	#si_v®ue
 
_sif›lds
.
_¹
.
si_sigv®


	)

120 
	#si_št
 
_sif›lds
.
_¹
.
si_sigv®
.
siv®_št


	)

121 
	#si_±r
 
_sif›lds
.
_¹
.
si_sigv®
.
siv®_±r


	)

122 
	#si_addr
 
_sif›lds
.
_sigçuÉ
.
si_addr


	)

123 
	#si_bªd
 
_sif›lds
.
_sigpŞl
.
si_bªd


	)

124 
	#si_fd
 
_sif›lds
.
_sigpŞl
.
si_fd


	)

131 
	mSI_ASYNCNL
 = -60,

132 
	#SI_ASYNCNL
 
SI_ASYNCNL


	)

133 
	mSI_TKILL
 = -6,

134 
	#SI_TKILL
 
SI_TKILL


	)

135 
	mSI_SIGIO
,

136 
	#SI_SIGIO
 
SI_SIGIO


	)

137 
	mSI_ASYNCIO
,

138 
	#SI_ASYNCIO
 
SI_ASYNCIO


	)

139 
	mSI_MESGQ
,

140 
	#SI_MESGQ
 
SI_MESGQ


	)

141 
	mSI_TIMER
,

142 
	#SI_TIMER
 
SI_TIMER


	)

143 
	mSI_QUEUE
,

144 
	#SI_QUEUE
 
SI_QUEUE


	)

145 
	mSI_USER
,

146 
	#SI_USER
 
SI_USER


	)

147 
	mSI_KERNEL
 = 0x80

148 
	#SI_KERNEL
 
SI_KERNEL


	)

155 
	mILL_ILLOPC
 = 1,

156 
	#ILL_ILLOPC
 
ILL_ILLOPC


	)

157 
	mILL_ILLOPN
,

158 
	#ILL_ILLOPN
 
ILL_ILLOPN


	)

159 
	mILL_ILLADR
,

160 
	#ILL_ILLADR
 
ILL_ILLADR


	)

161 
	mILL_ILLTRP
,

162 
	#ILL_ILLTRP
 
ILL_ILLTRP


	)

163 
	mILL_PRVOPC
,

164 
	#ILL_PRVOPC
 
ILL_PRVOPC


	)

165 
	mILL_PRVREG
,

166 
	#ILL_PRVREG
 
ILL_PRVREG


	)

167 
	mILL_COPROC
,

168 
	#ILL_COPROC
 
ILL_COPROC


	)

169 
	mILL_BADSTK


170 
	#ILL_BADSTK
 
ILL_BADSTK


	)

176 
	mFPE_INTDIV
 = 1,

177 
	#FPE_INTDIV
 
FPE_INTDIV


	)

178 
	mFPE_INTOVF
,

179 
	#FPE_INTOVF
 
FPE_INTOVF


	)

180 
	mFPE_FLTDIV
,

181 
	#FPE_FLTDIV
 
FPE_FLTDIV


	)

182 
	mFPE_FLTOVF
,

183 
	#FPE_FLTOVF
 
FPE_FLTOVF


	)

184 
	mFPE_FLTUND
,

185 
	#FPE_FLTUND
 
FPE_FLTUND


	)

186 
	mFPE_FLTRES
,

187 
	#FPE_FLTRES
 
FPE_FLTRES


	)

188 
	mFPE_FLTINV
,

189 
	#FPE_FLTINV
 
FPE_FLTINV


	)

190 
	mFPE_FLTSUB


191 
	#FPE_FLTSUB
 
FPE_FLTSUB


	)

197 
	mSEGV_MAPERR
 = 1,

198 
	#SEGV_MAPERR
 
SEGV_MAPERR


	)

199 
	mSEGV_ACCERR


200 
	#SEGV_ACCERR
 
SEGV_ACCERR


	)

206 
	mBUS_ADRALN
 = 1,

207 
	#BUS_ADRALN
 
BUS_ADRALN


	)

208 
	mBUS_ADRERR
,

209 
	#BUS_ADRERR
 
BUS_ADRERR


	)

210 
	mBUS_OBJERR


211 
	#BUS_OBJERR
 
BUS_OBJERR


	)

217 
	mTRAP_BRKPT
 = 1,

218 
	#TRAP_BRKPT
 
TRAP_BRKPT


	)

219 
	mTRAP_TRACE


220 
	#TRAP_TRACE
 
TRAP_TRACE


	)

226 
	mCLD_EXITED
 = 1,

227 
	#CLD_EXITED
 
CLD_EXITED


	)

228 
	mCLD_KILLED
,

229 
	#CLD_KILLED
 
CLD_KILLED


	)

230 
	mCLD_DUMPED
,

231 
	#CLD_DUMPED
 
CLD_DUMPED


	)

232 
	mCLD_TRAPPED
,

233 
	#CLD_TRAPPED
 
CLD_TRAPPED


	)

234 
	mCLD_STOPPED
,

235 
	#CLD_STOPPED
 
CLD_STOPPED


	)

236 
	mCLD_CONTINUED


237 
	#CLD_CONTINUED
 
CLD_CONTINUED


	)

243 
	mPOLL_IN
 = 1,

244 
	#POLL_IN
 
POLL_IN


	)

245 
	mPOLL_OUT
,

246 
	#POLL_OUT
 
POLL_OUT


	)

247 
	mPOLL_MSG
,

248 
	#POLL_MSG
 
POLL_MSG


	)

249 
	mPOLL_ERR
,

250 
	#POLL_ERR
 
POLL_ERR


	)

251 
	mPOLL_PRI
,

252 
	#POLL_PRI
 
POLL_PRI


	)

253 
	mPOLL_HUP


254 
	#POLL_HUP
 
POLL_HUP


	)

257 #undeà
__Ãed_sigšfo_t


261 #ià(
defšed
 
_SIGNAL_H
 || defšed 
__Ãed_sigev’t_t
) \

262 && !
defšed
 
	g__have_sigev’t_t


263 
	#__have_sigev’t_t
 1

	)

266 
	#__SIGEV_MAX_SIZE
 64

	)

267 #ià
__WORDSIZE
 == 64

268 
	#__SIGEV_PAD_SIZE
 ((
__SIGEV_MAX_SIZE
 /  ()è- 4)

	)

270 
	#__SIGEV_PAD_SIZE
 ((
__SIGEV_MAX_SIZE
 /  ()è- 3)

	)

273 
	ssigev’t


275 
sigv®_t
 
	msigev_v®ue
;

276 
	msigev_signo
;

277 
	msigev_nÙify
;

281 
	m_·d
[
__SIGEV_PAD_SIZE
];

285 
__pid_t
 
	m_tid
;

289 (*
	m_funùiÚ
è(
	msigv®_t
);

290 *
	m_©Œibu‹
;

291 } 
	m_sigev_th»ad
;

292 } 
	m_sigev_un
;

293 } 
	tsigev’t_t
;

296 
	#sigev_nÙify_funùiÚ
 
_sigev_un
.
_sigev_th»ad
.
_funùiÚ


	)

297 
	#sigev_nÙify_©Œibu‹s
 
_sigev_un
.
_sigev_th»ad
.
_©Œibu‹


	)

302 
	mSIGEV_SIGNAL
 = 0,

303 
	#SIGEV_SIGNAL
 
SIGEV_SIGNAL


	)

304 
	mSIGEV_NONE
,

305 
	#SIGEV_NONE
 
SIGEV_NONE


	)

306 
	mSIGEV_THREAD
,

307 
	#SIGEV_THREAD
 
SIGEV_THREAD


	)

309 
	mSIGEV_THREAD_ID
 = 4

310 
	#SIGEV_THREAD_ID
 
SIGEV_THREAD_ID


	)

	@/usr/include/bits/signum.h

20 #ifdef 
_SIGNAL_H


23 
	#SIG_ERR
 ((
__sighªdËr_t
è-1è

	)

24 
	#SIG_DFL
 ((
__sighªdËr_t
è0è

	)

25 
	#SIG_IGN
 ((
__sighªdËr_t
è1è

	)

27 #ifdeà
__USE_UNIX98


28 
	#SIG_HOLD
 ((
__sighªdËr_t
è2è

	)

33 
	#SIGHUP
 1

	)

34 
	#SIGINT
 2

	)

35 
	#SIGQUIT
 3

	)

36 
	#SIGILL
 4

	)

37 
	#SIGTRAP
 5

	)

38 
	#SIGABRT
 6

	)

39 
	#SIGIOT
 6

	)

40 
	#SIGBUS
 7

	)

41 
	#SIGFPE
 8

	)

42 
	#SIGKILL
 9

	)

43 
	#SIGUSR1
 10

	)

44 
	#SIGSEGV
 11

	)

45 
	#SIGUSR2
 12

	)

46 
	#SIGPIPE
 13

	)

47 
	#SIGALRM
 14

	)

48 
	#SIGTERM
 15

	)

49 
	#SIGSTKFLT
 16

	)

50 
	#SIGCLD
 
SIGCHLD


	)

51 
	#SIGCHLD
 17

	)

52 
	#SIGCONT
 18

	)

53 
	#SIGSTOP
 19

	)

54 
	#SIGTSTP
 20

	)

55 
	#SIGTTIN
 21

	)

56 
	#SIGTTOU
 22

	)

57 
	#SIGURG
 23

	)

58 
	#SIGXCPU
 24

	)

59 
	#SIGXFSZ
 25

	)

60 
	#SIGVTALRM
 26

	)

61 
	#SIGPROF
 27

	)

62 
	#SIGWINCH
 28

	)

63 
	#SIGPOLL
 
SIGIO


	)

64 
	#SIGIO
 29

	)

65 
	#SIGPWR
 30

	)

66 
	#SIGSYS
 31

	)

67 
	#SIGUNUSED
 31

	)

69 
	#_NSIG
 65

	)

72 
	#SIGRTMIN
 (
	`__libc_cu¼’t_sig¹mš
 ())

	)

73 
	#SIGRTMAX
 (
	`__libc_cu¼’t_sig¹max
 ())

	)

77 
	#__SIGRTMIN
 32

	)

78 
	#__SIGRTMAX
 (
_NSIG
 - 1)

	)

	@/usr/include/bits/sigset.h

21 #iâdef 
_SIGSET_H_ty³s


22 
	#_SIGSET_H_ty³s
 1

	)

24 
	t__sig_©omic_t
;

28 
	#_SIGSET_NWORDS
 (1024 / (8 *  ()))

	)

31 
	m__v®
[
_SIGSET_NWORDS
];

32 } 
	t__sig£t_t
;

43 #ià!
defšed
 
_SIGSET_H_âs
 && defšed 
_SIGNAL_H


44 
	#_SIGSET_H_âs
 1

	)

46 #iâdeà
_EXTERN_INLINE


47 
	#_EXTERN_INLINE
 
__ex‹º_šlše


	)

51 
	#__sigmask
(
sig
) \

52 (((è1è<< (((
sig
è- 1è% (8 *  ())))

	)

55 
	#__sigwÜd
(
sig
è(((sigè- 1è/ (8 *  ()))

	)

57 #ià
defšed
 
__GNUC__
 && __GNUC__ >= 2

58 
	#__sigem±y£t
(
£t
) \

59 (
	`__ex‹nsiÚ__
 ({ 
__út
 = 
_SIGSET_NWORDS
; \

60 
sig£t_t
 *
__£t
 = (
£t
); \

61 --
__út
 >ğ0è
__£t
->
__v®
[__cnt] = 0; \

62 0; }))

	)

63 
	#__sigfl£t
(
£t
) \

64 (
	`__ex‹nsiÚ__
 ({ 
__út
 = 
_SIGSET_NWORDS
; \

65 
sig£t_t
 *
__£t
 = (
£t
); \

66 --
__út
 >ğ0è
__£t
->
__v®
[__cnt] = ~0UL; \

67 0; }))

	)

69 #ifdeà
__USE_GNU


73 
	#__sigi£m±y£t
(
£t
) \

74 (
	`__ex‹nsiÚ__
 ({ 
__út
 = 
_SIGSET_NWORDS
; \

75 cÚ¡ 
sig£t_t
 *
__£t
 = (
£t
); \

76 
__»t
 = 
__£t
->
__v®
[--
__út
]; \

77 !
__»t
 && --
__út
 >= 0) \

78 
__»t
 = 
__£t
->
__v®
[
__út
]; \

79 
__»t
 =ğ0; }))

	)

80 
	#__sigªd£t
(
de¡
, 
Ëá
, 
right
) \

81 (
	`__ex‹nsiÚ__
 ({ 
__út
 = 
_SIGSET_NWORDS
; \

82 
sig£t_t
 *
__de¡
 = (
de¡
); \

83 cÚ¡ 
sig£t_t
 *
__Ëá
 = (
Ëá
); \

84 cÚ¡ 
sig£t_t
 *
__right
 = (
right
); \

85 --
__út
 >= 0) \

86 
__de¡
->
__v®
[
__út
] = (
__Ëá
->__val[__cnt] \

87 & 
__right
->
__v®
[
__út
]); \

88 0; }))

	)

89 
	#__sigÜ£t
(
de¡
, 
Ëá
, 
right
) \

90 (
	`__ex‹nsiÚ__
 ({ 
__út
 = 
_SIGSET_NWORDS
; \

91 
sig£t_t
 *
__de¡
 = (
de¡
); \

92 cÚ¡ 
sig£t_t
 *
__Ëá
 = (
Ëá
); \

93 cÚ¡ 
sig£t_t
 *
__right
 = (
right
); \

94 --
__út
 >= 0) \

95 
__de¡
->
__v®
[
__út
] = (
__Ëá
->__val[__cnt] \

96 | 
__right
->
__v®
[
__út
]); \

97 0; }))

	)

104 
__sigismemb”
 (
__cÚ¡
 
__sig£t_t
 *, );

105 
__sigadd£t
 (
__sig£t_t
 *, );

106 
__sigd–£t
 (
__sig£t_t
 *, );

108 #ifdeà
__USE_EXTERN_INLINES


109 
	#__SIGSETFN
(
NAME
, 
BODY
, 
CONST
) \

110 
_EXTERN_INLINE
 \

111 
	`NAME
 (
CONST
 
__sig£t_t
 *
__£t
, 
__sig
) \

113 
__mask
 = 
	`__sigmask
 (
__sig
); \

114 
__wÜd
 = 
	`__sigwÜd
 (
__sig
); \

115  
BODY
; \

116 }

	)

118 
__SIGSETFN
 (
__sigismemb”
, (
__£t
->
__v®
[
__wÜd
] & 
__mask
è? 1 : 0, 
__cÚ¡
)

119 
__SIGSETFN
 (
__sigadd£t
, ((
__£t
->
__v®
[
__wÜd
] |ğ
__mask
), 0), )

120 
__SIGSETFN
 (
__sigd–£t
, ((
__£t
->
__v®
[
__wÜd
] &ğ~
__mask
), 0), )

122 #undeà
__SIGSETFN


	@/usr/include/bits/sigstack.h

20 #iâdeà
_SIGNAL_H


26 
	ssig¡ack


28 *
	mss_¥
;

29 
	mss_Ú¡ack
;

36 
	mSS_ONSTACK
 = 1,

37 
	#SS_ONSTACK
 
SS_ONSTACK


	)

38 
	mSS_DISABLE


39 
	#SS_DISABLE
 
SS_DISABLE


	)

43 
	#MINSIGSTKSZ
 2048

	)

46 
	#SIGSTKSZ
 8192

	)

50 
	ssig®t¡ack


52 *
	mss_¥
;

53 
	mss_æags
;

54 
size_t
 
	mss_size
;

55 } 
	t¡ack_t
;

	@/usr/include/bits/sigthread.h

20 #iâdeà
_BITS_SIGTHREAD_H


21 
	#_BITS_SIGTHREAD_H
 1

	)

23 #ià!
defšed
 
_SIGNAL_H
 && !defšed 
_PTHREAD_H


31 
	$±h»ad_sigmask
 (
__how
,

32 
__cÚ¡
 
__sig£t_t
 *
__»¡riù
 
__Ãwmask
,

33 
__sig£t_t
 *
__»¡riù
 
__Şdmask
)
__THROW
;

36 
	$±h»ad_kl
 (
±h»ad_t
 
__th»adid
, 
__signo
è
__THROW
;

38 #ifdeà
__USE_GNU


40 
	$±h»ad_sigqueue
 (
±h»ad_t
 
__th»adid
, 
__signo
,

41 cÚ¡ 
sigv®
 
__v®ue
è
__THROW
;

	@/usr/include/bits/stdio-lock.h

20 #iâdeà
_BITS_STDIO_LOCK_H


21 
	#_BITS_STDIO_LOCK_H
 1

	)

23 
	~<b™s/libc-lock.h
>

24 
	~<lowËv–lock.h
>

28 
	#_IO_lock_šex³nsive
 1

	)

30 ¡ruù { 
	mlock
; 
	mút
; *
	mowÃr
; } 
	t_IO_lock_t
;

32 
	#_IO_lock_š™Ÿliz”
 { 
LLL_LOCK_INITIALIZER
, 0, 
NULL
 }

	)

34 
	#_IO_lock_š™
(
_Çme
) \

35 ((
_Çme
èğ(
_IO_lock_t
è
_IO_lock_š™Ÿliz”
 , 0)

	)

37 
	#_IO_lock_fši
(
_Çme
) \

38 ((è0)

	)

40 
	#_IO_lock_lock
(
_Çme
) \

42 *
__£lf
 = 
THREAD_SELF
; \

43 ià((
_Çme
).
owÃr
 !ğ
__£lf
) \

45 
	`Îl_lock
 ((
_Çme
).
lock
, 
LLL_PRIVATE
); \

46 (
_Çme
).
owÃr
 = 
__£lf
; \

48 ++(
_Çme
).
út
; \

49 } 0)

	)

51 
	#_IO_lock_Œylock
(
_Çme
) \

53 
__»suÉ
 = 0; \

54 *
__£lf
 = 
THREAD_SELF
; \

55 ià((
_Çme
).
owÃr
 !ğ
__£lf
) \

57 ià(
	`Îl_Œylock
 ((
_Çme
).
lock
) == 0) \

59 (
_Çme
).
owÃr
 = 
__£lf
; \

60 (
_Çme
).
út
 = 1; \

63 
__»suÉ
 = 
EBUSY
; \

66 ++(
_Çme
).
út
; \

67 
__»suÉ
; \

68 })

	)

70 
	#_IO_lock_uÆock
(
_Çme
) \

72 ià(--(
_Çme
).
út
 == 0) \

74 (
_Çme
).
owÃr
 = 
NULL
; \

75 
	`Îl_uÆock
 ((
_Çme
).
lock
, 
LLL_PRIVATE
); \

77 } 0)

	)

81 
	#_IO_ş—nup_»giÚ_¡¬t
(
_fù
, 
_å
) \

82 
	`__libc_ş—nup_»giÚ_¡¬t
 (((
_å
)->
_æags
 & 
_IO_USER_LOCK
è=ğ0, 
_fù
, _å)

	)

83 
	#_IO_ş—nup_»giÚ_¡¬t_nßrg
(
_fù
) \

84 
	`__libc_ş—nup_»giÚ_¡¬t
 (1, 
_fù
, 
NULL
)

	)

85 
	#_IO_ş—nup_»giÚ_’d
(
_do™
) \

86 
	`__libc_ş—nup_»giÚ_’d
 (
_do™
)

	)

88 #ià
defšed
 
_LIBC
 && !defšed 
NOT_IN_libc


90 #ifdeà
__EXCEPTIONS


91 
	#_IO_acquœe_lock
(
_å
) \

93 
_IO_FILE
 *
_IO_acquœe_lock_fe
 \

94 
	`__©Œibu‹__
((
	`ş—nup
 (
_IO_acquœe_lock_fù
))) \

95 ğ(
_å
); \

96 
	`_IO_æockfe
 (
_IO_acquœe_lock_fe
);

	)

97 
	#_IO_acquœe_lock_ş—r_æags2
(
_å
) \

99 
_IO_FILE
 *
_IO_acquœe_lock_fe
 \

100 
	`__©Œibu‹__
((
	`ş—nup
 (
_IO_acquœe_lock_ş—r_æags2_fù
))) \

101 ğ(
_å
); \

102 
	`_IO_æockfe
 (
_IO_acquœe_lock_fe
);

	)

104 
	#_IO_acquœe_lock
(
_å
è
_IO_acquœe_lock_Ãeds_exû±iÚs_’abËd


	)

105 
	#_IO_acquœe_lock_ş—r_æags2
(
_å
è
	`_IO_acquœe_lock
 (_å)

	)

107 
	#_IO_»Ëa£_lock
(
_å
è; } 0)

	)

	@/usr/include/bits/typesizes.h

20 #iâdeà
_BITS_TYPES_H


24 #iâdef 
_BITS_TYPESIZES_H


25 
	#_BITS_TYPESIZES_H
 1

	)

30 
	#__DEV_T_TYPE
 
__UQUAD_TYPE


	)

31 
	#__UID_T_TYPE
 
__U32_TYPE


	)

32 
	#__GID_T_TYPE
 
__U32_TYPE


	)

33 
	#__INO_T_TYPE
 
__ULONGWORD_TYPE


	)

34 
	#__INO64_T_TYPE
 
__UQUAD_TYPE


	)

35 
	#__MODE_T_TYPE
 
__U32_TYPE


	)

36 
	#__NLINK_T_TYPE
 
__UWORD_TYPE


	)

37 
	#__OFF_T_TYPE
 
__SLONGWORD_TYPE


	)

38 
	#__OFF64_T_TYPE
 
__SQUAD_TYPE


	)

39 
	#__PID_T_TYPE
 
__S32_TYPE


	)

40 
	#__RLIM_T_TYPE
 
__ULONGWORD_TYPE


	)

41 
	#__RLIM64_T_TYPE
 
__UQUAD_TYPE


	)

42 
	#__BLKCNT_T_TYPE
 
__SLONGWORD_TYPE


	)

43 
	#__BLKCNT64_T_TYPE
 
__SQUAD_TYPE


	)

44 
	#__FSBLKCNT_T_TYPE
 
__ULONGWORD_TYPE


	)

45 
	#__FSBLKCNT64_T_TYPE
 
__UQUAD_TYPE


	)

46 
	#__FSFILCNT_T_TYPE
 
__ULONGWORD_TYPE


	)

47 
	#__FSFILCNT64_T_TYPE
 
__UQUAD_TYPE


	)

48 
	#__ID_T_TYPE
 
__U32_TYPE


	)

49 
	#__CLOCK_T_TYPE
 
__SLONGWORD_TYPE


	)

50 
	#__TIME_T_TYPE
 
__SLONGWORD_TYPE


	)

51 
	#__USECONDS_T_TYPE
 
__U32_TYPE


	)

52 
	#__SUSECONDS_T_TYPE
 
__SLONGWORD_TYPE


	)

53 
	#__DADDR_T_TYPE
 
__S32_TYPE


	)

54 
	#__SWBLK_T_TYPE
 
__SLONGWORD_TYPE


	)

55 
	#__KEY_T_TYPE
 
__S32_TYPE


	)

56 
	#__CLOCKID_T_TYPE
 
__S32_TYPE


	)

57 
	#__TIMER_T_TYPE
 *

	)

58 
	#__BLKSIZE_T_TYPE
 
__SLONGWORD_TYPE


	)

59 
	#__FSID_T_TYPE
 sŒuù { 
__v®
[2]; }

	)

60 
	#__SSIZE_T_TYPE
 
__SWORD_TYPE


	)

63 
	#__FD_SETSIZE
 1024

	)

	@/usr/include/ctype.h

24 #iâdef 
_CTYPE_H


25 
	#_CTYPE_H
 1

	)

27 
	~<ã©u»s.h
>

28 
	~<b™s/ty³s.h
>

30 
	g__BEGIN_DECLS


32 #iâdeà
_ISb™


41 
	~<’dŸn.h
>

42 #ià
__BYTE_ORDER
 =ğ
__BIG_ENDIAN


43 
	#_ISb™
(
b™
è(1 << (b™))

	)

45 
	#_ISb™
(
b™
è((b™è< 8 ? ((1 << (b™)è<< 8è: ((1 << (b™)è>> 8))

	)

50 
	m_ISuµ”
 = 
_ISb™
 (0),

51 
	m_ISlow”
 = 
_ISb™
 (1),

52 
	m_IS®pha
 = 
_ISb™
 (2),

53 
	m_ISdig™
 = 
_ISb™
 (3),

54 
	m_ISxdig™
 = 
_ISb™
 (4),

55 
	m_IS¥aû
 = 
_ISb™
 (5),

56 
	m_IS´št
 = 
_ISb™
 (6),

57 
	m_ISg¿ph
 = 
_ISb™
 (7),

58 
	m_ISbÏnk
 = 
_ISb™
 (8),

59 
	m_ISúŒl
 = 
_ISb™
 (9),

60 
	m_ISpunù
 = 
_ISb™
 (10),

61 
	m_IS®num
 = 
_ISb™
 (11)

81 
__cÚ¡
 **
	$__ùy³_b_loc
 ()

82 
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡
));

83 
__cÚ¡
 
__št32_t
 **
	$__ùy³_tŞow”_loc
 ()

84 
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡
));

85 
__cÚ¡
 
__št32_t
 **
	$__ùy³_touµ”_loc
 ()

86 
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡
));

88 
	#__isùy³
(
c
, 
ty³
) \

89 ((*
	`__ùy³_b_loc
 ())[(è(
c
)] & (è
ty³
)

	)

91 
	#__i§scii
(
c
è(((cè& ~0x7fè=ğ0è

	)

92 
	#__tßscii
(
c
è((cè& 0x7fè

	)

94 
	#__exùy³
(
Çme
è
	`Çme
 (è
__THROW


	)

96 
__BEGIN_NAMESPACE_STD


102 
	`__exùy³
 (
i§Êum
);

103 
	`__exùy³
 (
i§Íha
);

104 
	`__exùy³
 (
isúŒl
);

105 
	`__exùy³
 (
isdig™
);

106 
	`__exùy³
 (
i¦ow”
);

107 
	`__exùy³
 (
isg¿ph
);

108 
	`__exùy³
 (
i¥ršt
);

109 
	`__exùy³
 (
i¥unù
);

110 
	`__exùy³
 (
is¥aû
);

111 
	`__exùy³
 (
isuµ”
);

112 
	`__exùy³
 (
isxdig™
);

116 
	$tŞow”
 (
__c
è
__THROW
;

119 
	$touµ”
 (
__c
è
__THROW
;

121 
__END_NAMESPACE_STD


125 #ifdef 
__USE_ISOC99


126 
__BEGIN_NAMESPACE_C99


128 
	`__exùy³
 (
isbÏnk
);

130 
__END_NAMESPACE_C99


133 #ifdeà
__USE_GNU


135 
	$isùy³
 (
__c
, 
__mask
è
__THROW
;

138 #ià
defšed
 
__USE_SVID
 || defšed 
__USE_MISC
 || defšed 
__USE_XOPEN


142 
	$i§scii
 (
__c
è
__THROW
;

146 
	$tßscii
 (
__c
è
__THROW
;

150 
	`__exùy³
 (
_touµ”
);

151 
	`__exùy³
 (
_tŞow”
);

155 
	#__tobody
(
c
, 
f
, 
a
, 
¬gs
) \

156 (
__ex‹nsiÚ__
 \

157 ({ 
__»s
; \

158 ià( (
c
) > 1) \

160 ià(
	`__butš_cÚ¡ªt_p
 (
c
)) \

162 
__c
 = (
c
); \

163 
__»s
 = 
__c
 < -128 || __ø> 255 ? __ø: (
a
)[__c]; \

166 
__»s
 = 
f
 
¬gs
; \

169 
__»s
 = (
a
)[(è(
c
)]; \

170 
__»s
; 
	}
}))

	)

172 #ià!
defšed
 
__NO_CTYPE
 && !defšed 
__ılu¥lus


173 
	#i§Êum
(
c
è
	`__isùy³
((c), 
_IS®num
)

	)

174 
	#i§Íha
(
c
è
	`__isùy³
((c), 
_IS®pha
)

	)

175 
	#isúŒl
(
c
è
	`__isùy³
((c), 
_ISúŒl
)

	)

176 
	#isdig™
(
c
è
	`__isùy³
((c), 
_ISdig™
)

	)

177 
	#i¦ow”
(
c
è
	`__isùy³
((c), 
_ISlow”
)

	)

178 
	#isg¿ph
(
c
è
	`__isùy³
((c), 
_ISg¿ph
)

	)

179 
	#i¥ršt
(
c
è
	`__isùy³
((c), 
_IS´št
)

	)

180 
	#i¥unù
(
c
è
	`__isùy³
((c), 
_ISpunù
)

	)

181 
	#is¥aû
(
c
è
	`__isùy³
((c), 
_IS¥aû
)

	)

182 
	#isuµ”
(
c
è
	`__isùy³
((c), 
_ISuµ”
)

	)

183 
	#isxdig™
(
c
è
	`__isùy³
((c), 
_ISxdig™
)

	)

185 #ifdeà
__USE_ISOC99


186 
	#isbÏnk
(
c
è
	`__isùy³
((c), 
_ISbÏnk
)

	)

189 #ifdeà
__USE_EXTERN_INLINES


190 
__ex‹º_šlše
 

191 
__NTH
 (
	$tŞow”
 (
__c
))

193  
__c
 >ğ-128 && __ø< 256 ? (*
	`__ùy³_tŞow”_loc
 ())[__c] : __c;

194 
	}
}

196 
__ex‹º_šlše
 

197 
__NTH
 (
	$touµ”
 (
__c
))

199  
__c
 >ğ-128 && __ø< 256 ? (*
	`__ùy³_touµ”_loc
 ())[__c] : __c;

200 
	}
}

203 #ià
__GNUC__
 >ğ2 && 
defšed
 
__OPTIMIZE__
 && !defšed 
__ılu¥lus


204 
	#tŞow”
(
c
è
	`__tobody
 (c, 
tŞow”
, *
	`__ùy³_tŞow”_loc
 (), (c))

	)

205 
	#touµ”
(
c
è
	`__tobody
 (c, 
touµ”
, *
	`__ùy³_touµ”_loc
 (), (c))

	)

208 #ià
defšed
 
__USE_SVID
 || defšed 
__USE_MISC
 || defšed 
__USE_XOPEN


209 
	#i§scii
(
c
è
	`__i§scii
 (c)

	)

210 
	#tßscii
(
c
è
	`__tßscii
 (c)

	)

212 
	#_tŞow”
(
c
è((è(*
	`__ùy³_tŞow”_loc
 ())[(è(c)])

	)

213 
	#_touµ”
(
c
è((è(*
	`__ùy³_touµ”_loc
 ())[(è(c)])

	)

219 #ifdeà
__USE_XOPEN2K8


233 
	~<xloÿË.h
>

237 
	#__isùy³_l
(
c
, 
ty³
, 
loÿË
) \

238 ((
loÿË
)->
__ùy³_b
[(è(
c
)] & (è
ty³
)

	)

240 
	#__exùy³_l
(
Çme
) \

241 
	`Çme
 (, 
__loÿË_t
è
__THROW


	)

247 
__exùy³_l
 (
i§Êum_l
);

248 
__exùy³_l
 (
i§Íha_l
);

249 
__exùy³_l
 (
isúŒl_l
);

250 
__exùy³_l
 (
isdig™_l
);

251 
__exùy³_l
 (
i¦ow”_l
);

252 
__exùy³_l
 (
isg¿ph_l
);

253 
__exùy³_l
 (
i¥ršt_l
);

254 
__exùy³_l
 (
i¥unù_l
);

255 
__exùy³_l
 (
is¥aû_l
);

256 
__exùy³_l
 (
isuµ”_l
);

257 
__exùy³_l
 (
isxdig™_l
);

259 
__exùy³_l
 (
isbÏnk_l
);

263 
	$__tŞow”_l
 (
__c
, 
__loÿË_t
 
__l
è
__THROW
;

264 
	$tŞow”_l
 (
__c
, 
__loÿË_t
 
__l
è
__THROW
;

267 
	$__touµ”_l
 (
__c
, 
__loÿË_t
 
__l
è
__THROW
;

268 
	$touµ”_l
 (
__c
, 
__loÿË_t
 
__l
è
__THROW
;

270 #ià
__GNUC__
 >ğ2 && 
defšed
 
__OPTIMIZE__
 && !defšed 
__ılu¥lus


271 
	#__tŞow”_l
(
c
, 
loÿË
) \

272 
	`__tobody
 (
c
, 
__tŞow”_l
, (
loÿË
)->
__ùy³_tŞow”
, (c,†oÿË))

	)

273 
	#__touµ”_l
(
c
, 
loÿË
) \

274 
	`__tobody
 (
c
, 
__touµ”_l
, (
loÿË
)->
__ùy³_touµ”
, (c,†oÿË))

	)

275 
	#tŞow”_l
(
c
, 
loÿË
è
	`__tŞow”_l
 ((c), (loÿË))

	)

276 
	#touµ”_l
(
c
, 
loÿË
è
	`__touµ”_l
 ((c), (loÿË))

	)

280 #iâdeà
__NO_CTYPE


281 
	#__i§Êum_l
(
c
,
l
è
	`__isùy³_l
((c), 
_IS®num
, (l))

	)

282 
	#__i§Íha_l
(
c
,
l
è
	`__isùy³_l
((c), 
_IS®pha
, (l))

	)

283 
	#__isúŒl_l
(
c
,
l
è
	`__isùy³_l
((c), 
_ISúŒl
, (l))

	)

284 
	#__isdig™_l
(
c
,
l
è
	`__isùy³_l
((c), 
_ISdig™
, (l))

	)

285 
	#__i¦ow”_l
(
c
,
l
è
	`__isùy³_l
((c), 
_ISlow”
, (l))

	)

286 
	#__isg¿ph_l
(
c
,
l
è
	`__isùy³_l
((c), 
_ISg¿ph
, (l))

	)

287 
	#__i¥ršt_l
(
c
,
l
è
	`__isùy³_l
((c), 
_IS´št
, (l))

	)

288 
	#__i¥unù_l
(
c
,
l
è
	`__isùy³_l
((c), 
_ISpunù
, (l))

	)

289 
	#__is¥aû_l
(
c
,
l
è
	`__isùy³_l
((c), 
_IS¥aû
, (l))

	)

290 
	#__isuµ”_l
(
c
,
l
è
	`__isùy³_l
((c), 
_ISuµ”
, (l))

	)

291 
	#__isxdig™_l
(
c
,
l
è
	`__isùy³_l
((c), 
_ISxdig™
, (l))

	)

293 
	#__isbÏnk_l
(
c
,
l
è
	`__isùy³_l
((c), 
_ISbÏnk
, (l))

	)

295 #ià
defšed
 
__USE_SVID
 || defšed 
__USE_MISC


296 
	#__i§scii_l
(
c
,
l
è(Ö), 
	`__i§scii
 (c))

	)

297 
	#__tßscii_l
(
c
,
l
è(Ö), 
	`__tßscii
 (c))

	)

300 
	#i§Êum_l
(
c
,
l
è
	`__i§Êum_l
 ((c), (l))

	)

301 
	#i§Íha_l
(
c
,
l
è
	`__i§Íha_l
 ((c), (l))

	)

302 
	#isúŒl_l
(
c
,
l
è
	`__isúŒl_l
 ((c), (l))

	)

303 
	#isdig™_l
(
c
,
l
è
	`__isdig™_l
 ((c), (l))

	)

304 
	#i¦ow”_l
(
c
,
l
è
	`__i¦ow”_l
 ((c), (l))

	)

305 
	#isg¿ph_l
(
c
,
l
è
	`__isg¿ph_l
 ((c), (l))

	)

306 
	#i¥ršt_l
(
c
,
l
è
	`__i¥ršt_l
 ((c), (l))

	)

307 
	#i¥unù_l
(
c
,
l
è
	`__i¥unù_l
 ((c), (l))

	)

308 
	#is¥aû_l
(
c
,
l
è
	`__is¥aû_l
 ((c), (l))

	)

309 
	#isuµ”_l
(
c
,
l
è
	`__isuµ”_l
 ((c), (l))

	)

310 
	#isxdig™_l
(
c
,
l
è
	`__isxdig™_l
 ((c), (l))

	)

312 
	#isbÏnk_l
(
c
,
l
è
	`__isbÏnk_l
 ((c), (l))

	)

314 #ià
defšed
 
__USE_SVID
 || defšed 
__USE_MISC


315 
	#i§scii_l
(
c
,
l
è
	`__i§scii_l
 ((c), (l))

	)

316 
	#tßscii_l
(
c
,
l
è
	`__tßscii_l
 ((c), (l))

	)

323 
__END_DECLS


	@/usr/include/gnu/stubs.h

4 
	~<b™s/wÜdsize.h
>

6 #ià
__WORDSIZE
 == 32

7 
	~<gnu/¡ubs-32.h
>

8 #–ià
__WORDSIZE
 == 64

9 
	~<gnu/¡ubs-64.h
>

	@/usr/include/sys/cdefs.h

20 #iâdef 
_SYS_CDEFS_H


21 
	#_SYS_CDEFS_H
 1

	)

24 #iâdeà
_FEATURES_H


25 
	~<ã©u»s.h
>

31 #ià
defšed
 
__GNUC__
 && !defšed 
__STDC__


36 #undeà
__P


37 #undeà
__PMT


39 #ifdeà
__GNUC__


46 #ià!
defšed
 
__ılu¥lus
 && 
__GNUC_PREREQ
 (3, 3)

47 
	#__THROW
 
	`__©Œibu‹__
 ((
__nÙhrow__
))

	)

48 
	#__NTH
(
fù
è
	`__©Œibu‹__
 ((
__nÙhrow__
)è
	)
fct

50 #ià
defšed
 
__ılu¥lus
 && 
__GNUC_PREREQ
 (2,8)

51 
	#__THROW
 
	`throw
 ()

	)

52 
	#__NTH
(
fù
èfù 
	`throw
 ()

	)

54 
	#__THROW


	)

55 
	#__NTH
(
fù
è
	)
fct

61 
	#__šlše


	)

63 
	#__THROW


	)

64 
	#__NTH
(
fù
è
	)
fct

66 
	#__cÚ¡
 cÚ¡

	)

67 
	#__sigÃd
 sigÃd

	)

68 
	#__vŞ©e
 vŞ©e

	)

74 
	#__P
(
¬gs
è
	)
args

75 
	#__PMT
(
¬gs
è
	)
args

80 
	#__CONCAT
(
x
,
y
èx ## 
	)
y

81 
	#__STRING
(
x
è#x

	)

84 
	#__±r_t
 *

	)

85 
	#__lÚg_doubË_t
 

	)

89 #ifdef 
__ılu¥lus


90 
	#__BEGIN_DECLS
 "C" {

	)

91 
	#__END_DECLS
 }

	)

93 
	#__BEGIN_DECLS


	)

94 
	#__END_DECLS


	)

103 #ià
defšed
 
__ılu¥lus
 && defšed 
_GLIBCPP_USE_NAMESPACES


104 
	#__BEGIN_NAMESPACE_STD
 
Çme¥aû
 
¡d
 {

	)

105 
	#__END_NAMESPACE_STD
 }

	)

106 
	#__USING_NAMESPACE_STD
(
Çme
è
usšg
 
¡d
::Çme;

	)

107 
	#__BEGIN_NAMESPACE_C99
 
Çme¥aû
 
__c99
 {

	)

108 
	#__END_NAMESPACE_C99
 }

	)

109 
	#__USING_NAMESPACE_C99
(
Çme
è
usšg
 
__c99
::Çme;

	)

114 
	#__BEGIN_NAMESPACE_STD


	)

115 
	#__END_NAMESPACE_STD


	)

116 
	#__USING_NAMESPACE_STD
(
Çme
)

	)

117 
	#__BEGIN_NAMESPACE_C99


	)

118 
	#__END_NAMESPACE_C99


	)

119 
	#__USING_NAMESPACE_C99
(
Çme
)

	)

124 #iâdeà
__BOUNDED_POINTERS__


125 
	#__bounded


	)

126 
	#__unbounded


	)

127 
	#__±rv®ue


	)

132 
	#__bos
(
±r
è
	`__butš_objeù_size
 (±r, 
__USE_FORTIFY_LEVEL
 > 1)

	)

133 
	#__bos0
(
±r
è
	`__butš_objeù_size
 (±r, 0)

	)

135 #ià
__GNUC_PREREQ
 (4,3)

136 
	#__w¬ndeş
(
Çme
, 
msg
) \

137 
	`Çme
 (è
	`__©Œibu‹__
((
	`__w¬nšg__
 (
msg
)))

	)

138 
	#__w¬Ç‰r
(
msg
è
	`__©Œibu‹__
((
	`__w¬nšg__
 (msg)))

	)

139 
	#__”rÜdeş
(
Çme
, 
msg
) \

140 
	`Çme
 (è
	`__©Œibu‹__
((
	`__”rÜ__
 (
msg
)))

	)

142 
	#__w¬ndeş
(
Çme
, 
msg
è
	`Çme
 ()

	)

143 
	#__w¬Ç‰r
(
msg
)

	)

144 
	#__”rÜdeş
(
Çme
, 
msg
è
	`Çme
 ()

	)

148 #ià
__GNUC_PREREQ
 (2,97)

150 
	#__æex¬r
 []

	)

152 #ifdeà
__GNUC__


153 
	#__æex¬r
 [0]

	)

155 #ià
defšed
 
__STDC_VERSION__
 && __STDC_VERSION__ >= 199901L

156 
	#__æex¬r
 []

	)

159 
	#__æex¬r
 [1]

	)

175 #ià
defšed
 
__GNUC__
 && __GNUC__ >= 2

177 
	#__REDIRECT
(
Çme
, 
´Ùo
, 
®Ÿs
èÇm´ÙØ
	`__asm__
 (
	`__ASMNAME
 (#®Ÿs))

	)

178 #ifdeà
__ılu¥lus


179 
	#__REDIRECT_NTH
(
Çme
, 
´Ùo
, 
®Ÿs
) \

180 
Çme
 
´Ùo
 
__THROW
 
	`__asm__
 (
	`__ASMNAME
 (#®Ÿs))

	)

182 
	#__REDIRECT_NTH
(
Çme
, 
´Ùo
, 
®Ÿs
) \

183 
Çme
 
´Ùo
 
	`__asm__
 (
	`__ASMNAME
 (#®Ÿs)è
__THROW


	)

185 
	#__ASMNAME
(
úame
è
	`__ASMNAME2
 (
__USER_LABEL_PREFIX__
, cÇme)

	)

186 
	#__ASMNAME2
(
´efix
, 
úame
è
	`__STRING
 (´efixè
	)
cname

199 #ià!
defšed
 
__GNUC__
 || __GNUC__ < 2

200 
	#__©Œibu‹__
(
xyz
è

	)

206 #ià
__GNUC_PREREQ
 (2,96)

207 
	#__©Œibu‹_m®loc__
 
	`__©Œibu‹__
 ((
__m®loc__
))

	)

209 
	#__©Œibu‹_m®loc__


	)

215 #ià
__GNUC_PREREQ
 (2,96)

216 
	#__©Œibu‹_pu»__
 
	`__©Œibu‹__
 ((
__pu»__
))

	)

218 
	#__©Œibu‹_pu»__


	)

224 #ià
__GNUC_PREREQ
 (3,1)

225 
	#__©Œibu‹_u£d__
 
	`__©Œibu‹__
 ((
__u£d__
))

	)

226 
	#__©Œibu‹_nošlše__
 
	`__©Œibu‹__
 ((
__nošlše__
))

	)

228 
	#__©Œibu‹_u£d__
 
	`__©Œibu‹__
 ((
__unu£d__
))

	)

229 
	#__©Œibu‹_nošlše__


	)

233 #ià
__GNUC_PREREQ
 (3,2)

234 
	#__©Œibu‹_d•»ÿ‹d__
 
	`__©Œibu‹__
 ((
__d•»ÿ‹d__
))

	)

236 
	#__©Œibu‹_d•»ÿ‹d__


	)

245 #ià
__GNUC_PREREQ
 (2,8)

246 
	#__©Œibu‹_fÜm©_¬g__
(
x
è
	`__©Œibu‹__
 ((
	`__fÜm©_¬g__
 (x)))

	)

248 
	#__©Œibu‹_fÜm©_¬g__
(
x
è

	)

255 #ià
__GNUC_PREREQ
 (2,97)

256 
	#__©Œibu‹_fÜm©_¡rfmÚ__
(
a
,
b
) \

257 
	`__©Œibu‹__
 ((
	`__fÜm©__
 (
__¡rfmÚ__
, 
a
, 
b
)))

	)

259 
	#__©Œibu‹_fÜm©_¡rfmÚ__
(
a
,
b
è

	)

264 #ià
__GNUC_PREREQ
 (3,3)

265 
	#__nÚnuÎ
(
·¿ms
è
	`__©Œibu‹__
 ((
__nÚnuÎ__
…¬ams))

	)

267 
	#__nÚnuÎ
(
·¿ms
)

	)

272 #ià
__GNUC_PREREQ
 (3,4)

273 
	#__©Œibu‹_w¬n_unu£d_»suÉ__
 \

274 
	`__©Œibu‹__
 ((
__w¬n_unu£d_»suÉ__
))

	)

275 #ià
__USE_FORTIFY_LEVEL
 > 0

276 
	#__wur
 
__©Œibu‹_w¬n_unu£d_»suÉ__


	)

279 
	#__©Œibu‹_w¬n_unu£d_»suÉ__


	)

281 #iâdeà
__wur


282 
	#__wur


	)

286 #ià
__GNUC_PREREQ
 (3,2)

287 
	#__®ways_šlše
 
__šlše
 
	`__©Œibu‹__
 ((
__®ways_šlše__
))

	)

289 
	#__®ways_šlše
 
__šlše


	)

294 #ià!
defšed
 
__ılu¥lus
 || 
__GNUC_PREREQ
 (4,3)

295 #ià
defšed
 
__GNUC_STDC_INLINE__
 || defšed 
__ılu¥lus


296 
	#__ex‹º_šlše
 
__šlše
 
	`__©Œibu‹__
 ((
__gnu_šlše__
))

	)

297 #ià
__GNUC_PREREQ
 (4,3)

298 
	#__ex‹º_®ways_šlše
 \

299 
__®ways_šlše
 
	`__©Œibu‹__
 ((
__gnu_šlše__
, 
__¬tificŸl__
))

	)

301 
	#__ex‹º_®ways_šlše
 \

302 
__®ways_šlše
 
	`__©Œibu‹__
 ((
__gnu_šlše__
))

	)

305 
	#__ex‹º_šlše
 
__šlše


	)

306 #ià
__GNUC_PREREQ
 (4,3)

307 
	#__ex‹º_®ways_šlše
 \

308 
__®ways_šlše
 
	`__©Œibu‹__
 ((
__¬tificŸl__
))

	)

310 
	#__ex‹º_®ways_šlše
 
__®ways_šlše


	)

317 #ià
__GNUC_PREREQ
 (4,3)

318 
	#__va_¬g_·ck
(è
	`__butš_va_¬g_·ck
 ()

	)

319 
	#__va_¬g_·ck_Ën
(è
	`__butš_va_¬g_·ck_Ën
 ()

	)

326 #ià!
__GNUC_PREREQ
 (2,8)

327 
	#__ex‹nsiÚ__


	)

331 #ià!
__GNUC_PREREQ
 (2,92)

332 
	#__»¡riù


	)

338 #ià
__GNUC_PREREQ
 (3,1è&& !
defšed
 
__GNUG__


339 
	#__»¡riù_¬r
 
__»¡riù


	)

341 #ifdeà
__GNUC__


342 
	#__»¡riù_¬r


	)

344 #ià
defšed
 
__STDC_VERSION__
 && __STDC_VERSION__ >= 199901L

345 
	#__»¡riù_¬r
 
»¡riù


	)

348 
	#__»¡riù_¬r


	)

353 
	~<b™s/wÜdsize.h
>

355 #ià
defšed
 
__LONG_DOUBLE_MATH_OPTIONAL
 && defšed 
__NO_LONG_DOUBLE_MATH


356 
	#__LDBL_COMPAT
 1

	)

357 #ifdeà
__REDIRECT


358 
	#__LDBL_REDIR1
(
Çme
, 
´Ùo
, 
®Ÿs
è
	`__REDIRECT
 (Çme,…rÙo,‡lŸs)

	)

359 
	#__LDBL_REDIR
(
Çme
, 
´Ùo
) \

360 
	`__LDBL_REDIR1
 (
Çme
, 
´Ùo
, 
__Ædbl_
##Çme)

	)

361 
	#__LDBL_REDIR1_NTH
(
Çme
, 
´Ùo
, 
®Ÿs
è
	`__REDIRECT_NTH
 (Çme,…rÙo,‡lŸs)

	)

362 
	#__LDBL_REDIR_NTH
(
Çme
, 
´Ùo
) \

363 
	`__LDBL_REDIR1_NTH
 (
Çme
, 
´Ùo
, 
__Ædbl_
##Çme)

	)

364 
	#__LDBL_REDIR1_DECL
(
Çme
, 
®Ÿs
) \

365 
	`__ty³of
 (
Çme
èÇm
	`__asm
 (
	`__ASMNAME
 (#®Ÿs));

	)

366 
	#__LDBL_REDIR_DECL
(
Çme
) \

367 
	`__ty³of
 (
Çme
èÇm
	`__asm
 (
	`__ASMNAME
 ("__Ædbl_" #Çme));

	)

368 
	#__REDIRECT_LDBL
(
Çme
, 
´Ùo
, 
®Ÿs
) \

369 
	`__LDBL_REDIR1
 (
Çme
, 
´Ùo
, 
__Ædbl_
##
®Ÿs
)

	)

370 
	#__REDIRECT_NTH_LDBL
(
Çme
, 
´Ùo
, 
®Ÿs
) \

371 
	`__LDBL_REDIR1_NTH
 (
Çme
, 
´Ùo
, 
__Ædbl_
##
®Ÿs
)

	)

374 #ià!
defšed
 
__LDBL_COMPAT
 || !defšed 
__REDIRECT


375 
	#__LDBL_REDIR1
(
Çme
, 
´Ùo
, 
®Ÿs
èÇm
	)
proto

376 
	#__LDBL_REDIR
(
Çme
, 
´Ùo
èÇm
	)
proto

377 
	#__LDBL_REDIR1_NTH
(
Çme
, 
´Ùo
, 
®Ÿs
èÇm´ÙØ
__THROW


	)

378 
	#__LDBL_REDIR_NTH
(
Çme
, 
´Ùo
èÇm´ÙØ
__THROW


	)

379 
	#__LDBL_REDIR_DECL
(
Çme
)

	)

380 #ifdeà
__REDIRECT


381 
	#__REDIRECT_LDBL
(
Çme
, 
´Ùo
, 
®Ÿs
è
	`__REDIRECT
 (Çme,…rÙo,‡lŸs)

	)

382 
	#__REDIRECT_NTH_LDBL
(
Çme
, 
´Ùo
, 
®Ÿs
) \

383 
	`__REDIRECT_NTH
 (
Çme
, 
´Ùo
, 
®Ÿs
)

	)

	@/usr/include/sys/ucontext.h

19 #iâdeà
_SYS_UCONTEXT_H


20 
	#_SYS_UCONTEXT_H
 1

	)

22 
	~<ã©u»s.h
>

23 
	~<sigÇl.h
>

24 
	~<b™s/wÜdsize.h
>

28 
	~<b™s/sigcÚ‹xt.h
>

30 #ià
__WORDSIZE
 == 64

33 
	tg»g_t
;

36 
	#NGREG
 23

	)

39 
g»g_t
 
	tg»g£t_t
[
NGREG
];

41 #ifdeà
__USE_GNU


45 
	mREG_R8
 = 0,

46 
	#REG_R8
 
REG_R8


	)

47 
	mREG_R9
,

48 
	#REG_R9
 
REG_R9


	)

49 
	mREG_R10
,

50 
	#REG_R10
 
REG_R10


	)

51 
	mREG_R11
,

52 
	#REG_R11
 
REG_R11


	)

53 
	mREG_R12
,

54 
	#REG_R12
 
REG_R12


	)

55 
	mREG_R13
,

56 
	#REG_R13
 
REG_R13


	)

57 
	mREG_R14
,

58 
	#REG_R14
 
REG_R14


	)

59 
	mREG_R15
,

60 
	#REG_R15
 
REG_R15


	)

61 
	mREG_RDI
,

62 
	#REG_RDI
 
REG_RDI


	)

63 
	mREG_RSI
,

64 
	#REG_RSI
 
REG_RSI


	)

65 
	mREG_RBP
,

66 
	#REG_RBP
 
REG_RBP


	)

67 
	mREG_RBX
,

68 
	#REG_RBX
 
REG_RBX


	)

69 
	mREG_RDX
,

70 
	#REG_RDX
 
REG_RDX


	)

71 
	mREG_RAX
,

72 
	#REG_RAX
 
REG_RAX


	)

73 
	mREG_RCX
,

74 
	#REG_RCX
 
REG_RCX


	)

75 
	mREG_RSP
,

76 
	#REG_RSP
 
REG_RSP


	)

77 
	mREG_RIP
,

78 
	#REG_RIP
 
REG_RIP


	)

79 
	mREG_EFL
,

80 
	#REG_EFL
 
REG_EFL


	)

81 
	mREG_CSGSFS
,

82 
	#REG_CSGSFS
 
REG_CSGSFS


	)

83 
	mREG_ERR
,

84 
	#REG_ERR
 
REG_ERR


	)

85 
	mREG_TRAPNO
,

86 
	#REG_TRAPNO
 
REG_TRAPNO


	)

87 
	mREG_OLDMASK
,

88 
	#REG_OLDMASK
 
REG_OLDMASK


	)

89 
	mREG_CR2


90 
	#REG_CR2
 
REG_CR2


	)

94 
	s_libc_åx»g


96 
	msignifiÿnd
[4];

97 
	mexpÚ’t
;

98 
	m·ddšg
[3];

101 
	s_libc_xmm»g


103 
__ušt32_t
 
	m–em’t
[4];

106 
	s_libc_å¡©e


109 
__ušt16_t
 
	mcwd
;

110 
__ušt16_t
 
	mswd
;

111 
__ušt16_t
 
	máw
;

112 
__ušt16_t
 
	mfİ
;

113 
__ušt64_t
 
	mr
;

114 
__ušt64_t
 
	mrdp
;

115 
__ušt32_t
 
	mmxc¤
;

116 
__ušt32_t
 
	mmxü_mask
;

117 
_libc_åx»g
 
	m_¡
[8];

118 
_libc_xmm»g
 
	m_xmm
[16];

119 
__ušt32_t
 
	m·ddšg
[24];

123 
_libc_å¡©e
 *
	tå»g£t_t
;

128 
g»g£t_t
 
	mg»gs
;

130 
å»g£t_t
 
	må»gs
;

131 
	m__»£rved1
 [8];

132 } 
	tmcÚ‹xt_t
;

135 
	sucÚ‹xt


137 
	muc_æags
;

138 
ucÚ‹xt
 *
	muc_lšk
;

139 
¡ack_t
 
	muc_¡ack
;

140 
mcÚ‹xt_t
 
	muc_mcÚ‹xt
;

141 
__sig£t_t
 
	muc_sigmask
;

142 
_libc_å¡©e
 
	m__å»gs_mem
;

143 } 
	tucÚ‹xt_t
;

148 
	tg»g_t
;

151 
	#NGREG
 19

	)

154 
g»g_t
 
	tg»g£t_t
[
NGREG
];

156 #ifdeà
__USE_GNU


160 
	mREG_GS
 = 0,

161 
	#REG_GS
 
REG_GS


	)

162 
	mREG_FS
,

163 
	#REG_FS
 
REG_FS


	)

164 
	mREG_ES
,

165 
	#REG_ES
 
REG_ES


	)

166 
	mREG_DS
,

167 
	#REG_DS
 
REG_DS


	)

168 
	mREG_EDI
,

169 
	#REG_EDI
 
REG_EDI


	)

170 
	mREG_ESI
,

171 
	#REG_ESI
 
REG_ESI


	)

172 
	mREG_EBP
,

173 
	#REG_EBP
 
REG_EBP


	)

174 
	mREG_ESP
,

175 
	#REG_ESP
 
REG_ESP


	)

176 
	mREG_EBX
,

177 
	#REG_EBX
 
REG_EBX


	)

178 
	mREG_EDX
,

179 
	#REG_EDX
 
REG_EDX


	)

180 
	mREG_ECX
,

181 
	#REG_ECX
 
REG_ECX


	)

182 
	mREG_EAX
,

183 
	#REG_EAX
 
REG_EAX


	)

184 
	mREG_TRAPNO
,

185 
	#REG_TRAPNO
 
REG_TRAPNO


	)

186 
	mREG_ERR
,

187 
	#REG_ERR
 
REG_ERR


	)

188 
	mREG_EIP
,

189 
	#REG_EIP
 
REG_EIP


	)

190 
	mREG_CS
,

191 
	#REG_CS
 
REG_CS


	)

192 
	mREG_EFL
,

193 
	#REG_EFL
 
REG_EFL


	)

194 
	mREG_UESP
,

195 
	#REG_UESP
 
REG_UESP


	)

196 
	mREG_SS


197 
	#REG_SS
 
REG_SS


	)

202 
	s_libc_å»g


204 
	msignifiÿnd
[4];

205 
	mexpÚ’t
;

208 
	s_libc_å¡©e


210 
	mcw
;

211 
	msw
;

212 
	mg
;

213 
	moff
;

214 
	mcs£l
;

215 
	md©aoff
;

216 
	md©a£l
;

217 
_libc_å»g
 
	m_¡
[8];

218 
	m¡©us
;

222 
_libc_å¡©e
 *
	tå»g£t_t
;

227 
g»g£t_t
 
	mg»gs
;

230 
å»g£t_t
 
	må»gs
;

231 
	mŞdmask
;

232 
	mü2
;

233 } 
	tmcÚ‹xt_t
;

236 
	sucÚ‹xt


238 
	muc_æags
;

239 
ucÚ‹xt
 *
	muc_lšk
;

240 
¡ack_t
 
	muc_¡ack
;

241 
mcÚ‹xt_t
 
	muc_mcÚ‹xt
;

242 
__sig£t_t
 
	muc_sigmask
;

243 
_libc_å¡©e
 
	m__å»gs_mem
;

244 } 
	tucÚ‹xt_t
;

	@/usr/include/bits/libc-lock.h

20 #iâdeà
_BITS_LIBC_LOCK_H


21 
	#_BITS_LIBC_LOCK_H
 1

	)

23 
	~<±h»ad.h
>

24 
	#__Ãed_NULL


	)

25 
	~<¡ddef.h
>

34 #ifdeà
_LIBC


35 
	~<lowËv–lock.h
>

36 
	~<s.h
>

37 
	~<±h»ad-funùiÚs.h
>

38 
	~<”ºo.h
>

39 
	~<gnu/İtiÚ-groups.h
>

43 #ià
defšed
 
_LIBC
 || defšed 
_IO_MTSAFE_IO


44 #ià(
defšed
 
NOT_IN_libc
 && !defšed 
IS_IN_lib±h»ad
è|| !defšed 
_LIBC


45 
±h»ad_mu‹x_t
 
	t__libc_lock_t
;

46 ¡ruù { 
±h»ad_mu‹x_t
 
	mmu‹x
; } 
	t__libc_lock_»cursive_t
;

48 
	t__libc_lock_t
;

49 ¡ruù { 
	mlock
; 
	mút
; *
	mowÃr
; } 
	t__libc_lock_»cursive_t
;

51 ¡ruù { 
±h»ad_mu‹x_t
 
	mmu‹x
; } 
	t__¹ld_lock_»cursive_t
;

52 #ifdeà
__USE_UNIX98


53 
±h»ad_rwlock_t
 
	t__libc_rwlock_t
;

55 
__libc_rwlock_İaque__
 
	t__libc_rwlock_t
;

58 
__libc_lock_İaque__
 
	t__libc_lock_t
;

59 
__libc_lock_»cursive_İaque__
 
	t__libc_lock_»cursive_t
;

60 
__libc_rwlock_İaque__
 
	t__libc_rwlock_t
;

64 
±h»ad_key_t
 
	t__libc_key_t
;

73 
	#__libc_lock_defše
(
CLASS
,
NAME
) \

74 
CLASS
 
__libc_lock_t
 
NAME
;

	)

75 
	#__libc_rwlock_defše
(
CLASS
,
NAME
) \

76 
CLASS
 
__libc_rwlock_t
 
NAME
;

	)

77 
	#__libc_lock_defše_»cursive
(
CLASS
,
NAME
) \

78 
CLASS
 
__libc_lock_»cursive_t
 
NAME
;

	)

79 
	#__¹ld_lock_defše_»cursive
(
CLASS
,
NAME
) \

80 
CLASS
 
__¹ld_lock_»cursive_t
 
NAME
;

	)

91 #ià
defšed
 
_LIBC
 && (!defšed 
NOT_IN_libc
 || defšed 
IS_IN_lib±h»ad
)

92 #ià
LLL_LOCK_INITIALIZER
 == 0

93 
	#__libc_lock_defše_š™Ÿlized
(
CLASS
,
NAME
) \

94 
CLASS
 
__libc_lock_t
 
NAME
;

	)

96 
	#__libc_lock_defše_š™Ÿlized
(
CLASS
,
NAME
) \

97 
CLASS
 
__libc_lock_t
 
NAME
 = 
LLL_LOCK_INITIALIZER
;

	)

100 #ià
__LT_SPINLOCK_INIT
 == 0

101 
	#__libc_lock_defše_š™Ÿlized
(
CLASS
,
NAME
) \

102 
CLASS
 
__libc_lock_t
 
NAME
;

	)

104 
	#__libc_lock_defše_š™Ÿlized
(
CLASS
,
NAME
) \

105 
CLASS
 
__libc_lock_t
 
NAME
 = 
PTHREAD_MUTEX_INITIALIZER
;

	)

109 
	#__libc_rwlock_defše_š™Ÿlized
(
CLASS
,
NAME
) \

110 
CLASS
 
__libc_rwlock_t
 
NAME
 = 
PTHREAD_RWLOCK_INITIALIZER
;

	)

114 #ià
defšed
 
_LIBC
 && (!defšed 
NOT_IN_libc
 || defšed 
IS_IN_lib±h»ad
)

115 #ià
LLL_LOCK_INITIALIZER
 == 0

116 
	#__libc_lock_defše_š™Ÿlized_»cursive
(
CLASS
,
NAME
) \

117 
CLASS
 
__libc_lock_»cursive_t
 
NAME
;

	)

119 
	#__libc_lock_defše_š™Ÿlized_»cursive
(
CLASS
,
NAME
) \

120 
CLASS
 
__libc_lock_»cursive_t
 
NAME
 = 
_LIBC_LOCK_RECURSIVE_INITIALIZER
;

	)

122 
	#_LIBC_LOCK_RECURSIVE_INITIALIZER
 \

123 { 
LLL_LOCK_INITIALIZER
, 0, 
NULL
 }

	)

125 
	#__libc_lock_defše_š™Ÿlized_»cursive
(
CLASS
,
NAME
) \

126 
CLASS
 
__libc_lock_»cursive_t
 
NAME
 = 
_LIBC_LOCK_RECURSIVE_INITIALIZER
;

	)

127 
	#_LIBC_LOCK_RECURSIVE_INITIALIZER
 \

128 {
PTHREAD_RECURSIVE_MUTEX_INITIALIZER_NP
}

	)

131 
	#__¹ld_lock_defše_š™Ÿlized_»cursive
(
CLASS
,
NAME
) \

132 
CLASS
 
__¹ld_lock_»cursive_t
 
NAME
 = 
_RTLD_LOCK_RECURSIVE_INITIALIZER
;

	)

133 
	#_RTLD_LOCK_RECURSIVE_INITIALIZER
 \

134 {
PTHREAD_RECURSIVE_MUTEX_INITIALIZER_NP
}

	)

136 
	#__¹ld_lock_š™Ÿlize
(
NAME
) \

137 (è((
NAME
èğ(
__¹ld_lock_»cursive_t
è
_RTLD_LOCK_RECURSIVE_INITIALIZER
)

	)

144 #ifdeà
__PIC__


145 
	#__libc_maybe_ÿÎ
(
FUNC
, 
ARGS
, 
ELSE
) \

146 (
	`__ex‹nsiÚ__
 ({ 
	`__ty³of
 (
FUNC
è*
_â
 = (FUNC); \

147 
_â
 !ğ
NULL
 ? (*_âè
ARGS
 : 
ELSE
; }))

	)

149 
	#__libc_maybe_ÿÎ
(
FUNC
, 
ARGS
, 
ELSE
) \

150 (
FUNC
 !ğ
NULL
 ? FUNC 
ARGS
 : 
ELSE
)

	)

154 #ià
defšed
 
SHARED
 && !defšed 
NOT_IN_libc


155 
	#PTFAVAIL
(
NAME
è
__libc_±h»ad_funùiÚs_š™


	)

156 
	#__libc_±f_ÿÎ
(
FUNC
, 
ARGS
, 
ELSE
) \

157 (
__libc_±h»ad_funùiÚs_š™
 ? 
	`PTHFCT_CALL
 (
±r_
##
FUNC
, 
ARGS
è: 
ELSE
)

	)

158 
	#__libc_±f_ÿÎ_®ways
(
FUNC
, 
ARGS
) \

159 
	`PTHFCT_CALL
 (
±r_
##
FUNC
, 
ARGS
)

	)

161 
	#PTFAVAIL
(
NAME
è(NAME !ğ
NULL
)

	)

162 
	#__libc_±f_ÿÎ
(
FUNC
, 
ARGS
, 
ELSE
) \

163 
	`__libc_maybe_ÿÎ
 (
FUNC
, 
ARGS
, 
ELSE
)

	)

164 
	#__libc_±f_ÿÎ_®ways
(
FUNC
, 
ARGS
) \

165 
FUNC
 
ARGS


	)

171 #ià
defšed
 
_LIBC
 && (!defšed 
NOT_IN_libc
 || defšed 
IS_IN_lib±h»ad
)

172 
	#__libc_lock_š™
(
NAME
è((NAMEèğ
LLL_LOCK_INITIALIZER
, 0)

	)

174 
	#__libc_lock_š™
(
NAME
) \

175 
	`__libc_maybe_ÿÎ
 (
__±h»ad_mu‹x_š™
, (&(
NAME
), 
NULL
), 0)

	)

177 #ià
defšed
 
SHARED
 && !defšed 
NOT_IN_libc


180 
	#__libc_rwlock_š™
(
NAME
) \

181 (
	`__butš_mem£t
 (&(
NAME
), '\0',  (NAME)), 0)

	)

183 
	#__libc_rwlock_š™
(
NAME
) \

184 
	`__libc_maybe_ÿÎ
 (
__±h»ad_rwlock_š™
, (&(
NAME
), 
NULL
), 0)

	)

188 #ià
defšed
 
_LIBC
 && (!defšed 
NOT_IN_libc
 || defšed 
IS_IN_lib±h»ad
)

189 
	#__libc_lock_š™_»cursive
(
NAME
) \

190 ((
NAME
èğ(
__libc_lock_»cursive_t
è
_LIBC_LOCK_RECURSIVE_INITIALIZER
, 0)

	)

192 
	#__libc_lock_š™_»cursive
(
NAME
) \

194 ià(
__±h»ad_mu‹x_š™
 !ğ
NULL
) \

196 
±h»ad_mu‹x©Œ_t
 
__©Œ
; \

197 
	`__±h»ad_mu‹x©Œ_š™
 (&
__©Œ
); \

198 
	`__±h»ad_mu‹x©Œ_£‰y³
 (&
__©Œ
, 
PTHREAD_MUTEX_RECURSIVE_NP
); \

199 
	`__±h»ad_mu‹x_š™
 (&(
NAME
).
mu‹x
, &
__©Œ
); \

200 
	`__±h»ad_mu‹x©Œ_de¡roy
 (&
__©Œ
); \

202 } 0)

	)

205 
	#__¹ld_lock_š™_»cursive
(
NAME
) \

207 ià(
__±h»ad_mu‹x_š™
 !ğ
NULL
) \

209 
±h»ad_mu‹x©Œ_t
 
__©Œ
; \

210 
	`__±h»ad_mu‹x©Œ_š™
 (&
__©Œ
); \

211 
	`__±h»ad_mu‹x©Œ_£‰y³
 (&
__©Œ
, 
PTHREAD_MUTEX_RECURSIVE_NP
); \

212 
	`__±h»ad_mu‹x_š™
 (&(
NAME
).
mu‹x
, &
__©Œ
); \

213 
	`__±h»ad_mu‹x©Œ_de¡roy
 (&
__©Œ
); \

215 } 0)

	)

220 #ià
defšed
 
_LIBC
 && (!defšed 
NOT_IN_libc
 || defšed 
IS_IN_lib±h»ad
)

221 
	#__libc_lock_fši
(
NAME
è((è0)

	)

223 
	#__libc_lock_fši
(
NAME
) \

224 
	`__libc_maybe_ÿÎ
 (
__±h»ad_mu‹x_de¡roy
, (&(
NAME
)), 0)

	)

226 #ià
defšed
 
SHARED
 && !defšed 
NOT_IN_libc


227 
	#__libc_rwlock_fši
(
NAME
è((è0)

	)

229 
	#__libc_rwlock_fši
(
NAME
) \

230 
	`__libc_maybe_ÿÎ
 (
__±h»ad_rwlock_de¡roy
, (&(
NAME
)), 0)

	)

234 #ià
defšed
 
_LIBC
 && (!defšed 
NOT_IN_libc
 || defšed 
IS_IN_lib±h»ad
)

235 
	#__libc_lock_fši_»cursive
(
NAME
è((è0)

	)

237 
	#__libc_lock_fši_»cursive
(
NAME
) \

238 
	`__libc_maybe_ÿÎ
 (
__±h»ad_mu‹x_de¡roy
, (&(
NAME
)), 0)

	)

242 #ià
defšed
 
_LIBC
 && (!defšed 
NOT_IN_libc
 || defšed 
IS_IN_lib±h»ad
)

243 #ià
__OPTION_EGLIBC_BIG_MACROS
 != 1

247 
__libc_lock_lock_â
 (
__libc_lock_t
 *);

248 
libc_hidd’_´Ùo
 (
__libc_lock_lock_â
);

250 #ià
__OPTION_EGLIBC_BIG_MACROS


251 
	#__libc_lock_lock
(
NAME
) \

252 ({ 
	`Îl_lock
 (
NAME
, 
LLL_PRIVATE
); 0; })

	)

254 
	#__libc_lock_lock
(
NAME
) \

255 
	`__libc_lock_lock_â
 (&(
NAME
))

	)

258 
	#__libc_lock_lock
(
NAME
) \

259 
	`__libc_maybe_ÿÎ
 (
__±h»ad_mu‹x_lock
, (&(
NAME
)), 0)

	)

261 
	#__libc_rwlock_rdlock
(
NAME
) \

262 
	`__libc_±f_ÿÎ
 (
__±h»ad_rwlock_rdlock
, (&(
NAME
)), 0)

	)

263 
	#__libc_rwlock_w¾ock
(
NAME
) \

264 
	`__libc_±f_ÿÎ
 (
__±h»ad_rwlock_w¾ock
, (&(
NAME
)), 0)

	)

267 #ià
defšed
 
_LIBC
 && (!defšed 
NOT_IN_libc
 || defšed 
IS_IN_lib±h»ad
)

268 #ià
__OPTION_EGLIBC_BIG_MACROS
 != 1

272 
__libc_lock_lock_»cursive_â
 (
__libc_lock_»cursive_t
 *);

273 
libc_hidd’_´Ùo
 (
__libc_lock_lock_»cursive_â
);

275 #ià
__OPTION_EGLIBC_BIG_MACROS


276 
	#__libc_lock_lock_»cursive
(
NAME
) \

278 *
£lf
 = 
THREAD_SELF
; \

279 ià((
NAME
).
owÃr
 !ğ
£lf
) \

281 
	`Îl_lock
 ((
NAME
).
lock
, 
LLL_PRIVATE
); \

282 (
NAME
).
owÃr
 = 
£lf
; \

284 ++(
NAME
).
út
; \

285 } 0)

	)

287 
	#__libc_lock_lock_»cursive
(
NAME
) \

288 
	`__libc_lock_lock_»cursive_â
 (&(
NAME
))

	)

291 
	#__libc_lock_lock_»cursive
(
NAME
) \

292 
	`__libc_maybe_ÿÎ
 (
__±h»ad_mu‹x_lock
, (&(
NAME
).
mu‹x
), 0)

	)

296 #ià
defšed
 
_LIBC
 && (!defšed 
NOT_IN_libc
 || defšed 
IS_IN_lib±h»ad
)

297 #ià
__OPTION_EGLIBC_BIG_MACROS
 != 1

301 
__libc_lock_Œylock_â
 (
__libc_lock_t
 *);

302 
libc_hidd’_´Ùo
 (
__libc_lock_Œylock_â
);

304 #ià
__OPTION_EGLIBC_BIG_MACROS


305 
	#__libc_lock_Œylock
(
NAME
) \

306 
	`Îl_Œylock
 (
NAME
)

	)

308 
	#__libc_lock_Œylock
(
NAME
) \

309 
	`__libc_lock_Œylock_â
 (&(
NAME
))

	)

312 
	#__libc_lock_Œylock
(
NAME
) \

313 
	`__libc_maybe_ÿÎ
 (
__±h»ad_mu‹x_Œylock
, (&(
NAME
)), 0)

	)

315 
	#__libc_rwlock_Œyrdlock
(
NAME
) \

316 
	`__libc_maybe_ÿÎ
 (
__±h»ad_rwlock_Œyrdlock
, (&(
NAME
)), 0)

	)

317 
	#__libc_rwlock_Œyw¾ock
(
NAME
) \

318 
	`__libc_maybe_ÿÎ
 (
__±h»ad_rwlock_Œyw¾ock
, (&(
NAME
)), 0)

	)

321 #ià
defšed
 
_LIBC
 && (!defšed 
NOT_IN_libc
 || defšed 
IS_IN_lib±h»ad
)

322 #ià
__OPTION_EGLIBC_BIG_MACROS
 != 1

326 
__libc_lock_Œylock_»cursive_â
 (
__libc_lock_»cursive_t
 *);

327 
libc_hidd’_´Ùo
 (
__libc_lock_Œylock_»cursive_â
);

329 #ià
__OPTION_EGLIBC_BIG_MACROS


330 
	#__libc_lock_Œylock_»cursive
(
NAME
) \

332 
»suÉ
 = 0; \

333 *
£lf
 = 
THREAD_SELF
; \

334 ià((
NAME
).
owÃr
 !ğ
£lf
) \

336 ià(
	`Îl_Œylock
 ((
NAME
).
lock
) == 0) \

338 (
NAME
).
owÃr
 = 
£lf
; \

339 (
NAME
).
út
 = 1; \

342 
»suÉ
 = 
EBUSY
; \

345 ++(
NAME
).
út
; \

346 
»suÉ
; \

347 })

	)

349 
	#__libc_lock_Œylock_»cursive
(
NAME
) \

350 
	`__libc_lock_Œylock_»cursive_â
 (&(
NAME
))

	)

353 
	#__libc_lock_Œylock_»cursive
(
NAME
) \

354 
	`__libc_maybe_ÿÎ
 (
__±h»ad_mu‹x_Œylock
, (&(
NAME
)), 0)

	)

357 
	#__¹ld_lock_Œylock_»cursive
(
NAME
) \

358 
	`__libc_maybe_ÿÎ
 (
__±h»ad_mu‹x_Œylock
, (&(
NAME
).
mu‹x
), 0)

	)

361 #ià
defšed
 
_LIBC
 && (!defšed 
NOT_IN_libc
 || defšed 
IS_IN_lib±h»ad
)

362 #ià
__OPTION_EGLIBC_BIG_MACROS
 != 1

366 
__libc_lock_uÆock_â
 (
__libc_lock_t
 *);

367 
libc_hidd’_´Ùo
 (
__libc_lock_uÆock_â
);

369 #ià
__OPTION_EGLIBC_BIG_MACROS


370 
	#__libc_lock_uÆock
(
NAME
) \

371 
	`Îl_uÆock
 (
NAME
, 
LLL_PRIVATE
)

	)

373 
	#__libc_lock_uÆock
(
NAME
) \

374 
	`__libc_lock_uÆock_â
 (&(
NAME
))

	)

377 
	#__libc_lock_uÆock
(
NAME
) \

378 
	`__libc_maybe_ÿÎ
 (
__±h»ad_mu‹x_uÆock
, (&(
NAME
)), 0)

	)

380 
	#__libc_rwlock_uÆock
(
NAME
) \

381 
	`__libc_±f_ÿÎ
 (
__±h»ad_rwlock_uÆock
, (&(
NAME
)), 0)

	)

384 #ià
defšed
 
_LIBC
 && (!defšed 
NOT_IN_libc
 || defšed 
IS_IN_lib±h»ad
)

385 #ià
__OPTION_EGLIBC_BIG_MACROS
 != 1

389 
__libc_lock_uÆock_»cursive_â
 (
__libc_lock_»cursive_t
 *);

390 
libc_hidd’_´Ùo
 (
__libc_lock_uÆock_»cursive_â
);

392 #ià
__OPTION_EGLIBC_BIG_MACROS


394 
	#__libc_lock_uÆock_»cursive
(
NAME
) \

396 ià(--(
NAME
).
út
 == 0) \

398 (
NAME
).
owÃr
 = 
NULL
; \

399 
	`Îl_uÆock
 ((
NAME
).
lock
, 
LLL_PRIVATE
); \

401 } 0)

	)

403 
	#__libc_lock_uÆock_»cursive
(
NAME
) \

404 
	`__libc_lock_uÆock_»cursive_â
 (&(
NAME
))

	)

407 
	#__libc_lock_uÆock_»cursive
(
NAME
) \

408 
	`__libc_maybe_ÿÎ
 (
__±h»ad_mu‹x_uÆock
, (&(
NAME
)), 0)

	)

411 #ià
defšed
 
_LIBC
 && defšed 
SHARED


412 
	#__¹ld_lock_deçuÉ_lock_»cursive
(
lock
) \

413 ++((
±h»ad_mu‹x_t
 *)(
lock
))->
__d©a
.
__couÁ
;

	)

415 
	#__¹ld_lock_deçuÉ_uÆock_»cursive
(
lock
) \

416 --((
±h»ad_mu‹x_t
 *)(
lock
))->
__d©a
.
__couÁ
;

	)

418 
	#__¹ld_lock_lock_»cursive
(
NAME
) \

419 
	`GL
(
dl_¹ld_lock_»cursive
è(&(
NAME
).
mu‹x
)

	)

421 
	#__¹ld_lock_uÆock_»cursive
(
NAME
) \

422 
	`GL
(
dl_¹ld_uÆock_»cursive
è(&(
NAME
).
mu‹x
)

	)

424 
	#__¹ld_lock_lock_»cursive
(
NAME
) \

425 
	`__libc_maybe_ÿÎ
 (
__±h»ad_mu‹x_lock
, (&(
NAME
).
mu‹x
), 0)

	)

427 
	#__¹ld_lock_uÆock_»cursive
(
NAME
) \

428 
	`__libc_maybe_ÿÎ
 (
__±h»ad_mu‹x_uÆock
, (&(
NAME
).
mu‹x
), 0)

	)

432 #ià
PTHREAD_ONCE_INIT
 == 0

435 
	#__libc_Úû_defše
(
CLASS
, 
NAME
) \

436 
CLASS
 
±h»ad_Úû_t
 
NAME


	)

438 
	#__libc_Úû_defše
(
CLASS
, 
NAME
) \

439 
CLASS
 
±h»ad_Úû_t
 
NAME
 = 
PTHREAD_ONCE_INIT


	)

443 
	#__libc_Úû
(
ONCE_CONTROL
, 
INIT_FUNCTION
) \

445 ià(
	`PTFAVAIL
 (
__±h»ad_Úû
)) \

446 
	`__libc_±f_ÿÎ_®ways
 (
__±h»ad_Úû
, (&(
ONCE_CONTROL
), \

447 
INIT_FUNCTION
)); \

448 ià((
ONCE_CONTROL
è=ğ
PTHREAD_ONCE_INIT
) { \

449 
	`INIT_FUNCTION
 (); \

450 (
ONCE_CONTROL
) |= 2; \

452 } 0)

	)

455 
	#__libc_Úû_g‘
(
ONCE_CONTROL
) \

456 ((
ONCE_CONTROL
è!ğ
PTHREAD_ONCE_INIT
)

	)

462 
_±h»ad_ş—nup_push
 (
_±h»ad_ş—nup_bufãr
 *
bufãr
,

463 (*
routše
è(*), *
¬g
);

464 
	`_±h»ad_ş—nup_pİ
 (
_±h»ad_ş—nup_bufãr
 *
bufãr
,

465 
execu‹
);

466 
	`_±h»ad_ş—nup_push_deãr
 (
_±h»ad_ş—nup_bufãr
 *
bufãr
,

467 (*
routše
è(*), *
¬g
);

468 
	`_±h»ad_ş—nup_pİ_»¡Üe
 (
_±h»ad_ş—nup_bufãr
 *
bufãr
,

469 
execu‹
);

472 
	#__libc_ş—nup_»giÚ_¡¬t
(
DOIT
, 
FCT
, 
ARG
) \

473 { 
_±h»ad_ş—nup_bufãr
 
_bufãr
; \

474 
_ava
; \

475 ià(
DOIT
) { \

476 
_ava
 = 
	`PTFAVAIL
 (
_±h»ad_ş—nup_push_deãr
); \

477 ià(
_ava
) { \

478 
	`__libc_±f_ÿÎ_®ways
 (
_±h»ad_ş—nup_push_deãr
, (&
_bufãr
, 
FCT
, \

479 
ARG
)); \

481 
_bufãr
.
__routše
 = (
FCT
); \

482 
_bufãr
.
__¬g
 = (
ARG
); \

485 
_ava
 = 0; \

486 }

	)

489 
	#__libc_ş—nup_»giÚ_’d
(
DOIT
) \

490 ià(
_ava
) { \

491 
	`__libc_±f_ÿÎ_®ways
 (
_±h»ad_ş—nup_pİ_»¡Üe
, (&
_bufãr
, 
DOIT
));\

492 } ià(
DOIT
) \

493 
_bufãr
.
	`__routše
 (_bufãr.
__¬g
); \

494 
	}

	)
}

497 
	#__libc_ş—nup_’d
(
DOIT
) \

498 ià(
_ava
) { \

499 
	`__libc_±f_ÿÎ_®ways
 (
_±h»ad_ş—nup_pİ_»¡Üe
, (&
_bufãr
, 
DOIT
));\

500 } ià(
DOIT
) \

501 
_bufãr
.
	`__routše
 (_bufãr.
__¬g
)

	)

505 
__ex‹º_šlše
 

506 
	$__libc_ş—nup_routše
 (
__±h»ad_ş—nup_äame
 *
f
)

508 ià(
f
->
__do_™
)

509 
f
->
	`__ÿnûl_routše
 (f->
__ÿnûl_¬g
);

510 
	}
}

512 
	#__libc_ş—nup_push
(
fù
, 
¬g
) \

514 
__±h»ad_ş—nup_äame
 
__şäame
 \

515 
	`__©Œibu‹__
 ((
	`__ş—nup__
 (
__libc_ş—nup_routše
))) \

516 ğ{ .
__ÿnûl_routše
 = (
fù
), .
__ÿnûl_¬g
 = (
¬g
), \

517 .
__do_™
 = 1 };

	)

519 
	#__libc_ş—nup_pİ
(
execu‹
) \

520 
__şäame
.
__do_™
 = (
execu‹
); \

521 } 0)

	)

525 
	#__libc_key_ü—‹
(
KEY
, 
DESTRUCTOR
) \

526 
	`__libc_±f_ÿÎ
 (
__±h»ad_key_ü—‹
, (
KEY
, 
DESTRUCTOR
), 1)

	)

529 
	#__libc_g‘¥ecific
(
KEY
) \

530 
	`__libc_±f_ÿÎ
 (
__±h»ad_g‘¥ecific
, (
KEY
), 
NULL
)

	)

533 
	#__libc_£t¥ecific
(
KEY
, 
VALUE
) \

534 
	`__libc_±f_ÿÎ
 (
__±h»ad_£t¥ecific
, (
KEY
, 
VALUE
), 0)

	)

540 
	#__libc_©fÜk
(
PREPARE
, 
PARENT
, 
CHILD
) \

541 
	`__»gi¡”_©fÜk
 (
PREPARE
, 
PARENT
, 
CHILD
, 
NULL
)

	)

542 
__»gi¡”_©fÜk
 ((*
__´•¬e
) (),

543 (*
__·»Á
) (),

544 (*
__chd
) (),

545 *
__dso_hªdË
);

550 
	`__±h»ad_mu‹x_š™
 (
±h»ad_mu‹x_t
 *
__mu‹x
,

551 
__cÚ¡
 
±h»ad_mu‹x©Œ_t
 *
__mu‹x_©Œ
);

553 
	`__±h»ad_mu‹x_de¡roy
 (
±h»ad_mu‹x_t
 *
__mu‹x
);

555 
	`__±h»ad_mu‹x_Œylock
 (
±h»ad_mu‹x_t
 *
__mu‹x
);

557 
	`__±h»ad_mu‹x_lock
 (
±h»ad_mu‹x_t
 *
__mu‹x
);

559 
	`__±h»ad_mu‹x_uÆock
 (
±h»ad_mu‹x_t
 *
__mu‹x
);

561 
	`__±h»ad_mu‹x©Œ_š™
 (
±h»ad_mu‹x©Œ_t
 *
__©Œ
);

563 
	`__±h»ad_mu‹x©Œ_de¡roy
 (
±h»ad_mu‹x©Œ_t
 *
__©Œ
);

565 
	`__±h»ad_mu‹x©Œ_£‰y³
 (
±h»ad_mu‹x©Œ_t
 *
__©Œ
,

566 
__kšd
);

568 #ifdeà
__USE_UNIX98


569 
	`__±h»ad_rwlock_š™
 (
±h»ad_rwlock_t
 *
__rwlock
,

570 
__cÚ¡
 
±h»ad_rwlock©Œ_t
 *
__©Œ
);

572 
	`__±h»ad_rwlock_de¡roy
 (
±h»ad_rwlock_t
 *
__rwlock
);

574 
	`__±h»ad_rwlock_rdlock
 (
±h»ad_rwlock_t
 *
__rwlock
);

576 
	`__±h»ad_rwlock_Œyrdlock
 (
±h»ad_rwlock_t
 *
__rwlock
);

578 
	`__±h»ad_rwlock_w¾ock
 (
±h»ad_rwlock_t
 *
__rwlock
);

580 
	`__±h»ad_rwlock_Œyw¾ock
 (
±h»ad_rwlock_t
 *
__rwlock
);

582 
	`__±h»ad_rwlock_uÆock
 (
±h»ad_rwlock_t
 *
__rwlock
);

585 
	`__±h»ad_key_ü—‹
 (
±h»ad_key_t
 *
__key
,

586 (*
__de¡r_funùiÚ
) (*));

588 
	`__±h»ad_£t¥ecific
 (
±h»ad_key_t
 
__key
,

589 
__cÚ¡
 *
__poš‹r
);

591 *
	`__±h»ad_g‘¥ecific
 (
±h»ad_key_t
 
__key
);

593 
	`__±h»ad_Úû
 (
±h»ad_Úû_t
 *
__Úû_cÚŒŞ
,

594 (*
__š™_routše
) ());

596 
	`__±h»ad_©fÜk
 ((*
__´•¬e
) (),

597 (*
__·»Á
) (),

598 (*
__chd
) ());

604 #iâdeà
__NO_WEAK_PTHREAD_ALIASES


605 #ifdeà
w—k_ex‹º


606 #ià
_LIBC


607 
	~<bp-sym.h
>

609 
	#BP_SYM
(
sym
è
	)
sym

611 
	`w—k_ex‹º
 (
	$BP_SYM
 (
__±h»ad_mu‹x_š™
))

612 
	`w—k_ex‹º
 (
	$BP_SYM
 (
__±h»ad_mu‹x_de¡roy
))

613 
	`w—k_ex‹º
 (
	$BP_SYM
 (
__±h»ad_mu‹x_lock
))

614 
	`w—k_ex‹º
 (
	$BP_SYM
 (
__±h»ad_mu‹x_Œylock
))

615 
	`w—k_ex‹º
 (
	$BP_SYM
 (
__±h»ad_mu‹x_uÆock
))

616 
	`w—k_ex‹º
 (
	$BP_SYM
 (
__±h»ad_mu‹x©Œ_š™
))

617 
	`w—k_ex‹º
 (
	$BP_SYM
 (
__±h»ad_mu‹x©Œ_de¡roy
))

618 
	`w—k_ex‹º
 (
	$BP_SYM
 (
__±h»ad_mu‹x©Œ_£‰y³
))

619 
	`w—k_ex‹º
 (
	$BP_SYM
 (
__±h»ad_rwlock_š™
))

620 
	`w—k_ex‹º
 (
	$BP_SYM
 (
__±h»ad_rwlock_de¡roy
))

621 
	`w—k_ex‹º
 (
	$BP_SYM
 (
__±h»ad_rwlock_rdlock
))

622 
	`w—k_ex‹º
 (
	$BP_SYM
 (
__±h»ad_rwlock_Œyrdlock
))

623 
	`w—k_ex‹º
 (
	$BP_SYM
 (
__±h»ad_rwlock_w¾ock
))

624 
	`w—k_ex‹º
 (
	$BP_SYM
 (
__±h»ad_rwlock_Œyw¾ock
))

625 
	`w—k_ex‹º
 (
	$BP_SYM
 (
__±h»ad_rwlock_uÆock
))

626 
	`w—k_ex‹º
 (
	$BP_SYM
 (
__±h»ad_key_ü—‹
))

627 
	`w—k_ex‹º
 (
	$BP_SYM
 (
__±h»ad_£t¥ecific
))

628 
	`w—k_ex‹º
 (
	$BP_SYM
 (
__±h»ad_g‘¥ecific
))

629 
	`w—k_ex‹º
 (
	$BP_SYM
 (
__±h»ad_Úû
))

630 
	$w—k_ex‹º
 (
__±h»ad_š™Ÿlize
)

631 
	$w—k_ex‹º
 (
__±h»ad_©fÜk
)

632 
	`w—k_ex‹º
 (
	$BP_SYM
 (
_±h»ad_ş—nup_push_deãr
))

633 
	`w—k_ex‹º
 (
	$BP_SYM
 (
_±h»ad_ş—nup_pİ_»¡Üe
))

634 
	`w—k_ex‹º
 (
	$BP_SYM
 (
±h»ad_£tÿnûl¡©e
))

636 #´agm¨
w—k
 
__±h»ad_mu‹x_š™


637 #´agm¨
w—k
 
__±h»ad_mu‹x_de¡roy


638 #´agm¨
w—k
 
__±h»ad_mu‹x_lock


639 #´agm¨
w—k
 
__±h»ad_mu‹x_Œylock


640 #´agm¨
w—k
 
__±h»ad_mu‹x_uÆock


641 #´agm¨
w—k
 
__±h»ad_mu‹x©Œ_š™


642 #´agm¨
w—k
 
__±h»ad_mu‹x©Œ_de¡roy


643 #´agm¨
w—k
 
__±h»ad_mu‹x©Œ_£‰y³


644 #´agm¨
w—k
 
__±h»ad_rwlock_de¡roy


645 #´agm¨
w—k
 
__±h»ad_rwlock_rdlock


646 #´agm¨
w—k
 
__±h»ad_rwlock_Œyrdlock


647 #´agm¨
w—k
 
__±h»ad_rwlock_w¾ock


648 #´agm¨
w—k
 
__±h»ad_rwlock_Œyw¾ock


649 #´agm¨
w—k
 
__±h»ad_rwlock_uÆock


650 #´agm¨
w—k
 
__±h»ad_key_ü—‹


651 #´agm¨
w—k
 
__±h»ad_£t¥ecific


652 #´agm¨
w—k
 
__±h»ad_g‘¥ecific


653 #´agm¨
w—k
 
__±h»ad_Úû


654 #´agm¨
w—k
 
__±h»ad_š™Ÿlize


655 #´agm¨
w—k
 
__±h»ad_©fÜk


656 #´agm¨
w—k
 
_±h»ad_ş—nup_push_deãr


657 #´agm¨
w—k
 
_±h»ad_ş—nup_pİ_»¡Üe


658 #´agm¨
w—k
 
±h»ad_£tÿnûl¡©e


	@/usr/include/gconv.h

23 #iâdeà
_GCONV_H


24 
	#_GCONV_H
 1

	)

26 
	~<ã©u»s.h
>

27 
	#__Ãed_mb¡©e_t


	)

28 
	#__Ãed_wšt_t


	)

29 
	~<wch¬.h
>

30 
	#__Ãed_size_t


	)

31 
	#__Ãed_wch¬_t


	)

32 
	~<¡ddef.h
>

35 
	#__UNKNOWN_10646_CHAR
 ((
wch¬_t
è0xfffd)

	)

40 
	m__GCONV_OK
 = 0,

41 
	m__GCONV_NOCONV
,

42 
	m__GCONV_NODB
,

43 
	m__GCONV_NOMEM
,

45 
	m__GCONV_EMPTY_INPUT
,

46 
	m__GCONV_FULL_OUTPUT
,

47 
	m__GCONV_ILLEGAL_INPUT
,

48 
	m__GCONV_INCOMPLETE_INPUT
,

50 
	m__GCONV_ILLEGAL_DESCRIPTOR
,

51 
	m__GCONV_INTERNAL_ERROR


58 
	m__GCONV_IS_LAST
 = 0x0001,

59 
	m__GCONV_IGNORE_ERRORS
 = 0x0002

64 
	g__gcÚv_¡•
;

65 
	g__gcÚv_¡•_d©a
;

66 
	g__gcÚv_lßded_objeù
;

67 
	g__gcÚv_Œªs_d©a
;

71 (*
	t__gcÚv_fù
è(
	t__gcÚv_¡•
 *, 
	t__gcÚv_¡•_d©a
 *,

72 
	t__cÚ¡
 **, __const *,

73 **, 
	tsize_t
 *, , );

76 
	$wšt_t
 (*
	t__gcÚv_btowc_fù
è(
	t__gcÚv_¡•
 *, );

79 (*
	t__gcÚv_š™_fù
è(
	t__gcÚv_¡•
 *);

80 (*
	t__gcÚv_’d_fù
è(
	t__gcÚv_¡•
 *);

84 (*
	t__gcÚv_Œªs_fù
è(
	t__gcÚv_¡•
 *,

85 
	t__gcÚv_¡•_d©a
 *, *,

86 
	t__cÚ¡
 *,

87 
	t__cÚ¡
 **,

88 
	t__cÚ¡
 *, **,

89 
	tsize_t
 *);

92 (*
	t__gcÚv_Œªs_cÚ‹xt_fù
è(*, 
	t__cÚ¡
 *,

93 
	t__cÚ¡
 *,

97 (*
	t__gcÚv_Œªs_qu”y_fù
è(
	t__cÚ¡
 *, __const ***,

98 
	tsize_t
 *);

101 (*
	t__gcÚv_Œªs_š™_fù
) (**, const *);

102 (*
	t__gcÚv_Œªs_’d_fù
) (*);

104 
	s__gcÚv_Œªs_d©a


107 
__gcÚv_Œªs_fù
 
__Œªs_fù
;

108 
__gcÚv_Œªs_cÚ‹xt_fù
 
__Œªs_cÚ‹xt_fù
;

109 
__gcÚv_Œªs_’d_fù
 
__Œªs_’d_fù
;

110 *
__d©a
;

111 
__gcÚv_Œªs_d©a
 *
__Ãxt
;

116 
	s__gcÚv_¡•


118 
__gcÚv_lßded_objeù
 *
__shlib_hªdË
;

119 
__cÚ¡
 *
__modÇme
;

121 
__couÁ”
;

123 *
__äom_Çme
;

124 *
__to_Çme
;

126 
__gcÚv_fù
 
__fù
;

127 
__gcÚv_btowc_fù
 
__btowc_fù
;

128 
__gcÚv_š™_fù
 
__š™_fù
;

129 
__gcÚv_’d_fù
 
__’d_fù
;

133 
__mš_Ãeded_äom
;

134 
__max_Ãeded_äom
;

135 
__mš_Ãeded_to
;

136 
__max_Ãeded_to
;

139 
__¡©eful
;

141 *
__d©a
;

146 
	s__gcÚv_¡•_d©a


148 *
__outbuf
;

149 *
__outbuãnd
;

153 
__æags
;

157 
__švoÿtiÚ_couÁ”
;

161 
__š‹º®_u£
;

163 
__mb¡©e_t
 *
__¡©•
;

164 
__mb¡©e_t
 
__¡©e
;

168 
__gcÚv_Œªs_d©a
 *
__Œªs
;

173 
	s__gcÚv_šfo


175 
size_t
 
__n¡•s
;

176 
__gcÚv_¡•
 *
__¡•s
;

177 
__ex‹nsiÚ__
 
__gcÚv_¡•_d©a
 
__d©a
 
__æex¬r
;

178 } *
	t__gcÚv_t
;

	@/usr/include/gnu/stubs-32.h

6 #ifdeà
_LIBC


7 #”rÜ 
AµliÿtiÚs
 
may
 
nÙ
 
defše
 
the
 
maüo
 
_LIBC


10 
	#__¡ub___k”Ãl_co¦


	)

11 
	#__¡ub___k”Ãl_sšl


	)

12 
	#__¡ub___k”Ãl_Æ


	)

13 
	#__¡ub_chæags


	)

14 
	#__¡ub_ç‰ach


	)

15 
	#__¡ub_fchæags


	)

16 
	#__¡ub_fd‘ach


	)

17 
	#__¡ub_g‰y


	)

18 
	#__¡ub_lchmod


	)

19 
	#__¡ub_»voke


	)

20 
	#__¡ub_£ogš


	)

21 
	#__¡ub_sig»tuº


	)

22 
	#__¡ub_s¡k


	)

23 
	#__¡ub_¡ty


	)

	@/usr/include/wchar.h

24 #iâdeà
_WCHAR_H


26 #ià!
defšed
 
__Ãed_mb¡©e_t
 && !defšed 
__Ãed_wšt_t


27 
	#_WCHAR_H
 1

	)

28 
	~<ã©u»s.h
>

31 #ifdeà
_WCHAR_H


33 
	#__Ãed___FILE


	)

34 #ià
defšed
 
__USE_UNIX98
 || defšed 
__USE_XOPEN2K


35 
	#__Ãed_FILE


	)

37 
	~<¡dio.h
>

39 
	#__Ãed___va_li¡


	)

40 
	~<¡d¬g.h
>

42 
	~<b™s/wch¬.h
>

45 
	#__Ãed_size_t


	)

46 
	#__Ãed_wch¬_t


	)

47 
	#__Ãed_NULL


	)

49 #ià
defšed
 
_WCHAR_H
 || defšed 
__Ãed_wšt_t
 || !defšed 
__WINT_TYPE__


50 #undeà
__Ãed_wšt_t


51 
	#__Ãed_wšt_t


	)

52 
	~<¡ddef.h
>

55 #ià
defšed
 
__ılu¥lus
 && 
__GNUC_PREREQ
 (4, 4)

56 
	#__CORRECT_ISO_CPP_WCHAR_H_PROTO


	)

61 #iâdeà
_WINT_T


66 
	#_WINT_T


	)

67 
	twšt_t
;

71 #ià
defšed
 
__ılu¥lus
 && defšed 
_GLIBCPP_USE_NAMESPACES
 \

72 && 
defšed
 
__WINT_TYPE__


73 
__BEGIN_NAMESPACE_STD


74 
__WINT_TYPE__
 
	twšt_t
;

75 
	g__END_NAMESPACE_STD


80 #ià(
defšed
 
_WCHAR_H
 || defšed 
__Ãed_mb¡©e_t
è&& !defšed 
__mb¡©e_t_defšed


81 
	#__mb¡©e_t_defšed
 1

	)

85 
	m__couÁ
;

88 #ifdeà
__WINT_TYPE__


89 
__WINT_TYPE__
 
	m__wch
;

91 
wšt_t
 
	m__wch
;

93 
	m__wchb
[4];

94 } 
	m__v®ue
;

95 } 
	t__mb¡©e_t
;

97 #undeà
__Ãed_mb¡©e_t


102 #ifdeà
_WCHAR_H


104 
__BEGIN_NAMESPACE_C99


106 
__mb¡©e_t
 
	tmb¡©e_t
;

107 
	g__END_NAMESPACE_C99


108 #ifdeà
__USE_GNU


109 
	$__USING_NAMESPACE_C99
(
mb¡©e_t
)

112 #iâdeà
WCHAR_MIN


114 
	#WCHAR_MIN
 
__WCHAR_MIN


	)

115 
	#WCHAR_MAX
 
__WCHAR_MAX


	)

118 #iâdeà
WEOF


119 
	#WEOF
 (0xffffffffu)

	)

124 #ià
defšed
 
__USE_XOPEN
 && !defšed 
__USE_UNIX98


125 
	~<wùy³.h
>

129 
__BEGIN_DECLS


131 
__BEGIN_NAMESPACE_STD


134 
tm
;

135 
__END_NAMESPACE_STD


139 
	$__USING_NAMESPACE_STD
(
tm
)

142 
__BEGIN_NAMESPACE_STD


144 
wch¬_t
 *
	$wcsıy
 (
wch¬_t
 *
__»¡riù
 
__de¡
,

145 
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__¤c
è
__THROW
;

147 
wch¬_t
 *
	$wc¢ıy
 (
wch¬_t
 *
__»¡riù
 
__de¡
,

148 
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__¤c
, 
size_t
 
__n
)

149 
__THROW
;

152 
wch¬_t
 *
	$wcsÿt
 (
wch¬_t
 *
__»¡riù
 
__de¡
,

153 
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__¤c
è
__THROW
;

155 
wch¬_t
 *
	$wc¢ÿt
 (
wch¬_t
 *
__»¡riù
 
__de¡
,

156 
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__¤c
, 
size_t
 
__n
)

157 
__THROW
;

160 
	$wcscmp
 (
__cÚ¡
 
wch¬_t
 *
__s1
, __cÚ¡ wch¬_ˆ*
__s2
)

161 
__THROW
 
__©Œibu‹_pu»__
;

163 
	$wc¢cmp
 (
__cÚ¡
 
wch¬_t
 *
__s1
, __cÚ¡ wch¬_ˆ*
__s2
, 
size_t
 
__n
)

164 
__THROW
 
__©Œibu‹_pu»__
;

165 
__END_NAMESPACE_STD


167 #ifdeà
__USE_XOPEN2K8


169 
	$wcsÿ£cmp
 (
__cÚ¡
 
wch¬_t
 *
__s1
, __cÚ¡ wch¬_ˆ*
__s2
è
__THROW
;

172 
	$wc¢ÿ£cmp
 (
__cÚ¡
 
wch¬_t
 *
__s1
, __cÚ¡ wch¬_ˆ*
__s2
,

173 
size_t
 
__n
è
__THROW
;

177 
	~<xloÿË.h
>

179 
	$wcsÿ£cmp_l
 (
__cÚ¡
 
wch¬_t
 *
__s1
, __cÚ¡ wch¬_ˆ*
__s2
,

180 
__loÿË_t
 
__loc
è
__THROW
;

182 
	$wc¢ÿ£cmp_l
 (
__cÚ¡
 
wch¬_t
 *
__s1
, __cÚ¡ wch¬_ˆ*
__s2
,

183 
size_t
 
__n
, 
__loÿË_t
 
__loc
è
__THROW
;

186 
__BEGIN_NAMESPACE_STD


189 
	$wcscŞl
 (
__cÚ¡
 
wch¬_t
 *
__s1
, __cÚ¡ wch¬_ˆ*
__s2
è
__THROW
;

193 
size_t
 
	$wcsxäm
 (
wch¬_t
 *
__»¡riù
 
__s1
,

194 
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__s2
, 
size_t
 
__n
è
__THROW
;

195 
__END_NAMESPACE_STD


197 #ifdeà
__USE_XOPEN2K8


203 
	$wcscŞl_l
 (
__cÚ¡
 
wch¬_t
 *
__s1
, __cÚ¡ wch¬_ˆ*
__s2
,

204 
__loÿË_t
 
__loc
è
__THROW
;

209 
size_t
 
	$wcsxäm_l
 (
wch¬_t
 *
__s1
, 
__cÚ¡
 wch¬_ˆ*
__s2
,

210 
size_t
 
__n
, 
__loÿË_t
 
__loc
è
__THROW
;

213 
wch¬_t
 *
	$wcsdup
 (
__cÚ¡
 
wch¬_t
 *
__s
è
__THROW
 
__©Œibu‹_m®loc__
;

216 
__BEGIN_NAMESPACE_STD


218 #ifdeà
__CORRECT_ISO_CPP_WCHAR_H_PROTO


219 "C++" 
wch¬_t
 *
	$wcschr
 (
wch¬_t
 *
__wcs
, wch¬_ˆ
__wc
)

220 
__THROW
 
	`__asm
 ("wcschr"è
__©Œibu‹_pu»__
;

221 "C++" 
__cÚ¡
 
wch¬_t
 *
	$wcschr
 (
__cÚ¡
 
wch¬_t
 *
__wcs
, wch¬_ˆ
__wc
)

222 
__THROW
 
	`__asm
 ("wcschr"è
__©Œibu‹_pu»__
;

224 
wch¬_t
 *
	$wcschr
 (
__cÚ¡
 
wch¬_t
 *
__wcs
, wch¬_ˆ
__wc
)

225 
__THROW
 
__©Œibu‹_pu»__
;

228 #ifdeà
__CORRECT_ISO_CPP_WCHAR_H_PROTO


229 "C++" 
wch¬_t
 *
	$wc¤chr
 (
wch¬_t
 *
__wcs
, wch¬_ˆ
__wc
)

230 
__THROW
 
	`__asm
 ("wc¤chr"è
__©Œibu‹_pu»__
;

231 "C++" 
__cÚ¡
 
wch¬_t
 *
	$wc¤chr
 (
__cÚ¡
 
wch¬_t
 *
__wcs
, wch¬_ˆ
__wc
)

232 
__THROW
 
	`__asm
 ("wc¤chr"è
__©Œibu‹_pu»__
;

234 
wch¬_t
 *
	$wc¤chr
 (
__cÚ¡
 
wch¬_t
 *
__wcs
, wch¬_ˆ
__wc
)

235 
__THROW
 
__©Œibu‹_pu»__
;

237 
__END_NAMESPACE_STD


239 #ifdeà
__USE_GNU


242 
wch¬_t
 *
	$wcschºul
 (
__cÚ¡
 
wch¬_t
 *
__s
, wch¬_ˆ
__wc
)

243 
__THROW
 
__©Œibu‹_pu»__
;

246 
__BEGIN_NAMESPACE_STD


249 
size_t
 
	$wcsc¥n
 (
__cÚ¡
 
wch¬_t
 *
__wcs
, __cÚ¡ wch¬_ˆ*
__»jeù
)

250 
__THROW
 
__©Œibu‹_pu»__
;

253 
size_t
 
	$wcs¥n
 (
__cÚ¡
 
wch¬_t
 *
__wcs
, __cÚ¡ wch¬_ˆ*
__acû±
)

254 
__THROW
 
__©Œibu‹_pu»__
;

256 #ifdeà
__CORRECT_ISO_CPP_WCHAR_H_PROTO


257 "C++" 
wch¬_t
 *
	$wc¥brk
 (
wch¬_t
 *
__wcs
, 
__cÚ¡
 wch¬_ˆ*
__acû±
)

258 
__THROW
 
	`__asm
 ("wc¥brk"è
__©Œibu‹_pu»__
;

259 "C++" 
__cÚ¡
 
wch¬_t
 *
	$wc¥brk
 (
__cÚ¡
 
wch¬_t
 *
__wcs
,

260 
__cÚ¡
 
wch¬_t
 *
__acû±
)

261 
__THROW
 
	`__asm
 ("wc¥brk"è
__©Œibu‹_pu»__
;

263 
wch¬_t
 *
	$wc¥brk
 (
__cÚ¡
 
wch¬_t
 *
__wcs
, __cÚ¡ wch¬_ˆ*
__acû±
)

264 
__THROW
 
__©Œibu‹_pu»__
;

267 #ifdeà
__CORRECT_ISO_CPP_WCHAR_H_PROTO


268 "C++" 
wch¬_t
 *
	$wcs¡r
 (
wch¬_t
 *
__hay¡ack
, 
__cÚ¡
 wch¬_ˆ*
__ÃedË
)

269 
__THROW
 
	`__asm
 ("wcs¡r"è
__©Œibu‹_pu»__
;

270 "C++" 
__cÚ¡
 
wch¬_t
 *
	$wcs¡r
 (
__cÚ¡
 
wch¬_t
 *
__hay¡ack
,

271 
__cÚ¡
 
wch¬_t
 *
__ÃedË
)

272 
__THROW
 
	`__asm
 ("wcs¡r"è
__©Œibu‹_pu»__
;

274 
wch¬_t
 *
	$wcs¡r
 (
__cÚ¡
 
wch¬_t
 *
__hay¡ack
, __cÚ¡ wch¬_ˆ*
__ÃedË
)

275 
__THROW
 
__©Œibu‹_pu»__
;

279 
wch¬_t
 *
	$wc¡ok
 (
wch¬_t
 *
__»¡riù
 
__s
,

280 
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__d–im
,

281 
wch¬_t
 **
__»¡riù
 
__±r
è
__THROW
;

284 
size_t
 
	$wc¦’
 (
__cÚ¡
 
wch¬_t
 *
__s
è
__THROW
 
__©Œibu‹_pu»__
;

285 
__END_NAMESPACE_STD


287 #ifdeà
__USE_XOPEN


289 #ifdeà
__CORRECT_ISO_CPP_WCHAR_H_PROTO


290 "C++" 
wch¬_t
 *
	$wcswcs
 (
wch¬_t
 *
__hay¡ack
, 
__cÚ¡
 wch¬_ˆ*
__ÃedË
)

291 
__THROW
 
	`__asm
 ("wcswcs"è
__©Œibu‹_pu»__
;

292 "C++" 
__cÚ¡
 
wch¬_t
 *
	$wcswcs
 (
__cÚ¡
 
wch¬_t
 *
__hay¡ack
,

293 
__cÚ¡
 
wch¬_t
 *
__ÃedË
)

294 
__THROW
 
	`__asm
 ("wcswcs"è
__©Œibu‹_pu»__
;

296 
wch¬_t
 *
	$wcswcs
 (
__cÚ¡
 
wch¬_t
 *
__hay¡ack
, __cÚ¡ wch¬_ˆ*
__ÃedË
)

297 
__THROW
 
__©Œibu‹_pu»__
;

301 #ifdeà
__USE_XOPEN2K8


303 
size_t
 
	$wc¢Ën
 (
__cÚ¡
 
wch¬_t
 *
__s
, 
size_t
 
__maxËn
)

304 
__THROW
 
__©Œibu‹_pu»__
;

308 
__BEGIN_NAMESPACE_STD


310 #ifdeà
__CORRECT_ISO_CPP_WCHAR_H_PROTO


311 "C++" 
wch¬_t
 *
	$wmemchr
 (
wch¬_t
 *
__s
, wch¬_ˆ
__c
, 
size_t
 
__n
)

312 
__THROW
 
	`__asm
 ("wmemchr"è
__©Œibu‹_pu»__
;

313 "C++" 
__cÚ¡
 
wch¬_t
 *
	$wmemchr
 (
__cÚ¡
 
wch¬_t
 *
__s
, wch¬_ˆ
__c
,

314 
size_t
 
__n
)

315 
__THROW
 
	`__asm
 ("wmemchr"è
__©Œibu‹_pu»__
;

317 
wch¬_t
 *
	$wmemchr
 (
__cÚ¡
 
wch¬_t
 *
__s
, wch¬_ˆ
__c
, 
size_t
 
__n
)

318 
__THROW
 
__©Œibu‹_pu»__
;

322 
	$wmemcmp
 (
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__s1
,

323 
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__s2
, 
size_t
 
__n
)

324 
__THROW
 
__©Œibu‹_pu»__
;

327 
wch¬_t
 *
	$wmemıy
 (
wch¬_t
 *
__»¡riù
 
__s1
,

328 
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__s2
, 
size_t
 
__n
è
__THROW
;

332 
wch¬_t
 *
	$wmemmove
 (
wch¬_t
 *
__s1
, 
__cÚ¡
 wch¬_ˆ*
__s2
, 
size_t
 
__n
)

333 
__THROW
;

336 
wch¬_t
 *
	$wmem£t
 (
wch¬_t
 *
__s
, wch¬_ˆ
__c
, 
size_t
 
__n
è
__THROW
;

337 
__END_NAMESPACE_STD


339 #ifdeà
__USE_GNU


342 
wch¬_t
 *
	$wmempıy
 (
wch¬_t
 *
__»¡riù
 
__s1
,

343 
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__s2
, 
size_t
 
__n
)

344 
__THROW
;

348 
__BEGIN_NAMESPACE_STD


351 
wšt_t
 
	$btowc
 (
__c
è
__THROW
;

355 
	$wùob
 (
wšt_t
 
__c
è
__THROW
;

359 
	$mbsš™
 (
__cÚ¡
 
mb¡©e_t
 *
__ps
è
__THROW
 
__©Œibu‹_pu»__
;

363 
size_t
 
	$mb¹owc
 (
wch¬_t
 *
__»¡riù
 
__pwc
,

364 
__cÚ¡
 *
__»¡riù
 
__s
, 
size_t
 
__n
,

365 
mb¡©e_t
 *
__p
è
__THROW
;

368 
size_t
 
	$wütomb
 (*
__»¡riù
 
__s
, 
wch¬_t
 
__wc
,

369 
mb¡©e_t
 *
__»¡riù
 
__ps
è
__THROW
;

372 
size_t
 
	$__mb¾’
 (
__cÚ¡
 *
__»¡riù
 
__s
, 
size_t
 
__n
,

373 
mb¡©e_t
 *
__»¡riù
 
__ps
è
__THROW
;

374 
size_t
 
	$mb¾’
 (
__cÚ¡
 *
__»¡riù
 
__s
, 
size_t
 
__n
,

375 
mb¡©e_t
 *
__»¡riù
 
__ps
è
__THROW
;

376 
__END_NAMESPACE_STD


378 #ifdeà
__USE_EXTERN_INLINES


384 
wšt_t
 
	$__btowc_®Ÿs
 (
__c
è
	`__asm
 ("btowc");

385 
__ex‹º_šlše
 
wšt_t


386 
	`__NTH
 (
	$btowc
 (
__c
))

387 {  (
	`__butš_cÚ¡ªt_p
 (
__c
) && __c >= '\0' && __c <= '\x7f'

388 ? (
wšt_t
è
__c
 : 
	`__btowc_®Ÿs
 (__c)); 
	}
}

390 
	$__wùob_®Ÿs
 (
wšt_t
 
__c
è
	`__asm
 ("wctob");

391 
__ex‹º_šlše
 

392 
	`__NTH
 (
	$wùob
 (
wšt_t
 
__wc
))

393 {  (
	`__butš_cÚ¡ªt_p
 (
__wc
è&& __wø>ğ
L
'\0' && __wc <= L'\x7f'

394 ? (è
__wc
 : 
	`__wùob_®Ÿs
 (__wc)); 
	}
}

396 
__ex‹º_šlše
 
size_t


397 
__NTH
 (
	$mb¾’
 (
__cÚ¡
 *
__»¡riù
 
__s
, 
size_t
 
__n
,

398 
mb¡©e_t
 *
__»¡riù
 
__ps
))

399 {  (
__ps
 !ğ
NULL


400 ? 
	`mb¹owc
 (
NULL
, 
__s
, 
__n
, 
__ps
è: 
	`__mb¾’
 (__s, __n, NULL)); 
	}
}

403 
__BEGIN_NAMESPACE_STD


406 
size_t
 
	$mb¤towcs
 (
wch¬_t
 *
__»¡riù
 
__d¡
,

407 
__cÚ¡
 **
__»¡riù
 
__¤c
, 
size_t
 
__Ën
,

408 
mb¡©e_t
 *
__»¡riù
 
__ps
è
__THROW
;

412 
size_t
 
	$wc¤tombs
 (*
__»¡riù
 
__d¡
,

413 
__cÚ¡
 
wch¬_t
 **
__»¡riù
 
__¤c
, 
size_t
 
__Ën
,

414 
mb¡©e_t
 *
__»¡riù
 
__ps
è
__THROW
;

415 
__END_NAMESPACE_STD


418 #ifdef 
__USE_XOPEN2K8


421 
size_t
 
	$mb¢¹owcs
 (
wch¬_t
 *
__»¡riù
 
__d¡
,

422 
__cÚ¡
 **
__»¡riù
 
__¤c
, 
size_t
 
__nmc
,

423 
size_t
 
__Ën
, 
mb¡©e_t
 *
__»¡riù
 
__ps
è
__THROW
;

427 
size_t
 
	$wc¢¹ombs
 (*
__»¡riù
 
__d¡
,

428 
__cÚ¡
 
wch¬_t
 **
__»¡riù
 
__¤c
,

429 
size_t
 
__nwc
, size_ˆ
__Ën
,

430 
mb¡©e_t
 *
__»¡riù
 
__ps
è
__THROW
;

435 #ifdeà
__USE_XOPEN


437 
	$wcwidth
 (
wch¬_t
 
__c
è
__THROW
;

441 
	$wcswidth
 (
__cÚ¡
 
wch¬_t
 *
__s
, 
size_t
 
__n
è
__THROW
;

445 
__BEGIN_NAMESPACE_STD


448 
	$wc¡od
 (
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__ÅŒ
,

449 
wch¬_t
 **
__»¡riù
 
__’d±r
è
__THROW
;

450 
__END_NAMESPACE_STD


452 #ifdeà
__USE_ISOC99


453 
__BEGIN_NAMESPACE_C99


455 
	$wc¡of
 (
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__ÅŒ
,

456 
wch¬_t
 **
__»¡riù
 
__’d±r
è
__THROW
;

457 
	$wc¡Şd
 (
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__ÅŒ
,

458 
wch¬_t
 **
__»¡riù
 
__’d±r
è
__THROW
;

459 
__END_NAMESPACE_C99


463 
__BEGIN_NAMESPACE_STD


466 
	$wc¡Ş
 (
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__ÅŒ
,

467 
wch¬_t
 **
__»¡riù
 
__’d±r
, 
__ba£
è
__THROW
;

471 
	$wc¡oul
 (
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__ÅŒ
,

472 
wch¬_t
 **
__»¡riù
 
__’d±r
, 
__ba£
)

473 
__THROW
;

474 
__END_NAMESPACE_STD


476 #ià
defšed
 
__USE_ISOC99
 || (defšed 
__GNUC__
 && defšed 
__USE_GNU
)

477 
__BEGIN_NAMESPACE_C99


480 
__ex‹nsiÚ__


481 
	$wc¡Şl
 (
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__ÅŒ
,

482 
wch¬_t
 **
__»¡riù
 
__’d±r
, 
__ba£
)

483 
__THROW
;

487 
__ex‹nsiÚ__


488 
	$wc¡ouÎ
 (
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__ÅŒ
,

489 
wch¬_t
 **
__»¡riù
 
__’d±r
,

490 
__ba£
è
__THROW
;

491 
__END_NAMESPACE_C99


494 #ià
defšed
 
__GNUC__
 && defšed 
__USE_GNU


497 
__ex‹nsiÚ__


498 
	$wc¡oq
 (
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__ÅŒ
,

499 
wch¬_t
 **
__»¡riù
 
__’d±r
, 
__ba£
)

500 
__THROW
;

504 
__ex‹nsiÚ__


505 
	$wc¡ouq
 (
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__ÅŒ
,

506 
wch¬_t
 **
__»¡riù
 
__’d±r
,

507 
__ba£
è
__THROW
;

510 #ifdeà
__USE_GNU


524 
	~<xloÿË.h
>

528 
	$wc¡Ş_l
 (
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__ÅŒ
,

529 
wch¬_t
 **
__»¡riù
 
__’d±r
, 
__ba£
,

530 
__loÿË_t
 
__loc
è
__THROW
;

532 
	$wc¡oul_l
 (
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__ÅŒ
,

533 
wch¬_t
 **
__»¡riù
 
__’d±r
,

534 
__ba£
, 
__loÿË_t
 
__loc
è
__THROW
;

536 
__ex‹nsiÚ__


537 
	$wc¡Şl_l
 (
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__ÅŒ
,

538 
wch¬_t
 **
__»¡riù
 
__’d±r
,

539 
__ba£
, 
__loÿË_t
 
__loc
è
__THROW
;

541 
__ex‹nsiÚ__


542 
	$wc¡ouÎ_l
 (
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__ÅŒ
,

543 
wch¬_t
 **
__»¡riù
 
__’d±r
,

544 
__ba£
, 
__loÿË_t
 
__loc
)

545 
__THROW
;

547 
	$wc¡od_l
 (
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__ÅŒ
,

548 
wch¬_t
 **
__»¡riù
 
__’d±r
, 
__loÿË_t
 
__loc
)

549 
__THROW
;

551 
	$wc¡of_l
 (
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__ÅŒ
,

552 
wch¬_t
 **
__»¡riù
 
__’d±r
, 
__loÿË_t
 
__loc
)

553 
__THROW
;

555 
	$wc¡Şd_l
 (
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__ÅŒ
,

556 
wch¬_t
 **
__»¡riù
 
__’d±r
,

557 
__loÿË_t
 
__loc
è
__THROW
;

561 #ifdef 
__USE_XOPEN2K8


564 
wch¬_t
 *
	$wııy
 (
wch¬_t
 *
__de¡
, 
__cÚ¡
 wch¬_ˆ*
__¤c
è
__THROW
;

568 
wch¬_t
 *
	$wınıy
 (
wch¬_t
 *
__de¡
, 
__cÚ¡
 wch¬_ˆ*
__¤c
, 
size_t
 
__n
)

569 
__THROW
;

575 #ifdef 
__USE_XOPEN2K8


578 
__FILE
 *
	$İ’_wmem¡»am
 (
wch¬_t
 **
__buæoc
, 
size_t
 *
__siz–oc
è
__THROW
;

581 #ià
defšed
 
__USE_ISOC95
 || defšed 
__USE_UNIX98


582 
__BEGIN_NAMESPACE_STD


585 
	$fwide
 (
__FILE
 *
__å
, 
__mode
è
__THROW
;

592 
	`fw´štf
 (
__FILE
 *
__»¡riù
 
__¡»am
,

593 
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__fÜm©
, ...)

599 
	`w´štf
 (
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__fÜm©
, ...)

602 
	$sw´štf
 (
wch¬_t
 *
__»¡riù
 
__s
, 
size_t
 
__n
,

603 
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__fÜm©
, ...)

604 
__THROW
 ;

610 
	`vfw´štf
 (
__FILE
 *
__»¡riù
 
__s
,

611 
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__fÜm©
,

612 
__gnuc_va_li¡
 
__¬g
)

618 
	`vw´štf
 (
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__fÜm©
,

619 
__gnuc_va_li¡
 
__¬g
)

623 
	$vsw´štf
 (
wch¬_t
 *
__»¡riù
 
__s
, 
size_t
 
__n
,

624 
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__fÜm©
,

625 
__gnuc_va_li¡
 
__¬g
)

626 
__THROW
 ;

633 
	`fwsÿnf
 (
__FILE
 *
__»¡riù
 
__¡»am
,

634 
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__fÜm©
, ...)

640 
	`wsÿnf
 (
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__fÜm©
, ...)

643 
	$swsÿnf
 (
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__s
,

644 
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__fÜm©
, ...)

645 
__THROW
 ;

647 #ià
defšed
 
__USE_ISOC99
 && !defšed 
__USE_GNU
 \

648 && (!
defšed
 
__LDBL_COMPAT
 || !defšed 
__REDIRECT
) \

649 && (
defšed
 
__STRICT_ANSI__
 || defšed 
__USE_XOPEN2K
)

650 #ifdeà
__REDIRECT


654 
	`__REDIRECT
 (
fwsÿnf
, (
__FILE
 *
__»¡riù
 
__¡»am
,

655 
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__fÜm©
, ...),

656 
__isoc99_fwsÿnf
)

658 
	`__REDIRECT
 (
wsÿnf
, (
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__fÜm©
, ...),

659 
__isoc99_wsÿnf
)

661 
	`__REDIRECT_NTH
 (
swsÿnf
, (
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__s
,

662 
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__fÜm©
,

663 ...), 
__isoc99_swsÿnf
)

666 
	`__isoc99_fwsÿnf
 (
__FILE
 *
__»¡riù
 
__¡»am
,

667 
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__fÜm©
, ...);

668 
	`__isoc99_wsÿnf
 (
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__fÜm©
, ...);

669 
	$__isoc99_swsÿnf
 (
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__s
,

670 
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__fÜm©
, ...)

671 
__THROW
;

672 
	#fwsÿnf
 
__isoc99_fwsÿnf


	)

673 
	#wsÿnf
 
__isoc99_wsÿnf


	)

674 
	#swsÿnf
 
__isoc99_swsÿnf


	)

678 
__END_NAMESPACE_STD


681 #ifdeà
__USE_ISOC99


682 
__BEGIN_NAMESPACE_C99


687 
	`vfwsÿnf
 (
__FILE
 *
__»¡riù
 
__s
,

688 
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__fÜm©
,

689 
__gnuc_va_li¡
 
__¬g
)

695 
	`vwsÿnf
 (
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__fÜm©
,

696 
__gnuc_va_li¡
 
__¬g
)

699 
	$vswsÿnf
 (
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__s
,

700 
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__fÜm©
,

701 
__gnuc_va_li¡
 
__¬g
)

702 
__THROW
 ;

704 #ià!
defšed
 
__USE_GNU
 \

705 && (!
defšed
 
__LDBL_COMPAT
 || !defšed 
__REDIRECT
) \

706 && (
defšed
 
__STRICT_ANSI__
 || defšed 
__USE_XOPEN2K
)

707 #ifdeà
__REDIRECT


708 
	`__REDIRECT
 (
vfwsÿnf
, (
__FILE
 *
__»¡riù
 
__s
,

709 
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__fÜm©
,

710 
__gnuc_va_li¡
 
__¬g
), 
__isoc99_vfwsÿnf
)

712 
	`__REDIRECT
 (
vwsÿnf
, (
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__fÜm©
,

713 
__gnuc_va_li¡
 
__¬g
), 
__isoc99_vwsÿnf
)

715 
	`__REDIRECT_NTH
 (
vswsÿnf
, (
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__s
,

716 
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__fÜm©
,

717 
__gnuc_va_li¡
 
__¬g
), 
__isoc99_vswsÿnf
)

720 
	`__isoc99_vfwsÿnf
 (
__FILE
 *
__»¡riù
 
__s
,

721 
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__fÜm©
,

722 
__gnuc_va_li¡
 
__¬g
);

723 
	`__isoc99_vwsÿnf
 (
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__fÜm©
,

724 
__gnuc_va_li¡
 
__¬g
);

725 
	$__isoc99_vswsÿnf
 (
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__s
,

726 
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__fÜm©
,

727 
__gnuc_va_li¡
 
__¬g
è
__THROW
;

728 
	#vfwsÿnf
 
__isoc99_vfwsÿnf


	)

729 
	#vwsÿnf
 
__isoc99_vwsÿnf


	)

730 
	#vswsÿnf
 
__isoc99_vswsÿnf


	)

734 
__END_NAMESPACE_C99


738 
__BEGIN_NAMESPACE_STD


743 
wšt_t
 
	`fg‘wc
 (
__FILE
 *
__¡»am
);

744 
wšt_t
 
	`g‘wc
 (
__FILE
 *
__¡»am
);

750 
wšt_t
 
	`g‘wch¬
 ();

757 
wšt_t
 
	`åutwc
 (
wch¬_t
 
__wc
, 
__FILE
 *
__¡»am
);

758 
wšt_t
 
	`putwc
 (
wch¬_t
 
__wc
, 
__FILE
 *
__¡»am
);

764 
wšt_t
 
	`putwch¬
 (
wch¬_t
 
__wc
);

772 
wch¬_t
 *
	`fg‘ws
 (wch¬_ˆ*
__»¡riù
 
__ws
, 
__n
,

773 
__FILE
 *
__»¡riù
 
__¡»am
);

779 
	`åutws
 (
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__ws
,

780 
__FILE
 *
__»¡riù
 
__¡»am
);

787 
wšt_t
 
	`ung‘wc
 (wšt_ˆ
__wc
, 
__FILE
 *
__¡»am
);

788 
__END_NAMESPACE_STD


791 #ifdeà
__USE_GNU


799 
wšt_t
 
	`g‘wc_uÆocked
 (
__FILE
 *
__¡»am
);

800 
wšt_t
 
	`g‘wch¬_uÆocked
 ();

808 
wšt_t
 
	`fg‘wc_uÆocked
 (
__FILE
 *
__¡»am
);

816 
wšt_t
 
	`åutwc_uÆocked
 (
wch¬_t
 
__wc
, 
__FILE
 *
__¡»am
);

825 
wšt_t
 
	`putwc_uÆocked
 (
wch¬_t
 
__wc
, 
__FILE
 *
__¡»am
);

826 
wšt_t
 
	`putwch¬_uÆocked
 (
wch¬_t
 
__wc
);

835 
wch¬_t
 *
	`fg‘ws_uÆocked
 (wch¬_ˆ*
__»¡riù
 
__ws
, 
__n
,

836 
__FILE
 *
__»¡riù
 
__¡»am
);

844 
	`åutws_uÆocked
 (
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__ws
,

845 
__FILE
 *
__»¡riù
 
__¡»am
);

849 
__BEGIN_NAMESPACE_C99


853 
size_t
 
	$wcsáime
 (
wch¬_t
 *
__»¡riù
 
__s
, 
size_t
 
__maxsize
,

854 
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__fÜm©
,

855 
__cÚ¡
 
tm
 *
__»¡riù
 
__
è
__THROW
;

856 
__END_NAMESPACE_C99


858 #ifdeà
__USE_GNU


859 
	~<xloÿË.h
>

863 
size_t
 
	$wcsáime_l
 (
wch¬_t
 *
__»¡riù
 
__s
, 
size_t
 
__maxsize
,

864 
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__fÜm©
,

865 
__cÚ¡
 
tm
 *
__»¡riù
 
__
,

866 
__loÿË_t
 
__loc
è
__THROW
;

875 #ià
defšed
 
__USE_UNIX98
 && !defšed 
__USE_GNU


876 
	#__Ãed_iswxxx


	)

877 
	~<wùy³.h
>

881 #ià
__USE_FORTIFY_LEVEL
 > 0 && 
defšed
 
__ex‹º_®ways_šlše


882 
	~<b™s/wch¬2.h
>

885 #ifdeà
__LDBL_COMPAT


886 
	~<b™s/wch¬-ldbl.h
>

889 
__END_DECLS


897 #undeà
__Ãed_mb¡©e_t


898 #undeà
__Ãed_wšt_t


	@/usr/include/bits/wchar-ldbl.h

20 #iâdeà
_WCHAR_H


24 #ià
defšed
 
__USE_ISOC95
 || defšed 
__USE_UNIX98


25 
__BEGIN_NAMESPACE_C99


26 
__LDBL_REDIR_DECL
 (
fw´štf
);

27 
__LDBL_REDIR_DECL
 (
w´štf
);

28 
__LDBL_REDIR_DECL
 (
sw´štf
);

29 
__LDBL_REDIR_DECL
 (
vfw´štf
);

30 
__LDBL_REDIR_DECL
 (
vw´štf
);

31 
__LDBL_REDIR_DECL
 (
vsw´štf
);

32 #ià
defšed
 
__USE_ISOC99
 && !defšed 
__USE_GNU
 \

33 && !
defšed
 
	g__REDIRECT
 \

34 && (
defšed
 
	g__STRICT_ANSI__
 || defšed 
	g__USE_XOPEN2K
)

35 
	$__LDBL_REDIR1_DECL
 (
fwsÿnf
, 
__Ædbl___isoc99_fwsÿnf
)

36 
	$__LDBL_REDIR1_DECL
 (
wsÿnf
, 
__Ædbl___isoc99_wsÿnf
)

37 
	$__LDBL_REDIR1_DECL
 (
swsÿnf
, 
__Ædbl___isoc99_swsÿnf
)

39 
	`__LDBL_REDIR_DECL
 (
fwsÿnf
);

40 
	`__LDBL_REDIR_DECL
 (
wsÿnf
);

41 
	`__LDBL_REDIR_DECL
 (
swsÿnf
);

43 
__END_NAMESPACE_C99


46 #ifdeà
__USE_ISOC99


47 
__BEGIN_NAMESPACE_C99


48 
	`__LDBL_REDIR1_DECL
 (
wc¡Şd
, 
wc¡od
);

49 #ià!
defšed
 
__USE_GNU
 && !defšed 
__REDIRECT
 \

50 && (
defšed
 
__STRICT_ANSI__
 || defšed 
__USE_XOPEN2K
)

51 
	$__LDBL_REDIR1_DECL
 (
vfwsÿnf
, 
__Ædbl___isoc99_vfwsÿnf
)

52 
	$__LDBL_REDIR1_DECL
 (
vwsÿnf
, 
__Ædbl___isoc99_vwsÿnf
)

53 
	$__LDBL_REDIR1_DECL
 (
vswsÿnf
, 
__Ædbl___isoc99_vswsÿnf
)

55 
	`__LDBL_REDIR_DECL
 (
vfwsÿnf
);

56 
	`__LDBL_REDIR_DECL
 (
vwsÿnf
);

57 
	`__LDBL_REDIR_DECL
 (
vswsÿnf
);

59 
__END_NAMESPACE_C99


62 #ifdeà
__USE_GNU


63 
	`__LDBL_REDIR1_DECL
 (
wc¡Şd_l
, 
wc¡od_l
);

66 #ià
__USE_FORTIFY_LEVEL
 > 0 && 
defšed
 
__ex‹º_®ways_šlše


67 
	$__LDBL_REDIR_DECL
 (
__sw´štf_chk
)

68 
	$__LDBL_REDIR_DECL
 (
__vsw´štf_chk
)

69 #ià
__USE_FORTIFY_LEVEL
 > 1

70 
	$__LDBL_REDIR_DECL
 (
__fw´štf_chk
)

71 
	$__LDBL_REDIR_DECL
 (
__w´štf_chk
)

72 
	$__LDBL_REDIR_DECL
 (
__vfw´štf_chk
)

73 
	$__LDBL_REDIR_DECL
 (
__vw´štf_chk
)

	@/usr/include/bits/wchar.h

20 #iâdeà
_BITS_WCHAR_H


21 
	#_BITS_WCHAR_H
 1

	)

24 #ifdeà
__WCHAR_MAX__


25 
	#__WCHAR_MAX
 
__WCHAR_MAX__


	)

27 
	#__WCHAR_MAX
 (2147483647)

	)

32 #ifdeà
__WCHAR_UNSIGNED__


33 
	#__WCHAR_MIN
 
L
'\0'

	)

37 #–ià
L
'\0' - 1 > 0

38 
	#__WCHAR_MIN
 
L
'\0'

	)

40 
	#__WCHAR_MIN
 (-
__WCHAR_MAX
 - 1)

	)

	@/usr/include/bits/wchar2.h

20 #iâdeà
_WCHAR_H


25 
wch¬_t
 *
	$__wmemıy_chk
 (
wch¬_t
 *
__»¡riù
 
__s1
,

26 
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__s2
, 
size_t
 
__n
,

27 
size_t
 
__ns1
è
__THROW
;

28 
wch¬_t
 *
	`__REDIRECT_NTH
 (
__wmemıy_®Ÿs
,

29 (
wch¬_t
 *
__»¡riù
 
__s1
,

30 
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__s2
, 
size_t
 
__n
),

31 
wmemıy
);

32 
wch¬_t
 *
	`__REDIRECT_NTH
 (
__wmemıy_chk_w¬n
,

33 (
wch¬_t
 *
__»¡riù
 
__s1
,

34 
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__s2
, 
size_t
 
__n
,

35 
size_t
 
__ns1
), 
__wmemıy_chk
)

36 
	`__w¬Ç‰r
 ("wmemcpy called with†ength biggerhan size of destination "

39 
__ex‹º_®ways_šlše
 
wch¬_t
 *

40 
	`__NTH
 (
	$wmemıy
 (
wch¬_t
 *
__»¡riù
 
__s1
, 
__cÚ¡
 wch¬_ˆ*__»¡riù 
__s2
,

41 
size_t
 
__n
))

43 ià(
	`__bos0
 (
__s1
è!ğ(
size_t
) -1)

45 ià(!
	`__butš_cÚ¡ªt_p
 (
__n
))

46  
	`__wmemıy_chk
 (
__s1
, 
__s2
, 
__n
,

47 
	`__bos0
 (
__s1
è/  (
wch¬_t
));

49 ià(
__n
 > 
	`__bos0
 (
__s1
è/  (
wch¬_t
))

50  
	`__wmemıy_chk_w¬n
 (
__s1
, 
__s2
, 
__n
,

51 
	`__bos0
 (
__s1
è/  (
wch¬_t
));

53  
	`__wmemıy_®Ÿs
 (
__s1
, 
__s2
, 
__n
);

54 
	}
}

57 
wch¬_t
 *
	$__wmemmove_chk
 (
wch¬_t
 *
__s1
, 
__cÚ¡
 wch¬_ˆ*
__s2
,

58 
size_t
 
__n
, size_ˆ
__ns1
è
__THROW
;

59 
wch¬_t
 *
	`__REDIRECT_NTH
 (
__wmemmove_®Ÿs
, (wch¬_ˆ*
__s1
,

60 
__cÚ¡
 
wch¬_t
 *
__s2
,

61 
size_t
 
__n
), 
wmemmove
);

62 
wch¬_t
 *
	`__REDIRECT_NTH
 (
__wmemmove_chk_w¬n
,

63 (
wch¬_t
 *
__»¡riù
 
__s1
,

64 
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__s2
, 
size_t
 
__n
,

65 
size_t
 
__ns1
), 
__wmemmove_chk
)

66 
	`__w¬Ç‰r
 ("wmemmove called with†ength biggerhan size of destination "

69 
__ex‹º_®ways_šlše
 
wch¬_t
 *

70 
	`__NTH
 (
	$wmemmove
 (
wch¬_t
 *
__»¡riù
 
__s1
, 
__cÚ¡
 wch¬_ˆ*__»¡riù 
__s2
,

71 
size_t
 
__n
))

73 ià(
	`__bos0
 (
__s1
è!ğ(
size_t
) -1)

75 ià(!
	`__butš_cÚ¡ªt_p
 (
__n
))

76  
	`__wmemmove_chk
 (
__s1
, 
__s2
, 
__n
,

77 
	`__bos0
 (
__s1
è/  (
wch¬_t
));

79 ià(
__n
 > 
	`__bos0
 (
__s1
è/  (
wch¬_t
))

80  
	`__wmemmove_chk_w¬n
 (
__s1
, 
__s2
, 
__n
,

81 
	`__bos0
 (
__s1
è/  (
wch¬_t
));

83  
	`__wmemmove_®Ÿs
 (
__s1
, 
__s2
, 
__n
);

84 
	}
}

87 #ifdeà
__USE_GNU


88 
wch¬_t
 *
	$__wmempıy_chk
 (
wch¬_t
 *
__»¡riù
 
__s1
,

89 
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__s2
, 
size_t
 
__n
,

90 
size_t
 
__ns1
è
__THROW
;

91 
wch¬_t
 *
	`__REDIRECT_NTH
 (
__wmempıy_®Ÿs
,

92 (
wch¬_t
 *
__»¡riù
 
__s1
,

93 
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__s2
,

94 
size_t
 
__n
), 
wmempıy
);

95 
wch¬_t
 *
	`__REDIRECT_NTH
 (
__wmempıy_chk_w¬n
,

96 (
wch¬_t
 *
__»¡riù
 
__s1
,

97 
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__s2
, 
size_t
 
__n
,

98 
size_t
 
__ns1
), 
__wmempıy_chk
)

99 
	`__w¬Ç‰r
 ("wmempcpy called with†ength biggerhan size of destination "

102 
__ex‹º_®ways_šlše
 
wch¬_t
 *

103 
	`__NTH
 (
	$wmempıy
 (
wch¬_t
 *
__»¡riù
 
__s1
, 
__cÚ¡
 wch¬_ˆ*__»¡riù 
__s2
,

104 
size_t
 
__n
))

106 ià(
	`__bos0
 (
__s1
è!ğ(
size_t
) -1)

108 ià(!
	`__butš_cÚ¡ªt_p
 (
__n
))

109  
	`__wmempıy_chk
 (
__s1
, 
__s2
, 
__n
,

110 
	`__bos0
 (
__s1
è/  (
wch¬_t
));

112 ià(
__n
 > 
	`__bos0
 (
__s1
è/  (
wch¬_t
))

113  
	`__wmempıy_chk_w¬n
 (
__s1
, 
__s2
, 
__n
,

114 
	`__bos0
 (
__s1
è/  (
wch¬_t
));

116  
	`__wmempıy_®Ÿs
 (
__s1
, 
__s2
, 
__n
);

117 
	}
}

121 
wch¬_t
 *
	$__wmem£t_chk
 (
wch¬_t
 *
__s
, wch¬_ˆ
__c
, 
size_t
 
__n
,

122 
size_t
 
__ns
è
__THROW
;

123 
wch¬_t
 *
	`__REDIRECT_NTH
 (
__wmem£t_®Ÿs
, (wch¬_ˆ*
__s
, wch¬_ˆ
__c
,

124 
size_t
 
__n
), 
wmem£t
);

125 
wch¬_t
 *
	`__REDIRECT_NTH
 (
__wmem£t_chk_w¬n
,

126 (
wch¬_t
 *
__s
, wch¬_ˆ
__c
, 
size_t
 
__n
,

127 
size_t
 
__ns
), 
__wmem£t_chk
)

128 
	`__w¬Ç‰r
 ("wmemset called with†ength biggerhan size of destination "

131 
__ex‹º_®ways_šlše
 
wch¬_t
 *

132 
	`__NTH
 (
	$wmem£t
 (
wch¬_t
 *
__»¡riù
 
__s
, wch¬_ˆ
__c
, 
size_t
 
__n
))

134 ià(
	`__bos0
 (
__s
è!ğ(
size_t
) -1)

136 ià(!
	`__butš_cÚ¡ªt_p
 (
__n
))

137  
	`__wmem£t_chk
 (
__s
, 
__c
, 
__n
, 
	`__bos0
 (__sè/  (
wch¬_t
));

139 ià(
__n
 > 
	`__bos0
 (
__s
è/  (
wch¬_t
))

140  
	`__wmem£t_chk_w¬n
 (
__s
, 
__c
, 
__n
,

141 
	`__bos0
 (
__s
è/  (
wch¬_t
));

143  
	`__wmem£t_®Ÿs
 (
__s
, 
__c
, 
__n
);

144 
	}
}

147 
wch¬_t
 *
	$__wcsıy_chk
 (
wch¬_t
 *
__»¡riù
 
__de¡
,

148 
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__¤c
,

149 
size_t
 
__n
è
__THROW
;

150 
wch¬_t
 *
	`__REDIRECT_NTH
 (
__wcsıy_®Ÿs
,

151 (
wch¬_t
 *
__»¡riù
 
__de¡
,

152 
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__¤c
), 
wcsıy
);

154 
__ex‹º_®ways_šlše
 
wch¬_t
 *

155 
	`__NTH
 (
	$wcsıy
 (
wch¬_t
 *
__de¡
, 
__cÚ¡
 wch¬_ˆ*
__¤c
))

157 ià(
	`__bos
 (
__de¡
è!ğ(
size_t
) -1)

158  
	`__wcsıy_chk
 (
__de¡
, 
__¤c
, 
	`__bos
 (__de¡è/  (
wch¬_t
));

159  
	`__wcsıy_®Ÿs
 (
__de¡
, 
__¤c
);

160 
	}
}

163 
wch¬_t
 *
	$__wııy_chk
 (
wch¬_t
 *
__de¡
, 
__cÚ¡
 wch¬_ˆ*
__¤c
,

164 
size_t
 
__de¡Ën
è
__THROW
;

165 
wch¬_t
 *
	`__REDIRECT_NTH
 (
__wııy_®Ÿs
, (wch¬_ˆ*
__de¡
,

166 
__cÚ¡
 
wch¬_t
 *
__¤c
),

167 
wııy
);

169 
__ex‹º_®ways_šlše
 
wch¬_t
 *

170 
	`__NTH
 (
	$wııy
 (
wch¬_t
 *
__de¡
, 
__cÚ¡
 wch¬_ˆ*
__¤c
))

172 ià(
	`__bos
 (
__de¡
è!ğ(
size_t
) -1)

173  
	`__wııy_chk
 (
__de¡
, 
__¤c
, 
	`__bos
 (__de¡è/  (
wch¬_t
));

174  
	`__wııy_®Ÿs
 (
__de¡
, 
__¤c
);

175 
	}
}

178 
wch¬_t
 *
	$__wc¢ıy_chk
 (
wch¬_t
 *
__»¡riù
 
__de¡
,

179 
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__¤c
, 
size_t
 
__n
,

180 
size_t
 
__de¡Ën
è
__THROW
;

181 
wch¬_t
 *
	`__REDIRECT_NTH
 (
__wc¢ıy_®Ÿs
,

182 (
wch¬_t
 *
__»¡riù
 
__de¡
,

183 
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__¤c
,

184 
size_t
 
__n
), 
wc¢ıy
);

185 
wch¬_t
 *
	`__REDIRECT_NTH
 (
__wc¢ıy_chk_w¬n
,

186 (
wch¬_t
 *
__»¡riù
 
__de¡
,

187 
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__¤c
,

188 
size_t
 
__n
, size_ˆ
__de¡Ën
), 
__wc¢ıy_chk
)

189 
	`__w¬Ç‰r
 ("wcsncpy called with†ength biggerhan size of destination "

192 
__ex‹º_®ways_šlše
 
wch¬_t
 *

193 
	`__NTH
 (
	$wc¢ıy
 (
wch¬_t
 *
__de¡
, 
__cÚ¡
 wch¬_ˆ*
__¤c
, 
size_t
 
__n
))

195 ià(
	`__bos
 (
__de¡
è!ğ(
size_t
) -1)

197 ià(!
	`__butš_cÚ¡ªt_p
 (
__n
))

198  
	`__wc¢ıy_chk
 (
__de¡
, 
__¤c
, 
__n
,

199 
	`__bos
 (
__de¡
è/  (
wch¬_t
));

200 ià(
__n
 > 
	`__bos
 (
__de¡
è/  (
wch¬_t
))

201  
	`__wc¢ıy_chk_w¬n
 (
__de¡
, 
__¤c
, 
__n
,

202 
	`__bos
 (
__de¡
è/  (
wch¬_t
));

204  
	`__wc¢ıy_®Ÿs
 (
__de¡
, 
__¤c
, 
__n
);

205 
	}
}

208 
wch¬_t
 *
	$__wınıy_chk
 (
wch¬_t
 *
__»¡riù
 
__de¡
,

209 
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__¤c
, 
size_t
 
__n
,

210 
size_t
 
__de¡Ën
è
__THROW
;

211 
wch¬_t
 *
	`__REDIRECT_NTH
 (
__wınıy_®Ÿs
,

212 (
wch¬_t
 *
__»¡riù
 
__de¡
,

213 
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__¤c
,

214 
size_t
 
__n
), 
wınıy
);

215 
wch¬_t
 *
	`__REDIRECT_NTH
 (
__wınıy_chk_w¬n
,

216 (
wch¬_t
 *
__»¡riù
 
__de¡
,

217 
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__¤c
,

218 
size_t
 
__n
, size_ˆ
__de¡Ën
), 
__wınıy_chk
)

219 
	`__w¬Ç‰r
 ("wcpncpy called with†ength biggerhan size of destination "

222 
__ex‹º_®ways_šlše
 
wch¬_t
 *

223 
	`__NTH
 (
	$wınıy
 (
wch¬_t
 *
__de¡
, 
__cÚ¡
 wch¬_ˆ*
__¤c
, 
size_t
 
__n
))

225 ià(
	`__bos
 (
__de¡
è!ğ(
size_t
) -1)

227 ià(!
	`__butš_cÚ¡ªt_p
 (
__n
))

228  
	`__wınıy_chk
 (
__de¡
, 
__¤c
, 
__n
,

229 
	`__bos
 (
__de¡
è/  (
wch¬_t
));

230 ià(
__n
 > 
	`__bos
 (
__de¡
è/  (
wch¬_t
))

231  
	`__wınıy_chk_w¬n
 (
__de¡
, 
__¤c
, 
__n
,

232 
	`__bos
 (
__de¡
è/  (
wch¬_t
));

234  
	`__wınıy_®Ÿs
 (
__de¡
, 
__¤c
, 
__n
);

235 
	}
}

238 
wch¬_t
 *
	$__wcsÿt_chk
 (
wch¬_t
 *
__»¡riù
 
__de¡
,

239 
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__¤c
,

240 
size_t
 
__de¡Ën
è
__THROW
;

241 
wch¬_t
 *
	`__REDIRECT_NTH
 (
__wcsÿt_®Ÿs
,

242 (
wch¬_t
 *
__»¡riù
 
__de¡
,

243 
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__¤c
), 
wcsÿt
);

245 
__ex‹º_®ways_šlše
 
wch¬_t
 *

246 
	`__NTH
 (
	$wcsÿt
 (
wch¬_t
 *
__de¡
, 
__cÚ¡
 wch¬_ˆ*
__¤c
))

248 ià(
	`__bos
 (
__de¡
è!ğ(
size_t
) -1)

249  
	`__wcsÿt_chk
 (
__de¡
, 
__¤c
, 
	`__bos
 (__de¡è/  (
wch¬_t
));

250  
	`__wcsÿt_®Ÿs
 (
__de¡
, 
__¤c
);

251 
	}
}

254 
wch¬_t
 *
	$__wc¢ÿt_chk
 (
wch¬_t
 *
__»¡riù
 
__de¡
,

255 
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__¤c
,

256 
size_t
 
__n
, size_ˆ
__de¡Ën
è
__THROW
;

257 
wch¬_t
 *
	`__REDIRECT_NTH
 (
__wc¢ÿt_®Ÿs
,

258 (
wch¬_t
 *
__»¡riù
 
__de¡
,

259 
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__¤c
,

260 
size_t
 
__n
), 
wc¢ÿt
);

262 
__ex‹º_®ways_šlše
 
wch¬_t
 *

263 
	`__NTH
 (
	$wc¢ÿt
 (
wch¬_t
 *
__de¡
, 
__cÚ¡
 wch¬_ˆ*
__¤c
, 
size_t
 
__n
))

265 ià(
	`__bos
 (
__de¡
è!ğ(
size_t
) -1)

266  
	`__wc¢ÿt_chk
 (
__de¡
, 
__¤c
, 
__n
,

267 
	`__bos
 (
__de¡
è/  (
wch¬_t
));

268  
	`__wc¢ÿt_®Ÿs
 (
__de¡
, 
__¤c
, 
__n
);

269 
	}
}

272 
	$__sw´štf_chk
 (
wch¬_t
 *
__»¡riù
 
__s
, 
size_t
 
__n
,

273 
__æag
, 
size_t
 
__s_Ën
,

274 
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__fÜm©
, ...)

275 
__THROW
 ;

277 
	`__REDIRECT_NTH_LDBL
 (
__sw´štf_®Ÿs
,

278 (
wch¬_t
 *
__»¡riù
 
__s
, 
size_t
 
__n
,

279 
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__fmt
, ...),

280 
sw´štf
);

282 #ifdeà
__va_¬g_·ck


283 
__ex‹º_®ways_šlše
 

284 
	`__NTH
 (
	$sw´štf
 (
wch¬_t
 *
__»¡riù
 
__s
, 
size_t
 
__n
,

285 
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__fmt
, ...))

287 ià(
	`__bos
 (
__s
è!ğ(
size_t
è-1 || 
__USE_FORTIFY_LEVEL
 > 1)

288  
	`__sw´štf_chk
 (
__s
, 
__n
, 
__USE_FORTIFY_LEVEL
 - 1,

289 
	`__bos
 (
__s
è/  (
wch¬_t
),

290 
__fmt
, 
	`__va_¬g_·ck
 ());

291  
	`__sw´štf_®Ÿs
 (
__s
, 
__n
, 
__fmt
, 
	`__va_¬g_·ck
 ());

292 
	}
}

293 #–ià!
defšed
 
__ılu¥lus


295 
	#sw´štf
(
s
, 
n
, ...) \

296 (
	`__bos
 (
s
è!ğ(
size_t
è-1 || 
__USE_FORTIFY_LEVEL
 > 1 \

297 ? 
	`__sw´štf_chk
 (
s
, 
n
, 
__USE_FORTIFY_LEVEL
 - 1, \

298 
	`__bos
 (
s
è/  (
wch¬_t
), 
__VA_ARGS__
) \

299 : 
	`sw´štf
 (
s
, 
n
, 
__VA_ARGS__
))

	)

302 
	$__vsw´štf_chk
 (
wch¬_t
 *
__»¡riù
 
__s
, 
size_t
 
__n
,

303 
__æag
, 
size_t
 
__s_Ën
,

304 
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__fÜm©
,

305 
__gnuc_va_li¡
 
__¬g
)

306 
__THROW
 ;

308 
	`__REDIRECT_NTH_LDBL
 (
__vsw´štf_®Ÿs
,

309 (
wch¬_t
 *
__»¡riù
 
__s
, 
size_t
 
__n
,

310 
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__fmt
,

311 
__gnuc_va_li¡
 
__­
), 
vsw´štf
);

313 
__ex‹º_®ways_šlše
 

314 
	`__NTH
 (
	$vsw´štf
 (
wch¬_t
 *
__»¡riù
 
__s
, 
size_t
 
__n
,

315 
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__fmt
, 
__gnuc_va_li¡
 
__­
))

317 ià(
	`__bos
 (
__s
è!ğ(
size_t
è-1 || 
__USE_FORTIFY_LEVEL
 > 1)

318  
	`__vsw´štf_chk
 (
__s
, 
__n
, 
__USE_FORTIFY_LEVEL
 - 1,

319 
	`__bos
 (
__s
è/  (
wch¬_t
), 
__fmt
, 
__­
);

320  
	`__vsw´štf_®Ÿs
 (
__s
, 
__n
, 
__fmt
, 
__­
);

321 
	}
}

324 #ià
__USE_FORTIFY_LEVEL
 > 1

326 
__fw´štf_chk
 (
__FILE
 *
__»¡riù
 
__¡»am
, 
__æag
,

327 
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__fÜm©
, ...);

328 
__w´štf_chk
 (
__æag
, 
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__fÜm©
,

330 
__vfw´štf_chk
 (
__FILE
 *
__»¡riù
 
__¡»am
, 
__æag
,

331 
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__fÜm©
,

332 
__gnuc_va_li¡
 
__­
);

333 
__vw´štf_chk
 (
__æag
, 
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__fÜm©
,

334 
__gnuc_va_li¡
 
__­
);

336 #ifdeà
__va_¬g_·ck


337 
__ex‹º_®ways_šlše
 

338 
	$w´štf
 (
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__fmt
, ...)

340  
	`__w´štf_chk
 (
__USE_FORTIFY_LEVEL
 - 1, 
__fmt
, 
	`__va_¬g_·ck
 ());

341 
	}
}

343 
__ex‹º_®ways_šlše
 

344 
	$fw´štf
 (
__FILE
 *
__»¡riù
 
__¡»am
, 
__cÚ¡
 
wch¬_t
 *__»¡riù 
__fmt
, ...)

346  
	`__fw´štf_chk
 (
__¡»am
, 
__USE_FORTIFY_LEVEL
 - 1, 
__fmt
,

347 
	`__va_¬g_·ck
 ());

348 
	}
}

349 #–ià!
defšed
 
__ılu¥lus


350 
	#w´štf
(...) \

351 
	`__w´štf_chk
 (
__USE_FORTIFY_LEVEL
 - 1, 
__VA_ARGS__
)

	)

352 
	#fw´štf
(
¡»am
, ...) \

353 
	`__fw´štf_chk
 (
¡»am
, 
__USE_FORTIFY_LEVEL
 - 1, 
__VA_ARGS__
)

	)

356 
__ex‹º_®ways_šlše
 

357 
	$vw´štf
 (
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__fmt
, 
__gnuc_va_li¡
 
__­
)

359  
	`__vw´štf_chk
 (
__USE_FORTIFY_LEVEL
 - 1, 
__fmt
, 
__­
);

360 
	}
}

362 
__ex‹º_®ways_šlše
 

363 
	$vfw´štf
 (
__FILE
 *
__»¡riù
 
__¡»am
,

364 
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__fmt
, 
__gnuc_va_li¡
 
__­
)

366  
	`__vfw´štf_chk
 (
__¡»am
, 
__USE_FORTIFY_LEVEL
 - 1, 
__fmt
, 
__­
);

367 
	}
}

371 
wch¬_t
 *
	$__fg‘ws_chk
 (
wch¬_t
 *
__»¡riù
 
__s
, 
size_t
 
__size
, 
__n
,

372 
__FILE
 *
__»¡riù
 
__¡»am
è
__wur
;

373 
wch¬_t
 *
	`__REDIRECT
 (
__fg‘ws_®Ÿs
,

374 (
wch¬_t
 *
__»¡riù
 
__s
, 
__n
,

375 
__FILE
 *
__»¡riù
 
__¡»am
), 
fg‘ws
è
__wur
;

376 
wch¬_t
 *
	`__REDIRECT
 (
__fg‘ws_chk_w¬n
,

377 (
wch¬_t
 *
__»¡riù
 
__s
, 
size_t
 
__size
, 
__n
,

378 
__FILE
 *
__»¡riù
 
__¡»am
), 
__fg‘ws_chk
)

379 
__wur
 
	`__w¬Ç‰r
 ("fgetws called with bigger sizehan†ength "

382 
__ex‹º_®ways_šlše
 
__wur
 
wch¬_t
 *

383 
	$fg‘ws
 (
wch¬_t
 *
__»¡riù
 
__s
, 
__n
, 
__FILE
 *__»¡riù 
__¡»am
)

385 ià(
	`__bos
 (
__s
è!ğ(
size_t
) -1)

387 ià(!
	`__butš_cÚ¡ªt_p
 (
__n
) || __n <= 0)

388  
	`__fg‘ws_chk
 (
__s
, 
	`__bos
 (__sè/  (
wch¬_t
),

389 
__n
, 
__¡»am
);

391 ià((
size_t
è
__n
 > 
	`__bos
 (
__s
è/  (
wch¬_t
))

392  
	`__fg‘ws_chk_w¬n
 (
__s
, 
	`__bos
 (__sè/  (
wch¬_t
),

393 
__n
, 
__¡»am
);

395  
	`__fg‘ws_®Ÿs
 (
__s
, 
__n
, 
__¡»am
);

396 
	}
}

398 #ifdeà
__USE_GNU


399 
wch¬_t
 *
	$__fg‘ws_uÆocked_chk
 (
wch¬_t
 *
__»¡riù
 
__s
, 
size_t
 
__size
,

400 
__n
, 
__FILE
 *
__»¡riù
 
__¡»am
)

401 
__wur
;

402 
wch¬_t
 *
	`__REDIRECT
 (
__fg‘ws_uÆocked_®Ÿs
,

403 (
wch¬_t
 *
__»¡riù
 
__s
, 
__n
,

404 
__FILE
 *
__»¡riù
 
__¡»am
), 
fg‘ws_uÆocked
)

405 
__wur
;

406 
wch¬_t
 *
	`__REDIRECT
 (
__fg‘ws_uÆocked_chk_w¬n
,

407 (
wch¬_t
 *
__»¡riù
 
__s
, 
size_t
 
__size
, 
__n
,

408 
__FILE
 *
__»¡riù
 
__¡»am
),

409 
__fg‘ws_uÆocked_chk
)

410 
__wur
 
	`__w¬Ç‰r
 ("fgetws_unlocked called with bigger sizehan†ength "

413 
__ex‹º_®ways_šlše
 
__wur
 
wch¬_t
 *

414 
	$fg‘ws_uÆocked
 (
wch¬_t
 *
__»¡riù
 
__s
, 
__n
, 
__FILE
 *__»¡riù 
__¡»am
)

416 ià(
	`__bos
 (
__s
è!ğ(
size_t
) -1)

418 ià(!
	`__butš_cÚ¡ªt_p
 (
__n
) || __n <= 0)

419  
	`__fg‘ws_uÆocked_chk
 (
__s
, 
	`__bos
 (__sè/  (
wch¬_t
),

420 
__n
, 
__¡»am
);

422 ià((
size_t
è
__n
 > 
	`__bos
 (
__s
è/  (
wch¬_t
))

423  
	`__fg‘ws_uÆocked_chk_w¬n
 (
__s
, 
	`__bos
 (__sè/  (
wch¬_t
),

424 
__n
, 
__¡»am
);

426  
	`__fg‘ws_uÆocked_®Ÿs
 (
__s
, 
__n
, 
__¡»am
);

427 
	}
}

431 
size_t
 
	$__wütomb_chk
 (*
__s
, 
wch¬_t
 
__wch¬
, 
mb¡©e_t
 *
__p
,

432 
size_t
 
__buæ’
è
__THROW
 
__wur
;

433 
size_t
 
	`__REDIRECT_NTH
 (
__wütomb_®Ÿs
,

434 (*
__»¡riù
 
__s
, 
wch¬_t
 
__wch¬
,

435 
mb¡©e_t
 *
__»¡riù
 
__ps
), 
wütomb
è
__wur
;

437 
__ex‹º_®ways_šlše
 
__wur
 
size_t


438 
	`__NTH
 (
	$wütomb
 (*
__s
, 
wch¬_t
 
__wch¬
, 
mb¡©e_t
 *
__ps
))

443 
	#__WCHAR_MB_LEN_MAX
 16

	)

444 #ià
defšed
 
MB_LEN_MAX
 && MB_LEN_MAX !ğ
__WCHAR_MB_LEN_MAX


447 ià(
	`__bos
 (
__s
è!ğ(
size_t
è-1 && 
__WCHAR_MB_LEN_MAX
 > __bos (__s))

448  
	`__wütomb_chk
 (
__s
, 
__wch¬
, 
__ps
, 
	`__bos
 (__s));

449  
	`__wütomb_®Ÿs
 (
__s
, 
__wch¬
, 
__ps
);

450 
	}
}

453 
size_t
 
	$__mb¤towcs_chk
 (
wch¬_t
 *
__»¡riù
 
__d¡
,

454 
__cÚ¡
 **
__»¡riù
 
__¤c
,

455 
size_t
 
__Ën
, 
mb¡©e_t
 *
__»¡riù
 
__ps
,

456 
size_t
 
__d¡Ën
è
__THROW
;

457 
size_t
 
	`__REDIRECT_NTH
 (
__mb¤towcs_®Ÿs
,

458 (
wch¬_t
 *
__»¡riù
 
__d¡
,

459 
__cÚ¡
 **
__»¡riù
 
__¤c
,

460 
size_t
 
__Ën
, 
mb¡©e_t
 *
__»¡riù
 
__ps
),

461 
mb¤towcs
);

462 
size_t
 
	`__REDIRECT_NTH
 (
__mb¤towcs_chk_w¬n
,

463 (
wch¬_t
 *
__»¡riù
 
__d¡
,

464 
__cÚ¡
 **
__»¡riù
 
__¤c
,

465 
size_t
 
__Ën
, 
mb¡©e_t
 *
__»¡riù
 
__ps
,

466 
size_t
 
__d¡Ën
), 
__mb¤towcs_chk
)

467 
	`__w¬Ç‰r
 ("mbsrtowcs called with dst buffer smallerhan†en "

470 
__ex‹º_®ways_šlše
 
size_t


471 
	`__NTH
 (
	$mb¤towcs
 (
wch¬_t
 *
__»¡riù
 
__d¡
, 
__cÚ¡
 **__»¡riù 
__¤c
,

472 
size_t
 
__Ën
, 
mb¡©e_t
 *
__»¡riù
 
__ps
))

474 ià(
	`__bos
 (
__d¡
è!ğ(
size_t
) -1)

476 ià(!
	`__butš_cÚ¡ªt_p
 (
__Ën
))

477  
	`__mb¤towcs_chk
 (
__d¡
, 
__¤c
, 
__Ën
, 
__ps
,

478 
	`__bos
 (
__d¡
è/  (
wch¬_t
));

480 ià(
__Ën
 > 
	`__bos
 (
__d¡
è/  (
wch¬_t
))

481  
	`__mb¤towcs_chk_w¬n
 (
__d¡
, 
__¤c
, 
__Ën
, 
__ps
,

482 
	`__bos
 (
__d¡
è/  (
wch¬_t
));

484  
	`__mb¤towcs_®Ÿs
 (
__d¡
, 
__¤c
, 
__Ën
, 
__ps
);

485 
	}
}

488 
size_t
 
	$__wc¤tombs_chk
 (*
__»¡riù
 
__d¡
,

489 
__cÚ¡
 
wch¬_t
 **
__»¡riù
 
__¤c
,

490 
size_t
 
__Ën
, 
mb¡©e_t
 *
__»¡riù
 
__ps
,

491 
size_t
 
__d¡Ën
è
__THROW
;

492 
size_t
 
	`__REDIRECT_NTH
 (
__wc¤tombs_®Ÿs
,

493 (*
__»¡riù
 
__d¡
,

494 
__cÚ¡
 
wch¬_t
 **
__»¡riù
 
__¤c
,

495 
size_t
 
__Ën
, 
mb¡©e_t
 *
__»¡riù
 
__ps
),

496 
wc¤tombs
);

497 
size_t
 
	`__REDIRECT_NTH
 (
__wc¤tombs_chk_w¬n
,

498 (*
__»¡riù
 
__d¡
,

499 
__cÚ¡
 
wch¬_t
 **
__»¡riù
 
__¤c
,

500 
size_t
 
__Ën
, 
mb¡©e_t
 *
__»¡riù
 
__ps
,

501 
size_t
 
__d¡Ën
), 
__wc¤tombs_chk
)

502 
	`__w¬Ç‰r
 ("wcsrtombs called with dst buffer smallerhan†en");

504 
__ex‹º_®ways_šlše
 
size_t


505 
	`__NTH
 (
	$wc¤tombs
 (*
__»¡riù
 
__d¡
, 
__cÚ¡
 
wch¬_t
 **__»¡riù 
__¤c
,

506 
size_t
 
__Ën
, 
mb¡©e_t
 *
__»¡riù
 
__ps
))

508 ià(
	`__bos
 (
__d¡
è!ğ(
size_t
) -1)

510 ià(!
	`__butš_cÚ¡ªt_p
 (
__Ën
))

511  
	`__wc¤tombs_chk
 (
__d¡
, 
__¤c
, 
__Ën
, 
__ps
, 
	`__bos
 (__dst));

513 ià(
__Ën
 > 
	`__bos
 (
__d¡
))

514  
	`__wc¤tombs_chk_w¬n
 (
__d¡
, 
__¤c
, 
__Ën
, 
__ps
, 
	`__bos
 (__dst));

516  
	`__wc¤tombs_®Ÿs
 (
__d¡
, 
__¤c
, 
__Ën
, 
__ps
);

517 
	}
}

520 #ifdeà
__USE_GNU


521 
size_t
 
	$__mb¢¹owcs_chk
 (
wch¬_t
 *
__»¡riù
 
__d¡
,

522 
__cÚ¡
 **
__»¡riù
 
__¤c
, 
size_t
 
__nmc
,

523 
size_t
 
__Ën
, 
mb¡©e_t
 *
__»¡riù
 
__ps
,

524 
size_t
 
__d¡Ën
è
__THROW
;

525 
size_t
 
	`__REDIRECT_NTH
 (
__mb¢¹owcs_®Ÿs
,

526 (
wch¬_t
 *
__»¡riù
 
__d¡
,

527 
__cÚ¡
 **
__»¡riù
 
__¤c
, 
size_t
 
__nmc
,

528 
size_t
 
__Ën
, 
mb¡©e_t
 *
__»¡riù
 
__ps
),

529 
mb¢¹owcs
);

530 
size_t
 
	`__REDIRECT_NTH
 (
__mb¢¹owcs_chk_w¬n
,

531 (
wch¬_t
 *
__»¡riù
 
__d¡
,

532 
__cÚ¡
 **
__»¡riù
 
__¤c
, 
size_t
 
__nmc
,

533 
size_t
 
__Ën
, 
mb¡©e_t
 *
__»¡riù
 
__ps
,

534 
size_t
 
__d¡Ën
), 
__mb¢¹owcs_chk
)

535 
	`__w¬Ç‰r
 ("mbsnrtowcs called with dst buffer smallerhan†en "

538 
__ex‹º_®ways_šlše
 
size_t


539 
	`__NTH
 (
	$mb¢¹owcs
 (
wch¬_t
 *
__»¡riù
 
__d¡
, 
__cÚ¡
 **__»¡riù 
__¤c
,

540 
size_t
 
__nmc
, size_ˆ
__Ën
, 
mb¡©e_t
 *
__»¡riù
 
__ps
))

542 ià(
	`__bos
 (
__d¡
è!ğ(
size_t
) -1)

544 ià(!
	`__butš_cÚ¡ªt_p
 (
__Ën
))

545  
	`__mb¢¹owcs_chk
 (
__d¡
, 
__¤c
, 
__nmc
, 
__Ën
, 
__ps
,

546 
	`__bos
 (
__d¡
è/  (
wch¬_t
));

548 ià(
__Ën
 > 
	`__bos
 (
__d¡
è/  (
wch¬_t
))

549  
	`__mb¢¹owcs_chk_w¬n
 (
__d¡
, 
__¤c
, 
__nmc
, 
__Ën
, 
__ps
,

550 
	`__bos
 (
__d¡
è/  (
wch¬_t
));

552  
	`__mb¢¹owcs_®Ÿs
 (
__d¡
, 
__¤c
, 
__nmc
, 
__Ën
, 
__ps
);

553 
	}
}

556 
size_t
 
	$__wc¢¹ombs_chk
 (*
__»¡riù
 
__d¡
,

557 
__cÚ¡
 
wch¬_t
 **
__»¡riù
 
__¤c
,

558 
size_t
 
__nwc
, size_ˆ
__Ën
,

559 
mb¡©e_t
 *
__»¡riù
 
__ps
, 
size_t
 
__d¡Ën
)

560 
__THROW
;

561 
size_t
 
	`__REDIRECT_NTH
 (
__wc¢¹ombs_®Ÿs
,

562 (*
__»¡riù
 
__d¡
,

563 
__cÚ¡
 
wch¬_t
 **
__»¡riù
 
__¤c
,

564 
size_t
 
__nwc
, size_ˆ
__Ën
,

565 
mb¡©e_t
 *
__»¡riù
 
__ps
), 
wc¢¹ombs
);

566 
size_t
 
	`__REDIRECT_NTH
 (
__wc¢¹ombs_chk_w¬n
,

567 (*
__»¡riù
 
__d¡
,

568 
__cÚ¡
 
wch¬_t
 **
__»¡riù
 
__¤c
,

569 
size_t
 
__nwc
, size_ˆ
__Ën
,

570 
mb¡©e_t
 *
__»¡riù
 
__ps
,

571 
size_t
 
__d¡Ën
), 
__wc¢¹ombs_chk
)

572 
	`__w¬Ç‰r
 ("wcsnrtombs called with dst buffer smallerhan†en");

574 
__ex‹º_®ways_šlše
 
size_t


575 
	`__NTH
 (
	$wc¢¹ombs
 (*
__»¡riù
 
__d¡
, 
__cÚ¡
 
wch¬_t
 **__»¡riù 
__¤c
,

576 
size_t
 
__nwc
, size_ˆ
__Ën
, 
mb¡©e_t
 *
__»¡riù
 
__ps
))

578 ià(
	`__bos
 (
__d¡
è!ğ(
size_t
) -1)

580 ià(!
	`__butš_cÚ¡ªt_p
 (
__Ën
))

581  
	`__wc¢¹ombs_chk
 (
__d¡
, 
__¤c
, 
__nwc
, 
__Ën
, 
__ps
,

582 
	`__bos
 (
__d¡
));

584 ià(
__Ën
 > 
	`__bos
 (
__d¡
))

585  
	`__wc¢¹ombs_chk_w¬n
 (
__d¡
, 
__¤c
, 
__nwc
, 
__Ën
, 
__ps
,

586 
	`__bos
 (
__d¡
));

588  
	`__wc¢¹ombs_®Ÿs
 (
__d¡
, 
__¤c
, 
__nwc
, 
__Ën
, 
__ps
);

589 
	}
}

	@/usr/include/errno.h

23 #iâdef 
_ERRNO_H


27 #iâdef 
__Ãed_Em©h


28 
	#_ERRNO_H
 1

	)

29 
	~<ã©u»s.h
>

32 
	g__BEGIN_DECLS


36 
	~<b™s/”ºo.h
>

37 #undeà
__Ãed_Em©h


39 #ifdef 
_ERRNO_H


46 #iâdef 
”ºo


47 
”ºo
;

50 #ifdeà
__USE_GNU


55 *
´og¿m_švoÿtiÚ_Çme
, *
´og¿m_švoÿtiÚ_shÜt_Çme
;

59 
	g__END_DECLS


67 #ià
defšed
 
__USE_GNU
 || defšed 
__Ãed_”rÜ_t


68 #iâdeà
__”rÜ_t_defšed


69 
	t”rÜ_t
;

70 
	#__”rÜ_t_defšed
 1

	)

72 #undeà
__Ãed_”rÜ_t


	@/usr/include/gnu/option-groups.h

10 #iâdeà
__GNU_OPTION_GROUPS_H


11 
	#__GNU_OPTION_GROUPS_H


	)

13 
	#__OPTION_EGLIBC_ADVANCED_INET6
 1

	)

14 
	#__OPTION_EGLIBC_BACKTRACE
 1

	)

15 
	#__OPTION_EGLIBC_BIG_MACROS
 1

	)

16 
	#__OPTION_EGLIBC_BSD
 1

	)

17 
	#__OPTION_EGLIBC_CATGETS
 1

	)

18 
	#__OPTION_EGLIBC_CHARSETS
 1

	)

19 
	#__OPTION_EGLIBC_CXX_TESTS
 1

	)

20 
	#__OPTION_EGLIBC_DB_ALIASES
 1

	)

21 
	#__OPTION_EGLIBC_ENVZ
 1

	)

22 
	#__OPTION_EGLIBC_FCVT
 1

	)

23 
	#__OPTION_EGLIBC_FMTMSG
 1

	)

24 
	#__OPTION_EGLIBC_FSTAB
 1

	)

25 
	#__OPTION_EGLIBC_FTRAVERSE
 1

	)

26 
	#__OPTION_EGLIBC_GETLOGIN
 1

	)

27 
	#__OPTION_EGLIBC_INET
 1

	)

28 
	#__OPTION_EGLIBC_LIBM
 1

	)

29 
	#__OPTION_EGLIBC_LOCALES
 1

	)

30 
	#__OPTION_EGLIBC_LOCALE_CODE
 1

	)

31 
	#__OPTION_EGLIBC_MEMUSAGE
 1

	)

32 
	#__OPTION_EGLIBC_NIS
 1

	)

33 
	#__OPTION_EGLIBC_NSSWITCH
 1

	)

34 
	#__OPTION_EGLIBC_RCMD
 1

	)

35 
	#__OPTION_EGLIBC_SPAWN
 1

	)

36 
	#__OPTION_EGLIBC_STREAMS
 1

	)

37 
	#__OPTION_EGLIBC_SUNRPC
 1

	)

38 
	#__OPTION_EGLIBC_UTMP
 1

	)

39 
	#__OPTION_EGLIBC_UTMPX
 1

	)

40 
	#__OPTION_EGLIBC_WORDEXP
 1

	)

41 
	#__OPTION_POSIX_C_LANG_WIDE_CHAR
 1

	)

42 
	#__OPTION_POSIX_REGEXP
 1

	)

43 
	#__OPTION_POSIX_REGEXP_GLIBC
 1

	)

44 
	#__OPTION_POSIX_WIDE_CHAR_DEVICE_IO
 1

	)

	@/usr/include/wctype.h

24 #iâdeà
_WCTYPE_H


26 
	~<ã©u»s.h
>

27 
	~<b™s/ty³s.h
>

29 #iâdeà
__Ãed_iswxxx


30 
	#_WCTYPE_H
 1

	)

33 
	#__Ãed_wšt_t


	)

34 
	~<¡ddef.h
>

38 #iâdeà
WEOF


39 
	#WEOF
 (0xffffffffu)

	)

42 #undeà
__Ãed_iswxxx


47 #iâdeà
__iswxxx_defšed


48 
	#__iswxxx_defšed
 1

	)

50 
__BEGIN_NAMESPACE_C99


53 
	twùy³_t
;

54 
	g__END_NAMESPACE_C99


56 #iâdeà
_ISwb™


61 
	~<’dŸn.h
>

62 #ià
__BYTE_ORDER
 =ğ
__BIG_ENDIAN


63 
	#_ISwb™
(
b™
è(1 << (b™))

	)

65 
	#_ISwb™
(
b™
) \

66 ((
b™
) < 8 ? () ((1UL << (bit)) << 24) \

67 : ((
b™
) < 16 ? () ((1UL << (bit)) << 8) \

68 : ((
b™
) < 24 ? () ((1UL << (bit)) >> 8) \

69 : (è((1UL << (
b™
)è>> 24))))

	)

74 
	m__ISwuµ”
 = 0,

75 
	m__ISwlow”
 = 1,

76 
	m__ISw®pha
 = 2,

77 
	m__ISwdig™
 = 3,

78 
	m__ISwxdig™
 = 4,

79 
	m__ISw¥aû
 = 5,

80 
	m__ISw´št
 = 6,

81 
	m__ISwg¿ph
 = 7,

82 
	m__ISwbÏnk
 = 8,

83 
	m__ISwúŒl
 = 9,

84 
	m__ISwpunù
 = 10,

85 
	m__ISw®num
 = 11,

87 
	m_ISwuµ”
 = 
_ISwb™
 (
__ISwuµ”
),

88 
	m_ISwlow”
 = 
_ISwb™
 (
__ISwlow”
),

89 
	m_ISw®pha
 = 
_ISwb™
 (
__ISw®pha
),

90 
	m_ISwdig™
 = 
_ISwb™
 (
__ISwdig™
),

91 
	m_ISwxdig™
 = 
_ISwb™
 (
__ISwxdig™
),

92 
	m_ISw¥aû
 = 
_ISwb™
 (
__ISw¥aû
),

93 
	m_ISw´št
 = 
_ISwb™
 (
__ISw´št
),

94 
	m_ISwg¿ph
 = 
_ISwb™
 (
__ISwg¿ph
),

95 
	m_ISwbÏnk
 = 
_ISwb™
 (
__ISwbÏnk
),

96 
	m_ISwúŒl
 = 
_ISwb™
 (
__ISwúŒl
),

97 
	m_ISwpunù
 = 
_ISwb™
 (
__ISwpunù
),

98 
	m_ISw®num
 = 
_ISwb™
 (
__ISw®num
)

103 
__BEGIN_DECLS


105 
__BEGIN_NAMESPACE_C99


112 
	$isw®num
 (
wšt_t
 
__wc
è
__THROW
;

118 
	$isw®pha
 (
wšt_t
 
__wc
è
__THROW
;

121 
	$iswúŒl
 (
wšt_t
 
__wc
è
__THROW
;

125 
	$iswdig™
 (
wšt_t
 
__wc
è
__THROW
;

129 
	$iswg¿ph
 (
wšt_t
 
__wc
è
__THROW
;

134 
	$iswlow”
 (
wšt_t
 
__wc
è
__THROW
;

137 
	$isw´št
 (
wšt_t
 
__wc
è
__THROW
;

142 
	$iswpunù
 (
wšt_t
 
__wc
è
__THROW
;

147 
	$isw¥aû
 (
wšt_t
 
__wc
è
__THROW
;

152 
	$iswuµ”
 (
wšt_t
 
__wc
è
__THROW
;

157 
	$iswxdig™
 (
wšt_t
 
__wc
è
__THROW
;

162 #ifdeà
__USE_ISOC99


163 
	$iswbÏnk
 (
wšt_t
 
__wc
è
__THROW
;

172 
wùy³_t
 
	$wùy³
 (
__cÚ¡
 *
__´İ”ty
è
__THROW
;

176 
	$iswùy³
 (
wšt_t
 
__wc
, 
wùy³_t
 
__desc
è
__THROW
;

177 
__END_NAMESPACE_C99


184 
__BEGIN_NAMESPACE_C99


187 
__cÚ¡
 
	t__št32_t
 *
	twù¿ns_t
;

188 
__END_NAMESPACE_C99


189 #ifdeà
__USE_GNU


190 
	$__USING_NAMESPACE_C99
(
wù¿ns_t
)

193 
__BEGIN_NAMESPACE_C99


195 
wšt_t
 
	$towlow”
 (
wšt_t
 
__wc
è
__THROW
;

198 
wšt_t
 
	$towuµ”
 (
wšt_t
 
__wc
è
__THROW
;

199 
__END_NAMESPACE_C99


201 
__END_DECLS


208 #ifdeà
_WCTYPE_H


214 
__BEGIN_DECLS


216 
__BEGIN_NAMESPACE_C99


219 
wù¿ns_t
 
	$wù¿ns
 (
__cÚ¡
 *
__´İ”ty
è
__THROW
;

222 
wšt_t
 
	$towù¿ns
 (
wšt_t
 
__wc
, 
wù¿ns_t
 
__desc
è
__THROW
;

223 
__END_NAMESPACE_C99


225 #ifdeà
__USE_XOPEN2K8


227 
	~<xloÿË.h
>

231 
	$isw®num_l
 (
wšt_t
 
__wc
, 
__loÿË_t
 
__loÿË
è
__THROW
;

237 
	$isw®pha_l
 (
wšt_t
 
__wc
, 
__loÿË_t
 
__loÿË
è
__THROW
;

240 
	$iswúŒl_l
 (
wšt_t
 
__wc
, 
__loÿË_t
 
__loÿË
è
__THROW
;

244 
	$iswdig™_l
 (
wšt_t
 
__wc
, 
__loÿË_t
 
__loÿË
è
__THROW
;

248 
	$iswg¿ph_l
 (
wšt_t
 
__wc
, 
__loÿË_t
 
__loÿË
è
__THROW
;

253 
	$iswlow”_l
 (
wšt_t
 
__wc
, 
__loÿË_t
 
__loÿË
è
__THROW
;

256 
	$isw´št_l
 (
wšt_t
 
__wc
, 
__loÿË_t
 
__loÿË
è
__THROW
;

261 
	$iswpunù_l
 (
wšt_t
 
__wc
, 
__loÿË_t
 
__loÿË
è
__THROW
;

266 
	$isw¥aû_l
 (
wšt_t
 
__wc
, 
__loÿË_t
 
__loÿË
è
__THROW
;

271 
	$iswuµ”_l
 (
wšt_t
 
__wc
, 
__loÿË_t
 
__loÿË
è
__THROW
;

276 
	$iswxdig™_l
 (
wšt_t
 
__wc
, 
__loÿË_t
 
__loÿË
è
__THROW
;

281 
	$iswbÏnk_l
 (
wšt_t
 
__wc
, 
__loÿË_t
 
__loÿË
è
__THROW
;

285 
wùy³_t
 
	$wùy³_l
 (
__cÚ¡
 *
__´İ”ty
, 
__loÿË_t
 
__loÿË
)

286 
__THROW
;

290 
	$iswùy³_l
 (
wšt_t
 
__wc
, 
wùy³_t
 
__desc
, 
__loÿË_t
 
__loÿË
)

291 
__THROW
;

299 
wšt_t
 
	$towlow”_l
 (
wšt_t
 
__wc
, 
__loÿË_t
 
__loÿË
è
__THROW
;

302 
wšt_t
 
	$towuµ”_l
 (
wšt_t
 
__wc
, 
__loÿË_t
 
__loÿË
è
__THROW
;

306 
wù¿ns_t
 
	$wù¿ns_l
 (
__cÚ¡
 *
__´İ”ty
, 
__loÿË_t
 
__loÿË
)

307 
__THROW
;

310 
wšt_t
 
	$towù¿ns_l
 (
wšt_t
 
__wc
, 
wù¿ns_t
 
__desc
,

311 
__loÿË_t
 
__loÿË
è
__THROW
;

315 
__END_DECLS


	@/usr/include/bits/errno.h

20 #ifdeà
_ERRNO_H


22 #undeà
EDOM


23 #undeà
EILSEQ


24 #undeà
ERANGE


25 
	~<lšux/”ºo.h
>

28 
	#ENOTSUP
 
EOPNOTSUPP


	)

31 #iâdeà
ECANCELED


32 
	#ECANCELED
 125

	)

36 #iâdeà
EOWNERDEAD


37 
	#EOWNERDEAD
 130

	)

38 
	#ENOTRECOVERABLE
 131

	)

41 #iâdeà
__ASSEMBLER__


43 *
	$__”ºo_loÿtiÚ
 (è
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
));

45 #ià!
defšed
 
_LIBC
 || defšed 
_LIBC_REENTRANT


47 
	#”ºo
 (*
	`__”ºo_loÿtiÚ
 ())

	)

52 #ià!
defšed
 
_ERRNO_H
 && defšed 
__Ãed_Em©h


56 
	#EDOM
 33

	)

57 
	#EILSEQ
 84

	)

58 
	#ERANGE
 34

	)

	@/usr/include/linux/errno.h

1 #iâdeà
_LINUX_ERRNO_H


2 
	#_LINUX_ERRNO_H


	)

4 
	~<asm/”ºo.h
>

	@/usr/include/asm/errno.h

1 
	~<asm-g’”ic/”ºo.h
>

	@/usr/include/asm-generic/errno.h

1 #iâdeà
_ASM_GENERIC_ERRNO_H


2 
	#_ASM_GENERIC_ERRNO_H


	)

4 
	~<asm-g’”ic/”ºo-ba£.h
>

6 
	#EDEADLK
 35

	)

7 
	#ENAMETOOLONG
 36

	)

8 
	#ENOLCK
 37

	)

9 
	#ENOSYS
 38

	)

10 
	#ENOTEMPTY
 39

	)

11 
	#ELOOP
 40

	)

12 
	#EWOULDBLOCK
 
EAGAIN


	)

13 
	#ENOMSG
 42

	)

14 
	#EIDRM
 43

	)

15 
	#ECHRNG
 44

	)

16 
	#EL2NSYNC
 45

	)

17 
	#EL3HLT
 46

	)

18 
	#EL3RST
 47

	)

19 
	#ELNRNG
 48

	)

20 
	#EUNATCH
 49

	)

21 
	#ENOCSI
 50

	)

22 
	#EL2HLT
 51

	)

23 
	#EBADE
 52

	)

24 
	#EBADR
 53

	)

25 
	#EXFULL
 54

	)

26 
	#ENOANO
 55

	)

27 
	#EBADRQC
 56

	)

28 
	#EBADSLT
 57

	)

30 
	#EDEADLOCK
 
EDEADLK


	)

32 
	#EBFONT
 59

	)

33 
	#ENOSTR
 60

	)

34 
	#ENODATA
 61

	)

35 
	#ETIME
 62

	)

36 
	#ENOSR
 63

	)

37 
	#ENONET
 64

	)

38 
	#ENOPKG
 65

	)

39 
	#EREMOTE
 66

	)

40 
	#ENOLINK
 67

	)

41 
	#EADV
 68

	)

42 
	#ESRMNT
 69

	)

43 
	#ECOMM
 70

	)

44 
	#EPROTO
 71

	)

45 
	#EMULTIHOP
 72

	)

46 
	#EDOTDOT
 73

	)

47 
	#EBADMSG
 74

	)

48 
	#EOVERFLOW
 75

	)

49 
	#ENOTUNIQ
 76

	)

50 
	#EBADFD
 77

	)

51 
	#EREMCHG
 78

	)

52 
	#ELIBACC
 79

	)

53 
	#ELIBBAD
 80

	)

54 
	#ELIBSCN
 81

	)

55 
	#ELIBMAX
 82

	)

56 
	#ELIBEXEC
 83

	)

57 
	#EILSEQ
 84

	)

58 
	#ERESTART
 85

	)

59 
	#ESTRPIPE
 86

	)

60 
	#EUSERS
 87

	)

61 
	#ENOTSOCK
 88

	)

62 
	#EDESTADDRREQ
 89

	)

63 
	#EMSGSIZE
 90

	)

64 
	#EPROTOTYPE
 91

	)

65 
	#ENOPROTOOPT
 92

	)

66 
	#EPROTONOSUPPORT
 93

	)

67 
	#ESOCKTNOSUPPORT
 94

	)

68 
	#EOPNOTSUPP
 95

	)

69 
	#EPFNOSUPPORT
 96

	)

70 
	#EAFNOSUPPORT
 97

	)

71 
	#EADDRINUSE
 98

	)

72 
	#EADDRNOTAVAIL
 99

	)

73 
	#ENETDOWN
 100

	)

74 
	#ENETUNREACH
 101

	)

75 
	#ENETRESET
 102

	)

76 
	#ECONNABORTED
 103

	)

77 
	#ECONNRESET
 104

	)

78 
	#ENOBUFS
 105

	)

79 
	#EISCONN
 106

	)

80 
	#ENOTCONN
 107

	)

81 
	#ESHUTDOWN
 108

	)

82 
	#ETOOMANYREFS
 109

	)

83 
	#ETIMEDOUT
 110

	)

84 
	#ECONNREFUSED
 111

	)

85 
	#EHOSTDOWN
 112

	)

86 
	#EHOSTUNREACH
 113

	)

87 
	#EALREADY
 114

	)

88 
	#EINPROGRESS
 115

	)

89 
	#ESTALE
 116

	)

90 
	#EUCLEAN
 117

	)

91 
	#ENOTNAM
 118

	)

92 
	#ENAVAIL
 119

	)

93 
	#EISNAM
 120

	)

94 
	#EREMOTEIO
 121

	)

95 
	#EDQUOT
 122

	)

97 
	#ENOMEDIUM
 123

	)

98 
	#EMEDIUMTYPE
 124

	)

99 
	#ECANCELED
 125

	)

100 
	#ENOKEY
 126

	)

101 
	#EKEYEXPIRED
 127

	)

102 
	#EKEYREVOKED
 128

	)

103 
	#EKEYREJECTED
 129

	)

106 
	#EOWNERDEAD
 130

	)

107 
	#ENOTRECOVERABLE
 131

	)

109 
	#ERFKILL
 132

	)

	@/usr/include/asm-generic/errno-base.h

1 #iâdeà
_ASM_GENERIC_ERRNO_BASE_H


2 
	#_ASM_GENERIC_ERRNO_BASE_H


	)

4 
	#EPERM
 1

	)

5 
	#ENOENT
 2

	)

6 
	#ESRCH
 3

	)

7 
	#EINTR
 4

	)

8 
	#EIO
 5

	)

9 
	#ENXIO
 6

	)

10 
	#E2BIG
 7

	)

11 
	#ENOEXEC
 8

	)

12 
	#EBADF
 9

	)

13 
	#ECHILD
 10

	)

14 
	#EAGAIN
 11

	)

15 
	#ENOMEM
 12

	)

16 
	#EACCES
 13

	)

17 
	#EFAULT
 14

	)

18 
	#ENOTBLK
 15

	)

19 
	#EBUSY
 16

	)

20 
	#EEXIST
 17

	)

21 
	#EXDEV
 18

	)

22 
	#ENODEV
 19

	)

23 
	#ENOTDIR
 20

	)

24 
	#EISDIR
 21

	)

25 
	#EINVAL
 22

	)

26 
	#ENFILE
 23

	)

27 
	#EMFILE
 24

	)

28 
	#ENOTTY
 25

	)

29 
	#ETXTBSY
 26

	)

30 
	#EFBIG
 27

	)

31 
	#ENOSPC
 28

	)

32 
	#ESPIPE
 29

	)

33 
	#EROFS
 30

	)

34 
	#EMLINK
 31

	)

35 
	#EPIPE
 32

	)

36 
	#EDOM
 33

	)

37 
	#ERANGE
 34

	)

	@
1
.
1
/usr/include
146
3286
Cache.cpp
Cache.h
CachePolicy.h
CachedCSSStyleSheet.cpp
CachedCSSStyleSheet.h
CachedFont.cpp
CachedFont.h
CachedImage.cpp
CachedImage.h
CachedResource.cpp
CachedResource.h
CachedResourceClient.h
CachedResourceClientWalker.cpp
CachedResourceClientWalker.h
CachedResourceHandle.cpp
CachedResourceHandle.h
CachedScript.cpp
CachedScript.h
CachedXBLDocument.cpp
CachedXBLDocument.h
CachedXSLStyleSheet.cpp
CachedXSLStyleSheet.h
CrossOriginAccessControl.cpp
CrossOriginAccessControl.h
CrossOriginPreflightResultCache.cpp
CrossOriginPreflightResultCache.h
DocLoader.cpp
DocLoader.h
DocumentLoader.cpp
DocumentLoader.h
DocumentThreadableLoader.cpp
DocumentThreadableLoader.h
EmptyClients.h
FTPDirectoryDocument.cpp
FTPDirectoryDocument.h
FTPDirectoryParser.cpp
FTPDirectoryParser.h
FormState.cpp
FormState.h
FrameLoader.cpp
FrameLoader.h
FrameLoaderClient.h
FrameLoaderTypes.h
HistoryController.cpp
HistoryController.h
ImageDocument.cpp
ImageDocument.h
ImageLoader.cpp
ImageLoader.h
MainResourceLoader.cpp
MainResourceLoader.h
MediaDocument.cpp
MediaDocument.h
NavigationAction.cpp
NavigationAction.h
NetscapePlugInStreamLoader.cpp
NetscapePlugInStreamLoader.h
PlaceholderDocument.cpp
PlaceholderDocument.h
PluginDocument.cpp
PluginDocument.h
PolicyCallback.cpp
PolicyCallback.h
PolicyChecker.cpp
PolicyChecker.h
ProgressTracker.cpp
ProgressTracker.h
RedirectScheduler.cpp
RedirectScheduler.h
Request.cpp
Request.h
ResourceLoadNotifier.cpp
ResourceLoadNotifier.h
ResourceLoader.cpp
ResourceLoader.h
SubresourceLoader.cpp
SubresourceLoader.h
SubresourceLoaderClient.h
SubstituteData.h
SubstituteResource.h
TextDocument.cpp
TextDocument.h
TextResourceDecoder.cpp
TextResourceDecoder.h
ThreadableLoader.cpp
ThreadableLoader.h
ThreadableLoaderClient.h
ThreadableLoaderClientWrapper.h
WorkerThreadableLoader.cpp
WorkerThreadableLoader.h
loader.cpp
loader.h
/usr/include/pthread.h
/usr/include/stdio.h
/usr/include/time.h
/usr/include/bits/pthreadtypes.h
/usr/include/bits/setjmp.h
/usr/include/bits/stdio-ldbl.h
/usr/include/bits/stdio.h
/usr/include/bits/stdio2.h
/usr/include/bits/stdio_lim.h
/usr/include/bits/sys_errlist.h
/usr/include/bits/time.h
/usr/include/bits/types.h
/usr/include/bits/wordsize.h
/usr/include/endian.h
/usr/include/features.h
/usr/include/getopt.h
/usr/include/libio.h
/usr/include/sched.h
/usr/include/signal.h
/usr/include/xlocale.h
/usr/include/_G_config.h
/usr/include/bits/byteswap.h
/usr/include/bits/endian.h
/usr/include/bits/libio-ldbl.h
/usr/include/bits/predefs.h
/usr/include/bits/sched.h
/usr/include/bits/sigaction.h
/usr/include/bits/sigcontext.h
/usr/include/bits/siginfo.h
/usr/include/bits/signum.h
/usr/include/bits/sigset.h
/usr/include/bits/sigstack.h
/usr/include/bits/sigthread.h
/usr/include/bits/stdio-lock.h
/usr/include/bits/typesizes.h
/usr/include/ctype.h
/usr/include/gnu/stubs.h
/usr/include/sys/cdefs.h
/usr/include/sys/ucontext.h
/usr/include/bits/libc-lock.h
/usr/include/gconv.h
/usr/include/gnu/stubs-32.h
/usr/include/wchar.h
/usr/include/bits/wchar-ldbl.h
/usr/include/bits/wchar.h
/usr/include/bits/wchar2.h
/usr/include/errno.h
/usr/include/gnu/option-groups.h
/usr/include/wctype.h
/usr/include/bits/errno.h
/usr/include/linux/errno.h
/usr/include/asm/errno.h
/usr/include/asm-generic/errno.h
/usr/include/asm-generic/errno-base.h
